{"version":3,"sources":["Components/pushups/img/minusLight.png","Components/pushups/img/plusLight.png","images/google/Gicon.png","images/facebook/logoSmall.png","Components/sounds/files/getReady/taffFemale.mp3","Components/sounds/files/breakMusic/Derek_Clegg_-_09_-_Youre_The_Dummy.mp3","Components/sounds/files/trainingFinishedCelebration/Trumpets8s.mp3","Components/pushups/img/minus.png","Components/pushups/img/plus.png","Components/playground/SortableGallery.js","Components/playground/Playground.js","Components/APIs/Dogs.js","Components/APIs/DogsFrame.js","Components/APIs/CatsFrame.js","Components/APIs/APITemplate.js","globalState/globalVariables.js","Components/APIPage.js","functions/translate.js","Components/translate/TRpage.js","Components/pushups/state/PushUpsContextState.js","functions/postJsonData.js","Components/pushups/functions/signInWithJWTCookie.js","Components/pushups/otherComponents/UserLoading.js","Components/pushups/UserStatus.js","Components/pushups/TrainingPlanOverview.js","Components/pushups/functions/basics.js","functions/getJsonData.js","Components/pushups/UserStatusDisplay.js","Components/pushups/basicComponents/CounterAllIn.js","Components/pushups/functions/styling/positionElementToTheTop.js","Components/pushups/menu/MaxRepsButtonInterface.js","Components/pushups/Home.js","functions/objectSize.js","Components/pushups/PersonalPushupPlans.js","Components/pushups/pushupPlans/view/ViewSet.js","Components/pushups/pushupPlans/view/ViewTraining.js","Components/pushups/pushupPlans/view/ViewSchedule.js","Components/pushups/basicComponents/richTextEditing/TextEditorReactQuill.js","Components/pushups/pushupPlans/ViewPushupPlan.js","Components/pushups/pushupPlans/publicPlans/PublicPlanToList.js","Components/pushups/pushupPlans/publicPlans/PublicPlans.js","Components/pushups/PushUpPlans.js","Components/pushups/assessment/InitialAssessment.js","Components/pushups/Training/UsabilityIssues.js","Components/pushups/Training/PrepareTraining.js","Components/pushups/assessment/AssessmentForm.js","Components/pushups/assessment/MaxRepsTest.js","Components/pushups/history/LastTraining.js","Components/pushups/history/UsabilityInfo.js","Components/pushups/history/CurrentPlan.js","Components/pushups/history/AssessmentsHistory.js","Components/pushups/History.js","Components/pushups/SignUp.js","Components/pushups/LogIn.js","Components/pushups/SignUpInOut.js","Components/pushups/personalPushupPlans/ContextDefaults.js","Components/pushups/personalPushupPlans/Set.js","Components/pushups/personalPushupPlans/cratingObjectsfunctions.js","Components/pushups/personalPushupPlans/Training.js","Components/pushups/personalPushupPlans/Trainings.js","Components/pushups/personalPushupPlans/schedule/Schedule.js","Components/pushups/personalPushupPlans/repsAsPercentages/MaxRepsUsedForRepsPercentages.js","Components/pushups/personalPushupPlans/PercentagesRegimeActivator.js","Components/pushups/personalPushupPlans/ShowPersonalPlanToUserToAdjust.js","Components/pushups/personalPushupPlans/AdjustPersonalPushupPlan.js","Components/pushups/personalPushupPlans/CreatingPersonalPushupPlan.js","Components/pushups/Training/CurrentTrainingInfo.js","Components/pushups/Training/ShowSetToDo.js","Components/pushups/basicComponents/CounterToolOld.js","Components/pushups/Training/BreakTimer.js","Components/pushups/Training/BreakSounds.js","Components/pushups/Training/StartBreakLogData.js","Components/pushups/Training/TrainingFinished.js","Components/pushups/Training/TrainingSwitcher.js","Components/pushups/Training/TrainingStopWatch.js","Components/pushups/Training/SetsToDoAllIn.js","Components/pushups/Training/SoundAndMusicControls.js","Components/pushups/Training/TrainingHeaders.js","Components/pushups/Training/DayOfFinalAssessment.js","Components/pushups/Training/RunTraining.js","Components/pushups/assessment/PaceMaker.js","Components/pushups/SideBarContent.js","Components/pushups/personalPushupPlans/FinishPersonalPushupPlan.js","Components/pushups/personalPushupPlans/PublishPushupPlan.js","Components/pushups/Intro.js","Components/pushups/Community.js","Components/pushups/UserProfile.js","subscription.js","Components/pushups/userSettings/TrainingTodayNotification.js","Components/pushups/userSettings/Logout.js","Components/pushups/UserSettings.js","Components/pushups/UserSettingsCheck.js","Components/pushups/Pushups.js","Components/states/CwUseState.js","Components/states/States.js","Components/APIs/WakeUpServerCleaned.js","Components/sounds/Sounds.js","Components/sounds/SoundsReact.js","App.js","serviceWorker.js","index.js","Components/sounds/files/facebook/Complete and Success/Complete 2.m4a","Components/sounds/files/startBlow/airHorn.mp3"],"names":["module","exports","SGalleryWrapper","styled","div","Simg","img","Image","props","src","imageUrl","alt","SortableSingleImageContainer","SortableElement","SortableImagesContainer","SortableContainer","imagesUrls","map","index","key","SortableGallery","useState","numberOfPictures","picturesArray","i","push","returnPicturesArray","pictures","setPictures","onSortEnd","oldIndex","newIndex","console","log","newArray","arrayMove","axis","SPlaygroundWrapper","Playground","DogsAPI","error","setError","isLoaded","setIsLoaded","data","setdata","useEffect","fetch","then","res","json","result","message","DogsFrame","Dogs","Note","p","APITemplate","state","this","url","setState","title","style","backgroundColor","margin","Object","entries","arr","color","JSON","stringify","React","Component","urlRoot","frontEndPushupsUrlRoot","loginWithGoogleUrl","loginWithFacebookUrl","SFrame","APIPage","translate","from","to","textToTranslate","postJsonData","a","options","method","headers","body","response","SHighlight","TRpage","inputChangeHandler","e","target","value","submitted","handleSubmit","preventDefault","translationObject","TextTranslated","translated","handleSubmit2","checkCzechHighlight","alertUserForSec","text","durationInSec","alertForSec","document","createElement","innerHTML","id","animationDuration","querySelector","append","Promise","resolve","setTimeout","remove","getSelectionText","window","getSelection","toString","selection","type","createRange","alert","onSubmit","placeholder","onChange","className","onTouchEnd","onClick","onTouchEndCapture","onTouchCancel","onTouchCancelCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","pushUpsState","user","info","reRender","updateUser","newUser","PushUpsContext","createContext","postJsonDataUrlAfterAPIpushups","urlEnd","credentials","dataToReturn","postJsonDataUrlAfterAPIgeneralPushups","postJsonDataUrlAfterAPI","checkIfNewGuestOrCookiesDisabled","cookieCreated","cookieName","data2","cookiesEnabled","location","replace","signInWithJWTCookie","stage1","cookieFound","userToUse","email","UserLoading","display","alignItems","justifyContent","flexFlow","height","withRouter","history","userStatusInfo","setUserStatusInfo","userContext","useContext","PushUpsContextState","userA","updateUserContextFromCookie","pathname","getSimpleDateIfTrueAlsoTime","dateReceived","withTime","withYear","d","Date","date","getDate","month","getMonth","year","getFullYear","dateStr","dateWithTimeStr","getHours","getMinutes","returnAssessmentFromAssID","assID","assessments","find","ass","_id","returnTrueIfDatesHaveTheSameDay","d1a","d2a","d1","d2","return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate","pushupPlans","current","trainingHistory","length","dateToday","dateOfLastTraining","getJsonData","padding","textAlign","paddingRight","name","SWrapper","SCounter","imgMinus","imgPlus","howMuch","SCounterSmall","returnValueInMinMaxRange","newValue","min","max","CounterAllIn","settings","p1counterSmall","p1counterBig","onChangeFunctionReceivingNewValueAsParameter","initialValue","sideText","smallTextUnderTheNumber","minValue","MaxValue","localValue","setLocalValue","initialValueWasSetUp","setInitialValueWasSetUp","htmlInputEl","useRef","textbox","inputFilter","test","forEach","event","addEventListener","oldValue","oldSelectionStart","selectionStart","oldSelectionEnd","selectionEnd","hasOwnProperty","setSelectionRange","updateLocalValueFromButton","visibility","substring","ref","element","range","createTextRange","moveToElementText","select","selectNode","removeAllRanges","addRange","focus","selectTextAndFocusElement","marginLeft","marginTop","fontSize","positionElementToTheTop","delayInMs","navbarHeight","getElementById","getBoundingClientRect","ElementTop","top","scrollBy","left","behavior","MaxRepsButtonInterface","pushupsContext","estimatedValue","setEstimatedValue","Accordion","background","border","defaultActiveKey","Card","Toggle","as","Header","eventKey","maxWidth","borderRadius","Collapse","overflowY","paddingTope","boxShadow","SLink","Link","returnNumberOfDaysMissingCurrentSchedulleOrUndefined","undefined","currentPlan","dayToDoFrom0","scheduleDayToDoFrom0","initialAssessmentID","todayA","otherDayA","otherDayIsThisNumberOfDaysAhead","today","otherDay","smallerThenBigger","getTime","returnDaysDifference","schedule","dueDate","dueDateIsAheadThisMuch","setInfo","testingCORS","textInfoFirstLineLocalVariable","completed","scheduleDayUpdated","updatedUser","doItAsAsync","finalAssessmentDueIn","continueTraining","textLine1","textLine2","textLine3","days","marginBottom","exact","path","component","UserStatusDisplay","reps","position","overflow","urlPartType","personal","planId","planIDType","width","cursor","roughSizeOfObject","object","objectList","stack","bytes","pop","indexOf","SPersonalPushupPlans","MyExistingPlans","SPlanLink","SButtonWrapper","personalPlanAction","positionFrom0","action","personalPlanPositionFrom0","plan","confirm","objForServer","planPositionFrom0","objectSize","personalFinishedPlanAction","personalFinished","personalFinishedPlanPositionFrom0","indexFrom0","ViewSet","setText","set","number","lastSetNumberFrom1","planViewContextData","planViewContext","percentages","showNotes","maxReps","source","repsAsNumber","Math","round","repsAsPercentage","maxInfo","paddingLeft","breakAfterInSeconds","gridTemplateColumns","repsNotes","breakNotes","ViewTraining","training","sets","ViewSchedule","day","trainingNumber","QuillReactEditor","submitButtonText","hideToolbar","customStyles","setValue","modules","toolbar","b","c","readOnly","theme","formats","params","match","view","scrollTo","setShowNotes","planLinks","ID","publicPlans","updatePublicPlans","personalPlans","repsAsPercentages","trainings","publicPlanButtonClickAction","publicPlanID","updatedUserOrPlans","planToAdjustId","Provider","urlTextToCopy","el","appendChild","execCommand","removeChild","toast","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","sharePublicPlanButtonClicked","authority","power","summary","TextEditorReactQuill","description","descriptionRich","SCard","Body","v","viewSetting","targetGroup","float","fontWeight","lineHeight","initialMaxReps","rangeAsReps","resultsFinished","executions","uncompleted","resultsUnfinished","PublicPlans","pushupContext","togglePublicPlansView","head","headTop","publicPlansAccordion","handleViewPublicPlansToggle","what","checked","plans","public","listView","fromFrontEnd","maxRepsHere","setMaxRepsHere","getUserCurrentInAssMaxRepOrDefault","defaultChecked","htmlFor","PushUpPlans","viewPersonalPlans","setViewPersonalPlans","previousState","assNotDoneOrDoneLateOrOk","SETassNotDoneOrDoneLateOrOk","notes","daysInPast","dateNewerNormal","dateOlderSpecialFromMongoose","dateOlder","differenceInDays","getLastAssessmentInfo","useThisAssessmentAsInitial","currentScheduleToUpdate","timeNowInMs","updateCurrentSchedule","readAgain","setReadAgain","continueToTraining","usability","finalUsabilityForDB","updatedSchedule","updateScheduleDayToDoFrom0OrUndefined","lastTraining","updatedScheduleDayToDoFrom0","potentialUnfinishedTrainingAccounted","usabilityOriginal","rating","daysLateToday","daysOffSchedule","unfinishedTrainings","context","reschedulingInfo","setReschedulingInfo","checks","scheduleChecked","lastTrainingChecked","lastTrainingCheckedPREP","usabilityIssues","setUsabilityIssues","c0","cA","cB","scheduleDayNumberFrom0","dateOfLastTrainingAsStringOrNull","usabilityOld","counter","usabilityNewest","parse","setSubmitted","handleNewAssessmentSubmit","userInfoForServer","assessmentReps","assessmentNotes","apiUrl","SPTiny","LastTraining","viewType","repsSum","setRepsSum","timeInMinutes","setTimeInMinutes","repsSumCalc","reduce","acc","calculateRepsSum","td","dt2","dt1","diff","abs","differenceInMinutes","calcTrainingTime","tr","dataForChart","setsNr","setNumber","breakDuration","breakDurationS","getTrainingDataToChart","dataKey","angle","fill","slice","reverse","UsabilityInfo","trainingSHistory","currentPlanExecution","personalPushupPlans","planInfo","planID","typePersonalOnlyFinishedPublic","publicPushupPlans","returnAnyPlanFromPlanID","elementOfCurrentPlanHistory","scrollLeft","wanted","returnAssessmentInfoFromAssID","flexWrap","overflowX","minWidth","bottom","returnTotalReps","returnTrainingTimeInMinutes","trainingInfoForChart","date2","trainingName","trainingNrAName","trainingNotes","trainingDurationInMinutes","repsInTotal","getTrainingSDataToChart","getAssessmentsDataToChart","assInfoForChart","dayMonth","full","renderCustomizedLabel","x","y","textAnchor","dominantBaseline","renderCustomizedLabel2","CustomTooltip","active","payload","label","AssessmentsHistory","content","entry","maxHeight","History","CurrentPlan","handleNewUserSubmit","signUpEmail","password","signUpPassword","signUpUsername","serverResponse","success","handleReturnedUserSubmit","email2","password2","defaultValue","SignUpInOut","setUser","signInWithGoogleButtonClicked","clear","Gicon","marginRight","Ficon","PlanContext","updatePlan","SSet","SSection","SNote","Set","repsCalculatedFromMaxAndPercentage","trainingPosition","duration","maxRepsNeeded","repsOrDuration","implementNewValue","borderBottom","flex","note","charAt","toUpperCase","currentSet","newSet","splice","oldSets","newSets","createPersonalSETStarter","createPersonalTRAININGStarter","currentMax","STraining","Training","trainingRef","createNewSet","currentTraining","newTraining","STrainings","Trainings","SSchedule","Schedule","children","extra","posFromSchedule","scheduleDay","Number","MaxRepsUsedForRepsPercentages","updatedMaxValue","reps2","type2","getCurrentMaxReps","initAssRepsId","PercentagesRegimeActivator","autoActivated","SPlan","planToAdjust","adjustingNotCreating","publicPlan","planAdjustTrainingRef","planAdjustScheduleRef","planAdjustPublicRef","planWMethods","thisNameExistsAlready","setThisNameExistsAlready","planPackage","setName","richDescription","publicPlansNames","setPublicPlansNames","publicPlansNamesSupportVar","thisNameExistsAlreadySupportVar","nameInDb","saveRichDescriptionToDB","updatedDescription","updateRichDescriptionValue","handleFormSubmit","newPlan","customStylesHere","minHeight","updatedSummary","AdjustPersonalPushupPlan","stateP","CreatingPersonalPushupPlan","planX","setPlanX","createPersonalPushupPlan","createPersonalPLANStarter","trainingContext","TrainingContext","trainingState","setTrainingState","skipThisDay","rescheduleDates","main","setNumberFrom1","stage","continueStartedTraining","SScreen","SButton","button","SButton2","ShowSetToDo","isLastSet","CounterTool","small","big","updateByClickedValue","BreakTimer","external","timeLeft","breakExtensionInSeconds","breakStartedAt","remindingBreakTime","setRemindingBreakTime","breakTimerFinished","setBreakTimerFinished","difference","now","setBreakDuration","setInterval","clearInterval","BreakSounds","breakLength","soundsOn","useSound","soundBeep","soundBeepPlay","soundGetReady","soundGetReadyPlay","soundStart","soundStartPlay","StartBreakLogData","saveDefaultData","setWasSavedToHistory","setSetSavedToHistory","updatedReps","setUpdatedReps","updatedRepsForChangesInPlan","setUpdatedRepsForChangesInPlan","updatedRepsAsPercentageForChangesInPlan","setUpdatedRepsAsPercentageForChangesInPlan","setNotes","notesForChangesInPlan","setNotesForChangesInPlan","changePlan","setChangePlan","saveRepsToHistory","setToSave","executedRepsAsPercentageOfInitialAssessment","initialAssessmentRepsNumber","break","startedAt","add1ToSetsDone","setsDone","trainingNumber1IsFirst","trainingStartedAt","thisTrHistory","unshift","planDataToUpdate","updatedUserX","markLastTrainingAsSuccessfullyCompleted","updatedUser2","hideRepsToSave","setBreakExtensionInSeconds","soundBreakBackground","soundBreakBackgroundPlay","BackgroundMusicSettings","backgroundMusicFaded","setBackgroundMusicFaded","backgroundMusicFaded2","setBackgroundMusicFaded2","backgroundMusicStarted","setBackgroundMusicStarted","backgroundMusicPlaying","setBackgroundMusicPlaying","music","sound","fade","moveToTheNextStage","finishedAt","newPercentageValue","initialAssesmentReps","calculatedReps","newRepValue","calculatedPercentages","TrainingFinished","soundOn","soundTrainingFinished","soundTrainingFinishedPlay","TrainingSwitcher","TrainingStopWatch","seconds","minutes","trainingTime","setTrainingTime","SetsToDoAllIn","SoundAndMusicControls","updateUserTrainingSettings","how","TrainingHeaders","initAss","buttonClickedUseLastAssessmentAsFinal","finalAssessment","assDate","isDayOfLastAssessmentToday","trainingContextVariable","setTrainingContextVariable","todayIsDayOff","setTodayIsDayOff","userLoading","setUserLoading","publicPlanIfNeeded","trainingContextToUse","userHere","includes","trainingNumberPosition0IsFirstNumber","numberOfThisTrainingTemplate","numberOfSetsAlreadyDone","setupTrainingContext","setMyDots","setDots","howMany","dots","PaceMaker","setCounter","cycleMs","setCycleMS","numberOfReps","setNumberOfReps","showResult","setShowResult","paceMakerStarted","setPaceMakerStarted","intervalMs","interval","speechSynthesis","speak","SpeechSynthesisUtterance","styles","buildStyles","pathTransition","pathColor","textColor","trailColor","SideBarContent","setSideBarOpen","markPlanAsFinished","rangeAsPercentage","setInitialMaxReps","userReps","buttonActionPublishPlan","planSummary","planDescription","planDescriptionRich","thisPlanName","r","Intro","textCopied","setTextCopied","appUrlToCopy","href","Community","allUsers","names","UserProfile","convertedVapidKey","base64String","repeat","base64","rawData","atob","outputArray","Uint8Array","charCodeAt","urlBase64ToUint8Array","sendSubscription","subscription","newOrExisting","deviceName","notificationSubscription","ansFromServerS","subscribeUser","resultMiroVariable","navigator","serviceWorker","ready","registration","pushManager","getSubscription","existedSubscription","subscribe","applicationServerKey","userVisibleOnly","newSubscription","Notification","permission","TrainingTodayNotification","todayNotificationsHandler","todayNotifications","setTodayNotifications","thisNotification","handleTrainingTodayNotificationChangeClick","on","setTime","hoursOrMinutes","time","hours","logOut","guest","Button","UserSettings","notificationSupportedInfo","setNotificationSupportedInfo","checkPWAWebPushNotifications","requestPermission","xx","supportVarNotificationTime","supportVarNotificationOn","trainingTodayNotificationsSupportVar","notifications","specific","TrainingTodayNotifications","updateTodayNotificationsButtonAction","toUTCString","z","x1","getTimezoneOffset","supportVarLocalTime","localTimeExtraHours","useThisDeviceForNotificationsButtonClicked","sw","icon","vibrate","tag","image","badge","actions","showNotification","sendNotification","not","UserSettingsCheck","PushupsMainWithRouter","updateAllUsers","pwaInstalled","pwaReadyToInstall","setPwaReadyToInstall","setPwaDisplayMode","displayMode","standalone","matchMedia","matches","publicPlansHereLocally","allUsersHereLocally","doAsAsync","sideBarOpen","paddingBottom","zIndex","sidebar","open","onSetOpen","transition","WebkitTransition","root","right","overlay","prompt","userChoice","choiceResult","outcome","UserStatus","PushupsHome","FinishPersonalPushupPlan","PublishPushupPlan","ViewPushupPlan","MaxRepsTest","PrepareTraining2","RunTraining","PushupsContextsComponent","updatedPlans","updatedUsers","CwUseState","stateH","setStateH","States","WakeUpserverState","changeServerStateSubClassTo","subClassName","querySelectorAll","El","setAttribute","Sounds","AudioContext","arrayBuffer","catch","err","decodeAudioData","audioBuffer","soundSource","createBufferSource","buffer","connect","destination","start","SoundsReact","soundX","playSound","SMenu","hash","basename","process","Pushups","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","URL","origin","contentType","get","status","unregister","reload","checkValidServiceWorker"],"mappings":"qHAAAA,EAAOC,QAAU,0iK,oBCAjBD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,mC,kBCA3CD,EAAOC,QAAU,80F,oBCAjBD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,gE,oBCA3CD,EAAOC,QAAU,IAA0B,wC,yHCA3CD,EAAOC,QAAU,k6G,mBCAjBD,EAAOC,QAAU,IAA0B,kC,siBCM3C,IAAMC,EAAkBC,IAAOC,IAAV,KAQfC,EAAOF,IAAOG,IAAV,KASJC,EAAQ,SAAAC,GAAK,OAEf,kBAACH,EAAD,CAAMI,IAAKD,EAAME,SAAUC,IAAI,MAG7BC,EAA+BC,aAAgB,SAAAL,GAAK,OAAI,kBAAC,EAAD,CAAOE,SAAUF,EAAME,cAG/EI,EAA0BC,aAAkB,SAAAP,GAAK,OACrD,6BACGA,EAAMQ,WAAWC,KAAI,SAACP,EAAUQ,GAAX,OACpB,kBAACN,EAAD,CAA8BO,IAAKT,EAAUQ,MAAOA,EAAOR,SAAUA,WA+B5DU,EA3BS,WACtB,IAD4B,EAQIC,mBAPJ,SAACC,GAE3B,IADA,IAAMC,EAAgB,GACbC,EAAI,EAAGA,GAAKF,EAAkBE,IACrCD,EAAcE,KAAd,+BAA2CD,IAE7C,OAAOD,EAEgCG,CAAoB,KARjC,mBAQrBC,EARqB,KAQXC,EARW,KAkB5B,OACE,kBAAC1B,EAAD,KACE,gDAEA,kBAACY,EAAD,CAAyBE,WAAYW,EAAUE,UAXhC,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SAC9BC,QAAQC,IAAI,qBACZ,IAAIC,EAAWC,YAAUR,EAAUG,EAAUC,GAC7CH,EAAYM,IAQ4DE,KAAK,S,4FCxDjF,IAAMC,EAAqBlC,IAAOC,IAAV,KAcTkC,MAXf,WACE,OACE,kBAACD,EAAD,KACE,mDAEA,kBAAC,EAAD,QCiCSE,MA3Cf,WAAoB,IAAD,EAESlB,mBAAS,MAFlB,mBAEVmB,EAFU,KAEHC,EAFG,OAGepB,oBAAS,GAHxB,mBAGVqB,EAHU,KAGAC,EAHA,OAIOtB,mBAAS,IAJhB,mBAIVuB,EAJU,KAIJC,EAJI,KAqBjB,OAfAC,qBAAU,WACRC,MAAM,2CACHC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MACC,SAACG,GACCR,GAAY,GACZE,EAAQM,EAAOC,YAEjB,SAACZ,GACCG,GAAY,GACZF,EAASD,QAGd,IAECA,EACK,uCAAaA,EAAMY,SAChBV,EAIR,oCACE,6BAAME,IAJH,4CCdIS,EATG,WAChB,OACE,6BACE,oDACA,kBAACC,EAAD,Q,8JCHC,IAAMC,EAAOpD,IAAOqD,EAAV,KC2EFC,E,kDA1Eb,WAAYjD,GAAQ,IAAD,8BACjB,cAAMA,IAEDkD,MAAQ,CACXlB,MAAO,KACPE,UAAU,EACVE,KAAM,IANS,E,gEAYE,IAAD,OAElBG,MAAMY,KAAKnD,MAAMoD,KACdZ,MAAK,SAAAC,GAGJ,OAAOA,EAAIC,UAEZF,MACC,SAACG,GAGC,EAAKU,SAAS,CACZnB,UAAU,EACVE,KAAMO,OAMV,SAACX,GAEC,EAAKqB,SAAS,CACZnB,UAAU,EACVF,UAEEA,GAAOR,QAAQC,IAAI,yBAA0BO,Q,6BAMlDhC,GAAQ,IACLoC,EAASe,KAAKD,MAAdd,KAQJzB,EAAM,EACV,OACE,6BACE,4BAAKwC,KAAKnD,MAAMsD,OAChB,kBAACP,EAAD,4BAA2BI,KAAKnD,MAAMoD,IAAtC,KAMA,yBAAKG,MAAO,CAAEC,gBAAiB,MAAOC,OAAQ,SAC5C,gDACiB,iBAARrB,EAAoBsB,OAAOC,QAAQvB,GAAM3B,KAAI,SAAAmD,GAAgB,OAAPjD,IAAc,yBAAKA,IAAKA,GAAV,IAAgB,0BAAM4C,MAAO,CAAEM,MAAO,SAAtB,IAAkCD,EAAI,GAAtC,KAAhB,MAAqEE,KAAKC,UAAUH,EAAI,QAAiB,2BAAIxB,S,GAlE1K4B,IAAMC,WCF5BC,EAAU,GAEVC,EAAyB,GACzBC,EAAqB,GACrBC,EAAuB,G,iKAiBzBH,EAAU,gDAEVC,EAAsB,oCAzBN,uBAyBM,cACtBC,EAAqB,oEACrBC,EAAuB,sECnBzB7C,QAAQC,IAAIyC,GAOZ,IAAMI,EAAS3E,IAAOC,IAAV,KA8BG2E,MApBf,WAGE,OACE,oCACE,iDACA,kBAACD,EAAD,KAEE,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAalB,IAAKc,EAAQ,QAASZ,MAAM,0CACzC,kBAAC,EAAD,CAAaF,IAAKc,EAAQ,aAAcZ,MAAM,uC,uBCFvCkB,EA/BF,uCAAG,WAAOC,EAAMC,EAAIC,GAAjB,IAECC,EAFD,WAAAC,EAAA,iGAAAA,EAAA,MAEd,WAA4BzB,EAAKhB,GAAjC,iBAAAyC,EAAA,6DACQC,EAAU,CACdC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMnB,KAAKC,UAAU3B,IANzB,SAQyBG,MAAMa,EAAK0B,GARpC,cAQQI,EARR,OASE1D,QAAQC,IAAI,4BAA6ByD,GAT3C,SAUeA,EAASxC,OAVxB,oFAFc,uBAECkC,EAFD,uDAkBZA,EAAa,GAAD,OAAIV,EAAJ,cACZ,CACEO,OACAC,KACAF,UAAWG,IAEZnC,MAAK,SAACJ,GAGL,OAFAZ,QAAQC,IAAI,qBAAqBW,GAE1BA,KA3BG,mFAAH,0D,2OCGb,IAAM+C,EAAaxF,IAAOqD,EAAV,KAUKoC,E,kDACnB,aAAe,IAAD,8BACZ,gBAQFC,mBATc,uCASO,WAAOC,GAAP,SAAAT,EAAA,sDACnB,EAAKxB,SAAS,CAAEsB,gBAAiBW,EAAEC,OAAOC,QAC1C,EAAKnC,SAAS,CAAEoC,WAAW,IAFR,2CATP,wDAcdC,aAdc,uCAcC,WAAMJ,GAAN,eAAAT,EAAA,6DACbS,EAAEK,iBACF,EAAKtC,SAAS,CAAEoC,WAAW,IAFd,SAKiBjB,EAAU,KAAM,KAAM,EAAKtB,MAAMyB,iBALlD,OAKTiB,EALS,OAMb,EAAKvC,SAAS,CAAEwC,eAAgBD,EAAkBE,aANrC,2CAdD,wDA0BdC,cA1Bc,uCA0BE,WAAMT,GAAN,eAAAT,EAAA,6DACdS,EAAEK,iBACF,EAAKtC,SAAS,CAAEoC,WAAW,IAFb,SAGgBjB,EAAU,KAAM,KAAM,EAAKtB,MAAMyB,iBAHjD,OAGViB,EAHU,OAId,EAAKvC,SAAS,CAAEwC,eAAgBD,EAAkBE,aAJpC,2CA1BF,wDAkCdE,oBAAsB,SAAAV,GAGpB,IAAIW,EAAe,uCAAG,WAAOC,EAAMC,GAAb,eAAAtB,EAAA,6DAChBuB,EAAcC,SAASC,cAAc,MAE7BC,UAAYL,EACxBE,EAAYI,GAAK,cAEjBJ,EAAY7C,MAAMkD,kBAAoBN,EAAgB,IAC3CE,SAASK,cAAc,mBAC7BC,OAAOP,GARQ,SASd,IAAIQ,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAAyB,IAAhBV,MAT7B,OAWpBE,SAASK,cAAc,gBAAgBK,SAXnB,2CAAH,wDAgBnB,SAASC,EAAiB1B,GAExB,IAAIY,EAAO,GAaX,OAZIe,OAAOC,cACT1F,QAAQC,IAAI,iBACZyE,EAAOe,OAAOC,eAAeC,YACpBd,SAASe,WAAyC,YAA5Bf,SAASe,UAAUC,MAClD7F,QAAQC,IAAI,oBAEZyE,EAAOG,SAASe,UAAUE,cAAcpB,OAExC1E,QAAQC,IAAI,WAEZ8F,MAAM,OAEDrB,EAET1E,QAAQC,IAAIuF,KACZf,EAAgBe,IAAqB,IArErC,EAAK9D,MAAQ,CACXyB,gBAAiB,GACjBc,WAAW,EACXI,eAAgB,MALN,E,qDA2EZ,OACE,6BACE,8CACA,yBAAKW,GAAG,kBAEN,0BAAMA,GAAG,mBAAmBgB,SAAUrE,KAAKuC,cACzC,sDAGA,2BAAO2B,KAAK,OAAOI,YAAY,kBAAkBC,SAAUvE,KAAKkC,qBAEhE,4BAAQgC,KAAK,UAAb,WAEF,0BAAMb,GAAG,mBAAmBgB,SAAUrE,KAAK4C,eACzC,sDAEA,2BAAOsB,KAAK,OAAOI,YAAY,kBAAkBC,SAAUvE,KAAKkC,qBAEhE,4BAAQgC,KAAK,UAAb,WAImC,iBAA7BlE,KAAKD,MAAM2C,gBAA8B,kBAACV,EAAD,KAAahC,KAAKD,MAAM2C,iBAE3E,6BAEE,uBAAG8B,UAAU,kBAAkBC,WAAYzE,KAAK6C,qBAAhD,gqBAGA,4BAAQ6B,QAAS1E,KAAK6C,qBAAtB,gBACA,uBAAG8B,kBAAmB3E,KAAK6C,qBAA3B,iDACA,uBAAG+B,cAAe5E,KAAK6C,qBAAvB,6CACA,uBAAGgC,qBAAsB7E,KAAK6C,qBAA9B,qDACA,uBAAGiC,YAAa9E,KAAK6C,qBAArB,2CACA,uBAAGkC,mBAAoB/E,KAAK6C,qBAA5B,kDACA,uBAAGmC,aAAchF,KAAK6C,qBAAtB,4CACA,uBAAGoC,oBAAqBjF,KAAK6C,qBAA7B,yD,GAhH0B/B,a,gCCdzBoE,EAAe,CACxBC,KAAM,KACNC,KAAM,kBACNC,SAAS,EACTC,WAJwB,SAIbC,GACTvF,KAAKmF,KAAOI,EACZlH,QAAQC,IAAI,sBAAuB0B,MACnCA,KAAKqF,UAAY,IAKNG,EADQC,wBAAcP,GCV9B,SAAeQ,EAAtB,oC,4CAAO,WAA8CC,EAAQ1G,GAAtD,qBAAAyC,EAAA,6DACDzB,EAAMc,EAAU,WAAa4E,EAD5B,SAKGhE,EAAU,CACdC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMnB,KAAKC,UAAU3B,GACrB2G,YAAa,WATZ,SAYoBxG,MAAMa,EAAK0B,GAZ/B,cAYGI,EAZH,gBAckBA,EAASxC,OAd3B,cAcHsG,EAdG,yBAiBIA,GAjBJ,yCAoBHxH,QAAQC,IAAI,iFAAZ,MACAuH,EAAY,KArBT,kBAsBIA,GAtBJ,2D,sBA2BA,SAAeC,GAAtB,qC,8CAAO,WAAqDH,EAAQ1G,GAA7D,qBAAAyC,EAAA,6DACDzB,EAAMc,EAAU,kBAAoB4E,EADnC,SAKGhE,EAAU,CACdC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMnB,KAAKC,UAAU3B,GACrB2G,YAAa,WATZ,SAYoBxG,MAAMa,EAAK0B,GAZ/B,cAYGI,EAZH,gBAckBA,EAASxC,OAd3B,cAcHsG,EAdG,yBAiBIA,GAjBJ,yCAoBHxH,QAAQC,IAAI,wFAAZ,MACAuH,EAAY,KArBT,kBAsBIA,GAtBJ,2D,sBA2BA,SAAeE,GAAtB,qC,8CAAO,WAAuCJ,EAAQ1G,GAA/C,qBAAAyC,EAAA,6DACDzB,EAAMc,EAAU4E,EAEpBtH,QAAQC,IAAI,wEAAwE2B,EAAKhB,GAHpF,UAKG0C,EAAU,CACdC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMnB,KAAKC,UAAU3B,GACrB2G,YAAa,YAEPA,YAAc,UAXnB,SAYoBxG,MAAMa,EAAK0B,GAZ/B,cAYGI,EAZH,OAaH1D,QAAQC,IAAI,+BAAgCyD,GAbzC,UAckBA,EAASxC,OAd3B,eAcHsG,EAdG,OAeHxH,QAAQC,IAAI,4CAA6CuH,GACzDxH,QAAQC,IAAI,gCAAiCuH,GAhB1C,kBAiBIA,GAjBJ,yCAoBHxH,QAAQC,IAAI,sFAAZ,MACAuH,EAAY,KArBT,kBAsBIA,GAtBJ,2D,oEA2BP,WAA4B5F,EAAKhB,GAAjC,mBAAAyC,EAAA,6DAEErD,QAAQC,IAAI,+EAA+E2B,EAAKhB,GAFlG,SAKU0C,EAAU,CACdC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMnB,KAAKC,UAAU3B,GACrB2G,YAAa,WATnB,SAY2BxG,MAAMa,EAAK0B,GAZtC,cAYUI,EAZV,OAcI1D,QAAQC,IAAI,iCAAkCyD,GAdlD,SAeyBA,EAASxC,OAflC,OAeIsG,EAfJ,OAiBIxH,QAAQC,IAAI,2CAA4CuH,GAjB5D,kDAoBIxH,QAAQC,IAAI,wEAAZ,MACAuH,EAAY,KArBhB,iCAuBSA,GAvBT,2D,sBA0BepE,O,+CCzGTuE,GAAgC,uCAAG,WAAOC,GAAP,eAAAvE,EAAA,yDAEvCrD,QAAQC,IAAI,8EAER2H,EAJmC,wBAMrC5H,QAAQC,IAAI,gCACZD,QAAQC,IAAI,wEAAyE2H,GAPhD,SAQnBF,GAAwB,8BAA+B,CAAEG,WAAYD,IARlD,OAQjCE,EARiC,OASrC9H,QAAQC,IAAI,yCAA0C6H,GAC1B,GAAxBA,EAAMC,gBACRhC,MAAM,4LACNN,OAAOuC,SAASC,QAAhB,UAA2BtF,KAG3B3C,QAAQC,IAAI,4DAfuB,wBAmBrCD,QAAQC,IAAI,yFAnByB,4CAAH,sDA8DvBiI,GAtCU,uCAAG,8BAAA7E,EAAA,+EAGLtC,MAAM,GAAD,OAAI2B,EAAJ,wBAAmC,CAAE6E,YAAa,YAHlD,cAGpBY,EAHoB,gBAOPA,EAAOjH,OAPA,YAOpBN,EAPoB,QAgBfkG,KAhBe,0CAgBFlG,EAAKkG,MAhBH,WAkBjBlG,EAAKwH,cACRpI,QAAQC,IAAI,oBAEZ0H,GAAiC/G,EAAKgH,iBAEpChH,EAAKyH,UAvBa,0CAwBbzH,EAAKyH,WAxBQ,QAyBfrI,QAAQC,IAAI,gEAAiEW,GAzB9D,iEAgCxBZ,QAAQC,IAAI,qEAAZ,MAhCwB,kBAkCjB,CAAEqI,MAAO,QAAS1H,KAAK,EAAD,KAlCL,0DAAH,qDCVV2H,GAhBK,WAClB,OACE,yBAAKvD,GAAG,wBACN,yBAAKjD,MAAO,CACVyG,QAAS,OAAQC,WAAY,SAAUC,eAAgB,SACvDC,SAAS,SACTC,OAAO,OACPvG,MAAO,QAEP,sCACA,yCC+GOwG,gBA5GI,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACUtG,IAAMnD,SAAS,gBADzB,mBAC3B0J,EAD2B,KACXC,EADW,KAE9BC,EAAcC,qBAAWC,GAMzBF,EAAYnC,MACPmC,EAAYnC,KAGrBhG,qBAAU,WAERkI,EAAkB,WACe,uCAAG,4BAAA3F,EAAA,sEAChB6E,KADgB,OAC9BkB,EAD8B,OAQlCH,EAAYhC,WAAWmC,GACvBJ,EAAkB,UATgB,2CAAH,oDAgBjCK,KAEE,IAgCJ,MAAuB,YAAnBN,EACK,kBAAC,GAAD,OAEyB,aAA9BD,EAAQd,SAASsB,UAA2BR,EAAQd,SAASsB,SAExD,S,uLClFmBnL,IAAOC,IAAV,MAA3B,ICHamL,GAA8B,SAACC,GAAuD,IAAzCC,EAAwC,wDAAtBC,EAAsB,wDAC5FC,EAAI,IAAIC,KAAKJ,GACbK,EAAOF,EAAEG,UACTC,EAAQJ,EAAEK,WAAa,EACvBC,EAAON,EAAEO,cACTC,EAAUN,EAAO,IAAME,EAEvBK,GADJD,GAAWT,EAAY,IAAMO,EAAQ,IACL,KAAON,EAAEU,WAAa,IAAMV,EAAEW,aAC9D,OAAOb,EAAWW,EAAkBD,GASzBI,GAA4B,SAACzD,EAAM0D,GAE9C,OADa1D,EAAK2D,YAAYC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAQJ,MAK3CK,GAAkC,SAACC,EAAKC,GACnD,IAAMC,EAAK,IAAIpB,KAAKkB,GACdG,EAAK,IAAIrB,KAAKmB,GACpB,OAAOC,EAAGd,gBAAkBe,EAAGf,eAC7Bc,EAAGhB,aAAeiB,EAAGjB,YACrBgB,EAAGlB,YAAcmB,EAAGnB,WAqCXoB,GAAiE,SAACpE,GAC7E,IAAKA,EAAKqE,YAAYC,UAChBtE,EAAKqE,YAAYC,QAAQC,mBACxBvE,EAAKqE,YAAYC,QAAQC,gBAAgBC,OAAS,GACvD,OAAO,EAGT,IAAIC,EAAY,IAAI3B,KAChB4B,EAAqB1E,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGxB,KAErE,OADsBgB,GAAgCU,EAAWC,GACxC,EAAI,GCpDhBC,IC4CA5C,gBArDI,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACUtG,IAAMnD,SAAS,gBADzB,mBAC3B0J,EAD2B,KACXC,EADW,KAE9BC,EAAcC,qBAAWC,GACzBrC,EAAO,KACPmC,EAAYnC,OACdA,EAAOmC,EAAYnC,MAGrBhG,qBAAU,WAERkI,EAAkBlC,EAAO,SAAS,aAEhC,CAACA,IAUL,MAAkC,aAA9BgC,EAAQd,SAASsB,UAAyD,MAA9BR,EAAQd,SAASsB,SAE7D,yBAAKvH,MAAO,CAAE2J,QAAS,MAAOlD,QAAS,OAAQE,eAAgB,aAC7D,uBAAG3G,MAAO,CAAE4J,UAAW,QAASC,aAAc,MAAOpD,QAAS,WAC3C,WAAlBO,GAA8B,UAET,YAAnBA,EACC,aACGjC,GAAQA,EAAKwB,MACb,0BAAMvG,MAAO,CAAEM,MAAO,UAAtB,IAAmCyE,EAAK+E,MAGtC/E,GAAsB,UAAdA,EAAK+E,KACd,0BAAM9J,MAAO,CAAEM,MAAO,QAAtB,WAEE,0BAAMN,MAAO,CAAEM,MAAO,QAAtB,aAKLyE,IAASA,EAAKwB,QACd,kBAAC,GAAD,CAAOpF,GAAG,0BAAV,wBAOG,Q,izFCpChB,IAAM4I,GAAW3N,IAAOC,IAAV,MA2CR2N,GAAW5N,IAAOC,IAAV,KAEa4N,KA8BLC,MAUT,iBAAM,SAKF,SAAAzN,GAAK,OAAIA,EAAM0N,WAClB,iBAAM,OAkBPC,GAAgBhO,YAAO4N,GAAP5N,CAAH,MA6B1B,IAAIiO,GAA2B,SAACC,EAAUC,EAAKC,GAC7C,OAAIF,EAAWC,EAAYA,EACvBD,EAAWE,EAAYA,EAEpBF,GAqHMG,GAjHM,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,cAEqHA,EAFrH,GAE9BC,EAF8B,KAEdC,EAFc,KAEAC,EAFA,KAE8CC,EAF9C,KAE4DC,EAF5D,KAEsEC,EAFtE,KAE+FC,EAF/F,KAEyGC,EAFzG,OAKDzK,IAAMnD,SAASwN,GALd,mBAK9BK,EAL8B,KAKlBC,EALkB,OAMmB3K,IAAMnD,UAAS,GANlC,mBAM9B+N,EAN8B,KAMRC,EANQ,KAOrC7K,IAAM1B,WAAU,WAEduM,GAAwB,GACxBF,EAAcN,KACb,CAACA,IAIJ,IAAMS,EAAc9K,IAAM+K,OAAO,MACjC/K,IAAM1B,WAAU,WA1ClB,IAAwB0M,EAASC,EAATD,EAkDLF,EAAYlC,QAlDEqC,EAkDO,SAAUzJ,GAG5C,MAAO,QAAQ0J,KAAK1J,IAnDxB,CAAC,SAAS2J,SAAQ,SAAUC,GAC1BJ,EAAQK,iBAAiBD,GAAO,WAC1BH,EAAY9L,KAAKqC,QACnBrC,KAAKmM,SAAWnM,KAAKqC,MACrBrC,KAAKoM,kBAAoBpM,KAAKqM,eAC9BrM,KAAKsM,gBAAkBtM,KAAKuM,cACnBvM,KAAKwM,eAAe,aAC7BxM,KAAKqC,MAAQrC,KAAKmM,SAClBnM,KAAKyM,kBAAkBzM,KAAKoM,kBAAmBpM,KAAKsM,kBAEpDtM,KAAKqC,MAAQ,WA2ChB,IAEH,IAAMqK,EAA6B,SAACnC,GAClCmB,GAAwB,GACxBF,EAAcf,GAAyBc,EAAahB,EAASc,EAAUC,KAsBzE,OARAzK,IAAM1B,WAAU,WACTsM,GACHR,EAA6CM,KAI9C,CAACA,IAIF,kBAACpB,GAAD,CAAU/J,MAAO,CACf4J,UAAW,SAEXnD,QAAS,cACTE,eAAgB,SAChBD,WAAY,WAGQ,IAAnBiE,GACC,kBAACP,GAAD,CACE9F,QAAS,kBAAMgI,GAA4B3B,KAG3C,yBAAKjO,IAAKuN,KAAUrN,IAAI,KACxB,8BAAQ+N,IAEZ,kBAACX,GAAD,CACE1F,QAAS,kBAAMgI,GAA4B1B,IAC3C5K,MAAO,CAAEuM,WAA6B,IAAjB3B,EAAqB,SAAW,YAErD,yBAAKlO,IAAKuN,KAAUrN,IAAI,KACxB,8BAAQgO,IAGV,6BACE,2BACEzG,SA/C2B,SAAC,GAA2B,IAAflC,EAAc,EAAxBD,OAAUC,MAI9C,IAHAqJ,GAAwB,GAGjBrJ,EAAMsH,OAAS,GAAiB,GAAZtH,EAAM,IAASA,EAAQA,EAAMuK,UAAU,GAGlEpB,EAAcf,GAFdpI,GAAgB,EAE8BgJ,EAAUC,KA0ClDjJ,MAAOkJ,EACPnL,MAAO,CAAEM,MAAO,SAChBmM,IAAKlB,EACLjH,QAAS,kBA7PnB,SAAmCoI,GAGjC,GAAI5J,SAASe,WACP8I,EAAQ7J,SAASpB,KAAKkL,mBACpBC,kBAAkBH,GACxBC,EAAMG,cACD,GAAIpJ,OAAOC,aAAc,CAC9B,IAAIgJ,KAAQ7J,SAASiB,eACfgJ,WAAWL,GACjBhJ,OAAOC,eAAeqJ,kBACtBtJ,OAAOC,eAAesJ,SAASN,GAIjCD,EAAQQ,QACRR,EAAQI,SA6OeK,CAA0B5B,EAAYlC,YAGtD0B,GAAY,0BAAM/K,MAAO,CAAEoN,WAAY,UAAYrC,GACnDC,GAA2B,uBAAGhL,MAAO,CAAEqN,UAAW,QAASC,SAAU,YAActC,IAItF,kBAAChB,GAAD,CACE1F,QAAS,kBAAMgI,EAA2B1B,IAC1C5K,MAAO,CAAEuM,WAA6B,IAAjB3B,EAAqB,SAAW,YAErD,yBAAKlO,IAAKwN,KAAStN,IAAI,KACvB,6BAAOgO,IAGW,IAAnBD,GACC,kBAACP,GAAD,CAAe9F,QAAS,kBAAMgI,EAA2B3B,KACvD,yBAAKjO,IAAKwN,KAAStN,IAAI,KACvB,6BAAO+N,MC/PF4C,GAlBc,uCAAG,WAAOb,EAASc,GAAhB,iBAAAlM,EAAA,6DAE9BrD,QAAQC,IAAIwO,GAERe,EAAe3K,SAAS4K,eAAe,cAAcC,wBAAwB9G,OAJnD,SAMxB,IAAIxD,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAASkK,MANnB,OAO1BI,EAAalB,EAAQiB,wBAAwBE,IAGjDnK,OAAOoK,SAAS,CACdD,IAAKD,EAAaH,EAElBM,KAAM,EACNC,SAAU,WAdkB,2CAAH,wDCiEdC,GAhEgB,WAAO,IAAD,EACNxN,IAAM0G,WAAW+G,GAAtCnJ,EAD2B,EAC3BA,KAD2B,KACrBG,WAC8BzE,IAAMnD,SAAS,KAFxB,mBAE5B6Q,EAF4B,KAEZC,EAFY,KAUnC,OAAKrJ,EAEH,6BAOE,kBAACsJ,GAAA,EAAD,CACEjK,UAAU,MACVpE,MAAK,aAAIE,OAAQ,IAAKoO,WAAY,OAAQC,OAAQ,QAA7C,SAA6D,uBAElEC,iBAAiB,KAEjB,kBAACC,GAAA,EAAD,CAAMzO,MAAO,CAAEuO,OAAQ,OAAQtO,gBAAiB,gBAC9C,kBAACoO,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAS,IACT5L,GAAG,oCAEHqB,QAAS,kBAAMiJ,GAAwBzK,SAAS4K,eAAT,qCAA8D,IAErGtJ,UAAU,+BACVpE,MAAO,CAAEsO,WAAY,UAAWQ,SAAU,OAAQ5O,OAAQ,OAAQqO,OAAQ,OAAQQ,aAAc,gBAEhG,wBAAI/O,MAAO,CAAE4J,UAAW,WAAxB,sDAEF,kBAACyE,GAAA,EAAUW,SAAX,CAAoBH,SAAS,KAC3B,kBAACJ,GAAA,EAAD,CAAMzO,MAAO,CAAEuO,OAAQ,oBAAqBU,UAAW,OAAQhP,gBAAiB,SAAUiP,YAAa,MACrG,yBAAKlP,MAAO,CAAEE,OAAQ,MAAOD,gBAAiB,SAAUkP,UAAW,mCAAoCxF,QAAS,QAC9G,yCACA,uBAAG3J,MAAO,CAAEsN,SAAU,SAAtB,yBACA,uBAAGtN,MAAO,CAAEsN,SAAU,SAAUhN,MAAO,SAAvC,sDACA,kBAAC,GAAD,CAAcoK,SAAU,CAAC,EAAG,EAAG0D,EAAmBD,EAAgB,GAAI,GAAI,KAC1E,4BAAQ7J,QAxCS,WAC7BrG,QAAQC,IAAI,SAAUiQ,KAuCV,WAEF,uBAAGnO,MAAO,CAAE4J,UAAW,WAAvB,MACA,yBAAK5J,MAAO,CAAEE,OAAQ,MAAOD,gBAAiB,aAAckP,UAAW,mCAAoCxF,QAAS,QAClH,qDACA,uBAAG3J,MAAO,CAAEsN,SAAU,SAAtB,wBACA,uBAAGtN,MAAO,CAAEsN,SAAU,SAAUhN,MAAO,SAAvC,kDACA,uDA1CI,+C,wZCDb,IAAM8O,GAAQhT,YAAOiT,IAAPjT,CAAH,MAkBLkT,GAAuD,SAACvK,GACnE,GAAiC,OAA7BA,EAAKqE,YAAYC,cAAiDkG,IAA7BxK,EAAKqE,YAAYC,QAA1D,CACA,IAAImG,EAAczK,EAAKqE,YAAYC,QAC/BoG,EAAeD,EAAYE,qBAC/B,QAAqBH,IAAjBE,GAA+C,OAAjBA,GAAsF,OAA7D1K,EAAKqE,YAAYC,QAAQX,YAAYiH,oBAWhG,ONpBkC,SAACC,EAAQC,GAG3C,IACIC,EAAkC,EAChCC,EAAQ,IAAIlI,KAAK+H,GACjBI,EAAW,IAAInI,KAAKgI,GAC1B5R,QAAQC,IAAI,UAAW6R,EAAO,aAAcC,GAI5C,IAAIC,EAAoB,CAAC,GAAI,IAc7B,IAbIF,EAAQC,EAAW,GACrBC,EAAkB,GAAGnI,KAAOkI,EAC5BC,EAAkB,GAAGnG,KAAO,WAC5BmG,EAAkB,GAAGnI,KAAOiI,EAC5BE,EAAkB,GAAGnG,KAAO,UAE5BmG,EAAkB,GAAGnI,KAAOiI,EAC5BE,EAAkB,GAAGnG,KAAO,QAC5BmG,EAAkB,GAAGnI,KAAOkI,EAC5BC,EAAkB,GAAGnG,KAAO,aAItBhB,GAAgCmH,EAAkB,GAAGnI,KAAMmI,EAAkB,GAAGnI,OAEtFmI,EAAkB,GAAGnI,KAAO,IAAID,KAAKoI,EAAkB,GAAGnI,KAAKoI,UAxBlD,OAyBqB,UAA9BD,EAAkB,GAAGnG,KAAoBgG,IACtCA,IAET,OAAOA,EMfyBK,CAAqB,IAAItI,KAAQ2H,EAAYY,SAASX,GAAcY,WAsPvFvJ,gBA/OF,SAACrK,GAAW,IAGnB6T,EAHkB,EACO7P,IAAM0G,WAAW+G,GAAtCnJ,EADc,EACdA,KAAMG,EADQ,EACRA,WADQ,EAEEzE,IAAMnD,SAAS,qCAFjB,mBAEf0H,EAFe,KAETuL,EAFS,OAOgB9P,IAAMnD,SAAS,CAAEkT,YAAa,gBAP9C,6BAQtB/P,IAAM1B,WAAU,cAab,IAEH0B,IAAM1B,WAAU,WAEd,GADAd,QAAQC,IAAI,uBACR6G,EAAM,CAaN,IAuBE0L,EAjCJ,GAAI1L,EAAKqE,aACJrE,EAAKqE,YAAYC,SACjBtE,EAAKqE,YAAYC,QAAQC,iBACzBvE,EAAKqE,YAAYC,QAAQC,gBAAgBC,OAAS,GACO,GAAzDxE,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGoH,WACsB,GAAlE3L,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGqH,mBAY/C,GAAoB,IAPAxH,GAA+DpE,GASjF9G,QAAQC,IAAI,wBACG,uCAAG,4BAAAoD,EAAA,sEACUgE,EAA+B,qBAAsB,IAD/D,OACVsL,EADU,OAGhB1L,EAAW,eAAK0L,IAHA,2CAAH,oDAKfC,GAMJP,EAAyBhB,GAAqDvK,GAS9E,IAOI+L,EAPAC,GAAmB,EAEsD,IAAzE5H,GAA+DpE,IACL,GAAzDA,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGoH,YAAqBK,GAAmB,GAKrFhM,EAAKqE,YAAYC,SAChBtE,EAAKqE,YAAYC,QAAQqG,uBAM5BoB,EAAuB,GAAK/L,EAAKqE,YAAYC,QAAQqG,sBAKvDe,OAE6BlB,IAA3Be,EACGvL,EAAKqE,YAAYC,QAAwE,OAA7DtE,EAAKqE,YAAYC,QAAQX,YAAYiH,oBAA+B,yBAA2B,oBACxH,6BAGyB,IAA3BW,EAA+B,uBACF,IAA3BA,EAA+B,WAC7BA,EAAyB,EAAzB,aAAmCA,EAAnC,UAC8B,IAA5BA,EAAA,sBACEA,GAA0B,EAA1B,mBAA0CA,EAA1C,eACE,QAGhBC,EAAQ,CACNS,UAAWD,EACXE,UAAWR,EACXS,UAAWJ,EACXK,KAAMb,SAMRC,EAAQ,CACNS,eAAWzB,EACX0B,eAAW1B,EACX2B,eAAW3B,EACX4B,UAAM5B,MAGT,CAACxK,IAoCJ,OACE,6BACE,wBAAI/E,MAAO,CAAEsN,SAAU,MAAOD,UAAW,OAAQ+D,aAAc,IAAKxH,UAAW,WAA/E,wBACA,uBAAG5J,MAAO,CAAEsN,SAAU,MAAO1D,UAAW,SAAUtJ,MAAO,SAAzD,gBAAgF,6BAAhF,yBACA,6BAEA,kBAAC,IAAD,CAAO+Q,OAAK,EAACC,KAAK,IAAIC,UAAWC,KACjC,kBAAC,IAAD,CAAOF,KAAK,WAAWC,UAAWC,KAUlC,kBAACpC,GAAD,CAAOjO,GAAG,kBAAV,eACA,kBAACiO,GAAD,CAAOjO,GAAG,uBAAuBnB,MAAO,CAAEsN,SAAU,WAApD,qBAECvI,GAAQA,EAAK2D,aAAb,YAAiC3D,EAAK2D,YAAY,GAAG+I,KAArD,MAID,kBAAC,GAAD,MAQA,kBAACrC,GAAD,CAAOjO,GAAG,0BAAV,wBAEC4D,GAAQA,EAAKqE,YAAYC,SAAW,yBAAKrJ,MAAO,CAAEyG,QAAS,OAAQE,eAAgB,WAAY+K,SAAU,WAAY7D,IAAK,QAAS8D,SAAU,WAC5I,4BAAQrN,QArDuB,WACnCrG,QAAQC,IAAI,MACZ,IACI0T,EADA9N,EAAOiB,EAAKqE,YAAYC,QAAQwI,SAEhCC,EAAS/M,EAAKqE,YAAYC,QAAQ0I,WACzB,aAATjO,IAAqB8N,EAAc,iBAC1B,iBAAT9N,IAAyB8N,EAAc,YAC9B,WAAT9N,IAAmB8N,EAAc,UAErCnV,EAAMsK,QAAQrJ,KAAK,CACjB6J,SAAS,+BAAD,OAAiCqK,EAAjC,YAAgDE,MA2CP9R,MAAO,CACpDsN,SAAU,SAEVrN,gBAAiB,SACjB+R,MAAO,MAAOnL,OAAQ,OAAQkI,aAAc,kBAG5C,0BAAM/O,MAAO,CAAEsN,SAAU,OAAQhN,MAAO,SAAxC,IAAoDyE,GAAQA,EAAKqE,YAAYC,QAAQS,QAKtF9E,EAAKmM,KAAO,GAAwB,+BAAnBnM,EAAKiM,UAIvB,kBAAC7B,GAAD,CAAOjO,GAAG,WAAWnB,MAAO,CAAEC,gBAAiB,OAAQqN,SAAU,OAAQhN,MAAO,YAAa2R,OAAQ,gBAC/E,+BAAnBjN,EAAKiM,UAA6C,QAAU,OAD/D,YAEE,uBAAGjR,MAAO,CAAEsN,SAAU,OAAQhN,MAAO,UAAY0E,EAAKiM,YAKxD,kBAAC7B,GAAD,CAAOjO,GAAG,2BAA2BnB,MAAO,CAAEC,gBAAiB,YAC5D+E,EAAKgM,UAAY,oBAAsB,iBACxC,uBAAGhR,MAAO,CAAEsN,SAAU,OAAQhN,MAAO,cAAgB0E,EAAKiM,WAExDjM,EAAKkM,UAAY,IACjB,uBAAGlR,MAAO,CAAEsN,SAAU,OAAQhN,MAAO,SAA8B,IAAnB0E,EAAKkM,UAAkB,gCAAvB,WAA6DlM,EAAKkM,UAAlE,eAAqG,IAAnBlM,EAAKkM,UAAkB,GAAK,IAA9G,2BAUrB,kBAAC9B,GAAD,CAAOjO,GAAG,oBAAV,WACA,kBAACiO,GAAD,CAAOjO,GAAG,sBAAV,aAEA,kBAACiO,GAAD,CAAOjO,GAAG,qBAAV,YACjC,uBAAGnB,MAAO,CAAEM,MAAO,OAAQgN,SAAU,OAAQ1D,UAAW,WAAxD,qBC7PSsI,OAlCf,SAA4BC,GAM1B,IAJA,IAAIC,EAAa,GACbC,EAAQ,CAAEF,GACVG,EAAQ,EAEJD,EAAM9I,QAAS,CACnB,IAAItH,EAAQoQ,EAAME,MAElB,GAAsB,mBAAVtQ,EACRqQ,GAAS,OAER,GAAsB,kBAAVrQ,EACbqQ,GAAwB,EAAfrQ,EAAMsH,YAEd,GAAsB,kBAAVtH,EACbqQ,GAAS,OAER,GAEgB,kBAAVrQ,IAC6B,IAAjCmQ,EAAWI,QAASvQ,GAKvB,IAAK,IAAIxE,KAFT2U,EAAW1U,KAAMuE,GAEHA,EACVoQ,EAAM3U,KAAMuE,EAAOxE,IAI/B,OAAO6U,G,0uBCvBT,IAAMG,GAAuBrW,IAAOC,IAAV,MAOpBqW,GAAkBtW,IAAOC,IAAV,MAOfsW,GAAYvW,IAAOC,IAAV,MAQTuW,GAAiBxW,IAAOC,IAAV,MAmMLyK,gBApLa,SAAC,GAAgB,IAAdC,EAAa,EAAbA,QAAa,EACftG,IAAM0G,WAAW/B,GAAtCL,EADoC,EACpCA,KAAMG,EAD8B,EAC9BA,WAEN2N,EAAkB,uCAAG,WAAOC,EAAeC,GAAtB,iBAAAzR,EAAA,yDAIX,oBAAVyR,EAJqB,uBAKvB9U,QAAQC,IAAI,oBACZ6I,EAAQrJ,KAAK,CACX6J,SAAS,yCAAD,OAA2CuL,KAP9B,6BAiBX,QAAVC,EAjBqB,uBAkBvB9U,QAAQC,IAAI,QACZ6I,EAAQrJ,KAAK,CACX6J,SAAS,6CAAD,OAA+CxC,EAAKqE,YAAYyI,SAASiB,GAAejK,KAChGlJ,MAAO,CACLqT,0BAA2BF,EAC3BG,KAAMlO,EAAKqE,YAAYyI,SAASiB,MAvBb,6BA8BX,cAAVC,EA9BqB,wBA+BvB9U,QAAQC,IAAI,UAEZ6I,EAAQrJ,KAAK,CACX6J,SAAS,yCAAD,OAA2CuL,GACnDnT,MAAO,CACLqT,0BAA2BF,EAC3BG,KAAMlO,EAAKqE,YAAYyI,SAASiB,MArCb,8BA4CX,UAAVC,GAAuBrP,OAAOwP,QAAP,sCA5CF,sDA6CX,UAAVH,IAAsBhO,EAAKqE,YAAYC,SAAY3F,OAAOwP,QAAP,gFA7C9B,0DA+CrBC,EAAe,CAAEC,kBAAmBN,EAAeC,UA/C9B,oBAiDCzN,EAA+B,0BAA2B6N,GAjD3D,QAiDnBvC,EAjDmB,OAmDvB1L,EAAW,eAAK0L,IAEhB3S,QAAQC,IAAI,cAAemV,GAAWtO,IArDf,mDAuDT9G,QAAQC,IAAR,MAvDS,mEAAH,wDA0DlBoV,EAA0B,uCAAG,WAAOR,EAAeC,GAAtB,iBAAAzR,EAAA,yDAiBjCrD,QAAQC,IAAI,oCAAqC6U,EAAQD,GAC3C,WAAVC,EAlB6B,uBAmB/B9U,QAAQC,IAAI,mBACZ6I,EAAQrJ,KAAK,CACX6J,SAAS,kCAAD,OAAoCuL,KArBf,6BA+BnB,QAAVC,EA/B6B,uBAgC/B9U,QAAQC,IAAI,QACZ6I,EAAQrJ,KAAK,CACX6J,SAAS,wCAAD,OAA0CxC,EAAKqE,YAAYmK,iBAAiBT,GAAejK,KACnGlJ,MAAO,CACL6T,kCAAmCV,EACnCG,KAAMlO,EAAKqE,YAAYmK,iBAAiBT,MArCb,6BA2CnB,UAAVC,GAAuBrP,OAAOwP,QAAP,sCA3CM,sDA4CnB,UAAVH,IAAsBhO,EAAKqE,YAAYC,SAAY3F,OAAOwP,QAAP,gFA5CtB,0DA+C7BC,EAAe,CAAEC,kBAAmBN,EAAeC,UA/CtB,oBAiDPzN,EAA+B,kCAAmC6N,GAjD3D,QAiD3BvC,EAjD2B,OAkD/B1L,EAAW,eAAK0L,IAlDe,mDAmDjB3S,QAAQC,IAAR,MAnDiB,mEAAH,wDAsDhC,OACE,kBAACuU,GAAD,KAEE,kBAACrD,GAAD,CAAOpP,MAAO,CAAEE,OAAQ,gBAAiBuG,QAAS,eAAgBkD,QAAS,WAAY4E,OAAQ,iBAAmBpN,GAAG,yCAArH,cAGA,kBAACuR,GAAD,KACE,mEACA,yDACE3N,GAAQA,EAAKqE,aAAerE,EAAKqE,YAAYmK,kBAAoBxO,EAAKqE,YAAYmK,iBAAiBhK,OAAS,EAC5G,wCAAIxE,EAAKqE,YAAYmK,iBAAiBrW,KAAI,SAAC+V,EAAMQ,GAAP,OACxC,kBAACd,GAAD,CAAWvV,IAAKqW,GACd,8BAAOR,EAAKnJ,MACZ,kBAAC8I,GAAD,KACE,6BACE,4BAAQtO,QAAS,kBAAMgP,EAA2BG,EAAY,YAA9D,UACA,4BAAQnP,QAAS,kBAAMgP,EAA2BG,EAAY,aAA9D,YAEF,6BACE,4BAAQnP,QAAS,kBAAMgP,EAA2BG,EAAY,UAA9D,QACA,4BAAQnP,QAAS,kBAAMgP,EAA2BG,EAAY,eAA9D,aACA,4BAAQnP,QAAS,kBAAMgP,EAA2BG,EAAY,YAA9D,iBAKF,0DAGV,kBAACf,GAAD,KACE,qEACA,yDACE3N,GAAQA,EAAKqE,aAAerE,EAAKqE,YAAYyI,UAAY9M,EAAKqE,YAAYyI,SAAStI,OAAS,EAC5F,wCAAIxE,EAAKqE,YAAYyI,SAAS3U,KAAI,SAAC+V,EAAMQ,GAAP,OAChC,kBAACd,GAAD,CAAWvV,IAAKqW,GACd,8BAAOR,EAAKnJ,MACZ,kBAAC8I,GAAD,KACE,6BACE,4BAAQtO,QAAS,kBAAMuO,EAAmBY,EAAY,YAAtD,UACA,4BAAQnP,QAAS,kBAAMuO,EAAmBY,EAAY,sBAAtD,sBACA,4BAAQnP,QAAS,kBAAMuO,EAAmBY,EAAY,UAAtD,SAGF,6BACE,4BAAQnP,QAAS,kBAAMuO,EAAmBY,EAAY,gBAAtD,UACA,4BAAQnP,QAAS,kBAAMuO,EAAmBY,EAAY,eAAtD,aACA,4BAAQnP,QAAS,kBAAMuO,EAAmBY,EAAY,YAAtD,iBAMF,8DC1KDC,GAtCC,SAAC,GAAyC,IAKpDC,EALaC,EAAsC,EAAtCA,IAAKC,EAAiC,EAAjCA,OAAQC,EAAyB,EAAzBA,mBACxBC,EAAsBtT,IAAM0G,WAAW6M,IAErCC,EAAyBF,EAAzBE,YAAaC,EAAYH,EAAZG,UAGrB,GAAID,EAAa,OAGmBA,EAAYE,QAAhCA,EAHC,EAGP1C,KAAe2C,EAHR,EAGQA,OACjBC,EAAeC,KAAKC,MAAMX,EAAIY,iBAAmB,IAAML,GAEvDM,EAAsB,SAAXL,EAAqB,KAAtB,WAAiCC,EAAjC,UAGhBV,EAAO,UAAMC,EAAIY,iBAAV,aAA+BC,QAEtCd,EAAO,UAAMC,EAAInC,KAAV,SAIT,OACE,6BACE,qCAAWoC,EAAX,MACA,8BAAOF,GACNG,GAAsBD,GAAU,0BAAM7T,MAAO,CAAEM,MAAO,OAAQoU,YAAa,SAAWd,EAAIe,oBAA1D,YAC/BT,GAGA,yBAAKlU,MAAO,CAAEyG,QAAS,OAAQmO,oBAAqB,YAClD,yBAAK5U,MAAO,CAAEC,gBAAiB,eAAiB2T,EAAIiB,UAAYjB,EAAIiB,UAAY,0BAAM7U,MAAO,CAACM,MAAM,SAApB,YAAhF,KACA,yBAAKN,MAAO,CAAEC,gBAAiB,UAAY2T,EAAIkB,WAAalB,EAAIkB,WAAa,0BAAM9U,MAAO,CAACM,MAAM,SAApB,gBCtBxEyU,GAVM,SAAC,GAA4D,IAAD,IAA1DC,SAAUlL,EAAgD,EAAhDA,KAAMmL,EAA0C,EAA1CA,KAAOpB,EAAmC,EAAnCA,OAAOI,EAA4B,EAA5BA,YAAYC,EAAgB,EAAhBA,UAC/D,OACE,yBAAKlU,MAAO,CAACC,gBAAgB,cAC3B,wCAAc4T,EAAd,IAAuB/J,GAAI,WAAQA,EAAR,MAC3B,qCACCmL,EAAK/X,KAAI,SAAC0W,EAAKnW,GAAN,OAAY,kBAAC,GAAD,CAASmW,IAAKA,EAAKC,OAAQpW,EAAI,EAAGL,IAAKK,EAAGwW,YAAaA,EAAaH,mBAAoBmB,EAAK1L,OAAQ2K,UAAWA,SCW7HgB,GAjBM,SAAC,GAAkB,IAAhB9E,EAAe,EAAfA,SAEtB,OACE,6BACE,wCACF,yBAAKhM,UAAU,qBACb,yBAAKpE,MAAO,CAAEyG,QAAS,WAAvB,OACA,yBAAKzG,MAAO,CAAEyG,QAAS,WAAvB,oBACC2J,EAASlT,KAAI,SAACiY,EAAK1X,GAAN,OACZ,yBAAKL,IAAKK,GACR,yBAAKuC,MAAO,CAAEyG,QAAS,WAAahJ,EAAI,EAAxC,KACA,yBAAKuC,MAAO,CAAEyG,QAAS,WAAvB,IAAyC,IAAJhJ,EAAA,6BAA6B0X,EAAIC,eAAiB,GAArB,uBAA0CD,EAAIC,iBAA0B,KAAN3X,EAAW,uBAAiD,IAAvB0X,EAAIC,eAAuB,WAA3B,UAA2CD,EAAIC,uB,qBC6FnNC,I,OAtGU,SAAC,GAAmG,IAAjGvK,EAAgG,EAAhGA,aAAc3G,EAAkF,EAAlFA,SAAUF,EAAwE,EAAxEA,SAAUqR,EAA8D,EAA9DA,iBAAkBpR,EAA4C,EAA5CA,YAAaqR,EAA+B,EAA/BA,YAAYC,EAAmB,EAAnBA,aAAmB,EAEhG/U,IAAMnD,SAASwN,GAA8B,MAFmD,mBAEnH7I,EAFmH,KAE5GwT,EAF4G,KAK1HhV,IAAM1B,WAAU,cAEb,IAaH,IAAM2W,EAAU,CACdC,SAASJ,GACL,CACA,CAAC,CAAE,OAAU,CAAC,EAAG,GAAG,KACpB,CAAC,OAAQ,SAAU,YAAa,SAAU,cAC1C,CAAC,CAAE,KAAQ,WAAa,CAAE,KAAQ,UAAY,CAAE,OAAU,MAAQ,CAAE,OAAU,OAE9E,CAAC,QACD,CAAC,WAkDP,OACE,6BACE,kBAAC,KAAD,CACEtT,MAAOA,EACPkC,SA/Be,SAAC7C,EAAGsU,EAAGC,EAAGjO,GAG7B6N,EAASnU,GAGL6C,GAAUA,EAAS7C,IA0BnBwU,UAAW3R,IAAYF,EACvB8R,MAAM,OAENL,QAASA,EACTxR,YAAaA,GAA4B,gBACzC8R,QA7CU,CACd,SACA,OAAQ,SAAU,YAAa,SAAU,aACzC,OAAQ,SAAU,SAClB,QA0CIhW,MAAOwV,IAGRvR,GACC,4BACEG,UAAU,sBACVpE,MAAO,CAAE4J,UAAW,SAAU1J,OAAQ,OAAQuG,QAAS,SACvDnC,QApCc,WAMhBL,GAAUA,EAAShC,KA+BhBqT,GAAsC,a,ySCpFjD,IAoCatB,GAAkBvT,IAAM4E,gBAK/BuN,GAAiBxW,IAAOC,IAAV,MA+NLyK,gBAhNQ,SAAC,GAAqE,IAA1DmP,EAAyD,EAAlEC,MAASD,OAAsBtW,EAAmC,EAA/CsG,SAAYtG,MAASoH,EAA0B,EAA1BA,QAASkM,EAAiB,EAAjBA,KAAMkD,EAAW,EAAXA,KAG/E1V,IAAM1B,WAAU,WACd2E,OAAO0S,SAAS,EAAG,KAClB,IALuF,IAkBtFnC,EAlBsF,EAOxDxT,IAAMnD,UAAS,GAPyC,mBAOnF4W,EAPmF,KAOxEmC,EAPwE,KAQtFC,EAAoBL,EAAOnS,KAA3BwS,EAAqCL,EAAOM,GAR0C,EAS7B9V,IAAM0G,WAAW/B,GAAtEL,EATkF,EASlFA,KAAMG,EAT4E,EAS5EA,WAAYsR,EATgE,EAShEA,YAAaC,EATmD,EASnDA,kBACnCC,EAAgB3R,EAAOA,EAAKqE,YAAc,KAO1C+K,EAAU,CAAE1C,KAAM,EAAG2C,OAAQ,QAqCjC,GAnCKnB,IACCtT,EAASsT,EAAOtT,EAAMsT,KACjBlO,IACgB,aAAnBuR,EACFrD,EAAOyD,EAAcnD,iBAAiB5K,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQyN,KACpC,WAAnBA,GAA+BE,EACxCvD,EAAOuD,EAAY7N,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQyN,KACjB,kBAAnBA,IACTrD,EAAOyD,EAAc7E,SAASlJ,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQyN,QAU1DrD,GAAQA,EAAK0D,qBAEK,EAChB5R,EAAKqE,YAAYC,SAAWtE,EAAKqE,YAAYC,QAAQX,YAAYiH,qBACnEwE,EAAQ1C,KAAO1M,EAAK2D,YAAYC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAQ9D,EAAKqE,YAAYC,QAAQX,YAAYiH,uBAAqB8B,KAClH0C,EAAQC,OAAS,WAERrP,EAAK2D,aAAe3D,EAAK2D,YAAYa,OAAS,IACvD4K,EAAQ1C,KAAO1M,EAAK2D,YAAY,GAAG+I,KACnC0C,EAAQC,OAAS,UAEnBH,EAAc,CAAE0C,mBATI,EASexC,aAMhClB,EAAM,OAAQ,8CAtDuE,MAuDpDA,EAA9BnJ,EAvDkF,EAuDlFA,KAAM8M,EAvD4E,EAuD5EA,UAAWxG,EAvDiE,EAuDjEA,SAsBnByG,EAA2B,uCAAG,WAAOC,EAAc/D,GAArB,mBAAAzR,EAAA,yDAElCrD,QAAQC,IAAI,2BAA4B4Y,EAAc/D,GAExC,QAAVA,EAJ8B,uBAMhChM,EAAQrJ,KAAK,CACX6J,SAAS,sCAAD,OAAwCuP,KAPlB,6BAiBpB,UAAV/D,EAjB8B,uBAoBhChM,EAAQrJ,KAAK,CACX6J,SAAS,8CAAD,OAAgDuP,KArB1B,6BAgCpB,UAAV/D,GAAuBrP,OAAOwP,QAAP,sCAhCO,oDAiCpB,UAAVH,IAAsBhO,EAAKqE,YAAYC,SAAY3F,OAAOwP,QAAP,gFAjCrB,oEAuC5BC,EAAe,CAAE2D,eAAc/D,UAvCH,UAwCDzN,EAA+B,0BAA2B6N,GAxCzD,QAwC5B4D,EAxC4B,OA0CjB,WAAXhE,GACF0D,EAAkB,YAAIM,IAClBhS,EAAKqE,YAAYC,SAAWtE,EAAKqE,YAAYC,QAAQ0I,aAAe+E,IACtE/R,EAAKqE,YAAYC,QAAU,KAC3BnE,EAAW,eAAKH,MAGXG,EAAW,eAAK6R,IAEV,WAAXhE,GAAqBhM,EAAQrJ,KAAK,CAAE6J,SAAS,aAClC,cAAXwL,IAEEiE,EAAiBD,EAAmB3N,YAAYyI,SAASkF,EAAmB3N,YAAYyI,SAAStI,OAAS,GAAGV,IAEjH9B,EAAQrJ,KAAK,CAAE6J,SAAS,2CAAD,OAA6CyP,KACpEhT,MAAM,gGAzDwB,mDAuElB/F,QAAQC,IAAR,MAvEkB,mEAAH,wDA2EjC,OACE,6BAEE,kBAAC8V,GAAgBiD,SAAjB,CAA0BhV,MAAO,CAAEgS,cAAaC,eAGnC,oBAATiC,GAAiD,WAAnBG,IAC9B,oCACE,4BAAQtW,MAAO,CAAEyG,QAAS,QAASuL,MAAO,OAAS1N,QAAS,kBAAMuS,EAA4B5D,EAAKpK,IAAK,YAAxG,0BACA,kBAAC,GAAD,KACE,4BAAQvE,QAAS,kBAAMuS,EAA4B5D,EAAKpK,IAAK,eAA7D,UACA,4BAAQvE,QAAS,kBA3NM,SAACwS,GACpC,IAAMI,EAAa,UAAMtW,EAAN,sCAA0DkW,GAC7E7Y,QAAQC,IAAI,QACZ,IAAMiZ,EAAKrU,SAASC,cAAc,YAClCoU,EAAGlV,MAAQiV,EACXpU,SAASpB,KAAK0V,YAAYD,GAC1BA,EAAGrK,SACHhK,SAASuU,YAAY,QACrBvU,SAASpB,KAAK4V,YAAYH,GAG1BI,aAAM,uEAAwE,CAC5E7F,SAAU,aACV8F,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,IA0MsBC,CAA6B5E,EAAKpK,OAAzD,SACA,kBAAC,KAAD,MACC9D,GAAQA,EAAKwB,OAASxB,EAAK+S,WAAa/S,EAAK+S,UAAUC,OAAS,IAC/D,oCACE,4BAAQ/X,MAAO,CAAEC,gBAAiB,OAASqE,QAAS,kBAAMuS,EAA4B5D,EAAKpK,IAAK,YAAhG,eACA,4BAAQ7I,MAAO,CAAEC,gBAAiB,OAASqE,QAAS,kBAAMuS,EAA4B5D,EAAKpK,IAAK,YAAhG,aAMN,6BAEqB,aAAlBoK,EAAKpB,UAA2B,4BAAQ7R,MAAO,CAAEyG,QAAS,QAASuL,MAAO,MAAO9R,OAAQ,aAAeoE,QAtHlG,WACjBrG,QAAQC,IAAI,UACZ6I,EAAQrJ,KAAK,CACX6J,SAAS,2CAAD,OAA6C0L,EAAKpK,KAC1DlJ,MAAO,CACLsT,YAiHuC,eACjC,wBAAIjT,MAAO,CAAE4J,UAAW,WAAaE,GAI5B,mBAARqM,GAA6B,6BAC5B,uCACElD,EAAK+E,SAAY,kBAACC,GAAD,CAAsBnN,aAAcmI,EAAK+E,QAASzC,aAAW,KAGlF,4CACEtC,EAAKiF,aAAejF,EAAKkF,kBAAoB,kBAACF,GAAD,CAAsBnN,aAAcmI,EAAKkF,gBAAkBlF,EAAKkF,gBAAkBlF,EAAKiF,YAAa3C,aAAW,IAM9J,yBAAKvV,MAAO,CAAE2J,QAAS,SACrB,yCACA,4BAAQrF,QAAS,kBAAM+R,GAAa,SAACnC,GAAD,OAAgBA,OAApD,mBACC0C,EAAU1Z,KAAI,SAAC8X,EAAUvX,GAAX,OAAiB,kBAAC,GAAD,CAAcuX,SAAUA,EAAUnB,OAAQpW,EAAI,EAAGL,IAAKK,EAAGwW,YAAaA,EAAaC,UAAWA,QAGhI,kBAAC,GAAD,CAAc9D,SAAUA,U,2rBC9PtC,IAAMgI,GAAQhc,YAAOqS,KAAK4J,KAAZjc,CAAH,MAgNI0K,IAxMG1K,IAAOC,IAAV,MAQQD,IAAOC,IAAV,MAgMLyK,aA9KU,SAAC,GAA8C,IAA5CmM,EAA2C,EAA3CA,KAA4BqF,GAAe,EAArCvR,QAAqC,EAA5BwR,aAAgBpb,EAAY,EAAZA,MAAY,EACVsD,IAAM0G,WAAW/B,GADP,EAC/DL,KAD+D,EACzDG,WADyD,EAC7CsR,YAD6C,EAChCC,kBAGhC6B,IAAGA,EAAI,CAAEN,SAAS,EAAMQ,aAAa,IAsG1C,OAEE,kBAAC/J,GAAA,EAAD,CAAMzO,MAAO,CAAEsO,WAAY,cAAeC,OAAQ,OAAQrO,OAAQ,MAAO6O,aAAc,QAIrF,kBAACV,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAU1R,EACV8F,GAAE,kCAA6B9F,GAG/BiH,UAAU,+BAGVpE,MAAO,CAAEsO,WAAY,UACrBhK,QAAS,kBAAMiJ,GAAwBzK,SAAS4K,eAAT,kCAAmDvQ,IAAU,OAIpG,uBAAG6C,MAAO,CAAEyY,MAAO,UAAnB,gBACA,uBAAGzY,MAAO,CAAE0Y,WAAY,SAAWzF,EAAKnJ,MACtCwO,EAAEN,SAAW/E,EAAK+E,SAAY,6BAE7B/E,EAAK+E,QAAU,kBAACC,GAAD,CAAsBnN,aAAcmI,EAAK+E,QAASzC,aAAW,EAACC,aAAc,CAAEvV,gBAAiB,UAAe,8CAFhG,cAG/BqY,EAAEJ,aAAe,6BAChB,4CACA,2BAAIjF,EAAKiF,aAFO,gBAIjBI,EAAEE,aAAe,yBAAKxY,MAAO,CAAEyG,QAAS,OAAQC,WAAY,WAI3D,0BAAM1G,MAAO,CAAEsN,SAAU,OAAQqL,WAAY,MAAOjH,SAAU,WAAY7D,IAAK,SAA/E,UACA,kCAAQoF,EAAKuF,YAAYI,eAAeC,YAAY,GAApD,KAA0D5F,EAAKuF,YAAYI,eAAeC,YAAY,GAAtG,UALgB,gBAMjBP,EAAEQ,iBAAmB,6BACpB,wCAAc7F,EAAK8F,WAAWf,QAAQgB,YAAtC,aAA6D/F,EAAK8F,WAAWC,YAAYzP,QADrE,gBAErB+O,EAAEW,mBAAqB,6BACtB,0CAAgBhG,EAAK8F,WAAWf,QAAQtH,UAAxC,aAA6DuC,EAAK8F,WAAWrI,UAAUnH,QADjE,iBAG1B,kBAAC8E,GAAA,EAAUW,SAAX,CAAoBH,SAAU1R,GAC5B,kBAACib,GAAD,CAAOpY,MAAO,CAAEiP,UAAW,OAAQhP,gBAAiB,UAAWiP,YAAa,MAE1E,yBAAKlP,MAAO,CAAEC,gBAAiB,gBAY7B,kBAAC,GAAD,CAAgBgT,KAAMA,EAAMkD,KAAK,4B,wNCvM7C,IAAMiC,GAAQhc,YAAOqS,KAAK4J,KAAZjc,CAAH,MAuOI8c,GA9NK,WAClB,IAAIC,EAAgB1Y,IAAM0G,WAAW/B,GAC7BL,EAAkCoU,EAAlCpU,KAAMG,EAA4BiU,EAA5BjU,WAAYsR,EAAgB2C,EAAhB3C,YAyBpB4C,EAAqB,uCAAG,kCAAA9X,EAAA,6DAC5BrD,QAAQC,IAAI,eAIRmb,EAAOvW,SAAS4K,eAAT,2BAGPD,EAAe3K,SAAS4K,eAAe,cAAcC,wBAAwB9G,OARrD,SAUtB,IAAIxD,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAAS,QAVrB,cAWxBgW,EAAUD,EAAK1L,wBAAwBE,IAC3C5P,QAAQC,IAAI,UAAWob,GAEvB5V,OAAOoK,SAAS,CACdD,IAAKyL,EAAU7L,EAEfM,KAAM,EACNC,SAAU,WAlBgB,UAsBJ1I,EAA+B,qBAAsB,CAAEiU,qBAAsB,WAtBzE,QAsBxB3I,EAtBwB,OAyB5B1L,EAAW,eAAK0L,IAzBY,4CAAH,qDA6CrB4I,EAA2B,uCAAG,aAAgCC,GAAhC,mBAAAnY,EAAA,6DAAmBoY,EAAnB,EAAS1X,OAAU0X,SACjDhP,EAAW3F,EAAK2F,UACNiP,MAAMC,OAAOC,WAAUnP,EAASiP,MAAMC,OAAOC,SAAW,IACvDnP,EAASiP,MAAMC,OAAOC,SAC5BJ,GAAQC,EAJiB,SAMVpU,EAA+B,sBAAuB,CAAEwU,aAAc,CAAEpP,cAN9D,OAM9BkG,EAN8B,OAOlC1L,EAAW,eAAK0L,IAPkB,2CAAH,wDAxET,EAoFYnQ,IAAMnD,SAAS,IApF3B,mBAoFnByc,EApFmB,KAoFNC,EApFM,KAqFxBvZ,IAAM1B,WAAU,WACVgG,GACFiV,EAAeC,EAAmClV,GAAM0M,QAEzD,CAAC1M,IACJ,IAAMkV,EAAqC,SAAClV,GAC1C,IAAKA,EAAM,MAAQ,CAAE0M,KAAM,GAAI2C,OAAQ,QACvC,IAAID,EAAU,GACd,GAAIpP,EAAKqE,YAAYC,SAAWtE,EAAKqE,YAAYC,QAAQX,YAAYiH,oBACnEwE,EAAQ1C,KAAO1M,EAAK2D,YAAYC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAQ9D,EAAKqE,YAAYC,QAAQX,YAAYiH,uBAAqB8B,KAClH0C,EAAQC,OAAS,cAEZ,MAAIrP,EAAK2D,aAAe3D,EAAK2D,YAAYa,OAAS,GAGlD,MAAQ,CAAEkI,KAAM,GAAI2C,OAAQ,QAFjCD,EAAQ1C,KAAO1M,EAAK2D,YAAY,GAAG+I,KACnC0C,EAAQC,OAAS,SAEnB,OAAOD,GAWT,OAAoB,OAAhBqC,EAAgC,sDACxB,MAARzR,QAAwBwK,GAARxK,EAA6B,8CAI7C,yBAAK/E,MAAO,CAAEC,gBAAiB,YAAa0J,QAAS,MAGnD,kBAAC0E,GAAA,EAAD,CACEjK,UAAU,MACVpE,MAAK,aAAIE,OAAQ,IAAKoO,WAAY,OAAQC,OAAQ,QAA7C,SAA6D,uBAClEC,iBAAkBzJ,EAAK2F,SAASiP,MAAMC,OAAOzD,KAAO,IAAM,KAE1D,kBAAC1H,GAAA,EAAD,CAAMzO,MAAO,CAAEuO,OAAQ,OAAQtO,gBAAiB,gBAC9C,kBAACoO,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAS,IACT5L,GAAG,0BACHqB,QAAS8U,EAGThV,UAAU,+BAGVpE,MAAO,CAAEsO,WAAY,UAAWQ,SAAU,OAAQ5O,OAAQ,OAAQqO,OAAQ,OAAQQ,aAAc,gBAIhG,wBAAI/O,MAAO,CAAE4J,UAAW,WAAxB,uCAGF,kBAACyE,GAAA,EAAUW,SAAX,CAAoBH,SAAS,KAC3B,kBAAC,GAAD,CAAO7O,MAAO,CAAGuO,OAAQ,oBAAqBU,UAAW,OAAQhP,gBAAiB,QAASiP,YAAa,MAEtG,6BAEE,6BACE,4CAEA,yBAAKlP,MAAO,CACV2J,QAAS,MAAOlD,QAAS,cAAeG,SAAU,MAAOF,WAAY,SAAUC,eAAgB,OAC/F1G,gBAAgB,YAAa8O,aAAa,OAAQ7O,OAAO,QAEzD,kBAAC,KAAD,CACE+C,GAAG,+BACHiX,eAAgBnV,EAAK2F,SAASiP,MAAMC,OAAOC,SAAS7B,QAEpD7T,SAAU,SAACpC,GAAD,OAAOyX,EAA4BzX,EAAG,cAElD,2BAAO/B,MAAO,CAAEE,OAAQ,cAAgBia,QAAQ,gCAAhD,cAEF,yBAAKna,MAAO,CACV2J,QAAS,MAAOlD,QAAS,cAAeG,SAAU,MAAOF,WAAY,SAAUC,eAAgB,OAC/F1G,gBAAgB,YAAa8O,aAAa,OAAO7O,OAAO,MAAOyY,WAAW,SAE1E,kBAAC,KAAD,CACE1V,GAAG,mCACHiX,eAAgBnV,EAAK2F,SAASiP,MAAMC,OAAOC,SAASrB,YAEpDrU,SAAU,SAACpC,GAAD,OAAOyX,EAA4BzX,EAAG,kBAGlD,2BAAO/B,MAAO,CAAEE,OAAQ,cAAgBia,QAAQ,oCAAhD,cACA,0BAAMna,MAAO,CAAEsN,SAAU,SAAzB,YAaJ,iCACE,sCACA,kBAAC,GAAD,CAAc5C,SAAU,CAAC,EAAG,EAvFF,SAACJ,GAC3CrM,QAAQC,IAAIoM,GACZ0P,EAAe1P,IAqFqEyP,EAAa,GAAI,OAAQ,EAAG,OAChG,0GACA,4BAAQzV,QArFE,WAC1BrG,QAAQC,IAAI,wBAAyB,gBAAiB6b,KAoFtC,YAGJ,6BACE,yCAgBV,kBAAC1L,GAAA,EAAD,CAAWjK,UAAU,MAAMpE,MAAO,CAAEE,OAAQ,IAAKoO,WAAY,OAAQC,OAAQ,QAAUC,kBAAmB,GAGvGgI,EAAYtZ,KAAI,SAAC+V,EAAM9V,GAAP,OAAiB,kBAAC,GAAD,CAAkBC,IAAKD,EAAO8V,KAAMA,EAAM9V,MAAOA,EAAOob,YAAaxT,EAAK2F,SAASiP,MAAMC,OAAOC,iBCrJ7HO,I,cA3EK,WACEjT,qBAAW/B,GAA/B,IADwB,EAEsB9H,mBAAS,MAF/B,gCAG0BA,oBAAS,IAHnC,mBAGjB+c,EAHiB,KAGEC,EAHF,KAsBxB,OADArc,QAAQC,IAAI,kBAEV,yBAAK+E,GAAG,cAAcjD,MAAO,CAAEC,gBAAiB,cAG9C,yBAAKD,MAAO,CAAE0R,SAAU,aACtB,wBAAI1R,MAAO,CAAE4J,UAAW,WAAxB,IAAsCyQ,EAAoB,WAAa,SAEvE,uBAAGra,MAAO,CAAEM,MAAO,OAAQgN,SAAU,SAAU1D,UAAW,WAA1D,+BACA,4BAAQ5J,MAAO,CAAEyG,QAAS,QAASsI,aAAc,gBAAiBzB,SAAU,SAAU3D,QAAS,SAAUzJ,OAAQ,sBAAwBoE,QAAS,kBAAMgW,GAAqB,SAAAC,GAAa,OAAKA,OAC5LF,EAAoB,SAAW,aAInCA,EAAoB,kBAAC,GAAD,MAA0B,kBAAC,GAAD,SCuCtCvT,I,OAAAA,aAhFW,SAAC,GAAgB,EAAdC,QAAe,IAAD,EACZtG,IAAM0G,WAAW/B,GAAtCL,EADiC,EACjCA,KAAMG,EAD2B,EAC3BA,WAD2B,EAEuBzE,IAAMnD,SAAS,MAFtC,mBAElCkd,EAFkC,KAERC,EAFQ,KAIzCha,IAAM1B,WAAU,YACgB,WAC5B,GAAIgG,EAAK2D,YAAa,CAAC,IAAD,EACU3D,EAAK2D,YAAY,GAAvCZ,EADY,EACZA,KAAM2J,EADM,EACNA,KAAMiJ,EADA,EACAA,MAOhBC,EANqB,SAACC,EAAiBC,GACzC,IAAMC,EAAY,IAAIjT,KAAKgT,GAG3B,OAFyBD,EAAgB1K,UAAY4K,EAAU5K,WACpB,MAG5B6K,CAAiB,IAAIlT,KAAQC,GAC9C6S,EAAarG,KAAKC,MAAMoG,GACxBF,EAA4B,CAAEE,aAAYlJ,OAAMiJ,eAEhDD,EAA4B,MAMhCO,KAIE,CAACjW,EAAK2D,cAIV,IAAMuS,EAA0B,uCAAG,kCAAA3Z,EAAA,sDAMjC,IALArD,QAAQC,IAAI,YAGRgd,EAA0BnW,EAAKqE,YAAYC,QAAQ+G,SACnD+K,GAAc,IAAItT,MAAOqI,UACpBzS,EAAI,EAAGA,EAAIyd,EAAwB3R,OAAQ9L,IAClDyd,EAAwBzd,GAAG4S,QAAU,IAAIxI,KAAKsT,EAAc,MAAsB1d,GAClFyd,EAAwBzd,GAAG4S,QAAU6K,EAAwBzd,GAAG4S,QAAQzM,WARzC,OAWjC3F,QAAQC,IAAI,qBAAsBgd,GAXD,SAcP5V,EAA+B,qBAAsB,CAAExB,KAAM,UAAUsX,uBAAsB,EAAKF,4BAd3F,OAc3BtK,EAd2B,OAejC3S,QAAQC,IAAI,4BAA6B0S,GACzC1L,EAAW,eAAK0L,IAhBiB,4CAAH,qDA8BhC,OACE,6BACE,kDACA,kHAEA,yBAAK5Q,MAAO,CAAEC,gBAAiB,QAC3Bua,EACAA,EAAyBG,WAAa,EAAI,6CAAmBH,EAAyBG,WAA5C,yEACtC,sCAAYH,EAAyB/I,KAArC,SAAiD+I,EAAyBG,WAA1E,cAAiGH,EAAyBE,MAAMnR,OAAS,GAAK,8BAAM,6BAAN,iCAA6C,6BAAUiR,EAAyBE,OAC9N,6BADA,mEACyE,4BAAQpW,QAAS2W,GAAjB,wCADzE,uFAFuB,0IAK/B,uECcSnU,gBAxFS,SAAC,GAAsB,IAApBjI,EAAmB,EAAnBA,KAAKkI,EAAc,EAAdA,QAAc,EAEjBtG,IAAM0G,WAAW+G,GAAtCnJ,EAFsC,EAEtCA,KAAMG,EAFgC,EAEhCA,WAFgC,EAKVzE,IAAMnD,SAAS,MALL,mBAKrC+d,EALqC,KAK1BC,EAL0B,KAO5Crd,QAAQC,IAAI,YAAaW,GAQzB,IAAM0c,EAAkB,uCAAG,4BAAAja,EAAA,6DACzBrD,QAAQC,IAAI,YADa,SAGCoH,EAA+B,cAAe,CACtEkW,UAAW3c,EAAK4c,oBAChBC,gBAAiB7c,EAAKuR,SAAWvR,EAAKuR,SAASsL,qBAAkBnM,EACjEoM,sCAAuC9c,EAAK+c,aAAe/c,EAAK+c,aAAaC,iCAA8BtM,EAC3GuM,sCAAsC,IAPf,OAGnBlL,EAHmB,OAUzB1L,EAAW,eAAK0L,IAChB7J,EAAQrJ,KAAK,0BAXY,2CAAH,qDAqBxB,OAAKqH,EAGH,6BAEE,4DAGA,oJAEA,sHACA,0BAAM/E,MAAO,CAAEsN,SAAU,SAAWzO,EAAKkd,kBAAkBC,OAA3D,KADA,cAKCnd,EAAKuR,UAAY,6BAEhB,8CACA,sCAAYvR,EAAKuR,SAAS6L,cAA1B,OAA6Cpd,EAAKuR,SAAS6L,cAAgB,GAAK,IAAhF,6BACA,kEAAuC,0BAAMjc,MAAO,CAAEsN,SAAU,SAAWzO,EAAKuR,SAASoL,UAAUQ,OAA5D,KAAvC,MAGA,iDACA,wJAGDnd,EAAK+c,cAAgB,6BACpB,iEACA,kIAKF,uCACA,oEAAyC,0BAAM5b,MAAO,CAAEsN,SAAU,SAAWzO,EAAK4c,oBAAoBO,OAA7D,KAAzC,KACA,gCAAMnd,EAAK4c,oBAAoBS,gBAA/B,OAAgG,GAA5Crd,EAAK4c,oBAAoBS,iBAAwB,IAArG,iCAAwIrd,EAAK4c,oBAAoBU,oBAAjK,uBAA0P,GAAhDtd,EAAK4c,oBAAoBU,qBAA4B,IAA/P,OAEA,+FACA,4GAEe,OAAdd,EAAqB,KAAO,2CAC7B,4BAAQrb,MAAO,CAAEE,OAAQ,QAAUoE,QAASiX,GAA5C,cACA,4BAAQvb,MAAO,CAACE,OAAO,QAAUoE,QAAS,kBAAMgX,GAAa,KAA7D,mBA1Cc,4CCiILxU,gBA/JU,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtBqV,EAAU3b,IAAM0G,WAAW+G,GACzBnJ,EAASqX,EAATrX,KAFkC,EAGQtE,IAAMnD,SAAS,MAHvB,mBAGjC+e,EAHiC,KAGfC,EAHe,OAIM7b,IAAMnD,SAAS,CAAEif,OAAQ,CAAEC,iBAAiB,EAAOC,qBAAqB,EAAOC,yBAAyB,KAJ9G,mBAIjCC,EAJiC,KAIhBC,EAJgB,KAKpCC,EAAKF,EAAgBJ,OAAOG,wBAC5BI,EAAKH,EAAgBJ,OAAOC,gBAC5BO,EAAKJ,EAAgBJ,OAAOE,oBA2IhC,OA1IAxe,QAAQC,IAAI,2BAA2B2e,EAAGC,EAAGC,EAAIJ,GAEjDlc,IAAM1B,WAAU,WAOd,GAAIqd,EAAQrX,MAAQqX,EAAQrX,KAAKqE,YAAYC,SAAW+S,EAAQrX,KAAKqE,YAAYC,QAAQX,YAAYiH,oBAAqB,CAAC,IACnH5K,EAAqBqX,EAArBrX,KACFiY,GADuBZ,EAAflX,WACiBH,EAAKqE,YAAYC,QAAQqG,sBAQtD,IAAuD,IAAnDiN,EAAgBJ,OAAOG,wBAAmC,CAC5Dze,QAAQC,IAAI,yBAGZ,IAAIsL,EAAY,IAAI3B,KAChBoV,EAAmClY,EAAKqE,YAAYC,QAAQC,iBAAmBvE,EAAKqE,YAAYC,QAAQC,gBAAgBC,OAAS,EAAIxE,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGxB,KAAe,KACpM,GAAyC,OAArCmV,EACoBnU,GAAgCU,EAAWyT,KAEF,IAA1DlY,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGoH,WAC7C3L,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGwS,uCAE9C7d,QAAQC,IAAI,yBACZye,EAAgBf,aAAe,CAAEC,4BAA6BmB,GAC9DL,EAAgBf,aAAalL,WAAY,GAC8B,IAAnE3L,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGqH,oBAA4BqM,KAMlF,IAAM1M,EAAyBhB,GAAqDvK,GAGpF,IAA+C,IAA3C4X,EAAgBJ,OAAOC,gBAA2B,CAEpD,IAAIhB,EAAYzW,EAAKqE,YAAYC,QAAQmS,eAEvBjM,IAAdiM,IACFvd,QAAQC,IAAI,kEACZsd,EAAY,CACVU,gBAAiB,EACjBC,oBAAqB,EACrBH,OAAQ,MAMZ,IAAIkB,EAAY,eAAQ1B,GAIxB,GAFAmB,EAAgBZ,kBAAoBmB,EAEhC5M,EAAyB,EAAG,CAC9BrS,QAAQC,IAAI,2BAA4BoS,GAGxCkL,EAAUU,gBAAkBV,EAAUU,iBAA8C,EAA3B5L,EACzDkL,EAAUQ,OAAS,IAAoE,IAA7DR,EAAUU,gBAAkBV,EAAUW,qBAKhEQ,EAAgBvM,SAAW,CAAEoL,YAAW0B,eAAcjB,eAAgB3L,GACtEqM,EAAgBlB,oBAAsBkB,EAAgBvM,SAASoL,UAY/D,IAPA,IAAIE,EAAkB3W,EAAKqE,YAAYC,QAAQ+G,SAK3C+K,GAAc,IAAItT,MAAOqI,UACzBiN,EAAU,EACL1f,EAAIuf,EAAwBvf,EAAIie,EAAgBnS,OAAQ9L,IAC/Die,EAAgBje,GAAG4S,QAAU,IAAIxI,KAAKsT,EAAc,MAAsBgC,GAC1EA,IAEFR,EAAgBvM,SAASsL,gBAAkBA,EAE7CiB,EAAgBJ,OAAOC,iBAAkB,EAI3C,IAAmD,IAA/CG,EAAgBJ,OAAOE,oBAAqC,CAE9D,IAAIjT,EAAY,IAAI3B,KAChBoV,EAAmClY,EAAKqE,YAAYC,QAAQC,iBAAmBvE,EAAKqE,YAAYC,QAAQC,gBAAgBC,OAAS,EAAIxE,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGxB,KAAe,KACpM,GAAyC,OAArCmV,EACoBnU,GAAgCU,EAAWyT,KAEF,IAA1DlY,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGoH,WAC3C3L,EAAKqE,YAAYC,QAAQC,gBAAgB,GAAGwS,uCAIhD7d,QAAQC,IAAI,yCAA0Cye,EAAgBZ,mBAEtEY,EAAgBf,aAAawB,gBAAkBT,EAAgBvM,SAAW7P,KAAK8c,MAAM9c,KAAKC,UAAUmc,EAAgBvM,SAASoL,YAAcjb,KAAK8c,MAAM9c,KAAKC,UAAUmc,EAAgBZ,oBACrLY,EAAgBf,aAAawB,gBAAgBjB,oBAAsBQ,EAAgBf,aAAawB,gBAAgBjB,oBAAsB,EACtIQ,EAAgBf,aAAawB,gBAAgBpB,OAASW,EAAgBf,aAAawB,gBAAgBpB,OAAS,GAC5GW,EAAgBlB,oBAAsBkB,EAAgBf,aAAawB,iBAIvET,EAAgBJ,OAAOE,qBAAsB,EAK/CG,EAAmB,eAAKD,IAIpBA,EAAgBvM,UAAYuM,EAAgBf,aAE9CU,EAAoB,eAAKK,KAGzB1e,QAAQC,IAAI,iBAAkBye,GAE9B5V,EAAQrJ,KAAK,8BAGhB,CAACqH,IAIF,6BAEIqX,EAAQrX,KACPqX,EAAQrX,KAAKqE,YAAYC,QACvB+S,EAAQrX,KAAKqE,YAAYC,QAAQX,YAAYiH,oBACrB,OAArB0M,EAA4B,kBAAC,GAAD,CAAiBxd,KAAMwd,IAAuB,yCADV,kBAAC,GAAD,MADlC,mDADrB,iEC9FRvV,gBAlDQ,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACJtG,IAAMnD,UAAS,GADX,mBAC/B4E,EAD+B,KACpBob,EADoB,KAGlCnE,EAAgB1Y,IAAM0G,WAAW/B,GAErCnH,QAAQC,IAAI,MAAOib,GAEnB,IAAMoE,EAAyB,uCAAG,WAAOxb,GAAP,mBAAAT,EAAA,6DAChCS,EAAEK,iBAGIob,EAAoB,CAExB/L,KAAM1P,EAAEC,OAAOyb,eAAexb,MAC9ByY,MAAO3Y,EAAEC,OAAO0b,gBAAgBzb,OAI5B0b,EAX0B,UAWdhd,EAXc,gDAaJU,GAAasc,EAAQH,GAbjB,cAaxB5M,EAbwB,OAc9BuI,EAAcjU,WAAW0L,GACzB3S,QAAQC,IAAI,4DAA6D0S,GACzE0M,GAAa,GAhBiB,UAiBxB,IAAIja,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAAS,QAjBnB,QAkB9ByD,EAAQrJ,KAAK,YACb4f,GAAa,GAnBiB,kDAoBhBrf,QAAQC,IAAR,MApBgB,kEAAH,sDAwB/B,OAEE,6BACE,wCACA,0BAAM+F,SAAUsZ,GACd,oCACA,2BAAOta,GAAG,mBACV,uEAEA,8BAAUA,GAAG,oBAEb,4BAAQA,GAAG,uBAAuBa,KAAK,UAAvC,UACC5B,GAAY,0BAAMe,GAAG,+BAAT,+BChCN6D,gBAxBK,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACpB,OACE,6BACE,kDACA,8DACA,yBAAK/G,MAAO,CAAEC,gBAAiB,cAC7B,kDACA,4BACE,8HACA,6BACA,yIACA,2HACA,0IACA,iRACA,6BACA,ybAGJ,4BAAQqE,QAAS,kBAAIyC,EAAQrJ,KAAK,wBAAlC,oBACA,kBAAC,GAAD,U,6FCnBC,IAAMkgB,GAASxhB,IAAOqD,EAAV,MAqHJoe,GAlHM,SAAC,GAAwB,IAAtBhf,EAAqB,EAArBA,KAAMif,EAAe,EAAfA,SAAe,EACbrd,IAAMnD,UAAU,GADH,mBACpCygB,EADoC,KAC3BC,EAD2B,OAEDvd,IAAMnD,UAAU,GAFf,mBAEpC2gB,EAFoC,KAErBC,EAFqB,KA2BrC1W,EAA8B,SAACE,GACnC,IAAIE,EAAI,IAAIC,KAAKhJ,EAAKiJ,MAIlBM,EAHOR,EAAEG,UAGQ,KAFTH,EAAEK,WAAa,GAEQ,IADxBL,EAAEO,cAETE,EAAkBD,EAAU,KAAOR,EAAEU,WAAa,IAAMV,EAAEW,aAC9D,OAAOb,EAAWW,EAAkBD,GAGtC3H,IAAM1B,WAAU,cAEb,IA6BH,OAjEyB,WACvB,IAAIof,GACa,IAAbJ,IACFI,EAActf,EAAKoW,KAAKmJ,QAAO,SAACC,EAAKzK,GAAN,OAAcyK,EAAMzK,EAAInC,OACnD,GACJuM,EAAWG,IAyDfG,GArDyB,WAMvB,IAAuB,IAAnBL,EAAsB,CACxB,GAAyB,IAArBpf,EAAKoW,KAAK1L,OAAqC,YAArB2U,EAAiB,GAG/C,IAAIK,EATN,SAA6BC,EAAKC,GAChC,IAAIC,GAAQF,EAAItO,UAAYuO,EAAIvO,WAAa,IAE7C,OADAwO,GAAQ,GACDpK,KAAKqK,IAAIrK,KAAKC,MAAMmK,IAMlBE,CAAoB,IAAI/W,KAAKhJ,EAAKiJ,MAAO,IAAID,KAAKhJ,EAAKoW,KAAK,GAAGnN,OACxEoW,EAAiBK,IA2CrBM,GAEiB,oBAAbf,EAEA,2BACE,8BAAOtW,IAAP,KAAwCuW,EAAxC,UAMJ,yBAAK/d,MAAO,CAAEC,gBAAiB,aAAemE,UAAU,2BACtD,wBAAIpE,MAAO,CAAEyG,QAAS,SAAtB,kBACA,2BAAIe,GAA4B,IAEhC,yBAAKxH,MAAO,IACV,kBAAC4d,GAAD,CAAQ5d,MAAO,CAAE4J,UAAW,WAAamU,EAAzC,iBAAgEE,EAAhE,aACA,kBAAC,KAAD,CAAqBpX,OAAQ,IAAKmL,MAAM,OAEtC,kBAAC,KAAD,CAAU9R,OAAQ,CAAE2N,IAAK,GAAIE,KAAM,IAAMlP,KA5ClB,SAACigB,GAI9B,IAHA,IAAI7J,EAAO6J,EAAG7J,KACV8J,EAAe,GACfC,EAAS/J,EAAK1L,OACT9L,EAAIuhB,EAAS,EAAGvhB,GAAK,EAAGA,IAAK,CACpC,IAAImW,EAAMqB,EAAKxX,GACX8S,EAAU,CACZ0O,UAAU,OAAD,OAASD,EAASvhB,GAC3BgU,KAAMmC,EAAInC,KACVoD,UAAWjB,EAAIiB,UAEfqK,cAAqB,IAANzhB,EAAU,EAAI,EAC7B0hB,eAAgBvL,EAAIsL,cAAgBtL,EAAIsL,cAAgB,MAAQ,MAGlEH,EAAarhB,KAAK6S,GAGpB,OAAOwO,EA0B8CK,CAAuBvgB,IAEpE,kBAAC,KAAD,CAAOwgB,QAAQ,cACf,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOpd,MAAM,OAAOqd,OAAQ,GAAI5N,SAAS,gBAE3C,kBAAC,KAAD,MAGA,kBAAC,KAAD,CAAK2N,QAAQ,OAAOE,KAAK,WACvB,kBAAC,KAAD,CAAWF,QAAQ,OAAO3N,SAAS,SAErC,kBAAC,KAAD,CAAK2N,QAAQ,gBAAgBE,KAAK,aAChC,kBAAC,KAAD,CAAWF,QAAQ,iBAAiB3N,SAAS,eAOrD,sCACC7S,EAAKoW,KAAKuK,MAAM,GAAGC,UAAUviB,KAAI,SAAC0W,EAAKzW,GAAN,OAAgB,kBAACygB,GAAD,CAAQxgB,IAAKD,GAAb,OAAyBA,EAAQ,EAAjC,KAAsCyW,EAAIiB,WAAa,IAAMjB,EAAIiB,UAAY,UCnGtH6K,GAbO,SAAC,GAAmB,IAAjBlE,EAAgB,EAAhBA,UAEvB,OADAvd,QAAQC,IAAI,kBAAmBsd,GAG7B,6BACE,8CACA,sCAAYA,EAAUQ,OAAtB,KACA,qDAA2BR,EAAUU,iBACrC,oDAA0BV,EAAUW,uBCU7B3U,GAA8B,SAACC,GAAuD,IAAzCC,EAAwC,wDAAtBC,EAAsB,wDAC5FC,EAAI,IAAIC,KAAKJ,GACbK,EAAOF,EAAEG,UACTC,EAAQJ,EAAEK,WAAa,EACvBC,EAAON,EAAEO,cACTC,EAAUN,EAAO,IAAME,EAEvBK,GADJD,GAAWT,EAAY,IAAMO,EAAQ,IACL,KAAON,EAAEU,WAAa,IAAMV,EAAEW,aAC9D,OAAOb,EAAWW,EAAkBD,GAmKvBtB,gBAhJe,SAAC,GAMxB,IALL6Y,EAKI,EALJA,iBACAC,EAII,EAJJA,qBACAlX,EAGI,EAHJA,YACAmX,EAEI,EAFJA,oBAIMrJ,GAFF,EADJzP,QAGsBtG,IAAM0G,WAAW/B,GAAjCoR,aAGNvY,QAAQC,IAAI,OAAO0hB,EAAqB/N,SAAS,KACjD,IAAIiO,ExBmBiC,SAACC,EAAQC,EAAgCH,EAAqBI,GAGnG,MAAuC,aAAnCD,GAAiD/hB,QAAQC,IAAI,KAAa2hB,EAAoBhO,SAASlJ,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQkX,MACzF,iBAAnCC,GAAqD/hB,QAAQC,IAAI,KAAa2hB,EAAoBtM,iBAAiB5K,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQkX,MAC1G,WAAnCC,GAA+C/hB,QAAQC,IAAI,KAAa+hB,EAAkBtX,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQkX,WACtH9hB,QAAQC,IAAI,uCwBzBJgiB,CAAwBN,EAAqB7N,WAAY6N,EAAqB/N,SAAUgO,EAAoBrJ,GAC3HvY,QAAQC,IAAI,aAAc4hB,GAK1B,IAAMK,EAA8B1f,IAAM+K,OAAO,MAKjD,GAJA/K,IAAM1B,WAAU,WACVohB,EAA4B9W,UAAS8W,EAA4B9W,QAAQ+W,YAAc,OAC1F,CAACT,IAEqB,OAArBA,EAA2B,OAAO,KAoEtC,OACE,yBACEvb,UAAU,0BACVpE,MAAO,CAAEC,gBAAiB,SAE1B,gEACA,qCAAW6f,EAAShW,MACpB,mDAjCkC,SAACpB,EAAaD,GAClD,IAAI4X,EAAS3X,EAAYC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAQJ,KACjD,OAAQ4X,EAAO5O,KAAO,UAAYjK,GAA4B6Y,EAAOvY,MAAM,GAAO,GAAQ,IA+B/DwY,CAA8B5X,EAAakX,EAAqBlX,YAAYiH,sBACrG,kDACCgQ,EAAiBziB,KAAI,SAAC8X,EAAU7X,GAAX,OAAqB,kBAAC,GAAD,CAAcC,IAAKD,EAAO0B,KAAMmW,EAAU8I,SAAS,uBAG9F,yBACE9d,MAAO,CAAEyG,QAAS,OAAQ8Z,SAAU,UAAWC,UAAW,QAC1D/T,IAAK0T,GAEL,kBAAC,KAAD,CAAqBtZ,OAAQ,IAAK4Z,SAAoC,GAA1Bd,EAAiBpW,QAE3D,kBAAC,KAAD,CAAUrJ,OAAQ,CAAE2N,IAAK,GAAIE,KAAM,GAAI2S,OAAQ,IAAM7hB,KAnF7B,SAAC+X,GAmB/B,IAjBA,IAAM+J,EAAkB,SAAC3L,GACvB,OAAOA,EAASC,KAAKmJ,QAAO,SAACC,EAAKzK,GAAN,OAAcyK,EAAMzK,EAAInC,OAAM,IAEtDmP,EAA8B,SAAC5L,GACnC,IAAKA,EAASC,MAAiC,IAAzBD,EAASC,KAAK1L,OAAc,OAAO,EAMzD,OALA,SAA6BiV,EAAKC,GAChC,IAAIC,GAAQF,EAAItO,UAAYuO,EAAIvO,WAAa,IAE7C,OADAwO,GAAQ,GACDpK,KAAKqK,IAAIrK,KAAKC,MAAMmK,IAEtBE,CAAoB,IAAI/W,KAAKmN,EAASlN,MAAO,IAAID,KAAKmN,EAASC,KAAK,GAAGnN,QAG5EiX,EAAe,GAIVthB,EAHemZ,EAAUrN,OAGD,EAAG9L,GAAK,EAAGA,IAAK,CAC/C,IAAIuX,EAAW4B,EAAUnZ,GACrBojB,EAAuB,CACzBC,MAAOtZ,GAA4BwN,EAASlN,MAAM,GAClDA,KAAM,IAAID,KAAKmN,EAASlN,MAAMC,UAC9BqN,eAAiBJ,EAASI,eAAiB,IAAMJ,EAASI,eAAiB,IAAM,GACjF2L,aAAc,QACdC,gBAAiB,gBACjBC,cAAe,SACfC,0BAA4BN,EAA4B5L,GAAY4L,EAA4B5L,GAAY,IAAM,GAClHmM,YAAaR,EAAgB3L,GAAY,EAAI2L,EAAgB3L,GAAY,MAE3E+J,EAAarhB,KAAKmjB,GAGpB,OAAO9B,EAiD0DqC,CAAwBzB,IAGjF,kBAAC,KAAD,CAAON,QAAQ,QACb,kBAAC,KAAD,CAAOpd,MAAM,qCAAqCyP,SAAS,YAG7D,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOzP,MAAM,OAAOqd,OAAQ,GAAI5N,SAAS,gBAE3C,kBAAC,KAAD,MAGA,kBAAC,KAAD,CAAK2N,QAAQ,cAAcE,KAAK,WAC9B,kBAAC,KAAD,CAAWF,QAAQ,cAAc3N,SAAS,QAE1C,kBAAC,KAAD,CAAW2N,QAAQ,iBAAiB3N,SAAS,iBAC7C,kBAAC,KAAD,CAAW2N,QAAQ,4BAA4B3N,SAAS,eAahE,kBAAC,GAAD,CAAe8J,UAAWoE,EAAqBpE,gB,oMCnLrD,IAAMpD,GAAQhc,YAAOqS,KAAK4J,KAAZjc,CAAH,MAOLilB,GAA4B,SAAC3Y,GAEjC,GAAoB,OAAhBA,QAAwC6G,IAAhB7G,GAA6BA,EAAYa,OAAS,EAAG,OAAO,KAMxF,IAJA,IAAIwV,EAAe,GAIVthB,EAHSiL,EAAYa,OAGH,EAAG9L,GAAK,EAAGA,IAAK,CACzC,IAAImL,EAAMF,EAAYjL,GAClB6jB,EAAkB,CACpBxZ,KAAM,CACJyZ,SAAU/Z,GAA4BoB,EAAId,MAC1CI,KAAM,IAAIL,KAAKe,EAAId,MAAMK,cAAgB,GACzCqZ,KAAMha,GAA4BoB,EAAId,MAAM,GAAM,IAEpD2J,KAAM7I,EAAI6I,KACViJ,MAAO9R,EAAI8R,OAEbqE,EAAarhB,KAAK4jB,GAGpB,OADArjB,QAAQC,IAAI,oBAAqB6gB,GAC1BA,GAIH0C,GAAwB,SAAChlB,GAAW,IAEtCilB,EACEjlB,EADFilB,EAAM1P,GACJvV,EADCklB,EACDllB,EADIuV,OAAe/P,GACnBxF,EADWoK,OACXpK,EADmBwF,OAIvB,OACE,2BAGE,0BAAMyf,EAAGA,EAAI1P,EAAQ,EAAG2P,EAAG,IAAKpC,KAAK,UAAUqC,WAAW,SAASC,iBAAiB,UAEjF5f,KAQH6f,GAAyB,SAACrlB,GAAW,IAEvCilB,EACEjlB,EADFilB,EAAM1P,GACJvV,EADCklB,EACDllB,EADIuV,OAAe/P,GACnBxF,EADWoK,OACXpK,EADmBwF,OAIvB,OACE,2BAGE,0BAAMyf,EAAGA,EAAI1P,EAAQ,EAAG2P,EAAG,IAAKpC,KAAK,UAAUqC,WAAW,SAASC,iBAAiB,UAEjF5f,KAMH8f,GAAgB,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,QAAqB,EAAZC,MACxC,OAAIF,GACF/jB,QAAQC,IAAI,WAAY+jB,GAEtB,yBAAKjiB,MAAO,CAAEC,gBAAiB,YAAa0J,QAAS,OAAQmF,SAAU,UACrE,kBAAC8O,GAAD,KAASqE,EAAQ,GAAGA,QAAQna,KAAK0Z,MACjC,kBAAC5D,GAAD,KAASqE,EAAQ,GAAGA,QAAQvH,MAA5B,OAKC,MA8FMyH,GA3FY,SAAC,GAAqB,IAAnBzZ,EAAkB,EAAlBA,YAEvByX,EAA8B1f,IAAM+K,OAAO,MAKhD,OAJD/K,IAAM1B,WAAU,WACVohB,EAA4B9W,UAAS8W,EAA4B9W,QAAQ+W,YAAc,OAC1F,CAAC1X,IAGD,yBACEtE,UAAU,0BACVpE,MAAO,CAAEC,gBAAiB,WAE1B,2CACEyI,GAAeA,EAAYa,OAAS,EACpC,oCACE,yBACEvJ,MAAO,CAAEyG,QAAS,OAAQ8Z,SAAU,UAAWC,UAAW,QAC1D/T,IAAK0T,GAEL,kBAAC,KAAD,CAAqBtZ,OAAQ,IAAK4Z,SAA+B,GAArB/X,EAAYa,QAEtD,kBAAC,KAAD,CAAUrJ,OAAQ,CAAE2N,IAAK,GAAIE,KAAM,GAAI2S,OAAQ,IAAM7hB,KAAMwiB,GAA0B3Y,IASnF,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOzG,MAAM,OAAOqd,OAAQ,GAAI5N,SAAS,gBAE3C,kBAAC,KAAD,CAAS0Q,QAAS,kBAAC,GAAD,QAElB,kBAAC,KAAD,CAAK/C,QAAQ,OAAOE,KAAK,WAEvB,kBAAC,KAAD,CAAWF,QAAQ,OAAO3N,SAAS,QAGnC,kBAAC,KAAD,CAAW2N,QAAQ,gBAAgB3N,SAAS,SAAS0Q,QAASX,KAC9D,kBAAC,KAAD,CAAWpC,QAAQ,YAAY3N,SAAS,SAAS0Q,QAASN,KAGxDpZ,EAAYxL,KAAI,SAACmlB,EAAOllB,GAAR,OACd,kBAAC,KAAD,CAAMC,IAAKD,EAAOoiB,KAAM7W,EAAYa,SAAWpM,EAAQ,EAAI,UAAY,mBAYnF,kBAACkR,GAAA,EAAD,CAAWjK,UAAU,MAAMpE,MAAO,CAAEE,OAAQ,oBAAqBoO,WAAY,gBAE3E,kBAACG,GAAA,EAAD,KACE,kBAACJ,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAS,IACTzK,UAAU,sDAHZ,2BAQA,kBAACiK,GAAA,EAAUW,SAAX,CAAoBH,SAAS,KAC3B,kBAAC,GAAD,CAAO7O,MAAO,CAAEsiB,UAAW,QAASrT,UAAW,OAAQhP,gBAAiB,UAErEyI,EAAYxL,KAAI,SAAC0L,EAAKzL,GAErB,OAAQ,yBAAKC,IAAKD,GAChB,kBAACygB,GAAD,KAAUpW,GAA4BoB,EAAId,MAAM,GAAM,IACtD,kBAAC8V,GAAD,CAAQ5d,MAAO,CAAE0U,YAAa,SAAW9L,EAAI8R,OAAS9R,EAAI8R,OACzD9R,EAAI8R,OAAS,sCAS1B,wDCrHK6H,GAhDC,WAEd,IAAInG,EAAU3b,IAAM0G,WAAW+G,GAW/B,OAVAzN,IAAM1B,WAAU,WAGTqd,EAAQrX,OAIZ,CAACqX,IAGCA,EAAQrX,KAGX,6BACE,6CAGsC,MAApCqX,EAAQrX,KAAKqE,YAAYC,SACqC,GAA3D+S,EAAQrX,KAAKqE,YAAYC,QAAQC,gBAAgBC,OAClD,kBAAC,GAAD,CAAc1K,KAAMud,EAAQrX,KAAKqE,YAAYC,QAAQC,gBAAgB,KAErE8S,EAAQrX,KAAKqE,YAAYrC,SACxBqV,EAAQrX,KAAKqE,YAAYrC,QAAQwC,OAAS,GAC1C6S,EAAQrX,KAAKqE,YAAYrC,QAAQ,GAAGuC,gBAAgBC,OAAS,GAC7D,kBAAC,GAAD,CAAc1K,KAAMud,EAAQrX,KAAKqE,YAAYrC,QAAQ,GAAGuC,gBAAgB,KAIxC,MAApC8S,EAAQrX,KAAKqE,YAAYC,SACxB,kBAACmZ,GAAD,CACE7C,iBAAkBvD,EAAQrX,KAAKqE,YAAYC,QAAQC,gBAAgBC,OAAS,EAAI6S,EAAQrX,KAAKqE,YAAYC,QAAQC,gBAAkB,KAEnIsW,qBAAsBxD,EAAQrX,KAAKqE,YAAYC,QAC/CX,YAAa0T,EAAQrX,KAAK2D,YAC5BmX,oBAAqBzD,EAAQrX,KAAKqE,cAKpC,kBAAC,GAAD,CAAoBV,YAAa0T,EAAQrX,KAAK2D,eA7BrB,kEC4ChB5B,gBArDA,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACXoS,EAAgB1Y,IAAM0G,WAAW/B,GAE/Bqd,EAAmB,uCAAG,WAAO1gB,GAAP,mBAAAT,EAAA,6DAC1BS,EAAEK,iBACIob,EAAoB,CACxBjX,MAAOxE,EAAEC,OAAO0gB,YAAYzgB,MAC5B0gB,SAAU5gB,EAAEC,OAAO4gB,eAAe3gB,MAClC6H,KAAM/H,EAAEC,OAAO6gB,eAAe5gB,OAE1B0b,EAPoB,UAORhd,EAPQ,yBAQGU,GAAasc,EAAQH,GARxB,OAQpBsF,EARoB,OAS1B7kB,QAAQC,IAAI,mBAAoB4kB,GAChChgB,SAASK,cAAc,iBAAiBH,UAAY,WAAa8f,EAAezjB,QAC5EyjB,EAAeC,UACjB5J,EAAcjU,WAAW4d,EAAejkB,KAAKsG,SAG7C4B,EAAQrJ,KAAK,aAfW,4CAAH,sDA4BzB,OAEE,6BACE,wCACA,0BAAMuG,SAAUwe,GACd,qCACA,2BAAOxf,GAAG,gBACV,wCAEA,2BAAOA,GAAG,mBACV,iDACA,2BAAOA,GAAG,mBAIV,4BAAQA,GAAG,mBAAmBa,KAAK,UAAnC,UACA,uBAAGb,GAAG,sBCAC6D,gBAtDD,SAAC,GAAe,IAAdC,EAAa,EAAbA,QAEVG,EAAcC,qBAAWC,GAIvB4b,EAAwB,uCAAG,WAAOjhB,GAAP,mBAAAT,EAAA,6DAC/BS,EAAEK,iBAEIob,EAAoB,CACxBjX,MAAOxE,EAAEC,OAAOihB,OAAOhhB,MACvB0gB,SAAU5gB,EAAEC,OAAOkhB,UAAUjhB,OAGzB0b,EARyB,UAQbhd,EARa,4CASFU,GAAasc,EAAQH,GATnB,OASzBsF,EATyB,OAY/B5b,EAAYhC,WAAW4d,GAQnBhgB,SAASK,cAAc,mBAAkBL,SAASK,cAAc,iBAAiBH,UAAY,WAAa8f,EAAezjB,SAEzHyjB,EAAevc,QACjBzD,SAASK,cAAc,WAAWlB,MAAQ,GAC1Ca,SAASK,cAAc,cAAclB,MAAQ,GAC7C8E,EAAQrJ,KAAK,aAzBgB,4CAAH,sDAiC9B,OACE,6BACE,uCACA,0BAAMuG,SAAU+e,GACd,qCACA,2BAAOlf,KAAK,QAAQb,GAAG,SAASkgB,aAAa,+BAC7C,wCACA,2BAAOlgB,GAAG,YAAYa,KAAK,aAC3B,4BAAQb,GAAG,2BAA2Ba,KAAK,UAA3C,UACA,uBAAGb,GAAG,sB,8OChCd,IAAMmV,GAAQhc,YAAOqS,KAAK4J,KAAZjc,CAAH,MA+GIgnB,GAxGK,SAAC,GAAgB,EAAdC,QAAe,IAE9BC,EAA6B,uCAAG,sBAAAhiB,EAAA,sDAKpCrD,QAAQC,IAAI,uBAAwB2C,GACpC6C,OAAOuC,SAASC,QAAQrF,GANY,2CAAH,qDAsBnC,OACE,yBAAKb,MAAO,CAAEujB,MAAO,SAGnB,yBAAKvjB,MAAO,CAAE4J,UAAW,WACvB,2GAAoF,6BAAM,mFAI5F,yBAAK5J,MAAO,CAAEyG,QAAS,OAAQG,SAAU,MAAOD,eAAgB,iBAE9D,4BAAQ3G,MAAO,CACbsN,SAAU,MACV7G,QAAS,OACTE,eAAgB,SAChBD,WAAY,SACZzG,gBAAiB,QACjB8O,aAAc,OACdI,UAAW,oCAEV7K,QAASgf,GACV,yBAAK5mB,IAAK8mB,KAAOxjB,MAAO,CAAEgS,MAAO,OAAQnL,OAAQ,OAAQ3G,OAAQ,MAAOujB,YAAa,QAAU7mB,IAAI,SACnG,sDAGV,4BAAQoD,MAAO,CACLsN,SAAU,MACV7G,QAAS,OACTE,eAAgB,SAChBD,WAAY,SACZzG,gBAAiB,UACjB8O,aAAc,OAEdI,UAAW,oCAEV7K,QAzC+B,WACtCrG,QAAQC,IAAI,iCAAkC4C,GAC9C4C,OAAOuC,SAASC,QAAQpF,KAwCjB,yBAAKpE,IAAKgnB,KAAO1jB,MAAO,CAAEgS,MAAO,OAAQnL,OAAQ,OAAQ3G,OAAQ,MAAOujB,YAAa,QAAU7mB,IAAI,SACpG,yDAMJ,6BACA,6BACE,wEACA,kBAACyR,GAAA,EAAD,CAAWjK,UAAU,OACnB,kBAACqK,GAAA,EAAD,KACE,kBAACJ,GAAA,EAAUK,OAAX,CAAkBC,GAAIF,KAAKG,OAAQC,SAAS,IAAIzK,UAAU,sDAA1D,WAGA,kBAACiK,GAAA,EAAUW,SAAX,CAAoBH,SAAS,KAC3B,kBAAC,GAAD,KAGE,kBAAC,GAAD,SAIN,kBAACJ,GAAA,EAAD,KACE,kBAACJ,GAAA,EAAUK,OAAX,CAAkBC,GAAIF,KAAKG,OAAQC,SAAS,IAAIzK,UAAU,iEAA1D,UAGA,kBAACiK,GAAA,EAAUW,SAAX,CAAoBH,SAAS,KAC3B,kBAAC,GAAD,KACE,kBAAC,GAAD,WAOV,gCCzHS8U,GALKljB,IAAM4E,cAAc,CACtC4N,KAAM,KACN2Q,WAFsC,e,23HCYxC,IAAMxL,GAAQhc,YAAOqS,KAAK4J,KAAZjc,CAAH,MAQEynB,GAAOznB,IAAOC,IAAV,MAqDXynB,GAAW1nB,IAAOC,IAAV,MAsBR0nB,GAAQ3nB,IAAOC,IAAV,MAmBE2N,GAAW5N,IAAOC,IAAV,KAEM4N,KA8BLC,MAUT,iBAAM,SAKF,SAAAzN,GAAK,OAAIA,EAAM0N,WAClB,iBAAM,OAkBPC,GAAgBhO,YAAO4N,GAAP5N,CAAH,MA0OX4nB,GA1NH,SAAC,GAAyC,IAIhDC,EAJSrQ,EAAsC,EAAtCA,IAAKlC,EAAiC,EAAjCA,SAAUwS,EAAuB,EAAvBA,iBAAuB,GAChCzjB,IAAM+K,SACI/K,IAAM0G,WAAWwc,KAAtC1Q,EAF2C,EAE3CA,KAAM2Q,EAFqC,EAErCA,WACRnS,EAAkFmC,EAAlFnC,KAAM+C,EAA4EZ,EAA5EY,iBAA4BK,GAAgDjB,EAA1DuQ,SAA0DvQ,EAAhDiB,WAAWF,EAAqCf,EAArCe,oBAAqBG,EAAgBlB,EAAhBkB,WAEpE7B,EAAK0D,mBAAqB1D,EAAKmR,gBACjCH,EAAqC3P,KAAKC,MAAMC,EAAmB,IAAMvB,EAAKmR,cAAc3S,OAG9F,IAAI4S,OAA2B9U,IAATkC,EAAsB,CAAC,OAAQ,YAAc,CAAC,WAAY,QAChFC,IAEA,IA4DM4S,EAAoB,SAAC7K,EAAMnP,GAG/B2I,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAAG+H,GAAQnP,EAEhEsZ,EAAW,eAAK3Q,KAoBlB,OAEE,kBAACxE,GAAA,EAAD,CAAMzO,MAAO,CAAEC,gBAAiB,cAAesO,OAAQ,OAAQ6C,aAAc,SAC3E,kBAAC/C,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAU6C,EAEVtN,UAAU,gDACVpE,MAAO,CACLsO,WAAY,SACZpO,OAAQ,oBACR6O,aAAc,gBACdwV,aAAc,wBAMhBthB,GAAE,kBAAaihB,EAAb,cAAmCxS,EAAnC,MAEFpN,QAAS,kBAAMiJ,GAAwBzK,SAAS4K,eAAT,kBAAmCwW,EAAnC,cAAyDxS,EAAzD,OAAwE,OAI/G,yBAAK1R,MAAO,CAAEyG,QAAS,OAAQG,SAAU,MAAOD,eAAgB,eAAgBD,WAAY,SAAUiD,QAAS,QAE7G,wBAAI3J,MAAO,CAAEE,OAAQ,IAAKyJ,QAAS,IAAKC,UAAW,SAAUoI,MAAO,QAApE,OAAkFN,EAAlF,kBACA,0BAAM1R,MAAO,CAAEM,MAAO,QAASgN,SAAU,OAAQkX,KAAM,OAAQxS,MAAO,QAAUP,GAAe+C,EAAmB,MAAMyP,EAAmC,IAA3J,QACA,0BAAMjkB,MAAO,CAAEM,MAAO,OAAQgN,SAAU,OAAQkX,KAAM,OAAQxS,MAAO,QAAU2C,EAA/E,SAIJ,kBAACtG,GAAA,EAAUW,SAAX,CAAoBH,SAAU6C,GAC5B,kBAAC,GAAD,CAAO1R,MAAO,CAAEiP,UAAW,OAAQhP,gBAAiB,SAAU0J,QAAS,4BAErE,kBAACka,GAAD,KACE,8BAKA,kBAACC,GAAD,KACE,8BACI7Q,EAAK0D,mBACL,6BACE,uBAAG3W,MAAO,CAAE4J,UAAW,gBAAsB2F,IAATkC,EAAqB,OAAS,YAClE,yBAAKzR,MAAO,CAAE4J,UAAW,WAWvB,kBAAC,GAAD,CAAcc,SAAU,CAAC,EAAG,EAAG,SAAC4N,GAAD,OAAOgM,EAAkB,OAAQhM,IAAI7G,EAAM,GAAI,GAAG,OAOtFwB,EAAK0D,mBACJ,yBAAK3W,MAAO,CAAE4J,UAAW,WACvB,kBAAC,GAAD,CAAcc,SAAU,CAAC,EAAG,EAjFjB,SAACJ,GAC5B2I,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAAG8C,iBAAmBlK,EAE3EsZ,EAAW,eAAK3Q,KA8EuDuB,EAAkB,IAAK,cAAc,KAE5F,uBAAGxU,MAAO,CAAE4J,UAAW,WAAvB,MACA,kBAAC,GAAD,CAAcc,SAAU,CAAC,EAAG,EA9EL,SAACJ,GAExC2I,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAAG8C,iBAAmBF,KAAKC,MAAMjK,EAAW2I,EAAKmR,cAAc3S,KAAO,KAC3HmS,EAAW,eAAK3Q,KA2EmEgR,EAAoC,OAAO,OAIpH,kBAACF,GAAD,KACE,oEACA,8BAAU5f,SAxJS,SAAC,GAA2B,IACvDsgB,EADsD,EAAxBziB,OAAUC,MAExCwiB,GAAQA,EAAKlb,OAAS,IAAKkb,EAAOA,EAAKC,OAAO,GAAGC,cAAgBF,EAAKjF,MAAM,IAChFvM,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAAGmD,UAAY4P,EACpEb,EAAW,eAAK3Q,KAoJ0ChR,MAAO4S,KAEvD,4BAAQ7U,MAAO,CAAEyG,QAAS,QAAUnC,QAnJrB,WACzB+f,EAAiB,CAACA,EAAe,GAAIA,EAAe,IACpDpR,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAAG2S,EAAe,IAAMpR,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAAG2S,EAAe,IACpJpR,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAAG2S,EAAe,SAAM9U,EAC7EqU,EAAW,eAAK3Q,WAgJM1D,IAATkC,EAAqB,iCAAmC,mCAO7D,kBAACqS,GAAD,KACE,6BACE,uBAAG9jB,MAAO,CAAE4J,UAAW,WAAvB,SACA,yBAAK5J,MAAO,CAAE4J,UAAW,WAQvB,kBAAC,GAAD,CAAcc,SAAU,CAAC,EAAG,GAAI,SAAC4N,GAAD,OAAOgM,EAAkB,sBAAuBhM,IAAI3D,EAAqB,GAAI,UAAW,OAI5H,kBAACoP,GAAD,KACE,gEACA,8BAAU5f,SAhKC,SAAC,GAA2B,IAC/CsgB,EAD8C,EAAxBziB,OAAUC,MAEhCwiB,GAAQA,EAAKlb,OAAS,IAAKkb,EAAOA,EAAKC,OAAO,GAAGC,cAAgBF,EAAKjF,MAAM,IAChFvM,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAAGoD,WAAa2P,EACrEb,EAAW,eAAK3Q,KA4JkChR,MAAO6S,MAIjD,yBAAK1Q,UAAU,wDACb,4BAAQA,UAAU,+CAA+CE,QA9JxD,WACnB,IAAIsgB,EAAa3R,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvD,EAAW,GAChEmT,EAAM,eAAQD,GACpB3R,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAKvX,KAAKmnB,GAC/CjB,EAAW,eAAK3Q,MA0JN,aAAkG,6BAAlG,aACA,4BAAQ7O,UAAU,+CAA+CE,QAxJ3D,WAChB2O,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAK6P,OAAOpT,EAAW,EAAG,GAE/D,IAAMqT,EAAU9R,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAC/C+P,EAAO,YAAOD,GACpB9R,EAAK2D,UAAUsN,EAAmB,GAAGjP,KAAO+P,EAE5CpB,EAAW,eAAK3Q,MAiJN,UAA4F,6BAA5F,mBCnZRgS,GAA2B,SAACxT,EAAK+C,EAAkBG,GASvD,MARU,CACRlD,OACA+C,mBACA2P,cAAS5U,EACTsF,eAAWtF,EACXoF,sBACAG,gBAAYvF,IAIV2V,GAAgC,SAACpb,GAAgD,IAA1C0K,EAAyC,wDAAf2Q,EAAe,uCAcpF,OAZI3Q,EACS,CACT1K,OACAmL,KAAM,CAACgQ,GAAyB3Q,KAAKC,MAAM,IAAS4Q,GAAY,GAAI,MAI3D,CACTrb,OACAmL,KAAM,CAACgQ,GAAyB,QAAI1V,EAAU,O,icCb7C,IAAM6V,GAAYhpB,IAAOC,IAAV,MAShB+b,GAAQhc,YAAOqS,KAAK4J,KAAZjc,CAAH,MAyJIipB,GAhJE,SAAC,GAA4B,IAA1BrQ,EAAyB,EAAzBA,SAAUtD,EAAe,EAAfA,SACtB4T,EAAc7kB,IAAM+K,SADiB,EAEd/K,IAAM0G,WAAWwc,IAAtC1Q,EAFmC,EAEnCA,KAAM2Q,EAF6B,EAE7BA,WAIR9Z,EAAekL,EAAflL,KAAMmL,EAASD,EAATC,KACZvD,IAIA,IAkBM6T,EAAe,WACnB,IAAIV,EAC0BA,EAA1B5R,EAAK0D,kBAA8BsO,GAAyB3Q,KAAKC,MAAM,IAAWtB,EAAKmR,cAAc3S,MAAO,GAAI,IACpGwT,GAAyB,QAAI1V,EAAW,IACxD0D,EAAK2D,UAAUlF,EAAW,GAAGuD,KAAKvX,KAAKmnB,GACvCjB,EAAW,eAAK3Q,KASlB,OAEE,kBAACxE,GAAA,EAAD,CAAMzO,MAAO,CAAEC,gBAAiB,cAAesO,OAAQ,OAAQ6C,aAAc,SAC3E,kBAAC/C,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAU6C,EAEVtN,UAAU,gDACVpE,MAAO,CACLsO,WAAY,SACZpO,OAAQ,oBAIR6O,aAAc,gBACdwV,aAAc,wBAEhB9X,IAAK6Y,EACLhhB,QAAS,kBAAMiJ,GAAwB+X,EAAYjc,QAAS,OAI5D,wBAAIrJ,MAAO,CAAE4J,UAAW,WAAxB,YAA8C8H,EAA9C,mBAGF,kBAACrD,GAAA,EAAUW,SAAX,CAAoBH,SAAU6C,GAC5B,kBAAC,GAAD,CAAO1R,MAAO,CAAEiP,UAAW,OAAQhP,gBAAiB,SAAU0J,QAAS,4BACrE,kBAACyb,GAAD,KAEE,oCACA,2BAAOjhB,SApCU,SAACpC,GAC1B9D,QAAQC,IAAI6D,EAAEC,OAAOC,OACrBgR,EAAK2D,UAAUlF,EAAW,GAAG5H,KAAO/H,EAAEC,OAAOC,MAC7C2hB,EAAW,eAAK3Q,KAiC6BnP,KAAK,OAAOI,YAAY,iBAAiBjC,MAAO6H,KAKrF,kBAACuE,GAAA,EAAD,CACEjK,UAAU,MACVpE,MAAO,CAAEsO,WAAY,cAAepO,OAAQ,aAI3C+U,EAAK/X,KAAI,SAAC0W,EAAKzW,GAAN,OAAgB,kBAAC,GAAD,CAAKC,IAAKD,EAAOuU,SAAUvU,EAAOyW,IAAKA,EAAKsQ,iBAAkBxS,OAGxF,kBAACjD,GAAA,EAAD,CAAMzO,MAAO,CAAEC,gBAAiB,cAAesO,OAAQ,OAAQ6C,aAAc,SAC3E,kBAAC/C,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAUoG,EAAK1L,OAAS,EAExBnF,UAAU,gDACVpE,MAAO,CACLsO,WAAY,SACZpO,OAAQ,oBACR6O,aAAc,QAMhBzK,QAAO,sBAAE,sBAAAhD,EAAA,6DACPikB,IADO,SAED,IAAIliB,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAAS,OAF1C,OAGPiK,GAAwBzK,SAAS4K,eAAT,kBAAmCgE,EAAnC,cAAiDuD,EAAK1L,OAAtD,OAAmE,KAHpF,4CAQT,yBAAKvJ,MAAO,CAAEyG,QAAS,OAAQG,SAAU,MAAOD,eAAgB,eAAgBD,WAAY,SAAUiD,QAAS,QAE7G,wBAAI3J,MAAO,CAAEE,OAAQ,IAAKyJ,QAAS,IAAKC,UAAW,SAAUoI,MAAO,QAApE,oBAkBR,yBAAK5N,UAAU,wDACb,4BAAQA,UAAU,+CAA+CE,QAxHnD,WACxB,IAAIkhB,EAAkBvS,EAAK2D,UAAUlF,EAAW,GAE1C+T,EAAcllB,KAAK8c,MAAM9c,KAAKC,UAAUglB,IAC9CvS,EAAK2D,UAAUlZ,KAAK+nB,GACpB7B,EAAW,eAAK3Q,MAmHN,aAAuG,6BAAvG,kBACA,4BAAQ7O,UAAU,+CAA+CE,QAjHtD,WACrB2O,EAAK2D,UAAUkO,OAAOpT,EAAW,EAAG,GAGpC,IAAK,IAAIjU,EAAI,EAAGA,EAAIwV,EAAK7C,SAAS7G,OAAQ9L,IACpCwV,EAAK7C,SAAS3S,GAAG2X,eAAiBnC,EAAK2D,UAAUrN,SAAQ0J,EAAK7C,SAAS3S,GAAG2X,eAAiBnC,EAAK2D,UAAUrN,QAEhHqa,EAAW,eAAK3Q,MA0GN,UAAiG,6BAAjG,wB,8ICvJd,IAAMyS,GAAatpB,IAAOC,IAAV,MAgDDspB,GA3CG,SAAC,GAAmB,IAAjB/O,EAAgB,EAAhBA,UAAgB,EAGNnW,IAAM0G,WAAWwc,IAAtC1Q,EAH2B,EAG3BA,KAAM2Q,EAHqB,EAGrBA,WAed,OACE,kBAAC8B,GAAD,KAGE,kBAACrX,GAAA,EAAD,CACEjK,UAAU,MACVpE,MAAO,CAAEsO,WAAY,cAAepO,OAAQ,aAK3C0W,EAAU1Z,KAAI,SAAC4hB,EAAI3hB,GAAL,OAAgB,kBAAC,GAAD,CAAU6X,SAAU8J,EAAI1hB,IAAKD,EAAOuU,SAAUvU,QAM/E,kBAACioB,GAAD,KACE,4BAAQ9gB,QA/BY,WACxBrG,QAAQC,IAAI,2BAEZ+U,EAAKwS,YAAYxS,EAAK0D,kBAAmB1D,EAAK0D,kBAAoB1D,EAAKmR,cAAc3S,UAAOlC,GAE5FqU,EAAW,eAAK3Q,MA0BZ,uB,uIC3CD,IAAM2S,GAAYxpB,IAAOC,IAAV,MAsHPwpB,GA/GE,SAAC,GAAiB,EAAfC,SAAgB,IAAD,EACJrlB,IAAM0G,WAAWwc,IAAtC1Q,EADyB,EACzBA,KAAM2Q,EADmB,EACnBA,WAGd,GAAI3Q,EAAM,CAIR,GAAIA,EAAK7C,SAAS7G,OAAS,GAAgC,iBAApB0J,EAAK7C,SAAS,GACnD,IAAK,IAAI3S,EAAI,EAAGA,EAAIwV,EAAK7C,SAAS7G,OAAQ9L,IACxCwV,EAAK7C,SAAS3S,GAAK,CAAE2X,eAAgBnC,EAAK7C,SAAS3S,IAKvD,GAAIwV,EAAK7C,SAAS7G,OAAS,GAAI,CAG7B,IAFA,IAAIwc,EAAQ,GAAK9S,EAAK7C,SAAS7G,OAC3Byc,EAAkB,EACbvoB,EAAI,EAAGA,GAAKsoB,EAAOtoB,IAC1BwV,EAAK7C,SAAS1S,KAAKuV,EAAK7C,SAAS7G,OAAS,GAAK,CAAE6L,eAAgB,GAAM,CAAEA,eAAgBnC,EAAK7C,SAAS4V,GAAiB5Q,iBACxH4Q,IAEF/nB,QAAQC,IAAI,8BAA+B+U,EAAK7C,SAAU6C,EAAK7C,SAAS7G,SAc5E,OACE,kBAACqc,GAAD,KACE,kDAmBA,6BAIE,uEACA,4FACA,8GACA,0HACC3S,EAAK7C,SAASlT,KAAI,SAAC+oB,EAAa9oB,GAAd,OACjB,yBAAKC,IAAKD,EACR6C,MAAO,CACLC,gBAAgB,GAAD,OAAK9C,EAAQ,GAAgB,KAAVA,EAAe,MAAmB,KAAVA,EAAe,SAAW,SAA6C,IAA/B8oB,EAAY7Q,eAAuB,OAAS,SAC9IlV,OAAQ,MAAOyJ,QAAS,QAIzBxM,EAAQ,IAAM,uBAAG6C,MAAO,CAAE4J,UAAW,SAAU1J,OAAQ,IAAKyJ,QAAS,IAAK2D,SAAU,SAAqB,KAAVnQ,EAAe,gEAAkE,6BACjL,yBAAK6C,MAAO,CAAEyG,QAAS,OAAQE,eAAgB,eAAgBD,WAAY,WAGzE,qCAAWvJ,EAAQ,GAAK,0BAAM6C,MAAO,CAAEM,MAAO,cAAtB,KAA+CnD,EAAQ,EAA/E,KAWA,kBAAC,GAAD,CAAcuN,SAAU,CACtB,EACU,KAAVvN,EAAe,EAAI,EACnB,SAAC8E,GAAYgR,EAAK7C,SAASjT,GAAOiY,eAAiB8Q,OAAOjkB,GAAQ2hB,EAAW,eAAK3Q,KAClFgT,EAAY7Q,eACZ,GACA,GACA,EACU,KAAVjY,EAAe,EAAI8V,EAAK2D,UAAUrN,kBClDnC4c,GApDuB,WAAO,IAAD,EACb1lB,IAAM0G,WAAWwc,IAAtC1Q,EADkC,EAClCA,KAAM2Q,EAD4B,EAC5BA,WA4Bd,OACE,6BACE,6DAIA,kBAAC,GAAD,CAAclZ,SAAU,CAAC,EAAG,EA9BC,SAAC0b,GAEA,kBAA5BnT,EAAKmR,cAActgB,OACrBmP,EAAKmR,cAAciC,MAAQpT,EAAKmR,cAAc3S,KAC9CwB,EAAKmR,cAAckC,MAAQrT,EAAKmR,cAActgB,MAEhDmP,EAAKmR,cAAc3S,KAAO2U,EAC1BnT,EAAKmR,cAActgB,KAAO,gBAa1B8f,EAAW,eAAK3Q,KAU2CA,EAAKmR,cAAc3S,QAC5E,yBAAKzR,MAAO,CAAE4J,UAAW,WACvB,mCAC6B,kBAA5BqJ,EAAKmR,cAActgB,KAA2B,iEACb,sBAA7BmP,EAAKmR,cAAckC,MAAgC,kCAAO,6BAAP,qCAAgD9e,GAA4ByL,EAAKmR,cAActc,MAAM,GAAO,GAA5G,YAA4HmL,EAAKmR,cAAciC,MAA/I,UACrB,kBAA7BpT,EAAKmR,cAAckC,MAA4B,kCAAO,6BAAP,qCAAgD9e,GAA4ByL,EAAKmR,cAActc,MAAM,GAAO,GAA5G,OAAuHmL,EAAKmR,cAAciC,MAA1I,UAAgK,MAErL,sBAA5BpT,EAAKmR,cAActgB,KAA+B,kGAAwE0D,GAA4ByL,EAAKmR,cAActc,MAAM,GAAO,GAApI,KACpB,kBAA5BmL,EAAKmR,cAActgB,KAA2B,gFAAsD0D,GAA4ByL,EAAKmR,cAActc,MAAM,GAAO,IAClI,YAA5BmL,EAAKmR,cAActgB,KAAqB,mGACtC,KACV,sCChDFyiB,GAAoB,SAACxhB,GACzB,IAAIqf,EAAgB,GAChBoC,EAAgBzhB,EAAKqE,YAAYC,QAAUtE,EAAKqE,YAAYC,QAAQX,YAAYiH,yBAAsBJ,EAiB1G,YAhBsBA,IAAlBiX,GAAiD,OAAlBA,GACjCpC,EAAgBrf,EAAK2D,YAAYC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAQ2d,MAC3C1iB,KAAO,oBAIjBiB,EAAK2D,aAAe3D,EAAK2D,YAAYa,OAAS,GAChD6a,EAAgBrf,EAAK2D,YAAY,IACnB5E,KAAO,iBAGrBsgB,EAAc3S,KAAO,GACrB2S,EAActgB,KAAO,WAIlBsgB,GAiFMqC,GA1EoB,SAAC,GAAc,IAAZ1hB,EAAW,EAAXA,KAAW,EAClBtE,IAAM0G,WAAWwc,IAAtC1Q,EADuC,EACvCA,KAAM2Q,EADiC,EACjCA,WA+Dd,OARAnjB,IAAM1B,WAAU,WACdd,QAAQC,IAAI,sCACR6G,GAAQkO,EAAK0D,oBAAsB1D,EAAKmR,gBAC1CnR,EAAKmR,cAAgBmC,GAAkBxhB,GACvC6e,EAAW,eAAK3Q,OAEjB,CAAClO,EAAMkO,IAGR,6BACE,4BAAQ3O,QA9D+B,WAA4B,IAA3BoiB,EAA0B,wDAE/DzT,EAAK0D,mBAqBmB,IAAlB+P,IAKTzT,EAAK2D,UAAUhL,SAAQ,SAAAoJ,GACVA,EAASC,KACfrJ,SAAQ,SAAAgI,GACXA,EAAInC,KAAO6C,KAAKC,MAAMX,EAAIY,iBAAmB,IAAMvB,EAAKmR,cAAc3S,MACtEmC,EAAIY,sBAAmBjF,QAG3B0D,EAAK0D,uBAAoBpH,EACzB0D,EAAKmR,mBAAgB7U,EAErBqU,EAAW,eAAK3Q,MAlChBA,EAAK0D,mBAAoB,EACzB1D,EAAKmR,cAAgBmC,GAAkBxhB,GAGvCkO,EAAK2D,UAAUhL,SAAQ,SAAAoJ,GACVA,EAASC,KACfrJ,SAAQ,SAAAgI,GACX,GAAIA,EAAInC,KAAM,CACZ,IAAI+C,EAAmBF,KAAKC,MAAMX,EAAInC,KAAOwB,EAAKmR,cAAc3S,KAAO,KACvEmC,EAAIY,iBAAmBA,EACvBZ,EAAInC,KAAO,YAQjBmS,EAAW,eAAK3Q,MAwCqCjT,MAAO,CAAEyG,QAAS,QAASvG,OAAQ,WAAYyJ,QAAS,OAAQqI,MAAO,QAAS,4BAAKiB,EAAK0D,mBAAqB,MAA/B,sBAErI,uBAAG3W,MAAO,CAAE4J,UAAW,WAAvB,kKACGqJ,EAAK0D,mBAAqB1D,EAAKmR,cAAiB,kBAAC,GAAD,MAAoC,O,8UCjF7F,IAAMuC,GAAQvqB,IAAOC,IAAV,MAKL+b,GAAQhc,YAAOqS,KAAK4J,KAAZjc,CAAH,MAoUI0K,gBA3TwB,SAAC,GAAiE,IAA/D8f,EAA8D,EAA9DA,aAAc7f,EAAgD,EAAhDA,QAAS8f,EAAuC,EAAvCA,qBAAsBC,EAAiB,EAAjBA,WAG/EC,EAAwBtmB,IAAM+K,OAAO,MACrCwb,EAAwBvmB,IAAM+K,OAAO,MACrCyb,EAAsBxmB,IAAM+K,OAAO,MAEzC/K,IAAM1B,WAAU,WAGd2E,OAAO0S,SAAS,EAAG,KAClB,IAIHnY,QAAQC,IAAI,iBAAkB4oB,GAE9B,IAAI3N,EAAgB1Y,IAAM0G,WAAW/B,GAE/B8hB,EAAY,eACbN,EADa,CAEhBnB,YAFgB,SAEJ9O,EAAmBxC,GAE7B,OADAvU,KAAKgX,UAAUlZ,KAAKwnB,QAA8B3V,EAAWoH,EAAmBxC,IACzEvU,QAvB2F,EA0B3Ea,IAAMnD,SAAS4pB,GA1B4D,mBA0B/FjU,EA1B+F,KA0BzF2Q,EA1ByF,OA2B5CnjB,IAAMnD,UAAS,GA3B6B,mBA2B/F6pB,EA3B+F,KA2BxEC,EA3BwE,KA4BhGC,EAAc,CAAEpU,OAAM2Q,cA5B0E,EAgC9EnjB,IAAMnD,SAAS2V,EAAKnJ,MAhC0D,mBAgC/FA,EAhC+F,KAgCzFwd,EAhCyF,OAiCxD7mB,IAAMnD,SAAS2V,EAAKkF,gBAAkBlF,EAAKkF,gBAAkBlF,EAAKiF,aAjCV,mBAiC/FqP,EAjC+F,aAkCxE9mB,IAAMnD,SAAS2V,EAAK+E,QAAU/E,EAAK+E,QAAU,OAlC2B,mBAkC/FA,EAlC+F,aAoCtDvX,IAAMnD,SAAS,OApCuC,mBAoC/FkqB,EApC+F,KAoC7EC,EApC6E,KAqClGjR,EAAc2C,EAAc3C,YAIhC/V,IAAM1B,WAAU,WACd,GAAIyX,EAAa,CACf,IAAIkR,EAA6BlR,EAAYtZ,KAAI,SAAA4pB,GAAU,OAAIA,EAAWhd,QAC1E2d,EAAoBC,MAGrB,CAAClR,IA/CkG,MAkDpE/V,IAAMnD,UAAS,GAlDqD,mBAkD/F4E,EAlD+F,KAkDpFob,EAlDoF,KAmDtG7c,IAAM1B,WAAU,gBACewQ,IAAzBsX,GACF/jB,SAASK,cAAc,sBAAsB+J,UAE9C,IAKHzM,IAAM1B,WAAU,WAEd,GAAIyoB,EAAkB,CACpB,IAAIG,EAAkCH,EAAiB7e,MAAK,SAAAif,GAAQ,OAAI9d,IAAS8d,KACjFR,EAAyBO,MAE1B,CAAC7d,EAAM0d,IAEV,IAsBMK,EAAuB,uCAAG,WAAOC,GAAP,eAAAxmB,EAAA,0DAC1BulB,EAD0B,gCAGJvhB,EAA+B,6BAA8B,CAAEwN,cAAe+T,EAAsBiB,qBAAoBhB,eAHpH,OAGxBlW,EAHwB,OAI5BuI,EAAcjU,WAAd,eAA8B0L,IAJF,sBAM5BqC,EAAKkF,gBAAkB2P,EACvBlE,EAAW,eAAK3Q,IAPY,2CAAH,sDAUvB8U,EAA6B,SAACD,GAClC7pB,QAAQC,IAAI,iBACZ+U,EAAKkF,gBAAkB2P,EACvBlE,EAAW,eAAK3Q,KAKZ+U,EAAgB,uCAAG,4BAAA1mB,EAAA,oEASjBulB,GAAwB,GATP,gCAUCvhB,EAA+B,oCAAqC,CAAE2N,OAAMH,cAAe+T,EAAsBC,eAVlH,OAUnBlW,EAVmB,8CAcCtL,EAA+B,mBAAoB,CAAE2iB,QAAShV,IAd/D,OAcnBrC,EAdmB,sBAiBrBuI,EAAcjU,WAAW0L,GACzB0M,GAAa,GAlBQ,UAmBf,IAAIja,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAAS,QAnB5B,QAoBrByD,EAAQrJ,KAAK,0BACb4f,GAAa,GArBQ,kDAwBPrf,QAAQC,IAAR,MAxBO,0DAAH,qDA5GgF,EAuI1EuC,IAAMnD,SAAS,CAAEsY,EAAG,qBAAsBuH,QAAS,IAvIuB,6BA0ItG1c,IAAM1B,WAAU,WACdd,QAAQC,IAAI,qBAAsB+U,KAEjC,CAACA,IAEJ,IAAIiV,EAAmB,CACrBC,UAAW,QACX5Z,OAAQ,4BACRQ,aAAc,QAEd9O,gBAAiB,WAGnB,OACE,kBAAC0mB,GAAD,KACE,kBAAC,GAAY1P,SAAb,CAAsBhV,MAAOolB,GAG1BnlB,EAAY,wBAAIlC,MAAO,CAAEC,gBAAiB,QAAS2J,UAAW,SAAUtJ,MAAO,QAASqJ,QAAS,SAArF,0BACT,kBAACyF,GAAD,CACAT,GAAG,SACH3O,MAAO,CAAEyG,QAAS,QAASuL,MAAO,OAAQ9R,OAAQ,YAAa0J,UAAW,UAC1E9F,KAAK,SACLQ,QAAS0jB,GAJT,QAKMnB,GAAwB,EAAI,UAAY,QAGlD,6CAAkB,2BAAO5jB,GAAG,oBAAoBa,KAAK,OAAOK,SAjG3C,SAAC,GAA2B,IAAflC,EAAc,EAAxBD,OAAUC,MAElCqlB,EAAQrlB,GAERgR,EAAKnJ,KAAO7H,EACZ2hB,EAAW,eAAK3Q,KA4F0E/O,YAAY,kBAAkBjC,MAAOgR,EAAKnJ,KAAM9J,MAAO,CAAEC,gBAAgB,GAAD,OAAKknB,EAAwB,MAAQ,SAAWrY,SAAU,WAExN,uBAAG9O,MAAO,CAAE4J,UAAW,SAAUtJ,MAAO,YAAagN,SAAS,GAAD,OAAK6Z,EAAwB,SAAW,UAAaA,GAAyB,8IAY3I,kBAAC9Y,GAAA,EAAD,CACEjK,UAAU,MACVpE,MAAO,CAAEsO,WAAY,cAAepO,OAAQ,aAQ5C,kBAACuO,GAAA,EAAD,CAAMzO,MAAO,CAAEC,gBAAiB,cAAesO,OAAQ,OAAQ6C,aAAc,SAC3E,kBAAC/C,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAS,KAETzK,UAAU,gDACVpE,MAAO,CACLsO,WAAY,QACZpO,OAAQ,oBAIR6O,aAAc,gBACdwV,aAAc,yBAIhB9X,IAAKsa,EACLziB,QAAS,kBAAMiJ,GAAwBwZ,EAAsB1d,QAAS,OAEtE,yDACA,uBAAGrJ,MAAO,CAAEM,MAAO,OAAQgN,SAAU,SAArC,kCAEF,kBAACe,GAAA,EAAUW,SAAX,CAAoBH,SAAS,MAC3B,kBAAC,GAAD,CAAO7O,MAAO,CAAEiP,UAAW,OAAQhP,gBAAiB,QAAS0J,QAAS,4BACpE,kBAAC,GAAD,CAAWiN,UAAW3D,EAAK2D,eAMjC,kBAACnI,GAAA,EAAD,CAAMzO,MAAO,CAAEC,gBAAiB,cAAesO,OAAQ,OAAQ6C,aAAc,SAC3E,kBAAC/C,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAS,KAETzK,UAAU,gDACVpE,MAAO,CACLsO,WAAY,QACZpO,OAAQ,oBAGR6O,aAAc,gBACdwV,aAAc,yBAEhB9X,IAAKua,EACL1iB,QAAS,kBAAMiJ,GAAwByZ,EAAsB3d,QAAS,OAKtE,wDACA,uBAAGrJ,MAAO,CAAEM,MAAO,OAAQgN,SAAU,SAArC,kDAEF,kBAACe,GAAA,EAAUW,SAAX,CAAoBH,SAAS,MAC3B,kBAAC,GAAD,CAAO7O,MAAO,CAAEiP,UAAW,OAAQhP,gBAAiB,QAAS0J,QAAS,4BACpE,kBAAC,GAAD,SAMN,kBAAC8E,GAAA,EAAD,CAAMzO,MAAO,CAAEC,gBAAiB,cAAesO,OAAQ,OAAQlB,UAAW,SACxE,kBAACgB,GAAA,EAAUK,OAAX,CACEC,GAAIF,KAAKG,OACTC,SAAS,KAETzK,UAAU,gDACVpE,MAAO,CACLsO,WAAY,YACZpO,OAAQ,oBAER6O,aAAc,gBACdwV,aAAc,yBAEhB9X,IAAKwa,EACL3iB,QAAS,kBAAMiJ,GAAwB0Z,EAAoB5d,QAAS,OAGpE,iFACA,uBAAGrJ,MAAO,CAAEM,MAAO,OAAQgN,SAAU,SAArC,4CAEF,kBAACe,GAAA,EAAUW,SAAX,CAAoBH,SAAS,MAC3B,kBAAC,GAAD,CAAO7O,MAAO,CAAEiP,UAAW,OAAQhP,gBAAiB,YAAa0J,QAAS,4BACxE,wBAAI3J,MAAO,CAAEyG,QAAS,WAAtB,YACA,yDACA,kBAACwR,GAAD,CACE/T,YAAa,2DACb4G,aAAckN,EACd7T,SAvMW,SAACikB,GAE1BnV,EAAK+E,QAAUoQ,EACfxE,EAAW,eAAK3Q,KAqMFuC,aAAc0S,IAEhB,sDAECrB,EAAuB,kBAAC5O,GAAD,CAAsB/T,YAAa,+DAAgE4G,aAAcyc,EAAiBpjB,SAAU4jB,EAA4B9jB,SAAU4jB,EAAyBrS,aAAc0S,EAAkB5S,iBAAiB,qBAChR,kBAAC2C,GAAD,CACA/T,YAAa,+DACb4G,aAAcyc,EACdpjB,SAAU4jB,EACVvS,aAAc0S,IAGlB,kBAAC,GAAD,CAA4BnjB,KAAMoU,EAAcpU,WASvD7C,EAAY,wBAAIlC,MAAO,CAAEC,gBAAiB,QAAS2J,UAAW,SAAUtJ,MAAO,QAASqJ,QAAS,SAArF,0BACT,kBAACyF,GAAD,CACAT,GAAG,SACH3O,MAAO,CAAEyG,QAAS,QAASuL,MAAO,OAAQ9R,OAAQ,YAAa0J,UAAW,UAC1E9F,KAAK,SACLQ,QAAS0jB,GAJT,QAKMnB,GAAwB,EAAI,UAAY,aC1P3CwB,GA7EkB,SAAC5rB,GAAU,IAQtCwW,EARsC,EAEHxS,IAAM0G,WAAW/B,GAAlDL,EAFoC,EAEpCA,KAAiByR,GAFmB,EAE9BtR,WAF8B,EAEnBsR,aACnB1D,EAAgBrW,EAAMyZ,MAAMD,OAAOnD,cACnC7P,EAAKxG,EAAMyZ,MAAMD,OAAOhT,GACxB6jB,GAAa,EACjB7oB,QAAQC,IAAI,QAASzB,EAAMyZ,MAAMD,QAG7BlR,IACE+N,GAAiB,EACnBG,EAAOlO,EAAKqE,YAAYyI,SAASiB,GACR,SAAhBA,GACT7U,QAAQC,IAAI,wBACZ+U,EAAOuD,EAAY7N,MAAK,SAACsK,EAAMG,GAG7B,OAFAN,EAAgBM,EAChB0T,GAAa,EACN7T,EAAKpK,MAAQ5F,MAGtBgQ,EAAOlO,EAAKqE,YAAYyI,SAASlJ,MAAK,SAACsK,EAAMG,GAE3C,OADAN,EAAgBM,EACTH,EAAKpK,MAAQ5F,MAI1BhF,QAAQC,IAAI,QAAS+U,GAMrB,IAAIqV,EAAS7rB,EAAMwJ,SAAStG,MA2B5B,OAZA1B,QAAQC,IAAI,yBAA0BoqB,GAUtCrqB,QAAQC,IAAI,8BAA+B+U,GAGzC,6BACE,gDAGS1D,GAAR0D,EAAoB,kBAAC,GAAD,CAAgC2T,aAAc3T,EAAM4T,qBAAsB/T,EAAegU,WAAYA,IACtH,4ECjDKyB,GArBoB,WAAO,IAAD,EACb9nB,IAAMnD,SAAS,MADF,mBAChCkrB,EADgC,KACzBC,EADyB,KAGjCC,EAA2B,WAC/B,IAAIT,ERiB0B,SAACne,GAEjC,IADA,IAAIsG,EAAU,GACL3S,EAAI,EAAGA,EAAI,GAAIA,IAAK2S,EAAS1S,KAAK,CAAC0X,eAAgB3X,EAAE,GAAK,EAAE,IAYrE,MAXW,CACTqM,OACA8M,UAAW,CAACsO,MACZ9U,WAGA+H,qBAAiB5I,EACjByI,aAASzI,EACTsC,SAAU,YQ5BI8W,CAA0B,QACxCF,EAASR,GACThqB,QAAQC,IAAI,6BAA8B+pB,IAQ5C,OAJAxnB,IAAM1B,WAAU,WACd2pB,MACC,IAGD,oCACGF,EAAQ,kBAAC,GAAD,CAAgC5B,aAAc4B,IAAY,OCwC1D1hB,gBAtDa,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACxB6hB,EAAkBnoB,IAAM0G,WAAW0hB,IADE,cAEDD,EAFC,GAEpCE,EAFoC,KAErBC,EAFqB,KAGrC5P,EAAgB1Y,IAAM0G,WAAW+G,GAG/B8a,EAAW,uCAAG,4BAAA1nB,EAAA,sEACMgE,EAA+B,sBAAuB,CAAC2jB,iBAAgB,IAD7E,cACdrY,EADc,OAElB7J,EAAQrJ,KAAK,YACbyb,EAAcjU,WAAd,eAA8B0L,IAHZ,SAIZ,IAAIvN,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAAS,QAJ/B,OAKlByD,EAAQrJ,KAAK,4BALK,2CAAH,qDASjB,OACE,6BACE,sDAEA,gDACoBorB,EAAcI,KAAK9T,eACrC,6CAAmB0T,EAAcI,KAAKlU,SAASlL,KAAQ,IAAMgf,EAAcI,KAAKlU,SAASlL,KAAO,IAAO,cAGzG,4CAAkBgf,EAAcI,KAAKjW,KAAKnJ,MAG1C,4BAAKgf,EAAcI,KAAKlU,SAASC,KAAK/X,KAAI,SAAC0W,EAAKzW,GAAN,OACxC,wBAAIC,IAAKD,EAAO6C,MAAO,CAACC,gBAAgB9C,EAAM2rB,EAAcI,KAAKC,eAAe,EAAI,OAAQhsB,IAAQ2rB,EAAcI,KAAKC,eAAe,EAAI,SAAS,cAAnJ,OAEOhsB,EAAQ,EAFf,KAEoByW,EAAInC,KAFxB,QAGE,6BAHF,mBAImBmC,EAAIiB,UACrB,6BALF,gBAMgBjB,EAAIe,oBANpB,KAOE,6BAPF,gBAQgBf,EAAIkB,gBAKtB,yBAAK9U,MAAO,CAAC0R,SAAS,QAAQgP,OAAO,IAAI1O,MAAM,OAAQ1D,WAAW,QAAS7H,QAAQ,OAAOE,eAAe,WACvG,4BAAQ3G,MAAO,CAACgS,MAAM,MAAM1E,SAAS,SAAUpN,OAAO,OAAOoO,WAAW,cAAehK,QAAS,WAAQykB,EAAiB,eAAKD,EAAN,CAAqBM,MAAQN,EAAcM,MAAQ,QAAuD,IAA7CN,EAAcI,KAAKG,wBAAgC,WAAW,UAGnM,aAAlDlQ,EAAcpU,KAAKqE,YAAYC,QAAQwI,UAAyB,4BAAQvN,QAAS0kB,EAAahpB,MAAO,CAACsN,SAAS,OAAQpN,OAAO,SAA9D,uBACjE,6BAAK,6BACJ,6BAAK,6BACL,6BAAK,6BACL,6BAAK,iC,gbCtDX,IAAMopB,GAAUltB,IAAOC,IAAV,MAGPktB,GAAUntB,IAAOotB,OAAV,MAWPC,GAAWrtB,YAAOmtB,GAAPntB,CAAH,MA4CCstB,GAvCK,WAClB,IAAId,EAAkBnoB,IAAM0G,WAAW0hB,IADf,cAEgBD,EAFhB,GAEnBE,EAFmB,KAEJC,EAFI,KAGpBY,EAAYb,EAAcI,KAAKC,gBAAkBL,EAAcI,KAAKlU,SAASC,KAAK1L,OAElFqK,EAAMkV,EAAcI,KAAKtV,IAS7B,OARA3V,QAAQC,IAAI,oBAAqB4qB,GAS/B,kBAACQ,GAAD,KACE,yCACCK,GAAa,sDAEd,uBAAG3pB,MAAO,CAACsN,SAAS,OAAQ1D,UAAU,SAAUwH,aAAa,QAASsH,WAAW,SAAU9E,EAAInC,MAC/F,uBAAGzR,MAAO,CAACsN,SAAS,OAAQ1D,UAAU,SAASyD,UAAU,MAAzD,QAECuG,EAAIiB,WACH,+CAAqBjB,EAAIiB,YAGzB8U,GAAa,wBAAI3pB,MAAO,CAAE4J,UAAW,WAAxB,sBACf,kBAAC2f,GAAD,CAASjlB,QAAS,WAAQykB,EAAiB,eAAKD,EAAN,CAAqBM,MAAO,OAAtE,UAGA,kBAACK,GAAD,CAAUnlB,QAAS,WAAQykB,EAAiB,eAAKD,EAAN,CAAqBM,MAAO,SAAvE,QAGA,wBAAIppB,MAAO,CAAC4J,UAAU,WAAtB,aC3BSggB,GAvBK,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,MAAOC,EAA2B,EAA3BA,IAAK7nB,EAAsB,EAAtBA,MAAOwT,EAAe,EAAfA,SAElCsU,EAAuB,SAAC5f,GAC5BsL,EAASxT,EAAQkI,EAAU,EAAIlI,EAAQkI,EAAU,IAQnD,OACE,6BACE,kBAAC,GAAD,CAAe7F,QAAS,kBAAMylB,GAAsBF,KAApD,IAA6D,yBAAKntB,IAAKuN,KAAUrN,IAAI,KAArF,IAA+F,6BAAOitB,GAAtG,cACA,kBAAC,GAAD,CAAUvlB,QAAS,kBAAMylB,GAAsBD,KAAM,yBAAKptB,IAAKuN,KAAUrN,IAAI,KAA7E,IAAuF,6BAAOktB,IAE9F,2BAAOhmB,KAAK,SAASK,SAVE,SAAC,GAA2B,IAAflC,EAAc,EAAxBD,OAAUC,MACtCwT,EAAkB,EAARxT,EAAW,EAAU,EAANA,OAAUsN,IASkBtN,MAAOA,IAC1D,kBAAC,GAAD,CAAUqC,QAAS,kBAAMylB,EAAqBD,KAAM,yBAAKptB,IAAKwN,KAAStN,IAAI,KAA3E,IAAqF,6BAAOktB,IAC5F,kBAAC,GAAD,CAAexlB,QAAS,kBAAMylB,EAAqBF,KAAQ,yBAAKntB,IAAKwN,KAAStN,IAAI,KAAlF,IAA4F,6BAAOitB,MCuC1FG,GA1DI,SAAC,GAA8E,IAA5EC,EAA2E,EAA3EA,SAAU9F,EAAiE,EAAjEA,SAAU+F,EAAuD,EAAvDA,SAASC,EAA8C,EAA9CA,wBAAyBC,EAAqB,EAArBA,eACtExB,EAAkBnoB,IAAM0G,WAAW0hB,IADwD,cAKvDD,EALuD,GAK1FE,EAL0F,KAQvFuB,GARuF,KAQzCH,EAA9CG,oBAAoBC,EAA0BJ,EAA1BI,sBA6C5B,OApBA7pB,IAAM1B,WACJ,WACMsrB,EAAqB,IAElBJ,EAASM,qBACZtsB,QAAQC,IAAI,yBACZ+rB,EAASO,uBAAsB,KAOnC,IAAIC,EAAanW,KAAKC,OAAO1M,KAAK6iB,MAAQN,EAAela,WAAa,KAAM,EAE5EiU,EAASwG,iBAAiBF,GAC1B,IAAMxnB,EAAK2nB,aAAY,kBAAMN,EAAsBxB,EAAcI,KAAKtV,IAAIe,oBAAsB8V,EAAaN,KAA0B,KACvI,OAAO,WAAQU,cAAc5nB,MAC5B,CAAConB,IAGJ,0BAAMrqB,MAAO,CAAEsN,SAAU,SAAW+c,I,sEC7BzBS,GAvBK,SAAC,GAId,IAHLC,EAGI,EAHJA,YACA7L,EAEI,EAFJA,cACA8L,EACI,EADJA,SACI,EACoBC,aAASC,MAA1BC,EADH,sBAEwBF,aAASG,MAA9BC,EAFH,sBAGqBJ,aAASK,MAA3BC,EAHH,oBAcJ,OARA9qB,IAAM1B,WAAU,WACd,GAAKisB,EAAL,CACA,IAAIX,EAAqBU,EAAc7L,EACZ,KAAvBmL,GAA2BgB,IAC3BhB,EAAqB,GAAKA,EAAqB,GAAGc,IAC3B,IAAvBd,GAA0BkB,OAC7B,CAACrM,IAGF,sC,yNCLJ,IAAM9G,GAAQhc,YAAOqS,KAAK4J,KAAZjc,CAAH,MA2WIovB,GAnWW,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,gBAAsB,EAGGhrB,IAAMnD,UAAS,GAHlB,mBAG1CitB,EAH0C,KAGtBC,EAHsB,KAI7CrR,EAAgB1Y,IAAM0G,WAAW/B,GACjCwjB,EAAkBnoB,IAAM0G,WAAW0hB,IALU,cAMTD,EANS,GAM5CE,EAN4C,KAM7BC,EAN6B,KAO7CnV,EAAMkV,EAAcI,KAAKtV,IAPoB,EAWPnT,IAAMnD,SAAS,GAXR,mBAW1C4hB,EAX0C,KAW3ByL,EAX2B,OAaIlqB,IAAMnD,UAASwrB,EAAcI,KAAKtV,IAAInC,MAb1C,mBAa1Cia,EAb0C,KAapBC,EAboB,OAcXlrB,IAAMnD,SAASsW,EAAInC,MAdR,mBAc1Cma,EAd0C,KAc7BC,EAd6B,OAeqBprB,IAAMnD,SAASsW,EAAInC,MAfxC,mBAe1Cqa,EAf0C,KAebC,EAfa,OAgB6CtrB,IAAMnD,SAASsW,EAAIY,iBAAmBZ,EAAIY,sBAAmBjF,GAhB1G,mBAgB1Cyc,EAhB0C,KAgBDC,EAhBC,KAiB7CtC,EAAYb,EAAcI,KAAKC,gBAAkBL,EAAcI,KAAKlU,SAASC,KAAK1L,OAjBrC,EAmBvB9I,IAAMnD,SAASwrB,EAAcI,KAAKtV,IAAIiB,WAnBf,mBAmB1C6F,EAnB0C,KAmBnCwR,EAnBmC,OAoBSzrB,IAAMnD,SAASwrB,EAAcI,KAAKtV,IAAIiB,WApB/C,mBAoB1CsX,EApB0C,KAoBnBC,EApBmB,OAqBb3rB,IAAMnD,UAAS,GArBF,mBAqB1C+uB,EArB0C,KAqB9BC,EArB8B,OAyBxB7rB,IAAMnD,SAAS,IAAIuK,MAArCuiB,EAzB0C,oBA2C3CmC,GAAiB,uCAAG,wCAAAjrB,EAAA,yDACxBrD,QAAQC,IAAI,2BACZytB,GAAqB,GAEjBa,EAAY,CACd/a,KAAMma,EACNa,4CAA6Cb,EAAc9C,EAAcI,KAAKwD,4BAA8B,IAC5G7X,UAAW6F,EACX5S,KAAM,IAAID,KACV8kB,MAAO,CAAEC,UAAWxC,IAIhByC,EAAiB,WACrB/D,EAAcI,KAAK4D,SAAWhE,EAAcI,KAAK4D,SAAW,EAC5D/D,EAAiB,eAAKD,KAIY,IAAhCA,EAAcI,KAAK4D,WAAiE,IAA/ChE,EAAcI,KAAKG,wBAnBpC,wBAqBtBprB,QAAQC,IAAI,0DArBU,SAsBEoH,EAA+B,oBACrD,CACEynB,uBAAwBjE,EAAcI,KAAK9T,eAC3C2L,aAAc+H,EAAcI,KAAKlU,SAASlL,KAC1CkjB,kBAAmBlE,EAAcI,KAAK8D,kBACtCpZ,IAAK4Y,IA3Ba,OAsBlB5b,EAtBkB,OA6BtBuI,EAAcjU,WAAd,eAA8B0L,IAC9B3S,QAAQC,IAAI,8HA9BU,+BAgClB+uB,EAAgB9T,EAAcpU,KAAKqE,YAAYC,QAAQC,gBAAgB,IAC7D2L,KAAKiY,QAAQV,GAjCL,UAoCElnB,EAA+B,2BAA4B2nB,GApC7D,0BAsCxBJ,IAGA5uB,QAAQC,IAAI,qBAAsBmuB,EAAYP,EAA6BK,IAEvEE,EA3CoB,wBA6ClBc,EAAmB,CAAE1b,KAAMqa,EAA6BjX,UAAWsX,EAAuB3X,iBAAkBwX,GAChH/tB,QAAQC,IAAI,wBAAyBivB,GA9Cf,UA+CK7nB,EAA+B,+CAAgD,CAAE6nB,qBA/CtF,QA+ChBC,EA/CgB,OAkDtBjU,EAAcjU,WAAd,eAA8BkoB,IAY9Bd,GAAc,GA9DQ,YAmEpB3C,EAnEoB,wBAoEtB1rB,QAAQC,IAAI,gCAAiCyrB,GApEvB,UAuEGrkB,EAA+B,sBAAuB,CAAE+nB,yCAAyC,IAvEpG,QAuElBC,EAvEkB,OAwEtBnU,EAAcjU,WAAd,eAA8BooB,IAxER,QA0ExBrvB,QAAQC,IAAI,4BA1EY,4CAAH,qDAgFnBqvB,IAAiB,EACjB9B,IAAoBC,IACtB6B,IAAiB,GAGnB9sB,IAAM1B,WAAU,WACV0sB,GACFc,OAED,IApI8C,OAwIG9rB,IAAMnD,SAASwrB,EAAcI,KAAKtV,IAAIe,qBAxIzC,qBAwI1C0V,GAxI0C,MAwItBC,GAxIsB,SAyIa7pB,IAAMnD,SAAS,GAzI5B,qBAyI1C6sB,GAzI0C,MAyIjBqD,GAzIiB,SA4IWvC,aAASwC,MA5IpB,qBA4I1CC,GA5I0C,MA4IhBC,GA5IgB,SA6IOltB,IAAMnD,UAAS,GA7ItB,qBA6I1CswB,GA7I0C,MA6IpBC,GA7IoB,SA8ISptB,IAAMnD,UAAS,GA9IxB,qBA8I1CwwB,GA9I0C,MA8InBC,GA9ImB,SA+IWttB,IAAMnD,UAAS,GA/I1B,qBA+I1C0wB,GA/I0C,MA+IlBC,GA/IkB,SAgJWxtB,IAAMnD,UAAS,GAhJ1B,qBAgJ1C4wB,GAhJ0C,MAgJlBC,GAhJkB,MAoJjD1tB,IAAM1B,WAAU,WAIToa,EAAcpU,KAAK2F,SAASsK,SAASoZ,OAatClP,GAAiB,GAAKyO,GAAwBU,QAAUH,KAA2BN,KAErFD,GAAwBU,MAAMC,KAAK,EAAG,EAAG,KACzCH,IAA0B,GACrBH,KAA0BN,KAA4BzvB,QAAQC,IAAI,eACvE+vB,IAA0B,IAExB5D,IAAsB,IAAM6D,KAA2BJ,IAAyBH,GAAwBU,QAG1GV,GAAwBU,MAAMC,KAAK,EAAG,GAAK,KAC3CP,IAAyB,IAEvB1D,IAAsB,IAAM6D,KAA2BN,IAAwBD,GAAwBU,QAEzGV,GAAwBU,MAAMC,KAAK,GAAK,EAAG,KAC3CT,IAAwB,GACxBM,IAA0B,KA7BtBH,IAA0BE,KAA2BN,IAAwBD,GAAwBU,QAEvGV,GAAwBU,MAAMC,KAAK,EAAG,EAAG,KAEzCH,IAA0B,MA4B7B,CAACjP,EAAe/F,IAKnB,IAAMoV,GAAkB,uCAAG,8BAAAjtB,EAAA,yDAIpBqoB,EAJoB,wBAKnBsD,EAAgB9T,EAAcpU,KAAKqE,YAAYC,QAAQC,gBAAgB,IAC7D2L,KAAK,GAAGiK,cAAgBA,EACtC+N,EAAchY,KAAK,GAAGH,WAAagU,EAAcI,KAAKtV,IAAIkB,WAC1DmY,EAAchY,KAAK,GAAG0X,MAAM6B,WAAa,IAAI3mB,KARtB,SAUCvC,EAA+B,2BAA4B2nB,GAV5D,OAUnBrc,EAVmB,OAWvBuI,EAAcjU,WAAd,eAA8B0L,IAE9BkY,EAAcI,KAAKC,eAAiB8D,EAAchY,KAAK1L,OAAS,EAChEuf,EAAcI,KAAKtV,IAAMkV,EAAcI,KAAKlU,SAASC,KAAK6T,EAAcI,KAAKC,eAAiB,GAC9FL,EAAcM,MAAQ,EAfC,wBAkBvBN,EAAcM,MAAQ,GAlBC,QAoBzBnrB,QAAQC,IAAI,kBAAmB4qB,GAC/BC,EAAiB,eAAKD,IAGtB7qB,QAAQC,IAAI,UAAW0vB,IACnBM,IAAkD,GAAxBN,IAAiCD,GAAwBU,QACrFpwB,QAAQC,IAAI,YACZyvB,GAAwBU,MAAMC,KAAK,EAAG,EAAG,MA3BlB,4CAAH,qDA+BxB7tB,IAAM1B,WAAU,YACTwrB,GAAsBZ,IAAc+B,GAEvC6C,OAED,CAAChE,EAAoBmB,IAmCxB,OACE,8BAEI/B,GAAa,kBAAC,GAAD,CAAaqB,SAAU7R,EAAcpU,KAAK2F,SAASsK,SAASqZ,MAAOnP,cAAeA,EAAe6L,YAAanX,EAAIe,sBAC/HgV,EAAmS,uDAAvR,wCAAa,kBAAC,GAAD,CAAYM,SAAU,CAAEM,qBAAoBC,yBAAyBrG,SAAU,CAAEjF,gBAAeyL,oBAAoBT,SAAU,CAACG,sBAAoBC,0BAAwBH,wBAAyBA,GAAyBC,eAAgBA,IAA1P,KACZ,4BAAQ9lB,QAAS,WARrBkpB,IAA2B,SAAAjT,GAAa,OAAIA,EAAgB,QAQxD,eAJJ,KAK4BmR,GAAwB,4BAAQpnB,QAASiqB,IAAjB,cAGjD3a,EAAInC,OAASia,GAA0C,GAAlB6B,IACpC,6BAEE,yBAAKvtB,MAAO,CAAEC,gBAAiB,QAAS0J,QAAS,MAAOzJ,OAAQ,QAC9D,2DACA,2EACA,0CAGA,kBAAC,GAAD,CAAa2pB,MAAO,EAAGC,IAAK,EAAG7nB,MAAO2pB,EAAanW,SAAUoW,IAI7D,2BAAInR,EAAQ,SAAW,MAAvB,UACA,8BAAUzY,MAAOyY,EAAOvW,SAAU,SAACpC,GAAD,OAAOmqB,EAASnqB,EAAEC,OAAOC,QAAQjC,MAAO,CAAE6G,OAAQ,QAASmL,MAAO,UACpG,8BAKD8W,EAAcI,KAAKjW,KAAKpB,UAAiD,aAArCiX,EAAcI,KAAKjW,KAAKpB,UAC3D,kBAACxD,GAAA,EAAD,CAAWjK,UAAU,MAAMpE,MAAO,CAAEC,gBAAiB,WACnD,kBAACwO,GAAA,EAAD,KACE,kBAACJ,GAAA,EAAUK,OAAX,CAAkBC,GAAIF,KAAKG,OAAQC,SAAS,IAAIzK,UAAU,iEAA1D,0CAGA,kBAACiK,GAAA,EAAUW,SAAX,CAAoBH,SAAS,KAC3B,kBAAC,GAAD,KACE,4EAEE+E,EAAIY,kBAAoB,6BACxB,2CACA,kBAAC,GAAD,CAAaqV,MAAO,EAAGC,IAAK,EAAG7nB,MAAO6pB,EAA6BrW,SAxQ3D,SAAC5B,GAC3BkY,EAA+BlY,GAC/ByY,GAAc,OA0QG1Y,EAAIY,kBACH,6BACE,kBAAC,GAAD,CAAc9J,SAAU,CAAC,EAAG,EA7EX,SAAC+jB,GACtCxC,EAA2CwC,GAC3C,IAAIC,EAAuBlmB,GAA0B2Q,EAAcpU,KAAMoU,EAAcpU,KAAKqE,YAAYC,QAAQX,YAAYiH,qBAAqB8B,KAG7Ikd,EAAiBra,KAAKC,MAAMka,EAAqB,IAAMC,GAC3D3C,EAA+B4C,GAC/BrC,GAAc,IAsEqEN,EAAyC,IAAK,iBAE7G,uBAAGhsB,MAAO,CAAE4J,UAAW,WAAvB,MACA,kBAAC,GAAD,CAAcc,SAAU,CAAC,EAAG,EAtEA,SAACkkB,GACjD7C,EAA+B6C,GAC/B,IAAIF,EAAuBlmB,GAA0B2Q,EAAcpU,KAAMoU,EAAcpU,KAAKqE,YAAYC,QAAQX,YAAYiH,qBAAqB8B,KAG7Iod,EAAwBva,KAAKC,MAAMqa,EAAcF,EAAuB,KAC5EzC,EAA2C4C,GAC3CvC,GAAc,IA+DgFR,EAA6B,WAG3G,2BAAIpR,EAAQ,SAAW,MAAvB,UACA,8BAAUzY,MAAOkqB,EAAuBhoB,SAAU,SAACpC,GAAQqqB,EAAyBrqB,EAAEC,OAAOC,OAAQqqB,GAAc,IAAStsB,MAAO,CAAE6G,OAAQ,QAASmL,MAAO,UAC7J,iCAQV,4BAAQhS,MAAO,CAAEyG,QAAS,QAASuL,MAAO,MAAO9R,OAAQ,WAAYoN,SAAU,OAAQ1D,UAAW,UAAYtF,QAASioB,IAAoB5C,EAAY,2BAA6B,UAKrLA,GAAa+B,GAAwB5C,EAAcI,KAAKtV,IAAIkB,YAC7D,6BACE,2CACA,2BAAIgU,EAAcI,KAAKtV,IAAIkB,cAM5B6U,GAAa+B,GACd,6BACE,yCACA,2BAAI5C,EAAcI,KAAKlU,SAASC,KAAK6T,EAAcI,KAAKC,gBAAgB1X,KACtEqX,EAAcI,KAAKlU,SAASC,KAAK6T,EAAcI,KAAKC,gBAAgB1X,KAAO,QACzEqX,EAAcI,KAAKlU,SAASC,KAAK6T,EAAcI,KAAKC,gBAAgBhF,SAAW,YAEnF,2BAAI2E,EAAcI,KAAKlU,SAASC,KAAK6T,EAAcI,KAAKC,gBAAgBtU,WAAaiU,EAAcI,KAAKlU,SAASC,KAAK6T,EAAcI,KAAKC,gBAAgBtU,c,qBCjWpJia,GAfU,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACJ9D,aAAS+D,MAAtCC,EADiC,oBAQxC,OALAxuB,IAAM1B,WAAU,WACTgwB,GACLE,MACC,CAACA,IAGF,6BACE,+DCgBSC,GArBU,WACvB,IAAI/V,EAAgB1Y,IAAM0G,WAAW+G,GAEjC0a,EAAkBnoB,IAAM0G,WAAW0hB,IAHV,cAKWD,EALX,GAKxBE,EALwB,UAU7B,OAAQA,EAAcM,OACpB,KAAK,EAAI,OAAO,kBAAC,GAAD,MAChB,KAAK,EAAI,OAAO,kBAAC,GAAD,MAChB,KAAK,EAAK,OAAO,kBAAC,GAAD,MACjB,KAAK,IAAO,OAAO,kBAAC,GAAD,CAAmBqC,iBAAe,IAErD,KAAK,GAAM,OAAO,kBAAC,GAAD,CAAkBsD,QAAS5V,EAAcpU,KAAK2F,SAASsK,SAASqZ,QAChF,QAAS,OAAO,6ECJPc,GAtBW,WAAO,IAAD,EACU1uB,IAAMnD,SAAS,CAAC8xB,QAAQ,EAAEC,QAAQ,IAD5C,mBACvBC,EADuB,KACTC,EADS,KAgB9B,OAdA9uB,IAAM1B,WACJ,WACE,IAAIkE,EAMJ,OAJEA,EAD2B,KAAzBqsB,EAAaF,QACVxE,aAAY,kBAAM2E,EAAgB,CAAEH,QAAQ,EAAGC,QAAQC,EAAaD,QAAQ,MAAM,KAElFzE,aAAY,kBAAM2E,EAAgB,eAAKD,EAAN,CAAoBF,QAAUE,EAAaF,QAAU,OAAM,KAE5F,kBAAMvE,cAAc5nB,MAE7B,CAACqsB,IAKD,0BAAMtvB,MAAO,CAAEyjB,YAAa,OAAQ9Z,QAAS,MAAO1J,gBAAiB,cAAgBqvB,EAAaD,QAAlG,KAA6GC,EAAaF,QAA1H,MCiBWI,GAlCO,SAAC,GAAsE,IAAD,IAAnE1G,cAAiBM,EAAkD,EAAlDA,MAAkD,IAA3CF,KAAQlU,EAAmC,EAAnCA,SAAUmU,EAAyB,EAAzBA,eAKjE,OACE,yBAAKnpB,MAAO,CAAEyG,QAAS,SAAUkL,SAAU,WACzC,uCACCqD,EAASC,KAAK/X,KAAI,SAAC0W,EAAKzW,GAAN,OACjB,0BACE6C,MAAO,CACLC,gBAAgB,GAAD,OAGX9C,EAAQ,EAAIgsB,EACV,OACEhsB,EAAQ,IAAMgsB,EACF,IAAVC,GAAsB,IAARA,EAAa,SAAW,OACtC,aAEVzf,QAAS,MACTzJ,OAAQ,OAEV9C,IAAKD,GAGJyW,EAAInC,WCsCAge,I,OA3De,WAC5B,IAAIrT,EAAU3b,IAAM0G,WAAW+G,GAEzBwhB,EAA0B,uCAAG,WAAOjW,EAAMkW,GAAb,eAAAruB,EAAA,+EAEPgE,EAA+B,0BAA2B,CAAEmU,OAAMkW,QAF3D,OAE3B/e,EAF2B,OAQ/BwL,EAAQlX,WAAW0L,GARY,gDASjB3S,QAAQC,IAAI,KAAZ,MATiB,yDAAH,wDAwBhC,OADAD,QAAQC,IAAI,sBAAuBke,GAEjC,yBAAKpc,MAAO,CAACC,gBAAgB,SAAU0J,QAAQ,QAC7C,uBAAG3J,MAAO,CAAC4J,UAAU,WAArB,mBACA,yBAAK5J,MAAO,CAAEyG,QAAS,OAAQE,eAAgB,iBAE7C,yBAAK3G,MAAO,CAAC2J,QAAQ,MAAOlD,QAAQ,OAAOG,SAAS,WAClD,kBAAC,KAAD,CACE3D,GAAG,uBACHiX,gBAAgBkC,EAAQrX,MAAOqX,EAAQrX,KAAK2F,SAASsK,SAASqZ,MAE9DlqB,SApBuB,SAAC,GAA6B,IAAjBuV,EAAgB,EAA1B1X,OAAU0X,QAE5CgW,EAA2B,QAAShW,MAoB9B,2BAAOS,QAAQ,wBAAf,WAEF,yBAAKna,MAAO,CAAE2J,QAAS,MAAOlD,QAAQ,OAAOG,SAAS,WACpD,kBAAC,KAAD,CACE3D,GAAG,sBAGHiX,gBAAgBkC,EAAQrX,MAAOqX,EAAQrX,KAAK2F,SAASsK,SAASoZ,MAI9DjqB,SA7BsB,SAAC,GAA6B,IAAjBuV,EAAgB,EAA1B1X,OAAU0X,QAE3CgW,EAA2B,QAAShW,MA6B9B,2BAAOS,QAAQ,uBAAf,cC3BKyV,GA3BS,SAAC,GAAuB,IAArB9G,EAAoB,EAApBA,cAEzB,OACC,6BACG,yBACE9oB,MAAO,CACLC,gBAAiB,aACjB0J,QAAS,OACTlD,QAAS,OACTE,eAAgB,kBAKlB,kBAAC,GAAD,CAAemiB,cAAeA,IAI9B,kBAAC,GAAD,SC0COhiB,gBAzDc,SAAC,GAAe,IAAdC,EAAa,EAAbA,QAAa,EACftG,IAAM0G,WAAW+G,GAAtCnJ,EADoC,EACpCA,KAAMG,EAD8B,EAC9BA,WACR2qB,EAAU9qB,EAAK2D,YAAYC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAQ9D,EAAKqE,YAAYC,QAAQX,YAAYiH,uBAQtFmgB,EAAqC,uCAAG,4BAAAxuB,EAAA,6DAE5CrD,QAAQC,IAAI,SAFgC,SAGlBoH,EAA+B,qBAAsB,CAAExB,KAAM,UAH3C,OAGtC8M,EAHsC,OAK5C7J,EAAQrJ,KAAK,YACbsG,MAAM,mHACNkB,EAAW,eAAK0L,IAP4B,2CAAH,qDAU3C,OACE,6BACE,gEACA,oGACA,0EAEE,0BAAM5Q,MAAO,CAAEsN,SAAU,SAAWuiB,EAAQpe,MAF9C,QAIIoe,EAAQnV,OAAS,wDAA8BmV,EAAQnV,MAAtC,OAMrB,yBAAK1a,MAAO,CAAEC,gBAAiB,QAC3B8E,EAAKqE,YAAYC,QAAQX,YAAYqnB,gBAcnC,KA7CuB,WAC/B,IAAIC,EAAUjrB,EAAK2D,YAAY,GAAGZ,KAC9BiI,EAAQ,IAAIlI,KAChB,OAAOiB,GAAgCknB,EAASjgB,GA6BxCkgB,GAEE,oCAGA,sCAAW,0BAAMjwB,MAAO,CAAEsN,SAAU,SAAWvI,EAAK2D,YAAY,GAAG+I,MAAnE,gCAEA,kFAEF,4BAAQnN,QAASwrB,GAAjB,yCAFE,kGANF,uJC/BCjH,GAAkBpoB,IAAM4E,cAAc,IA6JpCyB,gBA7DK,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACjBqV,EAAU3b,IAAM0G,WAAW+G,GADI,EAE2BzN,IAAMnD,cAASiS,GAF1C,mBAE5B2gB,EAF4B,KAEHC,EAFG,KAGnClyB,QAAQC,IAAI,qBAAsBgyB,GAHC,MAIOzvB,IAAMnD,UAAS,GAJtB,mBAI5B8yB,EAJ4B,KAIbC,EAJa,OAKG5vB,IAAMnD,UAAS,GALlB,mBAK5BgzB,EAL4B,KAKfC,EALe,KAOnC9vB,IAAM1B,WAAU,WAEd,GAAKqd,EAAQrX,OAAsBwrB,GAAe,QAGlBhhB,IAA5B2gB,GAAuC,CACzC,IAAIM,EAC8C,WAA9CpU,EAAQrX,KAAKqE,YAAYC,QAAQwI,WAAuB2e,EAAqBpU,EAAQ5F,YAAY7N,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQuT,EAAQrX,KAAKqE,YAAYC,QAAQ0I,eAChK,IAAI0e,EA7GmB,SAACC,EAAUF,GAGtC,IAAIvd,EAAO,GAITA,EAFEyd,EAAStnB,YAAYC,QAAQwI,SAAS8e,SAAS,YAE1CD,EAAStnB,YAAYyI,SAASlJ,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQ6nB,EAAStnB,YAAYC,QAAQ0I,cAEnF2e,EAAStnB,YAAYC,QAAQwI,SAAS8e,SAAS,gBAEjDD,EAAStnB,YAAYmK,iBAAiB5K,MAAK,SAAAsK,GAAI,OAAIA,EAAKpK,MAAQ6nB,EAAStnB,YAAYC,QAAQ0I,cAI7Fye,EAKT,IAAMI,EAAuCF,EAAStnB,YAAYC,QAAQqG,qBAI1E,GAA6C,KAAzCkhB,EAA6C,MAAO,CAAEb,iBAAiB,GAG3E,IAAIc,EAA+B5d,EAAK7C,SAASwgB,GAAsCxb,eACvF,GAAqC,IAAjCyb,EAAoC,MAAO,SAE/C,IAUInE,EAVA1X,EAAW/B,EAAK2D,UAAUia,EAA+B,GAIzDjd,EAAMoB,EAASC,KAAK,GACpBkU,EAAiB,EACjB2D,EAAW,EAKX7Z,EAAK0D,oBACP1Y,QAAQC,IAAI,qEAEZwuB,EAA8BgE,EAAShoB,YAAYC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,KAAO6nB,EAAStnB,YAAYC,QAAQX,YAAYiH,uBAAqB8B,KAGxIuD,EAASC,KAAKrJ,SAAQ,SAAAgI,GAAG,OAAIA,EAAInC,KAAO6C,KAAKC,MAAMX,EAAIY,iBAAmB,IAAMkY,OASlF,IAAIrD,GAA0B,EAE9B,GAA0B,IADFlgB,GAA+DunB,IAErB,GAA7DA,EAAStnB,YAAYC,QAAQC,gBAAgB,GAAGoH,UAAmB,CAEtE2Y,GAA0B,EACJqH,EAAStnB,YAAYC,QAAQC,gBAAgB,GAAnE,IACIwnB,EAA0BJ,EAAStnB,YAAYC,QAAQC,gBAAgB,GAAG2L,KAAK1L,OACnFqK,EAAMoB,EAASC,KAAK6b,GACpB3H,EAAiB2H,EAA0B,EAC3ChE,EAAWgE,EAsBb,MAAO,CAAE1H,MAAO,EAAGF,KAbG,CACpBjW,OACA+B,WACAI,eAAgByb,EAChB7D,kBAAmB,IAAInlB,KAEvBshB,iBACAvV,MACAkZ,WACAzD,0BACAqD,gCAwB6BqE,CAAqB3U,EAAQrX,KAAMyrB,GACjC,WAAzBC,GAAmCJ,GAAiB,GACxDF,EAA2BM,MAK5B,CAACrU,IAYJ,IAAM4M,EAAW,uCAAG,4BAAA1nB,EAAA,sEACMgE,EAA+B,sBAAuB,IAD5D,cACdsL,EADc,OAElB7J,EAAQrJ,KAAK,YACb0e,EAAQlX,WAAR,eAAwB0L,IAHN,SAIZ,IAAIvN,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAAS,QAJ/B,OAKlByD,EAAQrJ,KAAK,4BALK,2CAAH,qDAQjB,OAAI4yB,EAAoB,+CACwB,IAA5CJ,EAAwBH,gBAAiC,kBAAC,GAAD,MAEzDK,EACF,6BACE,sDACA,4BAAQ9rB,QAAS0kB,GAAjB,mBAEAkH,EACF,6BACE,kBAACrH,GAAgB5R,SAAjB,CAA0BhV,MAAO,CAACiuB,EAAyBC,IACzD,kBAAC,GAAD,CAAiBrH,cAAeoH,IAChC,kBAAC,GAAD,QAIC,8I,UC5JHc,I,OAAY,SAACC,EAASC,GAC1B,IAAIC,EAAO,GACXlzB,QAAQC,IAAI,WAAYgzB,GACxB,IAAK,IAAIzzB,EAAI,EAAGA,GAAKyzB,EAASzzB,IAC5B0zB,GAAQ,IAGVF,EAAQE,KAkKKC,GA/JG,WAAO,IAAD,EACQ3wB,IAAMnD,UAAU,GADxB,mBACf6f,EADe,KACNkU,EADM,OAEE5wB,IAAMnD,SAAS,OAFjB,mBAEf6zB,EAFe,KAETF,EAFS,OAIQxwB,IAAMnD,SAAS,GAJvB,mBAIfg0B,EAJe,KAINC,EAJM,OAKkB9wB,IAAMnD,SAAS,GALjC,mBAKfk0B,EALe,KAKDC,EALC,OAMchxB,IAAMnD,UAAS,GAN7B,mBAMfo0B,EANe,KAMHC,EANG,OAOE1G,aAASC,MAA1BC,EAPe,sBAQGF,aAASK,MAA3BC,EARe,sBAW0B9qB,IAAMnD,UAAS,GAXzC,mBAWfs0B,EAXe,KAWGC,EAXH,KActBpxB,IAAM1B,WAAU,WACdiyB,GAAUC,GAAoB,EAAX9T,KAClB,IAGH1c,IAAM1B,WAAU,WACd,IAAI+yB,EAEJ,OADgB,IAAZR,IAAeQ,EAAalH,aAAY,kBAAM2G,EAAW,OAAM,KAC5D,WACL1G,cAAciH,MAEf,CAACR,IAIJ7wB,IAAM1B,WAAU,WACd,IAAIgzB,EAsBJ,OArBIH,IAEEzU,EAAU,EAAGgO,IACI,IAAZhO,GAAeoO,IAExBwG,EAAWnH,aAAY,WAAQyG,EAAWlU,EAAU,KAAM,KAEtDA,GAAS,GAAKA,EAAU,IAAM,IAChCsU,EAAgBtU,EAAU,EAAI,GAG9BoU,EAAW,GAEXpU,GAAW,GAAK6U,gBAAgBC,MAAM,IAAIC,yBAAyBV,EAAe,MAItFR,GAAUC,GAAoB,EAAX9T,GAIZ,WACL0N,cAAckH,MAGhB,CAAC5U,EAASyU,IAsCZ,OACE,yBAAK5xB,MAAO,CAAE4J,UAAW,WACvB,4CACA,mDAGCuT,EAAU,EAAI,wBAAInd,MAAO,CAACsN,SAAS,QAAQqL,WAAW,MAAOlS,QAAQ,SAAU2K,aAAa,SAAU+f,GAAa,mCAEpH,yBACE7sB,QAxBe,WACnBrG,QAAQC,IAAI,OACP0zB,GAAqBF,GACxBG,GAAoB,GAElBD,IAvBJC,GAAoB,GACpBJ,EAAgBD,EAAe,GAC/BG,GAAc,GACdJ,EAAW,GACXF,EAAW,OAsBNO,GAAoBF,IAhBzBG,GAAoB,GACpBJ,EAAgB,GAChBE,GAAc,GACdN,GAAY,KA8BRrxB,MAAO,CAAEgS,MAAO,MAAO9R,OAAQ,SAE/B,kBAAC,KAAD,CACE+B,MAAOqvB,EAGP3uB,KAAI,UAAK6uB,GACTljB,WAAW,OACX6jB,OAAQC,aAAY,CAClBC,eAA4B,IAAZf,EAAgB,OAAS,iCAKzCgB,UAAU,GAAD,OAAMnV,EAAU,GAAIA,GAAS,IAAQ,OAAS,SACvDoV,UAAW,OAEXC,WAAW,GAAD,OAAMrV,EAAU,GAAIA,GAAS,IAAQ,OAAS,QAExDld,gBAAgB,GAAD,OAAKkd,GAAW,EAAK,OAAqB,IAAbA,EAAiB,SAAWyU,EAAmB,aAAeF,EAAa,YAAc,UAKvI,uBAAG1xB,MAAO,CAAEqN,UAAW,IAAKC,SAAU,UAElCskB,IAAqBF,GAAc,wCACpCE,GAAoB,wCACnBA,GAAoBF,GAAc,2CAazCA,GACC,6BACE,sCAAYF,EAAZ,UACA,oDAAyB,kBAAC,GAAD,CAAOrwB,GAAG,wBAAV,Y,0oBCjKpB/E,YAAOiT,IAAPjT,CAAH,MAeGA,IAAOC,IAAV,MAfZ,IA8Deo2B,GA9BQ,SAAC,GAAkC,IAAhClrB,EAA+B,EAA/BA,SAA+B,EAArBmrB,eAClC,OACE,6BAiBgB,2BAAbnrB,GAAyC,yBAAKvH,MAAO,CAAEC,gBAAiB,YAAa0J,QAAS,QAC7F,wBAAI3J,MAAO,CAAE4J,UAAW,WAAxB,kBAEc,2BAAbrC,GAAyC,kBAAC,GAAD,SC/BnCT,gBA1BkB,SAACrK,GAAW,IACnCsK,EAAYtK,EAAZsK,QADkC,EAEftG,IAAM0G,WAAW/B,GAAtCL,EAFoC,EAEpCA,KAAMG,EAF8B,EAE9BA,WACR4N,EAAgBrW,EAAMyZ,MAAMD,OAAOnD,cACnCG,EAAOlO,EAAOA,EAAKqE,YAAYyI,SAASiB,QAAiBvD,EAEvDojB,EAAkB,uCAAG,4BAAArxB,EAAA,sEACDgE,EAA+B,sBAAuB,CAACwN,kBADtD,OACrBlC,EADqB,OAEzB1L,EAAW,eAAK0L,IAChB7J,EAAQrJ,KAAK,0BAHY,2CAAH,qDAOxB,OACE,6BACE,8DACA,kCAAQuV,GAAI,UAAOA,EAAK0D,oBACxB,+LAEC1D,QAAmC1D,IAA3B0D,EAAK0D,kBAAkC,gEAA2C,0HAE3F,4BAAQrS,QAASquB,GAAjB,0BCwFS7rB,gBAzGW,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAASmP,EAAY,EAAZA,MAAY,EACWzV,IAAM0G,WAAW/B,GAAtEL,EAD0C,EAC1CA,KAAMG,EADoC,EACpCA,WAAYsR,EADwB,EACxBA,YAAaC,EADW,EACXA,kBADW,EAEAhW,IAAMnD,SAAS,MAFf,mBAEzCkqB,EAFyC,KAEvBC,EAFuB,OAKJhnB,IAAMnD,SAAS,CAAEmU,KAAM,GAAImhB,kBAAmB,GAAI/Z,YAAa,CAAC,GAAI,MALhE,mBAKzCD,EALyC,KAKzBia,EALyB,KAMhDpyB,IAAM1B,WAAU,WACd,IAAI8Z,EAAc,CAAC,EAAG,GAClBrO,EAAMoO,EAAenH,KACrB9E,EAAQiM,EAAega,kBAC3B/Z,EAAY,GAAKvE,KAAKC,MAAM/J,EAAMA,EAAMmC,EAAQ,KAChDkM,EAAY,GAAKvE,KAAKC,MAAM/J,EAAMA,EAAMmC,EAAQ,KAChDkmB,GAAkB,SAACva,GAAD,sBAAaA,EAAb,CAAgBO,qBACjC,CAACD,EAAenH,KAAMmH,EAAega,oBACxC30B,QAAQC,IAAI0a,GAGZnY,IAAM1B,WAAU,WACd,GAAIyX,EAAa,CACf,IAAIkR,EAA6BlR,EAAYtZ,KAAI,SAAA4pB,GAAU,OAAIA,EAAWhd,QAC1E2d,EAAoBC,MAGrB,CAAClR,IAEJ/V,IAAM1B,WAAU,WAEd,IAAI+zB,EAAY/tB,GAAQA,EAAK2D,aAAe3D,EAAK2D,YAAYa,OAAS,EAAKxE,EAAK2D,YAAY,GAAG+I,UAAOlC,EAClGujB,GAAUD,GAAkB,SAAAva,GAAC,sBAAUA,EAAV,CAAa7G,KAAMqhB,SACnD,CAAC/tB,IAGJ,IAAI+N,EAAgBoD,EAAMD,OAAOnD,cACjC7U,QAAQC,IAAI,oCAAqCsY,GACjD,IAAMuc,EAAuB,uCAAG,sCAAAzxB,EAAA,0DAE1ByD,EAF0B,mBAGxBiuB,EAAcjuB,EAAKqE,YAAYmK,iBAAiBT,GAAekF,QAC/Dib,EAAkBluB,EAAKqE,YAAYmK,iBAAiBT,GAAeoF,YACnEgb,EAAsBnuB,EAAKqE,YAAYmK,iBAAiBT,GAAeqF,sBAEjD5I,IAApB0jB,GAAqD,OAApBA,GAAgD,KAApBA,QACrC1jB,IAAxB2jB,GAA6D,OAAxBA,GAAwD,KAAxBA,SACrD3jB,IAAhByjB,GAA6C,OAAhBA,GAAwC,KAAhBA,EAT/B,uBAW1BhvB,MAAM,mJACN+C,EAAQrJ,KAAK,0BAZa,8BAkB1B8pB,EAlB0B,oBAmBxB2L,EAAepuB,EAAKqE,YAAYmK,iBAAiBT,GAAehJ,KACpE7L,QAAQC,IAAI,kBAAmBspB,GAC/BvpB,QAAQC,IAAI,iBAAkBi1B,GAC1BxL,EAAkCH,EAAiB7e,MAAK,SAAAif,GAAQ,OAAIuL,IAAiBvL,KACzF3pB,QAAQC,IAAI,oCAAqCypB,IAC7CA,EAxBwB,wBAyB1B1pB,QAAQC,IAAI,QAEZ8F,MAAM,sEACN+C,EAAQrJ,KAAK,0BA5Ba,kCAgC9BO,QAAQC,IAAI,qBAhCkB,UAiCboH,EAA+B,eAAgB,CAAEwN,gBAAe8F,mBAjCnD,QAiC1B/Z,EAjC0B,OAkC9BqG,EAAW,eAAKrG,EAAKkG,OACrB0R,EAAkB,YAAI5X,EAAK8a,QAC3B5S,EAAQrJ,KAAK,0BApCiB,4CAAH,qDA0C7B,OACE,6BAEE,sDACA,6BACE,qDACA,6FACA,6BAEA,kBAAC,GAAD,CAAcgN,SAAU,CAAC,EAAG,EAAG,SAACJ,GAAD,OAAcuoB,GAAkB,SAACO,GAAD,sBAAaA,EAAb,CAAgB3hB,KAAMnH,QAAcsO,EAAenH,UAAMlC,OAAWA,EAAW,EAAG,QAIjJ,oDACsB,6BACpB,kBAAC,GAAD,CAAc7E,SAAU,CAAC,EAAG,EAAG,SAACJ,GAAD,OAAcuoB,GAAkB,SAACO,GAAD,sBAAaA,EAAb,CAAgBR,kBAAmBtoB,QAAcsO,EAAega,kBAAmB,IAAK,GAAI,EAAG,QAKhK,yFAA+Dha,EAAeC,YAAY,GAA1F,QAAmGD,EAAeC,YAAY,GAA9H,WAEF,uEAA6C/F,EAA7C,KACA,4BAAQxO,QAASyuB,GAAjB,eC9DSM,GA5CD,WACZ,IAAMnc,EAAgBtW,EADJ,EAEkBH,IAAMnD,UAAS,GAFjC,mBAEXg2B,EAFW,KAECC,EAFD,KAGZC,EAAe/yB,IAAM+K,OAAO,MAelC,OACE,6BACE,qCACA,yBAAKxL,MAAO,CAAEC,gBAAiB,cAC7B,0CACA,gGACA,sDACA,yBAAKqE,QArBwB,WACjCrG,QAAQC,IAAI,QAGZ,IAAMiZ,EAAKrU,SAASC,cAAc,YAClCoU,EAAGlV,MAAQiV,EACXpU,SAASpB,KAAK0V,YAAYD,GAC1BA,EAAGrK,SACHhK,SAASuU,YAAY,QACrBvU,SAASpB,KAAK4V,YAAYH,GAE1Boc,GAAc,IAUgCvzB,MAAO,CAAEM,MAAO,OAAQqJ,QAAS,OAAQ2D,SAAU,WAC3F,uBAAGb,IAAK+mB,GAAetc,GACvB,uBAAGlX,MAAO,CAAE4J,UAAW,SAAUtJ,MAAO,QAAxC,IAAmDgzB,EAAa,UAAH,MAG/D,uCAAY,uBAAGtzB,MAAO,CAAE0Y,WAAY,QAAU+a,KAAK,mEAAmEzxB,OAAO,UAAjH,QAAZ,qCACA,gEACA,+EACA,+CAGF,oCACA,sHACA,mCACA,qCCrBS0xB,GAhBG,WAAO,IAAD,EAC4BjzB,IAAM0G,WAAW/B,GAA9BuuB,GADf,EAChB5uB,KADgB,EACVG,WADU,EACEsR,YADF,EACemd,UACrC,OACE,6BACE,yCACA,iDACA,qCACA,4CACA,8DACA,iDACA,+CACCA,EAAWA,EAASC,MAAM12B,KAAI,SAAC6H,EAAKtH,GAAN,OAAY,uBAAGL,IAAKK,GAAIsH,EAAK+E,SAAW,2CCD9D+pB,GAVK,WAAO,IAAD,EAC0BpzB,IAAM0G,WAAW/B,GAD3C,EAClBL,KADkB,EACZG,WADY,EACAsR,YADA,EACamd,SACrC,OACE,6BACE,4CACA,mDCLAG,GAEN,SAA+BC,GAQ7B,IAPA,IAAMpqB,EAAU,IAAIqqB,QAAQ,EAAID,EAAaxqB,OAAS,GAAK,GAErD0qB,GAAUF,EAAepqB,GAASzD,QAAQ,MAAO,KAAKA,QAAQ,KAAM,KAEpEguB,EAAUxwB,OAAOywB,KAAKF,GACtBG,EAAc,IAAIC,WAAWH,EAAQ3qB,QAElC9L,EAAI,EAAGA,EAAIy2B,EAAQ3qB,SAAU9L,EACpC22B,EAAY32B,GAAKy2B,EAAQI,WAAW72B,GAEtC,OAAO22B,EAbiBG,CADD,2F,SAiBVC,G,qFAAf,WAAgCC,EAAcC,EAAeC,GAA7D,iBAAArzB,EAAA,6DAEErD,QAAQC,IAAI,wEAaN02B,EAA2B,CAAEH,aAAc,CAAEA,eAAcC,gBAAeC,eAflF,kBAmB+BhvB,GAAwB,mCAAoCivB,GAnB3F,cAmBQC,EAnBR,OAsBI52B,QAAQC,IAAI,4CAA6C22B,GAtB7D,kBAuBW,CAAE9R,SAAS,EAAM1jB,QAAS,uCAvBrC,2DAyBW,CAAE0jB,SAAS,EAAO1jB,QAAS,yCAzBtC,2D,sBAwFO,SAAey1B,GAAtB,mC,8CAAO,WAA6BH,GAA7B,qBAAArzB,EAAA,yDACLrD,QAAQC,IAAI,oCACR62B,EAAqB,CAAEhS,SAAS,EAAO1jB,QAAS,4BAChD,kBAAmB21B,WAHlB,wBAIH/2B,QAAQC,IAAI,sCAJT,kBAMwB82B,UAAUC,cAAcC,MANhD,UAMGC,EANH,OAODl3B,QAAQC,IAAI,gCACPi3B,EAAaC,YARjB,wBASCn3B,QAAQC,IAAI,qCACZ62B,EAAqB,CAAEhS,SAAS,EAAO1jB,QAAS,qCAVjD,kBAWQ01B,GAXR,yBAc+BI,EAAaC,YAAYC,kBAdxD,WAe2B,QADxBC,EAdH,gCAgBCr3B,QAAQC,IAAI,qDAhBb,oBAkB+Bi3B,EAAaC,YAAYG,UAAU,CAC7DC,qBAAsB1B,GACtB2B,iBAAiB,IApBtB,eAkBOC,EAlBP,OAuBGz3B,QAAQC,IAAI,mCAvBf,UAwB8Bs2B,GAAiBkB,EAAiB,MAAOf,GAxBvE,eAwBGI,EAxBH,yBAyBUA,GAzBV,mCA2BmC,YAA5BY,aAAaC,WACf33B,QAAQC,IAAI,uCAEZD,QAAQQ,MAAM,4DAAd,MA9BL,uCAkCCR,QAAQC,IAAI,0CAlCb,UAmC4Bs2B,GAAiBc,EAAqB,WAAYX,GAnC9E,eAmCCI,EAnCD,yBAoCQA,GApCR,iEAwCD92B,QAAQQ,MAAM,uDAAd,MACAs2B,EAAqB,CAAEhS,SAAS,EAAO1jB,QAAS,wDAzC/C,kBA0CM01B,GA1CN,iCA6CEA,GA7CF,mE,sBCzGP,IA8Dec,GA9DmB,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,0BAA2B34B,EAAY,EAAZA,MACtD44B,EAA8CD,EAA9CC,mBAAoBC,EAA0BF,EAA1BE,sBACxBC,EAAmBF,EAAmB54B,GAMpC+4B,EAA0C,uCAAG,6BAAA50B,EAAA,sDAAmBoY,EAAnB,EAAS1X,OAAU0X,QACpEsc,GAAsB,SAAAD,GAEpB,OADAA,EAAmB54B,GAAOg5B,GAAKzc,EACxB,YAAIqc,MAHoC,2CAAH,sDAgB1CK,EAAU,SAACC,EAAgB/rB,GAC/B0rB,GAAsB,SAAAD,GAEpB,OADAA,EAAmB54B,GAAOm5B,KAAKD,GAAkB/rB,EAC1C,YAAIyrB,OAkBf,OACE,yBAAK/1B,MAAO,CAACC,gBAAgB,aAAcC,OAAO,QAChD,4CAAkB/C,EAAQ,GAC1B,kBAAC,KAAD,CACE+c,eAAgB+b,EAAiBE,GACjChyB,SAAU+xB,IAEZ,4BAAQl2B,MAAO,CAACC,gBAAgB,MAAM8O,aAAa,QAASzK,QArB1B,WAGpC0xB,GAAsB,SAAAD,GAIpB,OAHA93B,QAAQC,IAAI,SAAUf,GACtB44B,EAAmBjR,OAAO3nB,EAAO,GAE1B,YAAI44B,QAcX,UACA,6BACA,kBAAC,GAAD,CAASrrB,SAAU,CAAC,EAAG,EAAG,SAACJ,GAAD,OAAc8rB,EAAQ,QAAS9rB,IAAWyrB,EAAmB54B,GAAOm5B,KAAKC,MAAO,GAAI,QAAS,EAAG,MAC1H,6BACA,kBAAC,GAAD,CAAS7rB,SAAU,CAAC,EAAG,GAAI,SAACJ,GAAD,OAAc8rB,EAAQ,UAAW9rB,IAAWyrB,EAAmB54B,GAAOm5B,KAAKjH,QAAS,GAAI,UAAW,EAAG,MACjI,+B,UCfSvoB,gBA/BA,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACXG,EAAcC,qBAAWC,GAEvBovB,EAAM,uCAAG,4BAAAl1B,EAAA,sEACPD,GAAa,GAAD,OAAIV,EAAJ,gBAA2B,IADhC,cAGb1C,QAAQC,IAAI,wCAHC,SAUKiI,KAVL,OAUTswB,EAVS,OAYbvvB,EAAYhC,WAAZ,eAA4BuxB,IAC5B1vB,EAAQrJ,KAAK,YAbA,2CAAH,qDAqBZ,OACE,6BACE,kBAACg5B,GAAA,EAAD,CAAQpyB,QAASkyB,GAAjB,eCwPSG,GApQM,WAAO,IAAD,EACyBl2B,IAAM0G,WAAW/B,GAA7DL,EADmB,EACnBA,KAAMG,EADa,EACbA,WADa,KACDsR,YADC,EACYmd,SAG6BlzB,IAAMnD,SAAS,UAAI,kBAAmB03B,WAAa,gBAAiBtxB,OAAU,+CAAiD,oDAAhH,UAA0K,wCAA0CiyB,aAAaC,cAJzR,mBAIlBgB,EAJkB,KAISC,EAJT,KAMnBC,EAA4B,uCAAG,sBAAAx1B,EAAA,sDACnCrD,QAAQC,IAAI,SAIZy3B,aAAaoB,oBACV93B,MAAK,SAAA+3B,GACJ/4B,QAAQC,IAAI84B,GACZH,EAA6BG,MARE,2CAAH,qDAkClC,IAsBIC,EA9DqB,EA2DWx2B,IAAMnD,SAAS,cA3D1B,mBA2DlBq3B,EA3DkB,KA6DrBuC,GA7DqB,MA6DM,GAE3BC,EAAuC,GAGvCpyB,EAAK2F,UACJ3F,EAAK2F,SAAS0sB,eACdryB,EAAK2F,SAAS0sB,cAAcC,UAC5BtyB,EAAK2F,SAAS0sB,cAAcC,SAASC,6BAGxCJ,EAA2BnyB,EAAK2F,SAAS0sB,cAAcC,SAASC,2BAA2B,GAAGnB,GAC9Fc,EAA6BlyB,EAAK2F,SAAS0sB,cAAcC,SAASC,2BAA2B,GAAGhB,KAChGa,EAAuCpyB,EAAK2F,SAAS0sB,cAAcC,SAASC,4BA1ErD,MA8EyC72B,IAAMnD,SAAS45B,GA9ExD,gCA+EHz2B,IAAMnD,SAAS25B,GAA0D,CAAEV,MAAO,GAAIlH,QAAS,KA/E5F,mBA+EpBiH,EA/EoB,aAiF2B71B,IAAMnD,SAAS65B,IAjF1C,mBAiFlBpB,EAjFkB,KAiFEC,EAjFF,KAkFzBv1B,IAAM1B,WAAU,WAAQd,QAAQC,IAAI,iCAAkC63B,KAAuB,CAACA,IAC9F,IAAMD,EAA4B,CAAEC,qBAAoBC,yBACxD/3B,QAAQC,IAAI,4BAA6B63B,GAEzC,IA6CMwB,EAAoC,uCAAG,0CAAAj2B,EAAA,6DAEvCogB,EAAI,IAAI7Z,KACZ5J,QAAQC,IAAIwjB,GACRC,EAAID,EAAE8V,cACVv5B,QAAQC,IAAIyjB,GACR8V,EAAI,IAAI5vB,KAAJ,UAAY8Z,EAAZ,SACR1jB,QAAQC,IAAIu5B,GAGRC,EAAKhW,EAAEiW,qBAAuB,GAClC15B,QAAQC,IAAI,MAAOw5B,GAMfE,EAAsB,IAAI/vB,KAC1BgwB,EAAsBD,EAAoBD,qBAAuB,GAEvDrB,EAGH,6BAGP3G,EAAMoG,EA1BiC,oBA6BjBzwB,EAA+B,+BAAgC,CAAEmU,KANhF,6BAMsFkW,MAAKkI,wBA7B3D,QA6BrCjnB,EA7BqC,OA8BzC1L,EAAW0L,GA9B8B,mDA+B3B3S,QAAQC,IAAI,KAAZ,MA/B2B,2DAAH,qDAmCpC45B,EAA0C,uCAAG,4BAAAx2B,EAAA,6DACjDrD,QAAQC,IAAI,mEAAoEy2B,GAD/B,SAE9BG,KAF8B,OAE7C11B,EAF6C,OAGjDnB,QAAQC,IAAI,oCAAqCkB,GAHA,2CAAH,qDAgChD,OACE,6BACE,wCACA,kBAACgQ,GAAD,CAAOjO,GAAG,wBAAV,cACA,kBAAC,GAAD,MACA,yBAAKnB,MAAO,CAAEC,gBAAiB,cAC7B,6CAEA,uBAAGD,MAAO,CAAEM,MAAO,OAAQgN,SAAU,OAAQoH,YAAa,QAA1D,SAA0EkiB,GAC7C,YAA5BjB,aAAaC,YACZ,4BAAQtxB,QAASwyB,EAA8B92B,MAAO,CAAEC,gBAAiB,WAAzE,0BAC2B,YAA5B01B,aAAaC,YACZ,6BACE,4BAAQtxB,QA3KiB,WAEjCrG,QAAQC,IAAI,QAAS82B,UAAUC,eAI/BD,UAAUC,cAAcC,MAAMj2B,MAAK,SAAA84B,GACjC95B,QAAQC,IAAI,OAAQ65B,MA3BxB,WAAyE,IAA/Ch4B,EAA8C,uDAAtC,mBAAoB4C,EAAkB,uDAAX,UAErDpG,EAAM,4BAINgF,EAAU,CACdG,KAAMiB,EAENq1B,KAAM,4BACNC,QAAS,CAAC,IAAK,IAAK,KACpBC,IAAK,cACLC,MAAO57B,EACP67B,MAAO,kDACPC,QAAS,CAAC,CAAEtlB,OAAQ,SAAUhT,MAAO,OAAQi4B,KAAM,4CAErDhD,UAAUC,cAAcC,MAAMj2B,MAAK,SAAUg2B,GAC3CA,EAAcqD,iBAAiBv4B,EAAOwB,MAkBxCg3B,IA4JqDv4B,MAAO,CAAEC,gBAAiB,WAAvE,sBACD8E,EAAK+S,UAAUC,MAAQ,GAAK,4BAAQzT,QAASwzB,GAAjB,0FAIF,WAA5BnC,aAAaC,YAA2B,wBAAI51B,MAAO,CAAEM,MAAO,QAApB,6CAQzC,6BAAM,6BACN,6DACA,qEAEA,+CAqBF,yBAAKN,MAAO,CAAEE,OAAQ,OAAQD,gBAAiB,cAC7C,oCACC81B,EAAmB74B,KAAI,SAACs7B,EAAK/6B,GAAN,OAAa,kBAAC,GAAD,CAA2BL,IAAKK,EAAGN,MAAOM,EAAGq4B,0BAA2BA,OAC7G,4BAAQxxB,QA5E8B,WAE1CrG,QAAQC,IAAI,uCAEZ83B,GAAsB,SAAAD,GAGpB,OAFAA,EAAmBr4B,KAAK,CAACy4B,IAAG,EAAKG,KAAK,CAACC,MAAM,GAAGlH,QAAQ,MAEjD,YAAI0G,QAqET,sCAEF,4BAAQzxB,QAASizB,GAAjB,iBAAqE,6BAArE,sDC/QSkB,GARW,WAAO,IAAD,EACoBh4B,IAAM0G,WAAW/B,GAA7DL,EADwB,EACxBA,KADwB,EAClBG,WADkB,EACNsR,YADM,EACOmd,SAErC,OAAK5uB,EACAA,EAAKwB,MACF,kBAAC,GAAD,MADiB,oGADN,oD,2XC0Bd,IAAM6I,GAAQhT,YAAOiT,IAAPjT,CAAH,MA0SZs8B,GAAwB5xB,aArRV,SAAC,GAAgC,IAAlBS,EAAiB,EAA7BtB,SAAYsB,SAAiB,EAOT9G,IAAM0G,WAAW/B,GAAvCqR,GAP+B,EAO5CD,YAP4C,EAO/BC,mBAP+B,EAQfhW,IAAM0G,WAAW/B,GAApCuzB,GARkC,EAQ5ChF,SAR4C,EAQlCgF,gBAGVC,GAFoBn4B,IAAM+K,OAAO,MACT/K,IAAM+K,OAAO,MACtB/K,IAAM+K,OAAO,OAXgB,EAYA/K,IAAMnD,SAAS,MAZf,mBAY3Cu7B,EAZ2C,KAYxBC,EAZwB,OAaNr4B,IAAMnD,SAAS,UAbT,mBAa3By7B,GAb2B,WAoClDr1B,OAAOoI,iBAAiB,uBAdE,SAAC/J,GAEzBA,EAAEK,iBACeL,EACjB+2B,EAAqB/2B,GAIrB9D,QAAQC,IAAI,kFAadwF,OAAOoI,iBAAiB,gBALa,SAAA/J,GAEnC62B,EAAavvB,QAAQrG,UAArB,YACA/E,QAAQC,IAAI,qDAgCdwF,OAAOoI,iBAAiB,oBA5BU,SAAC/J,GAEjC,IAAIi3B,EAAc,MACdhE,UAAUiE,aACZD,EAAc,WAEZt1B,OAAOw1B,WAAW,8BAA8BC,UAClDH,EAAc,OAMhBD,EAAkBC,MA0CpBv4B,IAAM1B,WAAU,WA+Bd,OA9Be,uCAAG,8BAAAuC,EAAA,sEAKV83B,EAAyB1zB,GAAsC,mBAAoB,IAMnF2zB,EAAsB3zB,GAAsC,eAAgB,IAXlE,SAiBiB0zB,EAjBjB,cAiBdA,EAjBc,OAkBd3iB,EAAkB,YAAI2iB,IAlBR,SAmBcC,EAnBd,OAmBdA,EAnBc,OAoBdV,EAAe,eAAKU,IApBN,kDAuBAp7B,QAAQC,IAAR,MAvBA,kEAAH,oDAyBfo7B,GAKO,eAMN,IAzI+C,MAmJZ74B,IAAMnD,UAAS,GAnJH,mBAmJ3Ci8B,EAnJ2C,KAmJ9B7G,EAnJ8B,KAoJlD,OACE,oCAEE,yBAAKzvB,GAAG,aAAajD,MAAO,CAAEC,gBAAiB,QAASu5B,cAAe,MAAO/yB,QAAS,OAAQE,eAAgB,WAAY+K,SAAU,SAAU7D,IAAK,IAAK4rB,OAAQ,SAMjJ,aAAblyB,EAA0B,KACvB,kBAAC,KAAD,CACAmyB,QAAS,2BACP,kBAAC,GAAD,CAAgBnyB,SAAUA,EAAUmrB,eAAgBA,KAEtDiH,KAAMJ,EACNK,UAAWlH,EACXP,OAAQ,CAENuH,QAAQ,aACNhoB,SAAU,QACVpD,WAAY,SACZQ,SAAU,OACV+qB,WAAY,yBACZC,iBAAkB,kCALb,aAMO,aAEdC,KAAM,CACJroB,SAAU,YAEVjL,QAAS,SACTgS,MAAO,QAET2J,QAAS,CACP1Q,SAAU,YACV7D,IAAK,YACLE,KAAM,YACNisB,MAAO,YACPtZ,OAAQ,YACRmZ,WAAY,wCACZpzB,QAAS,SACTgS,MAAO,QAETwhB,QAAS,CACPJ,WAAY,mDAKF,2BAAbtyB,GACC,4BACEjD,QAAS,kBAAMouB,GAAe,IAC9B1yB,MAAO,CAAE2J,QAAS,OAAQ1J,gBAAiB,WAF7C,YAYgB,MAArB44B,GAA6B,4BAAQ74B,MAAO,CAAEC,gBAAiB,SAAU8O,aAAc,OAASzK,QArIvE,WAIJ,OAAtBu0B,GAIJA,EAAkBqB,SAElBrB,EAAkBsB,WAAWl7B,MAAK,SAACm7B,GACJ,aAAzBA,EAAaC,QACfp8B,QAAQC,IAAI,oCAEZD,QAAQC,IAAI,qCAEd46B,EAAqB,UAXrB90B,MAAM,iCAgI0B,eAMhB,aAAbuD,EAA0B,KACzB,yBAAKvH,MAAO,CAAEyG,QAAS,OAAQE,eAAgB,eAAgB6yB,cAAe,QAI3EjyB,EAASopB,SAAS,2BAA6B,kBAAC,GAAD,CAAOxvB,GAAG,0BAAV,SAAmD,KACnG,kBAAC,GAAD,CAAOA,GAAG,YAAV,eAQN,kBAAC,IAAD,CAAOkQ,OAAK,EAACC,KAAK,IAAIC,UAAW+oB,KACjC,kBAAC,IAAD,CAAOhpB,KAAK,WAAWC,UAAW+oB,KAQlC,kBAAC,IAAD,KAEE,kBAAC,IAAD,CAAOjpB,OAAK,EAACC,KAAK,IAAIC,UAAWgpB,KACjC,kBAAC,IAAD,CAAOlpB,OAAK,EAACC,KAAK,WAAWC,UAAWgpB,KACxC,kBAAC,IAAD,CAAOlpB,OAAK,EAACC,KAAK,yBAAyBC,UAAW6R,KAEtD,kBAAC,IAAD,CAAO/R,OAAK,EAACC,KAAK,iBAAiBC,UAAW8hB,KAC9C,kBAAC,IAAD,CAAOhiB,OAAK,EAACC,KAAK,yBAAyBC,UAAW6I,KACtD,kBAAC,IAAD,CAAO9I,KAAK,wCAAwCC,UAAWgX,KAG/D,kBAAC,IAAD,CAAOjX,KAAK,2DAA2DC,UAAW8W,KAClF,kBAAC,IAAD,CAAO/W,KAAK,uDAAuDC,UAAW8W,KAE9E,kBAAC,IAAD,CAAO/W,KAAK,uDAAuDC,UAAWipB,KAC9E,kBAAC,IAAD,CAAOlpB,KAAK,gDAAgDC,UAAWkpB,KACvE,kBAAC,IAAD,CAAOnpB,KAAK,wCAAwCC,UAAWmpB,KAE/D,kBAAC,IAAD,CAAOrpB,OAAK,EAACC,KAAK,uBAAuBC,UAAWopB,KACpD,kBAAC,IAAD,CAAOtpB,OAAK,EAACC,KAAK,qBAAqBC,UAAW6f,KAElD,kBAAC,IAAD,CAAO/f,OAAK,EAACC,KAAK,2BAA2BC,UAAWqpB,KACxD,kBAAC,IAAD,CAAOvpB,OAAK,EAACC,KAAK,yBAAyBC,UAAWspB,KACtD,kBAAC,IAAD,CAAOxpB,OAAK,EAACC,KAAK,uBAAuBC,UAAWmY,KAEpD,kBAAC,IAAD,CAAOrY,OAAK,EAACC,KAAK,uBAAuBC,UAAWsiB,KACpD,kBAAC,IAAD,CAAOxiB,OAAK,EAACC,KAAK,oBAAoBC,UAAWknB,KACjD,kBAAC,IAAD,CAAOpnB,OAAK,EAACC,KAAK,mBAAmBC,UAAWgR,KAChD,kBAAC,IAAD,CAAOlR,OAAK,EAACC,KAAK,qBAAqBC,UAAWmiB,UAsD3CoH,G,kDAxCb,aAAe,IAAD,8BACZ,gBACKn7B,MAAQ,CACXoF,KAAM,KACNC,KAAM,kBAENE,WAAY,SAACC,GACX,EAAKrF,SAAL,eAAmB,EAAKH,MAAxB,CAA+BoF,KAAMI,IAArC,sBAAgD,sBAAA7D,EAAA,sDAC9CrD,QAAQC,IAAI,wCAAyC,EAAKyB,MAAMoF,MAChE9G,QAAQC,IAAI,+BAAgC,EAAKyB,OAFH,6CAKlD6W,YAAa,KACbC,kBAAmB,SAACskB,GAClB,EAAKj7B,SAAL,eAAmB,EAAKH,MAAxB,CAA+B6W,YAAaukB,IAA5C,sBAA4D,sBAAAz5B,EAAA,sDAC1DrD,QAAQC,IAAI,gDAAiD,EAAKyB,MAAM6W,aACxEvY,QAAQC,IAAI,+BAAgC,EAAKyB,OAFS,6CAM9Dg0B,SAAU,KACVgF,eAAgB,SAACqC,GACf,EAAKl7B,SAAL,eAAmB,EAAKH,MAAxB,CAA+Bg0B,SAAUqH,IAAzC,sBAAyD,sBAAA15B,EAAA,sDACvDrD,QAAQC,IAAI,6CAA8C,EAAKyB,MAAMg0B,UACrE11B,QAAQC,IAAI,+BAAgC,EAAKyB,OAFM,8CAtBjD,E,qDA8BZ,OAEE,kBAAC,EAAesX,SAAhB,CAAyBhV,MAAOrC,KAAKD,OACnC,kBAAC+4B,GAAD,W,GAlC+Bh4B,aC5TxBu6B,GAfI,WAAO,IAAD,EACK39B,mBAAS,CAAE6f,QAAS,IADzB,mBAChB+d,EADgB,KACRC,EADQ,KAMvB,OACE,6BACE,mDACA,4BAAQ72B,QAPC,WACX62B,EAAU,CAAEhe,QAAS+d,EAAO/d,QAAU,MAMpC,WACA,uCAAY,8BAAO+d,EAAO/d,YCAjBie,GATA,WACb,OACE,6BACG,sDACC,kBAAC,GAAD,QCwCOC,G,4MArCbC,4BAA8B,SAACC,GAE7Bz4B,SAAS04B,iBAAT,WAT4B,gBAS+B5vB,SAAQ,SAAA6vB,GAAE,OAAIA,EAAGC,aAAa,QAAhB,UAT7C,cAS6C,YAT7C,eAS6C,OAAqFH,Q,kEAG3I,IAAD,OAClB37B,KAAK07B,4BAA4B,cAEjCt8B,MAAMY,KAAKnD,MAAMoD,KACdZ,MAAK,SAAAC,GACJ,OAAOA,EAAIC,UAEZF,MACC,SAACG,GACC,EAAKk8B,4BAA4B,SAEnC,SAAC78B,GACCR,QAAQC,IAAI,kBAAmBO,GAC/B,EAAK68B,4BAA4B,Y,6BAKlC7+B,GAQL,OACE,+BARY,6M,GA7BcgE,IAAMC,WCiDvBi7B,GAnDA,WACb,IAAMvf,EAAU,IAAI1Y,OAAOk4B,aA0C3B,OACE,6BACE,sCACA,4BAAQt3B,QAnBS,WArBnBtF,MAwBS,eAtBNC,MAAK,SAAA0C,GAAQ,OAAIA,EAASk6B,iBAE1BC,OAAM,SAAAC,GAAG,OAAI99B,QAAQC,IAAI,eAAgB69B,MAEzC98B,MAAK,SAAA48B,GAAW,OAAIzf,EAAQ4f,gBAAgBH,MAC5CC,OAAM,SAAAC,GAAG,OAAI99B,QAAQC,IAAI,eAAgB69B,MAEzC98B,MAAK,SAAAg9B,GAEJ,IAAMC,EAAc9f,EAAQ+f,qBAC5BD,EAAYE,OAASH,EACrBC,EAAYG,QAAQjgB,EAAQkgB,aAC5BJ,EAAYK,WAEbT,OAAM,SAAAC,GAAG,OAAI99B,QAAQC,IAAI,eAAgB69B,QAwB1C,wBCxBSS,GAnBK,WAAO,IAAD,EAEJvR,aAASwR,MAAtBC,EAFiB,oBAUxB,OACE,6BACE,sCAEA,4BAAQp4B,QAXC,WAEXrG,QAAQC,IAAI,MACZw+B,MAQE,gB,mkBCMN,IAAMC,GAAQvgC,IAAOC,IAAV,MASE+S,GAAQhT,YAAOiT,IAAPjT,CAAH,MAqEH0K,oBArDf,YAAiC,IAAT81B,EAAQ,EAAlB32B,SAAU22B,KAGtB,OAEE,kBAAC,IAAD,CAAYC,SAAS,IAAIz4B,UAAU,QAS/Bw4B,EAAKjM,SAAS,OACd,kBAACgM,GAAD,KACE,kBAAC,GAAD,CAAOx7B,GAAG,KAAV,QACA,kBAAC,GAAD,CAAOA,GAAG,YAAV,cACA,kBAAC,GAAD,CAAOA,GAAG,WAAV,iBACA,kBAAC,GAAD,CAAOA,GAAG,eAAV,cAEA,kBAAC,GAAD,CAAOA,GAAG,WAAV,kBACA,kBAAC,GAAD,CAAOA,GAAG,YAAV,WAEA,kBAAC,GAAD,CAAOA,GAAG,iBAAV,mBAEA,kBAAC,GAAD,CAAmBtB,IAAKc,EAAU,WAClC,0BAAMX,MAAO,CAAE4J,UAAW,SAAU0D,SAAU,OAAQiB,OAAQ,oBAC5D,yBAAKnK,UAAU,eAAf,iBACA,8CAFF,IAE4B,0BAAMpE,MAAO,CAAEM,MAAO,QAAtB,IAAiCw8B,gBAIjE,kBAAC,IAAD,KAEE,kBAAC,IAAD,CAAOzrB,OAAK,EAACC,KAAK,KAAI,kBAAC,IAAD,CAAUnQ,GAAG,cACnC,kBAAC,IAAD,CAAOkQ,OAAK,EAACC,KAAK,cAAcC,UAAWhT,IAC3C,kBAAC,IAAD,CAAO8S,OAAK,EAACC,KAAK,WAAWC,UAAWvQ,IACxC,kBAAC,IAAD,CAAOqQ,OAAK,EAACC,KAAK,UAAUC,UAAW1P,IAEvC,kBAAC,IAAD,CAAOwP,OAAK,EAACC,KAAK,UAAUC,UAAW6pB,KACvC,kBAAC,IAAD,CAAO/pB,OAAK,EAACC,KAAK,UAAUC,UAAWoqB,KACvC,kBAAC,IAAD,CAAOtqB,OAAK,EAACC,KAAK,gBAAgBC,UAAWirB,KAC7C,kBAAC,IAAD,CAAOlrB,KAAK,WAAWC,UAAWwrB,UClFpCC,GAAcC,QACW,cAA7Bv5B,OAAOuC,SAASi3B,UAEa,UAA7Bx5B,OAAOuC,SAASi3B,UAEhBx5B,OAAOuC,SAASi3B,SAAShnB,MACvB,2DAwEJ,SAASinB,GAAgBC,EAAOC,GAC9Bp/B,QAAQC,IAAI,oDAAsD82B,WAClEA,UAAUC,cACPqI,SAASF,GACTn+B,MAAK,SAAAk2B,GACJl3B,QAAQC,IAAI,0BAA2Bi3B,GAEvCA,EAAaoI,cAAgB,WAC3B,IAAMC,EAAmBrI,EAAasI,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB79B,QACfq1B,UAAUC,cAAc0I,YAI1B1/B,QAAQC,IACN,iHAKEm/B,GAAUA,EAAOO,UACnBP,EAAOO,SAASzI,KAMlBl3B,QAAQC,IAAI,sCAGRm/B,GAAUA,EAAOQ,WACnBR,EAAOQ,UAAU1I,WAO5B2G,OAAM,SAAAr9B,GACLR,QAAQQ,MAAM,4CAA6CA,MC7HjEq/B,IAASC,OACP,kBAAC,IAAD,KACE,kBAAC,GAAD,OAEFj7B,SAAS4K,eAAe,SDUnB,SAAkB2vB,GAOvB,GALM,kBAAmBrI,WAAc/2B,QAAQC,IAAI,4DAK/C,kBAAmB82B,UAAW,CAOhC,GAHA/2B,QAAQC,IAAI,yCAEM,IAAI8/B,IAAIlB,wBAAwBp5B,OAAOuC,SAASwtB,MACpDwK,SAAWv6B,OAAOuC,SAASg4B,OAKvC,YAJAhgC,QAAQC,IAAI,kKAOdwF,OAAOoI,iBAAiB,QAAQ,WAK9B,IAGMsxB,EAAK,UAAMN,wBAAN,YAFP,qBAeGE,IACL/+B,QAAQC,IAAI,8BAuEpB,SAAiCk/B,EAAOC,GACtCp/B,QAAQC,IAAI,8BAEZc,MAAMo+B,EAAO,CACX37B,QAAS,CAAE,iBAAkB,YAE5BxC,MAAK,SAAA0C,GAEJ,IAAMu8B,EAAcv8B,EAASF,QAAQ08B,IAAI,gBAGzClgC,QAAQC,IAAI,oBAAyC,MAApByD,EAASy8B,QACxB,MAAfF,IAA8D,IAAvCA,EAAY1rB,QAAQ,gBAGxB,MAApB7Q,EAASy8B,QACO,MAAfF,IAA8D,IAAvCA,EAAY1rB,QAAQ,cAG5CwiB,UAAUC,cAAcC,MAAMj2B,MAAK,SAAAk2B,GACjCA,EAAakJ,aAAap/B,MAAK,WAC7ByE,OAAOuC,SAASq4B,eAKpBnB,GAAgBC,EAAOC,MAG1BvB,OAAM,WACL79B,QAAQC,IACN,oEApGAqgC,CAAwBnB,EAAOC,GAI/BrI,UAAUC,cAAcC,MAAMj2B,MAAK,WACjChB,QAAQC,IACN,iHAMJi/B,GAAgBC,EAAOC,OC9D/BpI,I,mBClBAh5B,EAAOC,QAAU,IAA0B,wC,mBCA3CD,EAAOC,QAAU,IAA0B,sC","file":"static/js/main.d5f1c685.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/plusLight.a55aab25.png\";","module.exports = __webpack_public_path__ + \"static/media/Gicon.0b1e5c66.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/taffFemale.996f7eac.mp3\";","module.exports = __webpack_public_path__ + \"static/media/Derek_Clegg_-_09_-_Youre_The_Dummy.3d8fffdc.mp3\";","module.exports = __webpack_public_path__ + \"static/media/Trumpets8s.289d2da1.mp3\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/plus.76c6a9e0.png\";","import React, { useState } from 'react';\r\n// import { render } from 'react-dom';\r\nimport styled from 'styled-components';\r\nimport { SortableContainer, SortableElement, arrayMove } from 'react-sortable-hoc';\r\n// const arrayMove = require('array-move');\r\n\r\nconst SGalleryWrapper = styled.div`\r\nmargin:10px 40px;\r\ntext-align: center;\r\nbackground-color: lightgrey;\r\n@media(max-width: 400px) { \r\n  margin:3px;\r\n}\r\n`\r\nconst Simg = styled.img`\r\nwidth:200px;\r\nmax-width:25%;\r\nmargin: 10px;\r\nbackground: linear-gradient(  rgba(0,0,0,0),white);\r\n/* background-color:white; */\r\n`\r\n\r\n\r\nconst Image = props =>\r\n  // <div>\r\n    <Simg src={props.imageUrl} alt=\"\"></Simg>\r\n  // </div>\r\n\r\nconst SortableSingleImageContainer = SortableElement(props => <Image imageUrl={props.imageUrl}></Image>)\r\n\r\n\r\nconst SortableImagesContainer = SortableContainer(props =>\r\n  <div>\r\n    {props.imagesUrls.map((imageUrl, index) =>\r\n      <SortableSingleImageContainer key={imageUrl} index={index} imageUrl={imageUrl}></SortableSingleImageContainer>)}\r\n  </div>)\r\n\r\n\r\nconst SortableGallery = () => {\r\n  const returnPicturesArray = (numberOfPictures) => {\r\n    const picturesArray = [];\r\n    for (let i = 1; i <= numberOfPictures; i++) {\r\n      picturesArray.push(`https://robohash.org/${i}`);\r\n    };\r\n    return picturesArray;\r\n  }\r\n  const [pictures, setPictures] = useState(returnPicturesArray(10));\r\n\r\n\r\n  const onSortEndF = ({ oldIndex, newIndex }) => {\r\n    console.log(\"on sort end fired\");\r\n    let newArray = arrayMove(pictures, oldIndex, newIndex);\r\n    setPictures(newArray);\r\n  };\r\n\r\n\r\n  return (\r\n    <SGalleryWrapper>\r\n      <h2>Sortable gallery</h2>\r\n      {/* <div>{pictures.map(picture => <Simg src={picture} alt=\"\"></Simg>)}</div> */}\r\n      <SortableImagesContainer imagesUrls={pictures} onSortEnd={onSortEndF} axis='xy'></SortableImagesContainer>\r\n    </SGalleryWrapper>\r\n  );\r\n};\r\n\r\nexport default SortableGallery;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport SortableGallery from './SortableGallery'\r\n// import SortableGallery2 from './SortableGallery2' //only works with vertical sorting\r\nconst SPlaygroundWrapper = styled.div`\r\ntext-align: center;\r\n`\r\nfunction Playground() {\r\n  return (\r\n    <SPlaygroundWrapper>\r\n      <h1>My React Playground</h1>\r\n      {/* <div>{pictures.map(picture => <Simg src={picture} alt=\"\"></Simg>)}</div>  */}\r\n      <SortableGallery />\r\n      {/* <SortableGallery2 /> */}\r\n    </SPlaygroundWrapper>\r\n  );\r\n}\r\n\r\nexport default Playground;","import React, { useState, useEffect } from 'react';\r\n\r\nfunction DogsAPI() {\r\n\r\n  const [error, setError] = useState(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [data, setdata] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(\"https://dog.ceo/api/breeds/image/random\")\r\n      .then(res => res.json())\r\n      .then(\r\n        (result) => {\r\n          setIsLoaded(true);\r\n          setdata(result.message);\r\n        },\r\n        (error) => {  // Note: it's important to handle errors here instead of a catch() block so that we don't swallow exceptions from actual bugs in components.\r\n          setIsLoaded(true);\r\n          setError(error);\r\n        }\r\n      )\r\n  }, [])   // Note: the empty deps array [] means this useEffect will run once similar to componentDidMount()\r\n\r\n  if (error) {\r\n    return <div>Error: {error.message}</div>;\r\n  } else if (!isLoaded) {\r\n    return <div>Loading...</div>;\r\n  } else {\r\n    return (\r\n      <>\r\n        <div>{data}</div>\r\n        {/* <ul> */}\r\n\r\n        {/* {items.map(item => (\r\n            <li key={item.name}>\r\n              {item.name} {item.price}\r\n            </li> */}\r\n        {/* ))} */}\r\n        {/* </ul> */}\r\n      </>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default DogsAPI;\r\n","import React from 'react';\r\nimport DogsAPI from './Dogs';\r\n\r\nconst DogsFrame = () => {\r\n  return (\r\n    <div>\r\n      <h3>Dogs API (CORS: yes)</h3>\r\n      <DogsAPI/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DogsFrame;","import React from 'react';\r\nimport CatsAPI from './Cats';\r\nimport styled from 'styled-components';\r\n\r\nexport const Note = styled.p`\r\ncolor: blue;\r\nfont-style:italic;\r\nfont-size:0.8rem;\r\n\r\n`;\r\nconst CatsFrame = () => {\r\n  return (\r\n    <div>\r\n      <h3>Cats API (CORS: no)</h3>\r\n      <Note>note</Note>\r\n      <CatsAPI />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CatsFrame;","import React from 'react';\r\nimport { Note } from './CatsFrame';\r\n// import { Redirect } from 'react-router-dom';\r\n\r\nclass APITemplate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // console.log(\"props url in constructor:\", props.url);\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      data: [],\r\n      // url: props.url,\r\n      // title:props.title\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // console.log(\"component did mount\", this.state);\r\n    fetch(this.props.url)\r\n      .then(res => {\r\n        // console.log(\"first  in fetch: \", res);\r\n        // console.log(\"first  in fetch: \", res.body);\r\n        return res.json()\r\n      })\r\n      .then(\r\n        (result) => {\r\n          // console.log(\"Result second in fetch:\", result);\r\n\r\n          this.setState({\r\n            isLoaded: true,\r\n            data: result\r\n          });\r\n        },\r\n        // Note: it's important to handle errors here\r\n        // instead of a catch() block so that we don't swallow\r\n        // exceptions from actual bugs in components.\r\n        (error) => {\r\n\r\n          this.setState({\r\n            isLoaded: true,\r\n            error\r\n          });\r\n          if (error) console.log(\"Error second in fetch:\", error);\r\n\r\n        }\r\n      )\r\n  }\r\n\r\n  render(props) {\r\n    const { data } = this.state;\r\n    // console.log(\"state in render:\", this.state);\r\n    // console.log(\"props in render:\", props); //no props - undefined!!\r\n    // console.log(\" url in state in render:\", url);\r\n    // console.log(\" error in state in render:\", error);\r\n    // console.log(\"type of received data in render: \", (typeof data == 'object'));\r\n\r\n\r\n    let key = 0;\r\n    return (\r\n      <div>\r\n        <h3>{this.props.title}</h3>\r\n        <Note> getting from url: \"{this.props.url}\"</Note>\r\n        {/* <div>Error: {error}</div> */}\r\n        {/* <div>Error:</div> */}\r\n        {/* {error ? Object.keys(error).map(obj => <div>{obj}:{data[obj].name}</div>) : <p>No error</p>} */}\r\n        {/* <br /> */}\r\n        {/* <div>Is loaded: {isLoaded}</div> */}\r\n        <div style={{ backgroundColor: 'red', margin: '10px' }}>\r\n          <h5> Data received-></h5>\r\n          {(typeof data == \"object\") ? Object.entries(data).map(arr => { key++; return <div key={key}> <span style={{ color: 'blue' }}> {arr[0]} </span> : {JSON.stringify(arr[1])}</div>; }) : <p>{data}</p>}\r\n          {/* {(typeof data == \"object\") ? <div>{JSON.stringify(data)}</div> : <p> {data} </p>}  */}\r\n        </div>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default APITemplate;","let projectName = 'MERN-ReactForExpress';\r\n// let projectName = 'TestedPushupPlans';\r\nlet urlRoot = '';\r\nlet urlRootWithoutApi = '';\r\nlet frontEndPushupsUrlRoot = '';\r\nlet loginWithGoogleUrl = '';\r\nlet loginWithFacebookUrl = '';\r\nlet logoutFromGoogleUrl = '';\r\nif (process.env.NODE_ENV === 'development') {\r\n  urlRoot = '/api';\r\n  // urlRoot = 'http://localhost:3000/api';\r\n  // urlRoot = 'http://localhost:3001/api';\r\n  urlRootWithoutApi = ''; //not used in pushups only in old mongo-testing component\r\n  // urlRootWithoutApi = 'http://localhost:3001';\r\n    frontEndPushupsUrlRoot = `http://localhost:3000/${projectName}#/pushups`;\r\n\r\n  // loginWithGoogleUrl = '/api/authenticate/google';\r\n  loginWithGoogleUrl = 'http://localhost:3001/api/authenticate/google';\r\n  loginWithFacebookUrl = 'http://localhost:3001/api/authenticate/facebook';\r\n  // logoutFromGoogleUrl = '/api/authenticate/googleLogout';\r\n  logoutFromGoogleUrl = 'http://localhost:3001/api/authenticate/googleLogout';\r\n}\r\nif (process.env.NODE_ENV !== 'development') {\r\n  urlRoot = 'https://mern-express-heroku.herokuapp.com/api';\r\n  urlRootWithoutApi = 'https://mern-express-heroku.herokuapp.com';\r\n  frontEndPushupsUrlRoot = `https://mmacode.github.io/${projectName}/#/pushups`;\r\n  loginWithGoogleUrl = 'https://mern-express-heroku.herokuapp.com/api/authenticate/google';\r\n  loginWithFacebookUrl = 'https://mern-express-heroku.herokuapp.com/api/authenticate/facebook';\r\n  logoutFromGoogleUrl = 'https://mern-express-heroku.herokuapp.com/api/authenticate/googleLogout';\r\n}\r\n\r\n\r\n\r\n// urlRoot = 'https://mern-express-heroku.herokuapp.com/api';\r\n// urlRoot = 'http://localhost:3001/api';\r\n\r\nexport { urlRoot, urlRootWithoutApi, frontEndPushupsUrlRoot, loginWithGoogleUrl,loginWithFacebookUrl, logoutFromGoogleUrl };\r\n// export default urlRoot ;\r\n","import React from 'react';\r\n// import CatsFrame from './APIs/CatsFrame';\r\nimport DogsFrame from './APIs/DogsFrame';\r\nimport APITemplate from './APIs/APITemplate';\r\nimport { urlRoot } from '../globalState/globalVariables';\r\nimport styled from 'styled-components'\r\n\r\n\r\nconsole.log(urlRoot);\r\n\r\n// const Block = styled(CatsAPI)`\r\n// background-color: green !important;\r\n// min-height:100px;\r\n// min-width:300px;\r\n// `;\r\nconst SFrame = styled.div`\r\n>*{\r\nbackground-color: lightgreen;\r\nmin-height:100px;\r\nmin-width:300px;\r\nmargin:10px;\r\n}\r\n`;\r\n\r\n\r\nfunction APIPage() {\r\n  // urlRoot = 'https://mern-express-heroku.herokuapp.com/api';\r\n  // urlRoot = 'http://localhost:3001/api';\r\n  return (\r\n    <>\r\n      <h2>This is API page.</h2>\r\n      <SFrame>\r\n        {/* <CatsFrame /> */}\r\n        <DogsFrame />\r\n        <APITemplate url={urlRoot+'/json'} title='test of simple local API from Express'/>\r\n        <APITemplate url={urlRoot+'/json/cats'} title='cats from Remote API using CORS'/>\r\n        {/* <APITemplate url='/api/send' /> */}\r\n        {/* <APITemplate url='/api/write' /> */}\r\n\r\n\r\n      </SFrame>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default APIPage;","import { urlRoot } from '../globalState/globalVariables';\r\n\r\nlet translate = async (from, to, textToTranslate) => {\r\n\r\n  async function postJsonData(url, data) {//object  \r\n    const options = {\r\n      method: 'POST', // *GET, POST, PUT, DELETE, etc.\r\n      headers: {\r\n        'Content-Type': 'application/json'  // 'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: JSON.stringify(data) // body data type must match \"Content-Type\" header\r\n    }\r\n    const response = await fetch(url, options);\r\n    console.log(\"1.Fetch res in translate:\", response);\r\n    return await response.json(); // parses JSON response into native JavaScript objects\r\n  }\r\n\r\n  return await\r\n    // postJsonData('http://localhost:3001/api/translate',\r\n    // postJsonData('https://mern-express-heroku.herokuapp.com/api/translate',\r\n    postJsonData(`${urlRoot}/translate`,\r\n    {\r\n      from,\r\n      to,\r\n      translate: textToTranslate,\r\n    })\r\n    .then((data) => {\r\n      console.log(\"Data from server: \",data); // JSON data parsed by `response.json()` call\r\n      // console.log(data.translated); // JSON data parsed by `response.json()` call\r\n      return data;\r\n    });\r\n}\r\n\r\nexport default translate;","import React, { Component } from 'react'\r\nimport translate from '../../functions/translate'\r\nimport styled from 'styled-components';\r\nimport './alert.css';\r\n\r\nconst SHighlight = styled.p`\r\ndisplay: inline-block;\r\n/* display: flex; align-items: center;justify-content: center; margin:auto; */\r\nbackground-color: yellowgreen;\r\npadding: 10px 20px;\r\n`\r\n// const salert = styled.p`\r\n// `\r\n\r\n\r\nexport default class TRpage extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      textToTranslate: '',\r\n      submitted: false,\r\n      TextTranslated: null\r\n    }\r\n  };\r\n\r\n  inputChangeHandler = async (e) => {\r\n    this.setState({ textToTranslate: e.target.value });\r\n    this.setState({ submitted: false });\r\n  }\r\n\r\n  handleSubmit = async e => {\r\n    e.preventDefault();\r\n    this.setState({ submitted: true });\r\n    // console.log(this.state.textToTranslate);\r\n\r\n    let translationObject = await translate('en', 'cs', this.state.textToTranslate);\r\n    this.setState({ TextTranslated: translationObject.translated });\r\n\r\n    // const formX = document.querySelector('#translate-form-1');\r\n    // formX.reset();\r\n  }\r\n\r\n  handleSubmit2 = async e => {\r\n    e.preventDefault();\r\n    this.setState({ submitted: true });\r\n    let translationObject = await translate('cs', 'en', this.state.textToTranslate);\r\n    this.setState({ TextTranslated: translationObject.translated });\r\n  }\r\n\r\n\r\n  checkCzechHighlight = e => {\r\n    \r\n    // short alert\r\n    let alertUserForSec = async (text, durationInSec) => {\r\n      let alertForSec = document.createElement('p');\r\n      // alertForSec.textContent = text;\r\n      alertForSec.innerHTML = text;\r\n      alertForSec.id = \"alertForSec\";\r\n      // alertForSec.classList.add(\"flyingAlert\");\r\n      alertForSec.style.animationDuration = durationInSec + \"s\";\r\n      let hook = document.querySelector(\"#translateForms\");\r\n      hook.append(alertForSec);\r\n      await new Promise(resolve => setTimeout(resolve, durationInSec * 1000));\r\n      // console.log('XXXXXXXXXXX alert pop up');\r\n      document.querySelector(\"#alertForSec\").remove();\r\n    }\r\n\r\n\r\n\r\n    function getSelectionText(e) {\r\n      // e.preventDefault();\r\n      var text = \"\";\r\n      if (window.getSelection) {\r\n        console.log(\"text received\");\r\n        text = window.getSelection().toString();\r\n      } else if (document.selection && document.selection.type !== \"Control\") {\r\n        console.log(\"control received\");\r\n\r\n        text = document.selection.createRange().text;\r\n      } else {\r\n        console.log(\"screwed\");\r\n\r\n        alert('no');\r\n      }\r\n      return text;\r\n    }\r\n    console.log(getSelectionText(e));\r\n    alertUserForSec(getSelectionText(e), 1);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Translate page</h1>\r\n        <div id='translateForms'>\r\n\r\n          <form id='translate-form-1' onSubmit={this.handleSubmit}>\r\n            <h4>From ENGLISH to CZECH:</h4>\r\n            {/* method=\"post\" */}\r\n            {/* <input type='text' placeholder=\"English text...\" value={this.state.enText} onChange={this.inputChangeHandler} /> */}\r\n            <input type='text' placeholder=\"English text...\" onChange={this.inputChangeHandler} />\r\n            {/* <input type='text' value='Home' onChange={this.inputChangeHandler} /> */}\r\n            <button type=\"submit\">Submit</button>\r\n          </form>\r\n          <form id='translate-form-1' onSubmit={this.handleSubmit2}>\r\n            <h4>From CZECH to ENGLISH:</h4>\r\n            {/* method=\"post\" */}\r\n            <input type='text' placeholder=\"English text...\" onChange={this.inputChangeHandler} />\r\n            {/* <input type='text' value='Home' onChange={this.inputChangeHandler} /> */}\r\n            <button type=\"submit\">Submit</button>\r\n          </form>\r\n          {/* <span>{this.state.submitted ? 'Submitted' : 'Recorded'}: </span> */}\r\n          {/* <span>\"{this.state.enText}\"</span> */}\r\n          {typeof this.state.TextTranslated == 'string' && <SHighlight>{this.state.TextTranslated}</SHighlight>}\r\n        </div>\r\n        <div>\r\n          {/* <p className='textToHighlight' onClick={this.checkCzechHighlight} >Švýcarsko, mezi Čechy většinou známé precizností a vysokou úrovní infrastruktury, si při zvládání epidemie koronaviru nevede zrovna nejlépe. V zemi s více než 27 tisíci nakaženými a tisíci mrtvými dosud neplatí povinné nošení roušek, a to ani pro zaměstnance obchodů. Když jdete ven se zakrytým obličejem, lidé na vás koukají jako na malomocného, shodují se Češi žijící v zemi. */}\r\n          <p className='textToHighlight' onTouchEnd={this.checkCzechHighlight} >Švýcarsko, mezi Čechy většinou známé precizností a vysokou úrovní infrastruktury, si při zvládání epidemie koronaviru nevede zrovna nejlépe. V zemi s více než 27 tisíci nakaženými a tisíci mrtvými dosud neplatí povinné nošení roušek, a to ani pro zaměstnance obchodů. Když jdete ven se zakrytým obličejem, lidé na vás koukají jako na malomocného, shodují se Češi žijící v zemi.\r\n              Zdroj: https://www.idnes.cz/zpravy/zahranicni/koronavirus-covid-19-svycarsko-nakazeni-nemocni-opatreni.A200417_112621_zahranicni_vlc</p>\r\n          {/* <p onTouch={this.checkCzechHighlight} >Touch Another is for staff to reuse \"(washable) surgical gowns or coveralls or similar suitable clothing (for example, long-sleeved laboratory coat, long-sleeved patient gown or industrial coverall) with a disposable plastic apron for AGPs (aerosol-generating procedures) and high-risk settings with forearm washing once gown or coverall is removed\".</p> */}\r\n          <button onClick={this.checkCzechHighlight}>Click me now</button>\r\n          <p onTouchEndCapture={this.checkCzechHighlight} >TouchEndCapture Another is for staff to reuse</p>\r\n          <p onTouchCancel={this.checkCzechHighlight} >TouchCancel Another is for staff to reuse</p>\r\n          <p onTouchCancelCapture={this.checkCzechHighlight} > TouchCancelCapture Another is for staff to reuse</p>\r\n          <p onTouchMove={this.checkCzechHighlight} >TouchMove Another is for staff to reuse</p>\r\n          <p onTouchMoveCapture={this.checkCzechHighlight} >TouchMoveCapture Another is for staff to reuse</p>\r\n          <p onTouchStart={this.checkCzechHighlight} >TouchStart Another is for staff to reuse</p>\r\n          <p onTouchStartCapture={this.checkCzechHighlight} >TouchStartCapture Another is for staff to reuse</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n","import { createContext } from 'react';\r\nexport let pushUpsState = {\r\n  user: null,\r\n  info: 'Pushups context',\r\n  reRender:0,\r\n  updateUser(newUser) {\r\n    this.user = newUser;\r\n    console.log(\"context updated to \", this);\r\n    this.reRender += 1;\r\n  }\r\n};\r\n\r\nconst PushUpsContext = createContext(pushUpsState);\r\nexport default PushUpsContext;\r\n\r\n","import { urlRoot } from '../globalState/globalVariables';\r\n\r\nexport async function postJsonDataUrlAfterAPIpushups(urlEnd, data) {\r\n  let url = urlRoot + '/pushups' + urlEnd;\r\n  let dataToReturn;\r\n  // console.log(\"1 Starting PostJson SEND Pushups request with url and data:\",url, data);\r\n  try {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n      credentials: 'include'\r\n    };\r\n    // options.credentials = 'include';\r\n    const response = await fetch(url, options);\r\n    // console.log(\"fetched response:\", response);\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    // console.log(\"POSTPushupJSON JSON RESPONSE:\", dataToReturn);\r\n    // console.log(\"type of...\", typeof dataToReturn);\r\n    return dataToReturn;\r\n  }\r\n  catch (err) {\r\n    console.log(\"!!!err in receiving json data back from postJsonDataUrlAfterAPIpushups request\", err);\r\n    dataToReturn = err;\r\n    return dataToReturn;\r\n  }\r\n  // return dataToReturn;\r\n}\r\n\r\nexport async function postJsonDataUrlAfterAPIgeneralPushups(urlEnd, data) {\r\n  let url = urlRoot + '/generalPushups' + urlEnd;\r\n  let dataToReturn;\r\n  // console.log(\"1 Starting PostJson SEND Pushups request with url and data:\",url, data);\r\n  try {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n      credentials: 'include'\r\n    };\r\n    // options.credentials = 'include';\r\n    const response = await fetch(url, options);\r\n    // console.log(\"fetched response:\", response);\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    // console.log(\"POSTPushupJSON JSON RESPONSE:\", dataToReturn);\r\n    // console.log(\"type of...\", typeof dataToReturn);\r\n    return dataToReturn;\r\n  }\r\n  catch (err) {\r\n    console.log(\"!!!err in receiving json data back from postJsonDataUrlAfterAPIgeneralPushups request\", err);\r\n    dataToReturn = err;\r\n    return dataToReturn;\r\n  }\r\n  // return dataToReturn;\r\n}\r\n\r\nexport async function postJsonDataUrlAfterAPI(urlEnd, data) {\r\n  let url = urlRoot + urlEnd;\r\n  let dataToReturn;\r\n  console.log(\"POST_JSON1: Starting PostJson SEND Pushups request with url and data:\",url, data);\r\n  try {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n      credentials: 'include'\r\n    };\r\n    options.credentials = 'include'; //to enable cookies. was turned off, now testing as 'on'\r\n    const response = await fetch(url, options);\r\n    console.log(\"POST_JSON2:fetched response:\", response);\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    console.log(\"POST_JSON3: POSTPushupJSON JSON RESPONSE:\", dataToReturn);\r\n    console.log(\"POST_JSON3b:type of...\", typeof dataToReturn);\r\n    return dataToReturn;\r\n  }\r\n  catch (err) {\r\n    console.log(\"POST_JSON4: !!!err in receiving json data back from postJsonDataUrlAfterAPI request\", err);\r\n    dataToReturn = err;\r\n    return dataToReturn;\r\n  }\r\n  // return dataToReturn;\r\n}\r\n\r\nasync function postJsonData(url, data) {\r\n  let dataToReturn;\r\n  console.log(\"POST_JSON-B1: Starting PostJson SEND (No Pushups) request with url and data:\",url, data);\r\n\r\n  try {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n      credentials: 'include' //to enable cookies. was turned off, now testing as 'on'\r\n    };\r\n    // options.credentials = 'include';\r\n    const response = await fetch(url, options);\r\n    // const response = await fetch(url, {credentials:'include'});\r\n    console.log(\"POST_JSON-B2:fetched response:\", response);\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    // console.log(\"DATA returned from server: \", ...dataToReturn);\r\n    console.log(\"POST_JSON-B3:DATA returned from server: \", dataToReturn);\r\n  }\r\n  catch (err) {\r\n    console.log(\"POST_JSON-B4:!!!err in receiving json data back from POSTJson request\", err);\r\n    dataToReturn = err;\r\n  }\r\n  return dataToReturn;\r\n}\r\n\r\nexport default postJsonData;","import { urlRoot, frontEndPushupsUrlRoot } from '../../../globalState/globalVariables';\r\nimport { postJsonDataUrlAfterAPI } from '../../../functions/postJsonData';\r\n// import { withRouter } from 'react-router-dom';\r\n\r\nconst checkIfNewGuestOrCookiesDisabled = async (cookieCreated) => { //cookieCreated contains name of the cookie created\r\n  //no cookie existed\r\n  console.log(\"checking if cookies can be created. (no cookie was received on server...)\");\r\n  // console.log(data);\r\n  if (cookieCreated) {\r\n    // contact server and see if created cookie is sent back (if yes, it is guest profile and just leave it)\r\n    console.log(\"Cookie was created by server\")\r\n    console.log(\"contacting server to see if created cookie persisted... cookie name: \", cookieCreated);\r\n    let data2 = await postJsonDataUrlAfterAPI('/user/checkIfCookiesEnabled', { cookieName: cookieCreated });\r\n    console.log(\"COOKIES ENABLED CHECK - data results: \", data2);\r\n    if (data2.cookiesEnabled == false) {\r\n      alert('Enable third party cookies for app to work. (Your data will not be shared with anyone. Click here if you want to know about how we are using cookies.) You will be directed to the home.');\r\n      window.location.replace(`${frontEndPushupsUrlRoot}`);\r\n      ////// history.push('/pushups');\r\n    } else {\r\n      console.log(\"This is just new Guest user. Don't worry, be happy :-). \");\r\n    }\r\n\r\n  } else {\r\n    console.log(\"Cookie originaly not found on server, but also new not created -> some other problem.\");\r\n  }\r\n}\r\n\r\n\r\nconst signInWithJWTCookie = async () => {\r\n  // console.log(\"trying to sign in with cokie\");\r\n  try {\r\n    let stage1 = await fetch(`${urlRoot}/user/checkJWTCookie`, { credentials: 'include' })\r\n    // let { user } = await stage1.json();\r\n    // console.log(\"trying to sign in with cokie - succes01-data(user or guest)\", stage1);\r\n\r\n    let data = await stage1.json();\r\n    // console.log(\"trying to sign in with cokie - succes02-proccesesd data(user or guest)\", data);\r\n    // console.log(\"trying to sign in with cokie - succes02-proccesesd data(user:)\", data.user);\r\n    // console.log(\"trying to sign in with cokie - succes02-proccesesd data(guest)\", data.guest);\r\n\r\n    // if (data.user) return data.user\r\n    // else if (!data.cookieFound) await checkIfNewGuestOrCookiesDisabled(data.cookieCreated)\r\n    // else console.log(\"Cookie found. some other problem: \", data);\r\n\r\n    if (data.user) return data.user\r\n    else {\r\n      if (!data.cookieFound) {\r\n        console.log(\"NO COOKIES FOUND\");\r\n        // await checkIfNewGuestOrCookiesDisabled(data.cookieCreated);\r\n        checkIfNewGuestOrCookiesDisabled(data.cookieCreated);\r\n      }\r\n      if (data.userToUse) {\r\n        return data.userToUse //=created guest  \r\n      } else console.log(\"no user of guest found. no user created. some other problem: \", data);\r\n\r\n    }\r\n\r\n  }\r\n  catch (error) {\r\n    // console.log(\"Error second in fetch:\", error);\r\n    console.log(\"trying to sign in with cokie - error (Server not working probably)\", error);\r\n\r\n    return { email: 'error', data: error };\r\n  }\r\n}\r\n\r\nexport default signInWithJWTCookie;","import React from 'react';\r\n\r\nconst UserLoading = () => {\r\n  return (\r\n    <div id='userLoadingComponent'>\r\n      <div style={{\r\n        display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n        flexFlow:'column',\r\n        height:'100%',\r\n        color: 'red'\r\n      }}>\r\n        <p>Loading</p>\r\n        <p>data...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserLoading;","import React, { useEffect, useContext } from 'react';\r\nimport PushUpsContextState from './state/PushUpsContextState'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { SLink } from '../../App';\r\n\r\nimport signInWithJWTCookie from './functions/signInWithJWTCookie';\r\n// import SignUpInOut from './SignUpInOut'\r\nimport postJsonData from '../../functions/postJsonData'\r\n// import { Button } from 'react-bootstrap';\r\nimport { urlRoot } from '../../globalState/globalVariables';\r\nimport UserLoading from './otherComponents/UserLoading';\r\n\r\n\r\n\r\n\r\nconst UserStatus = ({ history }) => {\r\n  const [userStatusInfo, setUserStatusInfo] = React.useState('notYetLoaded');\r\n  let userContext = useContext(PushUpsContextState);\r\n  // console.log(\"USER CONTEXT in user status:\", userContext.user);\r\n  // console.log(\"USER CONTEXT in user status email:\", userContext.user.email);\r\n  let user = null;\r\n\r\n  // if (userContext.user && userContext.user.email) {//this is never true anyway I guess\r\n  if (userContext.user) {//to allow to load Guest too\r\n    user = userContext.user;\r\n  }\r\n\r\n  useEffect(() => {\r\n    // console.log(\"GETTING USER\");\r\n    setUserStatusInfo('loading');\r\n    const updateUserContextFromCookie = async () => {\r\n      let userA = await signInWithJWTCookie();\r\n      // let userA = await postJsonData(`${urlRoot}/user/checkJWTCookie`, {});\r\n      // let userA;\r\n\r\n      // console.log(\"CCCCCchecked With Cookie - Response:\", userA); //either{ user: { }} or {...}\r\n      // setUser(userA);\r\n\r\n      userContext.updateUser(userA);\r\n      setUserStatusInfo('loaded');\r\n\r\n      // console.log(\"<userStatus> context --> \", userContext);\r\n      // return () => { console.log(\"dismounting??: \", user) };\r\n    };\r\n\r\n    // console.log(\"effect running...\")\r\n    updateUserContextFromCookie();\r\n  }\r\n    , []   ///now runs on every rerender, with [] runs only on first\r\n  )\r\n\r\n  // const logOut = async () => {\r\n  //   await postJsonData(`${urlRoot}/user/logOut`, {});\r\n  //   // await postJsonData(`${urlRoot}/user/logOut2`, {});\r\n  //   console.log(\"-----------------------------logout-\");\r\n  //   // await postJsonData(`/api/user/logOut`, {});\r\n  //   // await postJsonData(`/api/user/logOut2`, {});\r\n  //   // await postJsonData(`${urlRoot}/start`, {}); //wrong url\r\n  //   // setUser({});\r\n\r\n  //   /////////////!!!\r\n  //   let guest = await signInWithJWTCookie();\r\n  //   // console.log(\"UUUUUU to guest:\", guest);\r\n  //   userContext.updateUser({ ...guest });  // change context - user to  GUEST\r\n  //   history.push('/pushups');\r\n\r\n  //   // console.log(\"user Context--> \", userContext);\r\n\r\n  //   //refresh page now - not needed  // window.location.reload();\r\n  // }\r\n\r\n  const resetGuestButton = async () => {\r\n    let data = await postJsonData(`${urlRoot}/guest/resetGuest`, {});\r\n    console.log(\"reset guest DDDDDDDDDDDDDDData:\", data);\r\n    userContext.updateUser({ ...data.guest });\r\n\r\n  }\r\n\r\n  // console.log(\"history.location.pathname: \", history.location.pathname);\r\n\r\n  if (userStatusInfo === 'loading')\r\n    return <UserLoading />\r\n\r\n  if (history.location.pathname === '/pushups' || history.location.pathname === '/') {\r\n    // if (user) console.log(\"!!!!\",user.name);\r\n    return null\r\n    return (\r\n      // <div style={{ display: \"inline\", float: \"right\", padding:'5px' }}>\r\n      <div style={{ padding:'5px',display:'flex',justifyContent:'flex-end' }}>\r\n        {/* <p>XX: {user && user.email}</p> */}\r\n        {/* <p>{userStatusInfo}</p> */}\r\n        <p style={{ textAlign: 'right', paddingRight: '5px', display: \"inline\" }}>Welcome\r\n          {/* {userStatusInfo === 'loading' ? 'Identifying current user...'///Identifying current user */}\r\n\r\n          {/* user status */}\r\n          {userStatusInfo === 'loading' ?\r\n            'loading...'///Identifying current user\r\n            : (user && user.email) ?\r\n              (<span style={{ color: 'green' }}> {user.name}\r\n                {/* <Button onClick={logOut}>Log-out</Button> */}\r\n              </span>)\r\n              : (user && user.name === 'Guest' ?\r\n                <span style={{ color: 'red' }}>\"Guest\"\r\n                {/* <br /><button onClick={resetGuestButton}>reset guest</button> */}\r\n                </span>\r\n                : <span style={{ color: 'red' }}>\"? ? ?\"\r\n                {/* <br /> <button onClick={resetGuestButton}>reset guest</button> */}\r\n                </span>)\r\n          }\r\n\r\n          {/* login button */}\r\n          {(!user || !user.email) &&\r\n            (<SLink to='/pushups/Sign-upLog-in'> Sign-up / Log-in </SLink>)\r\n            /* (<Link  to='/pushups/Sign-upLog-in'> Sign-up / Log-in </Link>) */\r\n          }\r\n\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n  else { return null };\r\n};\r\n\r\nexport default withRouter(UserStatus);","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst STrainingPlanOverview = styled.div`\r\nbackground-color: orange;\r\npadding:2rem;\r\n/* margin:2rem; */\r\n\r\nbutton{\r\n  /* background-color: red; */\r\n}\r\n\r\n`\r\n\r\nconst TrainingPlanOverview = (props) => {\r\n  return (\r\n    <STrainingPlanOverview>\r\n      {props.children}\r\n    </STrainingPlanOverview>\r\n  );\r\n};\r\n\r\nexport default TrainingPlanOverview;","export const getSimpleDateIfTrueAlsoTime = (dateReceived, withTime = false, withYear = false,) => {\r\n  var d = new Date(dateReceived);\r\n  var date = d.getDate();\r\n  var month = d.getMonth() + 1; // Since getMonth() returns month from 0-11 not 1-12\r\n  var year = d.getFullYear();\r\n  var dateStr = date + \"/\" + month;\r\n  dateStr += withYear ? (\"/\" + year) : '';\r\n  var dateWithTimeStr = dateStr + '  ' + d.getHours() + ':' + d.getMinutes();\r\n  return withTime ? dateWithTimeStr : dateStr;\r\n}\r\n\r\nexport const returnPersonalPlanFromPlanID = (user, planID) => {\r\n  // console.log(planID, personalPlans);\r\n\r\n  return user.pushupPlans.personal.find(plan => plan._id === planID)\r\n}\r\n\r\nexport const returnAssessmentFromAssID = (user, assID) => {\r\n  let wanted = user.assessments.find(ass => ass._id === assID);\r\n  return wanted;\r\n}\r\n\r\n\r\nexport const returnTrueIfDatesHaveTheSameDay = (d1a, d2a) => {\r\n  const d1 = new Date(d1a);\r\n  const d2 = new Date(d2a);\r\n  return d1.getFullYear() === d2.getFullYear() &&\r\n    d1.getMonth() === d2.getMonth() &&\r\n    d1.getDate() === d2.getDate();\r\n}\r\n\r\nexport const returnDaysDifference = (todayA, otherDayA) => { //-3 returned = other day is 3 days older\r\n  // console.log(\"OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO\");\r\n  // console.log(\"todayA: \", todayA, \"otherDayA: \", otherDayA);\r\n  const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds\r\n  let otherDayIsThisNumberOfDaysAhead = 0;\r\n  const today = new Date(todayA);\r\n  const otherDay = new Date(otherDayA);\r\n  console.log(\"today: \", today, \"otherDay: \", otherDay);\r\n\r\n\r\n\r\n  let smallerThenBigger = [{}, {}];\r\n  if (today - otherDay > 0) {\r\n    smallerThenBigger[0].date = otherDay;\r\n    smallerThenBigger[0].name = 'otherDay';\r\n    smallerThenBigger[1].date = today;\r\n    smallerThenBigger[1].name = 'today';\r\n  } else {\r\n    smallerThenBigger[0].date = today;\r\n    smallerThenBigger[0].name = 'today';\r\n    smallerThenBigger[1].date = otherDay;\r\n    smallerThenBigger[1].name = 'otherDay';\r\n  }\r\n\r\n  //keep adjusting dates until the same/ count adjustments and watch which is which\r\n  while (!returnTrueIfDatesHaveTheSameDay(smallerThenBigger[0].date, smallerThenBigger[1].date)) {\r\n    //add day to the smaller day\r\n    smallerThenBigger[0].date = new Date(smallerThenBigger[0].date.getTime() + oneDay);\r\n    if (smallerThenBigger[0].name === 'today') { otherDayIsThisNumberOfDaysAhead++; }\r\n    else { otherDayIsThisNumberOfDaysAhead--; }\r\n  }\r\n  return otherDayIsThisNumberOfDaysAhead;\r\n}\r\n\r\nexport const return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate = (user) => {\r\n  if (!user.pushupPlans.current\r\n    || !user.pushupPlans.current.trainingHistory\r\n    || !(user.pushupPlans.current.trainingHistory.length > 0)) {\r\n    return 0;\r\n  }\r\n\r\n  let dateToday = new Date();\r\n  let dateOfLastTraining = user.pushupPlans.current.trainingHistory[0].date;\r\n  let datesAreTheSame = returnTrueIfDatesHaveTheSameDay(dateToday, dateOfLastTraining);\r\n  return datesAreTheSame ? 1 : 2;\r\n};\r\n\r\nexport const returnAnyPlanFromPlanID = (planID, typePersonalOnlyFinishedPublic, personalPushupPlans, publicPushupPlans) => {//type: \"yes-only\" \"yes-finished\" \"public\"\r\n  // console.log(\"PPPplanID, typePersonalOnlyFinishedPublic: \",planID, typePersonalOnlyFinishedPublic);\r\n  // console.log(\"typePersonalOnlyFinishedPublic:\" + typePersonalOnlyFinishedPublic + '.');\r\n  if (typePersonalOnlyFinishedPublic === 'yes-only') { console.log(\"1\"); return personalPushupPlans.personal.find(plan => plan._id === planID); }\r\n  else if (typePersonalOnlyFinishedPublic === 'yes-finished') { console.log(\"2\"); return personalPushupPlans.personalFinished.find(plan => plan._id === planID); }\r\n  else if (typePersonalOnlyFinishedPublic === 'public') { console.log(\"3\"); return publicPushupPlans.find(plan => plan._id === planID); }\r\n  else { console.log(\"error in 'returnAnyPlanFromPlanID'.\"); }\r\n\r\n}","async function getJsonData(url,options) {\r\n  let dataToReturn;\r\n  console.log(\"starting GET json request 1 using this url and options: \",url,options);\r\n  try {\r\n    // options.credentials = 'include';\r\n    const response = await fetch(url, options);\r\n    // const response = await fetch(url, {credentials:'include'});\r\n    // console.log(\"fetched response:\", response);\r\n    console.log(\"starting GET json request 2a-succes-received data: \", dataToReturn);\r\n\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    console.log(\"starting GET json request 2b-succes-processed data: \", dataToReturn);\r\n\r\n  }\r\n  catch (err) {\r\n    console.log(\"!!!err in receiving json data back from POSTJson request\", err);\r\n    // console.log(\"starting GET json request 2-error-message: \", err);\r\n\r\n    dataToReturn = err;\r\n  }\r\n  // return dataToReturn;\r\n}\r\n\r\nexport default getJsonData;","import React, { useEffect, useContext } from 'react';\r\nimport PushUpsContextState from './state/PushUpsContextState'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { SLink } from '../../App';\r\n\r\nimport signInWithJWTCookie from './functions/signInWithJWTCookie';\r\n// import SignUpInOut from './SignUpInOut'\r\nimport postJsonData from '../../functions/postJsonData'\r\n// import { Button } from 'react-bootstrap';\r\nimport { urlRoot } from '../../globalState/globalVariables';\r\n\r\n\r\n\r\n\r\nconst UserStatus = ({ history }) => {\r\n  const [userStatusInfo, setUserStatusInfo] = React.useState('notYetLoaded');\r\n  let userContext = useContext(PushUpsContextState);\r\n  let user = null;\r\n  if (userContext.user) {//to allow to load Guest too\r\n    user = userContext.user;\r\n  }\r\n\r\n  useEffect(() => {\r\n    // console.log(\"GETTING USER\");\r\n    setUserStatusInfo(user ? 'loaded':'loading');\r\n  }\r\n    , [user]   ///now runs on every rerender, with [] runs only on first\r\n  )\r\n\r\n  const resetGuestButton = async () => {\r\n    let data = await postJsonData(`${urlRoot}/guest/resetGuest`, {});\r\n    console.log(\"reset guest DDDDDDDDDDDDDDData:\", data);\r\n    userContext.updateUser({ ...data.guest });\r\n\r\n  }\r\n\r\n  if (history.location.pathname === '/pushups' || history.location.pathname === '/') {\r\n    return (\r\n      <div style={{ padding: '5px', display: 'flex', justifyContent: 'flex-end' }}>\r\n        <p style={{ textAlign: 'right', paddingRight: '5px', display: \"inline\" }}>\r\n        {userStatusInfo != 'loading' &&'Welcome'}\r\n          {/* user status */}\r\n          {userStatusInfo === 'loading' ?\r\n            'loading...'///Identifying current user\r\n            : (user && user.email) ?\r\n              (<span style={{ color: 'green' }}> {user.name}\r\n                {/* <Button onClick={logOut}>Log-out</Button> */}\r\n              </span>)\r\n              : (user && user.name === 'Guest' ?\r\n                <span style={{ color: 'red' }}>\"Guest\"\r\n                </span>\r\n                : <span style={{ color: 'red' }}>\"? ? ?\"\r\n                </span>)\r\n          }\r\n\r\n          {/* login button */}\r\n          {(!user || !user.email) &&\r\n            (<SLink to='/pushups/Sign-upLog-in'> Sign-up / Log-in </SLink>)\r\n          }\r\n\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n  else { return null };\r\n};\r\n\r\nexport default withRouter(UserStatus);","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport imgMinus from '../img/minus.png';\r\nimport imgPlus from '../img/plus.png';\r\nimport imgMinusLight from '../img/minusLight.png';\r\nimport imgPlusLight from '../img/plusLight.png';\r\n\r\n\r\nfunction selectTextAndFocusElement(element) {\r\n\r\n  //to select text by taping\r\n  if (document.selection) { // IE\r\n    var range = document.body.createTextRange();\r\n    range.moveToElementText(element);\r\n    range.select();\r\n  } else if (window.getSelection) {\r\n    var range = document.createRange();\r\n    range.selectNode(element);\r\n    window.getSelection().removeAllRanges();\r\n    window.getSelection().addRange(range);\r\n  }\r\n\r\n  //make make element editable upon typing\r\n  element.focus();\r\n  element.select();\r\n}\r\n\r\nconst SWrapper = styled.div`\r\np,span,input,textarea{\r\n  font-size:1.3rem;\r\n}\r\ninput,span,textarea{\r\n  /* background-color:green; */\r\n  background:none;\r\n  /* background:linear-gradient(transparent 60%,red 100%); */\r\n  border:none;\r\n  /* border-bottom: 3px solid red; */\r\n  padding:5px;\r\n  /* width:auto; */\r\n  width:60px;\r\n    -webkit-box-shadow: none;\r\n    -moz-box-shadow: none;\r\n    box-shadow: none;\r\n}\r\nspan{\r\n  font-weight:bold;\r\n}\r\ninput{\r\n    color:black;\r\n    font-size:1.8rem;\r\n    color:white;\r\n    font-weight:bold;\r\n    text-align: center;\r\n    outline:none;\r\n    \r\n  }\r\n/* hide native htmml counting arrows */\r\n/* Chrome, Safari, Edge, Opera */\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n/* Firefox */\r\ninput[type=number] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\n`\r\n\r\nconst SCounter = styled.div`\r\n/* background-color:blue; */\r\n/* background-image: url(${imgMinus}) no-repeat center center/cover; */\r\n/* background: url(\"https://robohash.org/1\") no-repeat center center/cover; */\r\n/* background: url(\"https://robohash.org/1\") no-repeat center center/cover; */\r\n\r\ndisplay:inline-box;\r\nwidth:50px;\r\nheight:50px;\r\npadding:0 3px;\r\nposition: relative;\r\n\r\ntouch-action: manipulation;\r\n\r\n:hover{\r\n    cursor:pointer;\r\n  /* background: radial-gradient(circle, rgba(255,100,0,1) 34%, rgba(42,8,8,0) 70%); */\r\n\r\n  }\r\n  :active{\r\n    img{background: radial-gradient(circle, rgb(215, 255, 0) 34%, rgba(42,8,8,0) 70%);}\r\n\r\n  }\r\nimg{\r\n  \r\n  width:100%; \r\n  /* width:110px;  */\r\n  /* height: 110px; */\r\n  /* height: 100%; */\r\n  height: auto;\r\n  /* background:radial-gradient(red); */\r\n  background: radial-gradient(circle, rgba(255,0,0,1) 34%, rgba(242,8,8,0) 70%);\r\n  /* background:url(${imgPlus}); */\r\n  /* background:url(imgPlus); */\r\n \r\n}\r\n#counterNumber{\r\n}\r\ndiv{\r\n  margin: auto;\r\n  position: absolute;\r\n   top: 43%; \r\n   /* top: ${() => '44%'};  */\r\nright: 50%; \r\n/* width:10px;height:10px; */\r\ntransform: translate(50%, -50%);\r\n  z-index:10;\r\n  /* content:  ${props => props.howMuch};  */\r\n  content:  ${() => '7'}; \r\n  content:'6';\r\n\r\n  font-size:0.8rem;\r\n  font-weight:800;\r\n  line-height:1rem;\r\n  color: white; \r\n\r\n  -webkit-touch-callout: none; /* iOS Safari */\r\n    -webkit-user-select: none; /* Safari */\r\n     -khtml-user-select: none; /* Konqueror HTML */\r\n       -moz-user-select: none; /* Old versions of Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n            user-select: none; /* Non-prefixed version, currently\r\n                                  supported by Chrome, Edge, Opera and Firefox */\r\n}\r\n\r\n`;\r\nexport const SCounterSmall = styled(SCounter)`\r\nwidth:30px;\r\nheight:30px;\r\ndiv { \r\n  top:46%;\r\n  font-size:0.5rem;\r\n}\r\n`;\r\n\r\n\r\n// Restricts input field to a number only.\r\nfunction setInputFilter(textbox, inputFilter) {\r\n  // [\"input\", \"keydown\", \"keyup\", \"mousedown\", \"mouseup\", \"select\", \"contextmenu\", \"drop\"].forEach(function (event) {\r\n  [\"input\"].forEach(function (event) {\r\n    textbox.addEventListener(event, function () {\r\n      if (inputFilter(this.value)) {\r\n        this.oldValue = this.value;\r\n        this.oldSelectionStart = this.selectionStart;\r\n        this.oldSelectionEnd = this.selectionEnd;\r\n      } else if (this.hasOwnProperty(\"oldValue\")) {\r\n        this.value = this.oldValue;\r\n        this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);\r\n      } else {\r\n        this.value = \"\";\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nlet returnValueInMinMaxRange = (newValue, min, max) => {\r\n  if (newValue < min) return min;\r\n  if (newValue > max) return max;\r\n  // console.log(\"valu in boudary: \", newValue);\r\n  return newValue;\r\n}\r\n\r\n\r\nconst CounterAllIn = ({ settings }) => {\r\n  //in external component use this one like this: <Counter settings={[]}/>\r\n  const [p1counterSmall, p1counterBig, onChangeFunctionReceivingNewValueAsParameter, initialValue, sideText, smallTextUnderTheNumber, minValue, MaxValue] = settings;\r\n\r\n  //set initial value, also when initial value is changed\r\n  const [localValue, setLocalValue] = React.useState(initialValue);\r\n  const [initialValueWasSetUp, setInitialValueWasSetUp] = React.useState(true);\r\n  React.useEffect(() => {\r\n    // console.log(\"INITIAL value\" + initialValue + \" updated\");\r\n    setInitialValueWasSetUp(true);\r\n    setLocalValue(initialValue);\r\n  }, [initialValue]);\r\n\r\n\r\n  // Restricts input field to a number only\r\n  const htmlInputEl = React.useRef(null);\r\n  React.useEffect(() => {\r\n    // let xx = [];\r\n    // for (let i = 0; i <= 13; i++) {\r\n    //   setInputFilter(document.getElementById(`idScheduleInput${i}`), function (value) {\r\n    //     return /^\\d*$/.test(value);\r\n    //   });\r\n    // }\r\n\r\n    setInputFilter(htmlInputEl.current, function (value) {\r\n      // let testedValue = /^\\d*$/.test(value);\r\n      // console.log(\"testedValue outcome: \", testedValue);\r\n      return /^\\d*$/.test(value);\r\n    });\r\n  }, [])\r\n\r\n  const updateLocalValueFromButton = (howMuch) => {\r\n    setInitialValueWasSetUp(false);\r\n    setLocalValue(returnValueInMinMaxRange(localValue + howMuch, minValue, MaxValue));\r\n    // console.log(\"NOT INITIAL value updated-button\");\r\n  }\r\n  const updateLocalValueFromTyping = ({ target: { value } }) => {\r\n    setInitialValueWasSetUp(false);\r\n    // console.log(\"VALUE NOW:\", value, value.length, value[0]); \r\n    // console.log(\"VALUE NOW:\", value, value.length,value[0]); \r\n    while (value.length > 1 && value[0] == 0) value = value.substring(1);\r\n    value = value * 1;\r\n    // console.log(\"VALUE NOW:\", value, value.length, value[0]); \r\n    setLocalValue(returnValueInMinMaxRange(value, minValue, MaxValue));\r\n    // console.log(\"NOT INITIAL value updated-typing\");\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (!initialValueWasSetUp) {\r\n      onChangeFunctionReceivingNewValueAsParameter(localValue);\r\n      // console.log(\"CCCCCCCCCC This value passed to external function: \", localValue);\r\n    }\r\n\r\n  }, [localValue])\r\n\r\n  return (\r\n    // <div style={{ textAlign: 'center', backgroundColor: 'orange' }}>\r\n    <SWrapper style={{\r\n      textAlign: 'center',\r\n\r\n      display: 'inline-flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center'\r\n\r\n    }}>\r\n      {p1counterSmall !== 0 &&\r\n        <SCounterSmall\r\n          onClick={() => updateLocalValueFromButton(-p1counterSmall)}\r\n        // style={{visibility: localValue-p1counterSmall<0? 'hidden':'visible'}}\r\n        >\r\n          <img src={imgMinus} alt=\"\"></img>\r\n          <div >{-p1counterSmall}</div>\r\n        </SCounterSmall>}\r\n      <SCounter\r\n        onClick={() => updateLocalValueFromButton(-p1counterBig)}\r\n        style={{ visibility: p1counterBig === 0 ? 'hidden' : 'visible' }}\r\n      >\r\n        <img src={imgMinus} alt=\"\"></img>\r\n        <div >{-p1counterBig}</div>\r\n      </SCounter>\r\n      {/* <input onChange={updateLocalValueFromTyping} type='number' value={localValue} style={{padding:`${smallTextUnderTheNumber ? 0:5}px 1px 2px 3px`,margin:`${smallTextUnderTheNumber ? 0:5}px 1px 2px 3px`}}></input> */}\r\n      <div>\r\n        <input\r\n          onChange={updateLocalValueFromTyping}\r\n          // type='number'\r\n          value={localValue}\r\n          style={{ color: 'black' }}\r\n          ref={htmlInputEl}\r\n          onClick={() => selectTextAndFocusElement(htmlInputEl.current)}\r\n        />\r\n        {/* <span style={{marginLeft:'0px',paddingLeft:'-20px'}}>%</span> */}\r\n        {sideText && <span style={{ marginLeft: '-13px' }}>{sideText}</span>}\r\n        {smallTextUnderTheNumber && <p style={{ marginTop: '-15px', fontSize: '0.85rem' }}>{smallTextUnderTheNumber}</p>}\r\n\r\n      </div>\r\n      {/* {p1counterBig != 0 && */}\r\n      <SCounter\r\n        onClick={() => updateLocalValueFromButton(p1counterBig)}\r\n        style={{ visibility: p1counterBig === 0 ? 'hidden' : 'visible' }}\r\n      >\r\n        <img src={imgPlus} alt=\"\"></img>\r\n        <div >{p1counterBig}</div>\r\n      </SCounter>\r\n      {/* } */}\r\n      {p1counterSmall !== 0 &&\r\n        <SCounterSmall onClick={() => updateLocalValueFromButton(p1counterSmall)}>\r\n          <img src={imgPlus} alt=\"\"></img>\r\n          <div >{p1counterSmall}</div>\r\n        </SCounterSmall>}\r\n    </SWrapper>\r\n  );\r\n};\r\n\r\nexport default CounterAllIn;","/////// to use in external component:\r\n// import positionElementToTheTop from '../functions/styling/positionElementToTheTop';\r\n// const planAdjustPublicRef = React.useRef(null);\r\n/////in the element:\r\n// ref = { planAdjustPublicRef }\r\n// onClick = {()=> positionElementToTheTop(planAdjustPublicRef.current, 350)}\r\n\r\n\r\nconst positionElementToTheTop = async (element, delayInMs) => {\r\n  // let head = document.getElementById(`publicPlansAccordionCard${index}`);\r\n  console.log(element);\r\n\r\n  let navbarHeight = document.getElementById('mainNavBar').getBoundingClientRect().height;\r\n  // head.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n  await new Promise(resolve => setTimeout(resolve, delayInMs));\r\n  var ElementTop = element.getBoundingClientRect().top;\r\n  // console.log(\"headTop\", headTop);\r\n\r\n  window.scrollBy({\r\n    top: ElementTop - navbarHeight,\r\n    // top: headTop,\r\n    left: 0,\r\n    behavior: 'smooth'\r\n  });\r\n}\r\n\r\nexport default positionElementToTheTop;","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport CounterAllIn from '../basicComponents/CounterAllIn';\r\nimport positionElementToTheTop from '../functions/styling/positionElementToTheTop';\r\n\r\n\r\n\r\n\r\nconst MaxRepsButtonInterface = () => {\r\n  const { user, updateUser } = React.useContext(pushupsContext);\r\n  const [estimatedValue, setEstimatedValue] = React.useState(10);\r\n\r\n\r\n  const submitEstimatedMaxReps = () => {\r\n    console.log(\"reps: \", estimatedValue);\r\n  }\r\n\r\n\r\n  if (!user) return <p>loading data...</p>\r\n  return (\r\n    <div>\r\n      {/* <button style={{ fontSize: '1.1rem' }}>\r\n        Update My Max Reps\r\n        {user && user.assessments && ` (${user.assessments[0].reps})`}\r\n      </button> */}\r\n\r\n\r\n      <Accordion\r\n        className='p-1'\r\n        style={{ margin: '0', background: 'none', border: 'none', margin: '20px auto 10px auto' }}\r\n        // defaultActiveKey={user.settings.plans.public.view ? '1' : '0'}\r\n        defaultActiveKey=\"1\"\r\n      >\r\n        <Card style={{ border: 'none', backgroundColor: 'transparent' }}>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey=\"1\"\r\n            id='maxRepsButtonInterfaceAccordionID'\r\n            // onClick={togglePublicPlansView}\r\n            onClick={() => positionElementToTheTop(document.getElementById(`maxRepsButtonInterfaceAccordionID`), 0)}\r\n\r\n            className=\"bg-none MMpointer btnOpacity\"\r\n            style={{ background: '#ffd400', maxWidth: '85vw', margin: 'auto', border: 'none', borderRadius: '7px 7px 0 0' }}\r\n          >\r\n            <h5 style={{ textAlign: 'center' }}>How many reps can you currently do?  🔽</h5>\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <Card style={{ border: '4px solid #ffd400', overflowY: 'auto', backgroundColor: 'ffd400', paddingTope: '0' }}>\r\n              <div style={{ margin: '8px', backgroundColor: 'orange', boxShadow: '0px 0px 5px 5px rgba(0,0,0,0.35)', padding: '8px' }}>\r\n                <h5>Estimate:</h5>\r\n                <p style={{ fontSize: '1rem' }}>Fast but superficial.</p>\r\n                <p style={{ fontSize: '0.8rem', color: 'gray' }}>Use this if you just want to get your head around.</p>\r\n                <CounterAllIn settings={[1, 5, setEstimatedValue, estimatedValue, '', '', 0]} />\r\n                <button onClick={submitEstimatedMaxReps}>Submit</button>\r\n              </div>\r\n              <p style={{ textAlign: 'center' }}>or</p>\r\n              <div style={{ margin: '8px', backgroundColor: 'lightGreen', boxShadow: '0px 0px 5px 5px rgba(0,0,0,0.35)', padding: '8px' }}>\r\n                <h5>Do proper assessment:</h5>\r\n                <p style={{ fontSize: '1rem' }}>Slower but reliable.</p>\r\n                <p style={{ fontSize: '0.8rem', color: 'gray' }}>Use this if you want to measure your progress.</p>\r\n                <button>Continue here</button>\r\n              </div>\r\n            </Card>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n      </Accordion>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaxRepsButtonInterface;","// import React from 'react';\r\nimport React from 'react';\r\nimport pushupsContext from './state/PushUpsContextState';\r\nimport { returnDaysDifference, returnTrueIfDatesHaveTheSameDay, return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate } from './functions/basics';\r\nimport { postJsonDataUrlAfterAPIpushups, postJsonDataUrlAfterAPI } from '../../functions/postJsonData';\r\nimport postJsonData from '../../functions/postJsonData';\r\nimport getJsonData from '../../functions/getJsonData';\r\nimport { urlRoot } from '../../globalState/globalVariables';\r\n\r\nimport UserStatusDisplay from './UserStatusDisplay';\r\nimport { Route, withRouter } from 'react-router-dom';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport styled from 'styled-components'\r\n\r\nimport MaxRepsButtonInterface from './menu/MaxRepsButtonInterface';\r\n\r\n\r\nexport const SLink = styled(Link)`\r\ndisplay: block;\r\nfont-size:2rem;\r\nmargin:10px;\r\nbackground-color:orange;\r\npadding: 3px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n  /* font-size:20px; */\r\n}\r\n/* transition: background-color, color; */\r\ntransition-duration: 0.25s;\r\n`\r\nexport const returnNumberOfDaysMissingCurrentSchedulleOrUndefined = (user) => {\r\n  if (user.pushupPlans.current === null || user.pushupPlans.current === undefined) return undefined;\r\n  let currentPlan = user.pushupPlans.current;\r\n  let dayToDoFrom0 = currentPlan.scheduleDayToDoFrom0;\r\n  if (dayToDoFrom0 === undefined || dayToDoFrom0 === null || user.pushupPlans.current.assessments.initialAssessmentID === null) return undefined;\r\n\r\n\r\n  // console.log(\"TESTS:\", dayToDoFrom0);\r\n  // console.log(\"TESTS:\", currentPlan.schedule);\r\n  // console.log(\"TESTS:\", currentPlan.schedule[dayToDoFrom0].dueDate);\r\n  // there is current plan with scheduled day; carry on...\r\n  let trainingThisMAnyDaysAhead = returnDaysDifference(new Date(), currentPlan.schedule[dayToDoFrom0].dueDate);\r\n\r\n\r\n  // console.log(\"trainingThisMAnyDaysAhead: \", trainingThisMAnyDaysAhead);\r\n  return trainingThisMAnyDaysAhead;\r\n}\r\n\r\nconst Home = (props) => {\r\n  const { user, updateUser } = React.useContext(pushupsContext);\r\n  const [info, setInfo] = React.useState(\"loading Data... (Pray everyone:-)\");\r\n  let dueDateIsAheadThisMuch;\r\n  // console.log(\"running home\")\r\n  //check if today's date matches the date of the training to do\r\n\r\n  const [testingCORS, setTestingCORS] = React.useState({ testingCORS: 'not started' });\r\n  React.useEffect(() => {\r\n    // setTestingCORS({ testingCORS: 'useEffectStarted' });\r\n    // (async () => {\r\n    //   setTestingCORS({ testingCORS: 'asyncF started' });\r\n\r\n    //   let ansFromServer1 = await postJsonDataUrlAfterAPIpushups('/testCORS', {});\r\n    //   //     // setTestingCORS({ ...testingCORS, ansFromServer });\r\n    //   setTestingCORS(xx => ({ ...xx, ...ansFromServer1 }));\r\n\r\n    //   //     let ansFromServer2 = await postJsonDataUrlAfterAPIpushups('/testCORS2', {});\r\n    //   //     // setTestingCORS({ ...testingCORS, ansFromServer });\r\n    //   //     setTestingCORS(xx => ({ ...xx, ...ansFromServer2 }));\r\n    // })()\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    console.log(\"home -user useEfect\");\r\n    if (user) {\r\n\r\n      //update schedule day if needed (=if last training happened, but didn't finish and now is different day --> scheduled day needs to be updated to next number (but not counting break days); and consider final assessment day)\r\n      if (user.pushupPlans\r\n        && user.pushupPlans.current\r\n        && user.pushupPlans.current.trainingHistory\r\n        && user.pushupPlans.current.trainingHistory.length > 0\r\n        && user.pushupPlans.current.trainingHistory[0].completed != true\r\n        && user.pushupPlans.current.trainingHistory[0].scheduleDayUpdated != true\r\n        // && user.pushupPlans.current.trainingHistory[0].hovno != true\r\n      ) {\r\n        //if the date is not today, update schedule day\r\n\r\n        const dateAsToday = return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate(user);\r\n\r\n        // let dateToday = new Date();\r\n        // let dateOfLastTraining = user.pushupPlans.current.trainingHistory[0].date;\r\n        // let datesAreTheSame = returnTrueIfDatesHaveTheSameDay(dateToday, dateOfLastTraining);\r\n        // console.log(\"DATE OF THE LAST TR IS TODAY (1yes,2 no)?\", dateAsToday);\r\n        // if (!datesAreTheSame) {\r\n        if (dateAsToday === 2) {\r\n          //update sch day on DB\r\n          console.log(\"update sch day on DB\");\r\n          let doItAsAsync = async () => {\r\n            const updatedUser = await postJsonDataUrlAfterAPIpushups('/updateScheduleDay', {});\r\n            // console.log(\"updatedUser-rescheduled\", updatedUser);\r\n            updateUser({ ...updatedUser });\r\n          }\r\n          doItAsAsync();\r\n        }\r\n      }\r\n\r\n\r\n\r\n      dueDateIsAheadThisMuch = returnNumberOfDaysMissingCurrentSchedulleOrUndefined(user);\r\n      // console.log(\"dueDateIsAheadThisMuch: \", dueDateIsAheadThisMuch);\r\n      let textInfoFirstLineLocalVariable;\r\n      // switch (dueDateIsAheadThisMuch) {\r\n      // case null:\r\n      //   textInfoLocalVariable = 'loading Data... (Pray everyone:-))';\r\n      //   break;\r\n\r\n      //check if training was started already\r\n      let continueTraining = false;\r\n\r\n      if (return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate(user) === 1\r\n        && user.pushupPlans.current.trainingHistory[0].completed != true) { continueTraining = true; }\r\n\r\n      //final assessment date (if exists)\r\n      //find in how many days is final assessment (if training has goog schedule = on time or traiining waiting in future)\r\n      let finalAssessmentDueIn;\r\n      if (user.pushupPlans.current\r\n        && user.pushupPlans.current.scheduleDayToDoFrom0\r\n        // && user.pushupPlans.current.schedule\r\n        // && user.pushupPlans.current.schedule[13]\r\n        // && user.pushupPlans.current.schedule[13].date\r\n      ) {\r\n        // console.log(\"XXXXXXXXXXXXXXXXXX\");\r\n        finalAssessmentDueIn = 13 - user.pushupPlans.current.scheduleDayToDoFrom0;\r\n      }\r\n\r\n      // console.log(\"XXDD\", dueDateIsAheadThisMuch)\r\n      // dueDateIsAheadThisMuch = 1;\r\n      textInfoFirstLineLocalVariable =\r\n        // dueDateIsAheadThisMuch<10 ? 'ahoj' :\r\n        dueDateIsAheadThisMuch === undefined ?\r\n          (user.pushupPlans.current ? (user.pushupPlans.current.assessments.initialAssessmentID === null ? 'Whenever you are ready' : 'no scheduled date')\r\n            : 'Select training Plan First'\r\n          )\r\n          // : dueDateIsAheadThisMuch === 0 ? <>{continueTraining ? 'Continue Started Training' : 'Your training is Due'}{finalAssessmentDueIn !== undefined && <p>Final assessment due in 21 days.</p>}</>\r\n          : dueDateIsAheadThisMuch === 0 ? 'Your training is Due'\r\n            : dueDateIsAheadThisMuch === 1 ? 'tomorrow'\r\n              : dueDateIsAheadThisMuch > 1 ? `in ${dueDateIsAheadThisMuch} days`\r\n                : dueDateIsAheadThisMuch === -1 ? `You are 1 day late.`\r\n                  : dueDateIsAheadThisMuch < -1 ? `You are ${-dueDateIsAheadThisMuch} days late.`\r\n                    : '-...-';\r\n\r\n      // console.log(\"textInfoFirstLineLocalVariable: \", dueDateIsAheadThisMuch, textInfoFirstLineLocalVariable);\r\n      setInfo({\r\n        textLine1: continueTraining, //show only if exists\r\n        textLine2: textInfoFirstLineLocalVariable,\r\n        textLine3: finalAssessmentDueIn, //show only if exists\r\n        days: dueDateIsAheadThisMuch,\r\n\r\n      });\r\n      // setTextInfo(\"Ahoj\");\r\n    } else {\r\n      //this is a guest i guess... reset buttons' texts\r\n      setInfo({\r\n        textLine1: undefined, //show only if exists\r\n        textLine2: undefined,\r\n        textLine3: undefined, //show only if exists\r\n        days: undefined,\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n\r\n  // console.log(\"textInfo: \", info.textLine2);\r\n\r\n  const cookieTestButtonClicked = async (getOrPost) => {\r\n    if (getOrPost === 'get') {\r\n      await getJsonData(`${urlRoot}/start`, { credentials: 'include' });\r\n    } else {\r\n      // await postJsonDataUrlAfterAPI('/start', {}); //works to change cookies\r\n      // await postJsonData('/api/start', {});//works to change cookies\r\n      await postJsonData(`${urlRoot}/start`, {});//works to change cookies\r\n      // await postJsonData(`http://localhost:3001/api/start`, {});//works to change cookies\r\n      // await postJsonData(`api/start`, {});//works to change cookies\r\n      // await postJsonData(`http://localhost:3000/api/start`, {});//works to change cookies\r\n    }\r\n  }\r\n\r\n  const viewCurrentPlanButtonClicked = () => {\r\n    console.log(\"tu\");\r\n    let type = user.pushupPlans.current.personal;\r\n    let urlPartType;\r\n    let planId = user.pushupPlans.current.planIDType;\r\n    if (type === 'yes-only') urlPartType = 'inDevelopment';\r\n    if (type === 'yes-finished') urlPartType = 'finished';\r\n    if (type === 'public') urlPartType = 'public';\r\n\r\n    props.history.push({\r\n      pathname: `/pushups/trainingPlans/view/${urlPartType}/${planId}`,\r\n      // state: {\r\n      //   personalPlanPositionFrom0: positionFrom0,\r\n      //   plan: user.pushupPlans.personal[positionFrom0]\r\n      // }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1 style={{ fontSize: '7vw', marginTop: '20px', marginBottom: '0', textAlign: 'center' }}>Tested Pushups Plans</h1>\r\n      <p style={{ fontSize: '4vw', textAlign: 'center', color: 'gray' }}>2 week plans <br /> to do more pushups. </p>\r\n      <br />\r\n      {/* <Route exact path='/pushups' component={UserStatus} /> */}\r\n      <Route exact path='/' component={UserStatusDisplay} />\r\n      <Route path='/pushups' component={UserStatusDisplay} />\r\n\r\n\r\n      {/* onesignal web push notifications */}\r\n      {/* <div class='onesignal-customlink-container'></div> */}\r\n\r\n      {/* <p>{JSON.stringify(testingCORS)}</p> */}\r\n      {/* <button onClick={() => cookieTestButtonClicked('get')}>Test cookies GET</button> */}\r\n      {/* <button onClick={() => cookieTestButtonClicked('post')}>Test cookies POST</button> */}\r\n\r\n      <SLink to='/pushups/intro'>Intro/About</SLink>\r\n      <SLink to='/pushups/maxRepsTest' style={{ fontSize: '1.1rem' }}>\r\n        Update My Max Reps\r\n      {user && user.assessments && ` (${user.assessments[0].reps})`}\r\n      </SLink>\r\n\r\n\r\n      <MaxRepsButtonInterface/>\r\n\r\n\r\n\r\n\r\n\r\n\r\n      {/* {user && user.assessments && <p style={{textAlign:'right'}}>Your current max: {user.assessments[0].reps}</p>} */}\r\n      <SLink to='/pushups/trainingPlans'>Training Plans      </SLink>\r\n      {/* <div style={{display:'flex', justifyContent:'flex-end', top:'5px'}}> */}\r\n      {user && user.pushupPlans.current && <div style={{ display: 'flex', justifyContent: 'flex-end', position: 'relative', top: '-10px', overflow: 'hidden' }}>\r\n        <button onClick={viewCurrentPlanButtonClicked} style={{\r\n          fontSize: '0.7rem',\r\n          // backgroundColor: '#f4e61e',\r\n          backgroundColor: 'orange',\r\n          width: '70%', height: '50px', borderRadius: '0 0 10px 10px'\r\n        }}>\r\n          {/* Current: */}\r\n          <span style={{ fontSize: '1rem', color: 'blue' }}> {user && user.pushupPlans.current.name}</span>\r\n        </button>\r\n      </div>}\r\n      {/* <br /> */}\r\n\r\n      {((info.days > 0 || info.textLine2 === 'Select training Plan First')\r\n        //&& (!user || !user.authority || user.authority.power < 10)\r\n      ) ?\r\n        //training is in the future (or no plan selected) (=gray button):\r\n        <SLink to='/pushups' style={{ backgroundColor: 'gray', fontSize: '1rem', color: 'lightBlue', cursor: 'not-allowed' }}>\r\n          {info.textLine2 === 'Select training Plan First' ? 'Start' : 'Next'} Training\r\n          <p style={{ fontSize: '2rem', color: 'white' }}>{info.textLine2}</p>\r\n        </SLink> :\r\n\r\n        //%$£008\r\n        //training is now or late\r\n        <SLink to='/pushups/startMyTraining' style={{ backgroundColor: '#e86b00' }}>\r\n          {info.textLine1 ? 'Continue training' : 'Start Training'}\r\n          <p style={{ fontSize: '1rem', color: 'lightGray' }}>{info.textLine2}</p>\r\n          { //info about final assessment:\r\n            info.textLine3 < 23 &&\r\n            <p style={{ fontSize: '1rem', color: 'gray' }}>{info.textLine3 === 0 ? 'Final assessment is Due Today' : `(${info.textLine3} day${info.textLine3 === 1 ? '' : 's'} to Final Assessment)`}</p>}\r\n        </SLink>\r\n      }\r\n\r\n      {/*if training was sucessfully finished, label it  */}\r\n      {/* check if day of last training (if any exists) is today. if yes and training not finished, show \"continue training option\" */}\r\n\r\n\r\n\r\n      {/* <br /><br /> */}\r\n      {/* show only if user exists: */}<SLink to='/pushups/history'>History</SLink>\r\n      {/* show only if user exists: */}<SLink to='/pushups/community'>Community</SLink>\r\n\r\n      {/* show only if user exists: */}<SLink to='/pushups/settings'>Settings</SLink>\r\n      <p style={{ color: 'gray', fontSize: '10px', textAlign: 'center' }}>Version: 2.21</p>\r\n      {/* <p>{new Date().toString()}</p> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(Home);","function roughSizeOfObject( object ) {\r\n\r\n  var objectList = [];\r\n  var stack = [ object ];\r\n  var bytes = 0;\r\n\r\n  while ( stack.length ) {\r\n      var value = stack.pop();\r\n\r\n      if ( typeof value === 'boolean' ) {\r\n          bytes += 4;\r\n      }\r\n      else if ( typeof value === 'string' ) {\r\n          bytes += value.length * 2;\r\n      }\r\n      else if ( typeof value === 'number' ) {\r\n          bytes += 8;\r\n      }\r\n      else if\r\n      (\r\n          typeof value === 'object'\r\n          && objectList.indexOf( value ) === -1\r\n      )\r\n      {\r\n          objectList.push( value );\r\n\r\n          for( var i in value ) {\r\n              stack.push( value[ i ] );\r\n          }\r\n      }\r\n  }\r\n  return bytes;\r\n}\r\n\r\nexport default roughSizeOfObject;","import React from 'react';\r\nimport { SLink } from './Home';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../functions/postJsonData'\r\nimport objectSize from '../../functions/objectSize'\r\nimport styled from 'styled-components';\r\n\r\nconst SPersonalPushupPlans = styled.div`\r\nbackground-color: yellow;\r\npadding:3%;\r\nmargin:3px;\r\nborder-radius:10px;\r\n`\r\n\r\nconst MyExistingPlans = styled.div`\r\nbackground-color:lightgreen;\r\npadding:15px;\r\n/* margin:3%; */\r\nmargin-top:20px;\r\n\r\n`\r\nconst SPlanLink = styled.div`\r\nmargin:5px;\r\nbackground-color:#56cd56;\r\npadding:10px;\r\ndisplay:flex;\r\njustify-content: space-between;\r\nflex-wrap:wrap;\r\n`\r\nconst SButtonWrapper = styled.div`\r\ndisplay:flex;\r\nflex-flow:row wrap;\r\ndiv{\r\n  flex:1 1 auto;\r\ndisplay:flex;\r\njustify-content:space-around;\r\n}\r\nbutton{\r\n  margin:10px;\r\n  border-radius:10px;\r\n  width:50%;\r\n  };\r\n`\r\n\r\nconst PersonalPushupPlans = ({ history}) => {\r\n  let { user, updateUser } = React.useContext(PushUpsContext);\r\n\r\n  const personalPlanAction = async (positionFrom0, action) => {\r\n\r\n    // console.log(\"objectSize1\", objectSize(user));\r\n\r\n    if (action == 'submitAsFinished') {\r\n      console.log(\"submitAsFinished\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/finishPersonal/${positionFrom0}`,\r\n        // state: {\r\n        //   personalPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personal[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'view') {\r\n      console.log(\"view\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/view/inDevelopment/${user.pushupPlans.personal[positionFrom0]._id}`,\r\n        state: {\r\n          personalPlanPositionFrom0: positionFrom0,\r\n          plan: user.pushupPlans.personal[positionFrom0]\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'viewAdjust') {\r\n      console.log(\"adjust\");\r\n      // console.log(\"adjust - props:\", props);\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/adjustPersonal/${positionFrom0}`,\r\n        state: {\r\n          personalPlanPositionFrom0: positionFrom0,\r\n          plan: user.pushupPlans.personal[positionFrom0]\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'delete' && !window.confirm(`Are you sure you want to continue?`)) return;\r\n    if (action == 'commit' && user.pushupPlans.current && !window.confirm(`Are you sure you want to continue? (You are already commit to another plan.)`)) return;\r\n\r\n    let objForServer = { planPositionFrom0: positionFrom0, action }\r\n    try {\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/manipulatePersonalPlan', objForServer);\r\n      // console.log(\"res from server on USERPLAN ACTION BUTTON:\", updatedUser);\r\n      updateUser({ ...updatedUser });\r\n\r\n      console.log(\"objectSize1\", objectSize(user));\r\n\r\n    } catch (err) { console.log(err); };\r\n  }\r\n\r\n  const personalFinishedPlanAction = async (positionFrom0, action) => {\r\n\r\n    // console.log(\"objectSize1\", objectSize(user));\r\n\r\n    // if (action == 'submitAsFinished') {\r\n    //   console.log(\"submitAsFinished\");\r\n    //   history.push({\r\n    //     pathname: `/pushups/trainingPlans/finishPersonal/${positionFrom0}`,\r\n    //     // state: {\r\n    //     //   personalPlanPositionFrom0: positionFrom0,\r\n    //     //   plan: user.pushupPlans.personal[positionFrom0]\r\n    //     // }\r\n    //   });\r\n\r\n    //   return;\r\n    // }\r\n\r\n    console.log(\"button action, plan numberFrom0: \", action, positionFrom0);\r\n    if (action == 'publish') {\r\n      console.log(\"publish clicked\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/publish/${positionFrom0}`,\r\n        // state: {\r\n        //   personalPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personal[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'view') {\r\n      console.log(\"view\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/view/finished/${user.pushupPlans.personalFinished[positionFrom0]._id}`,\r\n        state: {\r\n          personalFinishedPlanPositionFrom0: positionFrom0,\r\n          plan: user.pushupPlans.personalFinished[positionFrom0]\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n    if (action == 'delete' && !window.confirm(`Are you sure you want to continue?`)) return;\r\n    if (action == 'commit' && user.pushupPlans.current && !window.confirm(`Are you sure you want to continue? (You are already commit to another plan.)`)) return;\r\n\r\n    //// commit, duplicate, delete actions - on server side:\r\n    let objForServer = { planPositionFrom0: positionFrom0, action }\r\n    try {\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/manipulatePersonalFinishedPlan', objForServer);\r\n      updateUser({ ...updatedUser });\r\n    } catch (err) { console.log(err); };\r\n  }\r\n\r\n  return (\r\n    <SPersonalPushupPlans>\r\n      {/* <h3 style={{ display: 'inline' }}> My pushup plans</h3> */}\r\n      <SLink style={{ margin: '10px 0 0 30px', display: 'inline-block', padding: '5px 20px', border: '3px red solid' }} to='/pushups/trainingPlans/createPersonal'>Create new</SLink>\r\n\r\n\r\n      <MyExistingPlans>\r\n        <h3>Private - Finished (Non-Adjustable)</h3>\r\n        <p>info what are these for...</p>\r\n        {(user && user.pushupPlans && user.pushupPlans.personalFinished && user.pushupPlans.personalFinished.length > 0) ?\r\n          <> {user.pushupPlans.personalFinished.map((plan, indexFrom0) =>\r\n            <SPlanLink key={indexFrom0}>\r\n              <span>{plan.name}</span>\r\n              <SButtonWrapper>\r\n                <div>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'commit')}>Commit</button>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'publish')}>Publish</button>\r\n                </div>\r\n                <div>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'view')}>View</button>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'duplicate')}>Duplicate</button>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'delete')}>Delete</button>\r\n                </div>\r\n              </SButtonWrapper>\r\n\r\n            </SPlanLink>)}\r\n          </> : <span>No personal plans made.</span>}\r\n      </MyExistingPlans>\r\n\r\n      <MyExistingPlans>\r\n        <h3>Private - In Development (Adjustable)</h3>\r\n        <p>info what are these for...</p>\r\n        {(user && user.pushupPlans && user.pushupPlans.personal && user.pushupPlans.personal.length > 0) ?\r\n          <> {user.pushupPlans.personal.map((plan, indexFrom0) =>\r\n            <SPlanLink key={indexFrom0}>\r\n              <span>{plan.name}</span>\r\n              <SButtonWrapper>\r\n                <div>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'commit')}>Commit</button>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'submitAsFinished')}>Submit as Finished</button>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'view')}>View</button>\r\n\r\n                </div>\r\n                <div>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'viewAdjust')}>Adjust</button>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'duplicate')}>Duplicate</button>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'delete')}>Delete</button>\r\n                </div>\r\n                {/* <span>(rearrange)</span> */}\r\n              </SButtonWrapper>\r\n\r\n            </SPlanLink>)}\r\n          </> : <span>No personal plans made.</span>}\r\n\r\n\r\n      </MyExistingPlans>\r\n\r\n\r\n      {/* <SLink style={{ margin: '10px 0 0 0' }} to='/pushups/trainingPlans/createPersonal'>Create new</SLink> */}\r\n\r\n\r\n    </SPersonalPushupPlans>\r\n  );\r\n};\r\n\r\nexport default withRouter(PersonalPushupPlans);","import React from 'react';\r\nimport { planViewContext } from '../ViewPushupPlan'\r\n\r\n// const ViewSet = ({ set, number, percentages, lastSetNumberFrom1, showNotes }) => {\r\nconst ViewSet = ({ set, number, lastSetNumberFrom1 }) => {\r\n  const planViewContextData = React.useContext(planViewContext);\r\n  // console.log(\"planViewContextData: \", planViewContextData);\r\n  const { percentages, showNotes }=planViewContextData;\r\n  \r\n  let setText;\r\n  if (percentages) {\r\n    // console.log(\"% in SET:\", percentages);\r\n    // console.log(\"set.repsAsPercentage: \", set.repsAsPercentage);\r\n    const { reps: maxReps, source } = percentages.maxReps;\r\n    const repsAsNumber = Math.round(set.repsAsPercentage / 100 * maxReps);\r\n    // const maxInfo = (source==='none') ? null : ((source==='initial') ? `(${repsAsNumber} reps using your initial assessment(${maxReps}) as 100%)`:``)\r\n    const maxInfo = (source === 'none') ? null : `(${repsAsNumber} reps)`;\r\n\r\n    // setText = `${set.repsAsPercentage}% of your max. ${maxInfo}`;\r\n    setText = `${set.repsAsPercentage}% ${maxInfo}`;\r\n  } else {\r\n    setText = `${set.reps} reps`;\r\n  }\r\n\r\n  // console.log(\"setText: \", setText);\r\n  return (\r\n    <div>\r\n      <span>set {number}: </span>\r\n      <span>{setText}</span>\r\n      {lastSetNumberFrom1 != number && <span style={{ color: 'gray', paddingLeft: '20px' }}>{set.breakAfterInSeconds}s. break</span>}\r\n      {(showNotes\r\n        //&& (set.repsNotes || set.breakNotes)\r\n      ) &&\r\n        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr' }}>\r\n          <div style={{ backgroundColor: 'lightGreen' }}>{set.repsNotes ? set.repsNotes : <span style={{color:'gray'}}>No notes</span>} </div>\r\n          <div style={{ backgroundColor: 'green' }}>{set.breakNotes ? set.breakNotes : <span style={{color:'gray'}}>No notes</span>}</div>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewSet;","import React from 'react';\r\nimport ViewSet from './ViewSet';\r\n\r\nconst ViewTraining = ({training:{name, sets}, number,percentages,showNotes }) => {\r\n  return (\r\n    <div style={{backgroundColor:'lightGray'}}>\r\n      <h4>Training {number} {name && `(${name})`}</h4>\r\n      <h5>Sets:</h5>\r\n      {sets.map((set, i) => <ViewSet set={set} number={i + 1} key={i} percentages={percentages} lastSetNumberFrom1={sets.length} showNotes={showNotes}/>)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewTraining;","import React from 'react';\r\n\r\nconst ViewSchedule = ({ schedule }) => {\r\n  // console.log(schedule);\r\n  return (\r\n    <div>\r\n      <h2>Schedule</h2>\r\n    <div className='viewScheduleGrid'></div>\r\n      <div style={{ display: 'inline' }}>Day</div>\r\n      <div style={{ display: 'inline' }}> Training number</div>\r\n      {schedule.map((day, i) =>\r\n        <div key={i}>\r\n          <div style={{ display: 'inline' }}>{i + 1})</div>\r\n          <div style={{ display: 'inline' }}> {i===0? `Initial assessment ${day.trainingNumber > 0 && `and training ${day.trainingNumber}`}`: i === 13 ? 'Final assessment day' : (day.trainingNumber === 0 ? 'Rest day' : `${day.trainingNumber}`)}</div>\r\n        </div>\r\n      )}\r\n    </div>)\r\n}\r\n\r\nexport default ViewSchedule;","import React from 'react';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nconst QuillReactEditor = ({ initialValue, onChange, onSubmit, submitButtonText, placeholder, hideToolbar,customStyles }) => {\r\n  // console.log(\"hideToolbar: \", hideToolbar);\r\n  const [value, setValue] = React.useState(initialValue ? initialValue : null);//placeholder will be useed instead\r\n  // const [bigObject, setBigObject] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    // if (!onChange && !onSubmit) document.querySelector('.ql-toolbar').style.display = 'none';\r\n  }, []);\r\n\r\n  // const modules = {\r\n  //   toolbar: [\r\n  //     [{ 'header': [1, 2, false] }],\r\n  //     ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n  //     [{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'indent': '-1' }, { 'indent': '+1' }],\r\n  //     // ['link', 'image'],\r\n  //     ['link'],\r\n  //     ['clean']\r\n  //   ],\r\n  // };\r\n\r\n  const modules = {\r\n    toolbar: hideToolbar ? false\r\n      : [\r\n        [{ 'header': [1, 2, false] }],\r\n        ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n        [{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'indent': '-1' }, { 'indent': '+1' }],\r\n        // ['link', 'image'],\r\n        ['link'],\r\n        ['clean']\r\n      ],\r\n  };\r\n\r\n  // const modules.toolbar = hideToolbar ? false\r\n  //     : [\r\n  //       [{ 'header': [1, 2, false] }],\r\n  //       ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n  //       [{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'indent': '-1' }, { 'indent': '+1' }],\r\n  //       // ['link', 'image'],\r\n  //       ['link'],\r\n  //       ['clean']\r\n  //     ],\r\n  // };\r\n\r\n  const formats = [\r\n    'header',\r\n    'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n    'list', 'bullet', 'indent',\r\n    'link',\r\n    // 'image'\r\n  ];\r\n\r\n  const handleChange = (a, b, c, d) => {\r\n    // console.log(\"ABCD: \\n\", a + '\\n' + b + '\\n' + c + '\\n' + d);\r\n    // console.log(d.getContents());\r\n    setValue(a);\r\n    // setBigObject(d.getContents()); //doesn't load the values in properly in adjust plan - spae and bunch of other stuff doesn't work\r\n    // setBigObject(a);\r\n    if (onChange) onChange(a);\r\n  }\r\n\r\n  const submitChanges = () => {\r\n    // let dataToSave = JSON.stringify(bigObject);\r\n    // localStorage.setItem('bigObject', dataToSave);\r\n    // console.log(\"submitted\", );\r\n    // if (functionUsingSubmittedValue) functionUsingSubmittedValue(bigObject);\r\n    // onSubmit(bigObject);\r\n    if (onSubmit) onSubmit(value);\r\n    // console.log(functionUsingSubmittedValue);\r\n  }\r\n\r\n  // const getData = async () => {\r\n  //   let dataFromStorage = localStorage.getItem('bigObject');\r\n  //   let data = JSON.parse(localStorage.getItem('bigObject'));\r\n  //   console.log(dataFromStorage);\r\n  //   console.log(data);\r\n  //   setValue(data);\r\n  // }\r\n\r\n  return (\r\n    <div>\r\n      <ReactQuill\r\n        value={value}\r\n        onChange={handleChange}\r\n        readOnly={(onChange || onSubmit) ? false : true}\r\n        theme=\"snow\"\r\n        // theme=\"bubble\"\r\n        modules={modules}\r\n        placeholder={placeholder ? placeholder : 'write here...'}\r\n        formats={formats}//all enabled by default\r\n        style={customStyles}\r\n        // toolbar={false} //disabled as alert was displayed that this is an old-deprecated format, module.toolbar is needed now...\r\n      />\r\n      {onSubmit &&\r\n        <button\r\n          className='ql-MiroSubmitButton'\r\n          style={{ textAlign: 'center', margin: 'auto', display: 'block' }}\r\n          onClick={submitChanges}>\r\n          {submitButtonText ? submitButtonText : 'submit'}\r\n        </button>}\r\n    </div>\r\n  );\r\n}\r\nexport default QuillReactEditor;","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport ViewTraining from './view/ViewTraining';\r\nimport ViewSchedule from './view/ViewSchedule';\r\n// import QuillReactTextEditor from './richTextEditing/QuillReactEditor';\r\nimport TextEditorReactQuill from '../basicComponents/richTextEditing/TextEditorReactQuill';\r\n\r\n// import { postJsonDataUrlAfterAPIpushups } from '../../../../functions/postJsonData'\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData'\r\nimport styled from 'styled-components';\r\n\r\n// import {sharePublicPlanButtonClicked} from './publicPlans/PublicPlanToList'\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { frontEndPushupsUrlRoot } from '../../../globalState/globalVariables'\r\nconst sharePublicPlanButtonClicked = (publicPlanID) => {\r\n  const urlTextToCopy = `${frontEndPushupsUrlRoot}/trainingPlans/view/public/${publicPlanID}`;\r\n  console.log(\"love\");\r\n  const el = document.createElement('textarea');\r\n  el.value = urlTextToCopy;\r\n  document.body.appendChild(el);\r\n  el.select();\r\n  document.execCommand('copy');\r\n  document.body.removeChild(el);\r\n\r\n  // toast(`Url (${urlTextToCopy})copied to clipboard.`, {\r\n  toast(`Link to this plan copied. Paste it into your favorite messaging app.`, {\r\n    position: \"top-center\",\r\n    autoClose: 7000,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n  });\r\n  // window.alert(`Url of this plan ('${urlTextToCopy}')was copied to the clipboard.`);\r\n\r\n  // function tempAlert(msg,duration)\r\n  // {\r\n  //  var el = document.createElement(\"div\");\r\n  //  el.setAttribute(\"style\",\"position:absolute;top:40%;left:20%;background-color:white;z-index:1000\");\r\n  //  el.innerHTML = msg;\r\n  //  setTimeout(function(){\r\n  //   el.parentNode.removeChild(el);\r\n  //  },duration);\r\n  //  document.body.appendChild(el);\r\n  // }\r\n  // tempAlert(`Url of this plan ('${urlTextToCopy}')was copied to the clipboard.`,5000);\r\n\r\n}\r\n// export let planViewDefaultContext = {};\r\n// export const planViewContext = React.createContext(planViewDefaultContext);\r\nexport const planViewContext = React.createContext();\r\n\r\n// export const sharePublicPlanButtonClicked = ({ target }) => {\r\n\r\n\r\nconst SButtonWrapper = styled.div`\r\ndisplay:flex;\r\n/* flex-flow:row wrap; */\r\ndiv{\r\n  /* flex:1 1 auto; */\r\n/* display:flex; */\r\n/* justify-content:space-around; */\r\n}\r\nbutton{\r\n  margin:10px;\r\n  border-radius:10px;\r\n  /* width:50%; */\r\n  };\r\n`\r\n\r\nconst ViewPushupPlan = ({ match: { params }, location: { state }, history, plan, view }) => {\r\n  // console.log(\"------view pushup plan------\");\r\n\r\n  React.useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  const [showNotes, setShowNotes] = React.useState(false);\r\n  let planLinks = { type: params.type, id: params.ID };\r\n  const { user, updateUser, publicPlans, updatePublicPlans } = React.useContext(PushUpsContext);\r\n  let personalPlans = user ? user.pushupPlans : null;\r\n\r\n  // console.log(\"params: \", params);\r\n  // console.log(\"state: \", state);\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 1\");\r\n  // let plan;\r\n  let repsAsPercentages;\r\n  let maxReps = { reps: 0, source: 'none' };\r\n  let percentages;\r\n  if (!plan) {\r\n    if (state) { plan = state.plan } //=plan from url\r\n    else if (user) { //get plan from user:\r\n      if (planLinks.type === 'finished') {\r\n        plan = personalPlans.personalFinished.find(plan => plan._id === planLinks.id);\r\n      } else if (planLinks.type === 'public' && publicPlans) {\r\n        plan = publicPlans.find(plan => plan._id === planLinks.id);\r\n      } else if (planLinks.type === 'inDevelopment') {\r\n        plan = personalPlans.personal.find(plan => plan._id === planLinks.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  //sort max reps if plan as %\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 2\");\r\n\r\n  // console.log(\"plan just before %: \", plan);\r\n\r\n  if (plan && plan.repsAsPercentages) {\r\n    // console.log(\"PLAN AS %\");\r\n    repsAsPercentages = true;\r\n    if (user.pushupPlans.current && user.pushupPlans.current.assessments.initialAssessmentID) {\r\n      maxReps.reps = user.assessments.find(ass => ass._id === user.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n      maxReps.source = 'initial';\r\n      // console.log(\"MAX REPS from INIT ASS\",maxReps);\r\n    } else if (user.assessments && user.assessments.length > 0) {\r\n      maxReps.reps = user.assessments[0].reps;\r\n      maxReps.source = 'latest';\r\n    }\r\n    percentages = { repsAsPercentages, maxReps }\r\n  }\r\n\r\n\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 3\");\r\n\r\n  if (!plan) return (<p>loading data...</p>);\r\n  const { name, trainings, schedule } = plan;\r\n\r\n  // \r\n  const adjustPlan = () => {\r\n    console.log(\"adjust\");\r\n    history.push({\r\n      pathname: `/pushups/trainingPlans/adjustPersonal/N/${plan._id}`,\r\n      state: {\r\n        plan //i am not going to use right now\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  // console.log(\"percentages: \", percentages);\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 4\");\r\n\r\n  if (view === 'publicPlansList') {\r\n    //don't show summary again etc\r\n  }\r\n\r\n\r\n  const publicPlanButtonClickAction = async (publicPlanID, action) => {\r\n\r\n    console.log(\"button action, plan id: \", publicPlanID, action);\r\n\r\n    if (action == 'view') {\r\n      // console.log(\"view\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/view/public/${publicPlanID}`,\r\n        // state: {\r\n        //   personalFinishedPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personalFinished[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'adjust') {\r\n      // <Route path='/pushups/trainingPlans/adjustPersonal/:positionFrom0/:id' component={AdjustPersonalPushupPlan} />\r\n\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/adjustPersonal/-125/${publicPlanID}`,\r\n        // state: {\r\n        //   personalFinishedPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personalFinished[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    //// commit, duplicate, delete actions - on server side:\r\n    if (action == 'delete' && !window.confirm(`Are you sure you want to continue?`)) return;\r\n    if (action == 'commit' && user.pushupPlans.current && !window.confirm(`Are you sure you want to continue? (You are already commit to another plan.)`)) return;\r\n\r\n\r\n    try {\r\n      // if (action === 'duplicate') alert('Adjustable copy of public plan will appear in your \"Private plans in development\" section')\r\n\r\n      let objForServer = { publicPlanID, action }\r\n      let updatedUserOrPlans = await postJsonDataUrlAfterAPIpushups('/interactWithPublicPlan', objForServer);\r\n\r\n      if (action === 'delete') {\r\n        updatePublicPlans([...updatedUserOrPlans]);\r\n        if (user.pushupPlans.current && user.pushupPlans.current.planIDType === publicPlanID) {\r\n          user.pushupPlans.current = null; //this was done on backend too but was not send to front end\r\n          updateUser({ ...user });\r\n          // window.location.reload(true);\r\n        }\r\n      } else { updateUser({ ...updatedUserOrPlans }); }\r\n\r\n      if (action === 'commit') history.push({ pathname: `/pushups` });\r\n      if (action === 'duplicate') {\r\n        //load that personal plan\r\n        let planToAdjustId = updatedUserOrPlans.pushupPlans.personal[updatedUserOrPlans.pushupPlans.personal.length - 1]._id;\r\n\r\n        history.push({ pathname: `/pushups/trainingPlans/adjustPersonal/N/${planToAdjustId}` });\r\n        alert('Adjustable copy of public plan was created in \"Your plans\". Now you can adjust this copy...');\r\n        // toast(`Adjustable copy of public plan was created in \"Your plans\". Now you can adjust this copy...`, {\r\n        //   position: \"top-center\",\r\n        //   autoClose: 3000,\r\n        //   hideProgressBar: false,\r\n        //   closeOnClick: true,\r\n        //   pauseOnHover: true,\r\n        //   draggable: true,\r\n        // });\r\n\r\n\r\n      }\r\n\r\n\r\n    } catch (err) { console.log(err); };\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n\r\n      <planViewContext.Provider value={{ percentages, showNotes }}>\r\n\r\n        {/* BUTTONS for public plan */}\r\n        {(view === 'publicPlansList' || planLinks.type === 'public') &&\r\n          <>\r\n            <button style={{ display: 'block', width: '80%' }} onClick={() => publicPlanButtonClickAction(plan._id, 'commit')}>Use this plan to train</button>\r\n            <SButtonWrapper>\r\n              <button onClick={() => publicPlanButtonClickAction(plan._id, 'duplicate')}>Adjust</button>\r\n              <button onClick={() => sharePublicPlanButtonClicked(plan._id)}>Share</button>\r\n              <ToastContainer />\r\n              {user && user.email && user.authority && user.authority.power >= 10 &&\r\n                <>\r\n                  <button style={{ backgroundColor: 'red' }} onClick={() => publicPlanButtonClickAction(plan._id, 'adjust')}>Adjust(dev)</button>\r\n                  <button style={{ backgroundColor: 'red' }} onClick={() => publicPlanButtonClickAction(plan._id, 'delete')}>Delete</button>\r\n                </>\r\n              }\r\n            </SButtonWrapper>\r\n          </>}\r\n\r\n            <div>\r\n\r\n              {plan.personal === 'yes-only' && <button style={{ display: 'block', width: '80%', margin: '10px auto' }} onClick={adjustPlan}>Adjust plan</button>}\r\n              <h5 style={{ textAlign: 'center' }}>{name}</h5>\r\n\r\n              {/* {plan.description && */}\r\n              {/* <div>        {plan.description}      </div>} */}\r\n              {view != 'publicPlansList' && <div>\r\n                <h5>Summary</h5>\r\n                {(plan.summary) && <TextEditorReactQuill initialValue={plan.summary} hideToolbar />}\r\n              </div>}\r\n\r\n              <h5>Description</h5>\r\n              {(plan.description || plan.descriptionRich) && <TextEditorReactQuill initialValue={plan.descriptionRich ? plan.descriptionRich : plan.description} hideToolbar />}\r\n              {/* {percentages && <div>\r\n            <h3>% usage</h3>\r\n            <p> - how % are used ... explain here, example here; what is used as 100 also here - exandable button?</p>\r\n          </div>} */}\r\n\r\n              <div style={{ padding: '10px' }}>\r\n                <h3>Trainings</h3>\r\n                <button onClick={() => setShowNotes((showNotes) => !showNotes)}>Show/Hide Notes</button>\r\n                {trainings.map((training, i) => <ViewTraining training={training} number={i + 1} key={i} percentages={percentages} showNotes={showNotes} />)}\r\n              </div>\r\n\r\n              <ViewSchedule schedule={schedule} />\r\n\r\n            </div>\r\n      </planViewContext.Provider>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(ViewPushupPlan);","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\n// import PushUpsContext from './state/PushUpsContextState';\r\nimport PushUpsContext from '../../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../../functions/postJsonData'\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport ViewPushupPlan from '../../pushupPlans/ViewPushupPlan';\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport TextEditorReactQuill from '../../basicComponents/richTextEditing/TextEditorReactQuill';\r\n\r\n\r\n\r\nimport positionElementToTheTop from '../../functions/styling/positionElementToTheTop'\r\n\r\n\r\n\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\n/* margin: 0 5px 8px 5px; */\r\n`\r\n\r\n\r\nconst SPlanLink = styled.div`\r\n/* margin:5px; */\r\nbackground-color:#56cd56;\r\npadding:10px;\r\n/* display:flex; */\r\n/* justify-content: space-between; */\r\n/* flex-wrap:wrap; */\r\n`\r\nconst SButtonWrapper = styled.div`\r\ndisplay:flex;\r\n/* flex-flow:row wrap; */\r\ndiv{\r\n  /* flex:1 1 auto; */\r\n/* display:flex; */\r\n/* justify-content:space-around; */\r\n}\r\nbutton{\r\n  margin:10px;\r\n  border-radius:10px;\r\n  /* width:50%; */\r\n  };\r\n`\r\n\r\n\r\n\r\n// const PublicPlanToList = ({ plan, history,viewSetting:v }) => {\r\nconst PublicPlanToList = ({ plan, history, viewSetting: v, index }) => {\r\n  let { user, updateUser, publicPlans, updatePublicPlans } = React.useContext(PushUpsContext);\r\n\r\n\r\n  if (!v) v = { summary: true, targetGroup: true }\r\n  // console.log(\"viewSetting: \", v);\r\n\r\n  // const {summary,description,trainings,schedule } = viewSetting;\r\n\r\n  const publicPlanButtonClickAction = async (publicPlanID, action) => {\r\n\r\n    console.log(\"button action, plan id: \", publicPlanID, action);\r\n\r\n    if (action == 'view') {\r\n      // console.log(\"view\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/view/public/${publicPlanID}`,\r\n        // state: {\r\n        //   personalFinishedPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personalFinished[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'adjust') {\r\n      // <Route path='/pushups/trainingPlans/adjustPersonal/:positionFrom0/:id' component={AdjustPersonalPushupPlan} />\r\n\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/adjustPersonal/-125/${publicPlanID}`,\r\n        // state: {\r\n        //   personalFinishedPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personalFinished[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    //// commit, duplicate, delete actions - on server side:\r\n    if (action == 'delete' && !window.confirm(`Are you sure you want to continue?`)) return;\r\n    if (action == 'commit' && user.pushupPlans.current && !window.confirm(`Are you sure you want to continue? (You are already commit to another plan.)`)) return;\r\n\r\n\r\n    try {\r\n      // if (action === 'duplicate') alert('Adjustable copy of public plan will appear in your \"Private plans in development\" section')\r\n\r\n      let objForServer = { publicPlanID, action }\r\n      let updatedUserOrPlans = await postJsonDataUrlAfterAPIpushups('/interactWithPublicPlan', objForServer);\r\n\r\n      if (action === 'delete') {\r\n        updatePublicPlans([...updatedUserOrPlans]);\r\n        if (user.pushupPlans.current && user.pushupPlans.current.planIDType === publicPlanID) {\r\n          user.pushupPlans.current = null; //this was done on backend too but was not send to front end\r\n          updateUser({ ...user });\r\n          // window.location.reload(true);\r\n        }\r\n      } else { updateUser({ ...updatedUserOrPlans }); }\r\n\r\n      if (action === 'commit') history.push({ pathname: `/pushups` });\r\n      if (action === 'duplicate') {\r\n        //load that personal plan\r\n          let planToAdjustId = updatedUserOrPlans.pushupPlans.personal[updatedUserOrPlans.pushupPlans.personal.length-1]._id;\r\n\r\n          history.push({ pathname: `/pushups/trainingPlans/adjustPersonal/N/${planToAdjustId}` });\r\n          alert('Adjustable copy of public plan was created in \"Your plans\". Now you can adjust this copy...');\r\n          // toast(`Adjustable copy of public plan was created in \"Your plans\". Now you can adjust this copy...`, {\r\n          //   position: \"top-center\",\r\n          //   autoClose: 3000,\r\n          //   hideProgressBar: false,\r\n          //   closeOnClick: true,\r\n          //   pauseOnHover: true,\r\n          //   draggable: true,\r\n          // });\r\n\r\n\r\n      }\r\n\r\n\r\n    } catch (err) { console.log(err); };\r\n  }\r\n\r\n  \r\n\r\n\r\n\r\n  // return (\r\n  // <div style={{ backgroundColor: 'white', margin: '3% 3px', padding: '3%' }}>\r\n  // <div style={{ backgroundColor: 'white', margin: '3% 3px', padding: '0' }}>\r\n  {/* <p>Name: {plan.name}</p> */ }\r\n\r\n  {/* <SPlanLink key={plan._id}> */ }\r\n\r\n\r\n  {/* </SPlanLink> */ }\r\n\r\n\r\n\r\n  {/* <Accordion className='p-1' style={{ margin: '0px 10px 0px 20px', background: 'transparent' }}> */ }\r\n  {/* <Accordion className='p-1' style={{ margin: '0', background: 'orange' }}> */ }\r\n  // <Accordion className='p-1' style={{ margin: '0', background: 'none',border:'none' }}>\r\n  {/* <Card style={{background:'transparent', border:'none'}} > */ }\r\n\r\n\r\n\r\n  return (\r\n    // <Card>\r\n    <Card style={{ background: 'transparent', border: 'none', margin: '3px', borderRadius: '0px' }} >\r\n      {/* <Card style={{background:'transparent', border:'2px solid yellow', margin:'3px'}} > */}\r\n      {/* // <Card style={{background:'white', border:'none'}} > */}\r\n\r\n      <Accordion.Toggle\r\n        as={Card.Header}\r\n        eventKey={index}\r\n        id={`publicPlansAccordionCard${index}`}\r\n        // className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n        // className=\"p-1 m-1 bg-none MMpointer btnOpacity\"\r\n        className=\"bg-none MMpointer btnOpacity\"\r\n        // style={{background:'white',margin:'0px 60px 0px 60px'}}\r\n        // style={{background:'yellow',margin:'0px 60px 0px 60px'}}\r\n        style={{ background: 'yellow' }}\r\n        onClick={() => positionElementToTheTop(document.getElementById(`publicPlansAccordionCard${index}`), 330)}\r\n      >\r\n        {/* Your Notes 🔽 */}\r\n        {/* <button style={{ float: 'right' }} onClick={() => publicPlanButtonClickAction(plan._id, 'view')}>View</button> */}\r\n        <p style={{ float: 'right' }}>🔽</p>\r\n        <p style={{ fontWeight: 'bold' }}>{plan.name}</p>\r\n        {(v.summary && plan.summary) && <div>\r\n          {/* <inline>Summary:</inline> */}\r\n          {plan.summary ? <TextEditorReactQuill initialValue={plan.summary} hideToolbar customStyles={{ backgroundColor: 'none' }} /> : <inline>No summary</inline>}          </div>}\r\n        {v.description && <div>\r\n          <h5>Description:</h5>\r\n          <p>{plan.description}</p>            </div>}\r\n\r\n        {v.targetGroup && <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          {/* {v.targetGroup && <div> */}\r\n          {/* <p><span style={{fontSize:'2rem', lineHeight:'0.2',overflow:'hidden'}}>➳</span> {plan.targetGroup.initialMaxReps.rangeAsReps[0]} to {plan.targetGroup.initialMaxReps.rangeAsReps[1]} reps.</p>            </div>} */}\r\n          {/* <span style={{fontSize:'2rem',lineHeight:'0.2',overflow:'hidden'}}>➳</span>  */}\r\n          <span style={{ fontSize: '2rem', lineHeight: '0.5', position: 'relative', top: '-2px' }}>➳</span>\r\n          <span> {plan.targetGroup.initialMaxReps.rangeAsReps[0]}..{plan.targetGroup.initialMaxReps.rangeAsReps[1]} reps.</span>            </div>}\r\n        {v.resultsFinished && <div>\r\n          <p>Finished: {plan.executions.summary.uncompleted}, length: {plan.executions.uncompleted.length}</p>            </div>}\r\n        {v.resultsUnfinished && <div>\r\n          <p>Unfinished: {plan.executions.summary.completed}, length: {plan.executions.completed.length}</p>            </div>}\r\n      </Accordion.Toggle>\r\n      <Accordion.Collapse eventKey={index}>\r\n        <SCard style={{ overflowY: 'auto', backgroundColor: '#ffd400', paddingTope: '0' }}>\r\n          {/* <div style={{ backgroundColor: 'red' }}> */}\r\n          <div style={{ backgroundColor: 'transparent' }}>\r\n            {/* <button style={{ display: 'block', width: '80%' }} onClick={() => publicPlanButtonClickAction(plan._id, 'commit')}>Use this plan to train</button> */}\r\n            {/* <SButtonWrapper>\r\n              <button onClick={() => publicPlanButtonClickAction(plan._id, 'duplicate')}>Adjust</button>\r\n              <button onClick={()=>sharePublicPlanButtonClicked(plan._id)}>Share</button>\r\n              {user && user.email && user.authority && user.authority.power >= 10 &&\r\n                <>\r\n                  <button style={{ backgroundColor: 'red' }} onClick={() => publicPlanButtonClickAction(plan._id, 'adjust')}>Adjust(dev)</button>\r\n                  <button style={{ backgroundColor: 'red' }} onClick={() => publicPlanButtonClickAction(plan._id, 'delete')}>Delete</button>\r\n                </>\r\n              }\r\n            </SButtonWrapper> */}\r\n            <ViewPushupPlan plan={plan} view='publicPlansList' />\r\n          </div>\r\n        </SCard>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n  {/* </Accordion> */ }\r\n\r\n\r\n  // </div>\r\n  // );\r\n};\r\n\r\nexport default withRouter(PublicPlanToList);","import React from 'react';\r\nimport TrainingPlanOverview from '../../TrainingPlanOverview';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../../functions/postJsonData';\r\nimport PushUpsContext from '../../state/PushUpsContextState';\r\nimport PublicPlanToList from './PublicPlanToList';\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nimport Toggle from 'react-toggle';\r\n\r\nimport CounterAllIn from '../../basicComponents/CounterAllIn';\r\n\r\n\r\n\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\nmargin: 0 5px 8px 5px;\r\n`\r\n\r\n\r\n\r\nconst PublicPlans = () => {\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n  const { user, updateUser, publicPlans } = pushupContext;\r\n  // const [viewController, setViewController] = React.useState(undefined);\r\n  // console.log(\"Public PLANS RErendered;\")\r\n  // React.useEffect(() => {\r\n  //   if (user) {\r\n  //     console.log(\"USER in PUBLIC PLANS refreshed\");\r\n  //     setViewController(user.settings.plans);\r\n  //     console.log(\"uuU: \", user.settings.plans.public.view);\r\n  //     if (viewController)      console.log(\"uuu \", viewController.public.view);\r\n  //   }\r\n  // },[user])\r\n\r\n  //GET public plans\r\n  // const [publicPlans, setPublicPlans] = React.useState(null);\r\n  // const getPublicPlans = async (positionFrom0) => {\r\n  // let publicPlansSupportVar = await postJsonDataUrlAfterAPIpushups('/getPublicPlan_s', {});\r\n  // setPublicPlans(publicPlansSupportVar);\r\n  // console.log(\"publicPlansSupportVar: \", publicPlansSupportVar);\r\n  // }\r\n  // if (publicPlans === null) {\r\n  // getPublicPlans();\r\n  // return (publicPlans === null && <p>loading Public plans...</p>)\r\n  // };\r\n\r\n\r\n  const togglePublicPlansView = async () => {\r\n    console.log(\"Toggle view\");\r\n\r\n    //center the text\r\n    // console.log(e.target);\r\n    let head = document.getElementById(`publicPlansViewSettings`);\r\n    // console.log(head);\r\n\r\n    let navbarHeight = document.getElementById('mainNavBar').getBoundingClientRect().height;\r\n    // head.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n    await new Promise(resolve => setTimeout(resolve, 330));\r\n    var headTop = head.getBoundingClientRect().top;\r\n    console.log(\"headTop\", headTop);\r\n\r\n    window.scrollBy({\r\n      top: headTop - navbarHeight,\r\n      // top: headTop,\r\n      left: 0,\r\n      behavior: 'smooth'\r\n    });\r\n    //center the text - end\r\n\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/plansViewSettings', { publicPlansAccordion: 'toggle' });\r\n    // console.log(\"U P DA A T E ED  user: \", updatedUser);\r\n    // console.log(\"public plans VIEW: \", user.settings.plans.public.view);\r\n    updateUser({ ...updatedUser });\r\n    // console.log(\"user.settings.plans.public.view: \");\r\n\r\n\r\n\r\n\r\n    // document.getElementById(`publicPlansAccordionCard${index}`).scrollIntoView(true);\r\n    // document.getElementById(`publicPlansAccordionCard${index}`).scrollIntoView({behavior:'smooth',block:'start'});\r\n    // window.scrollTo(0,0);\r\n\r\n\r\n  }\r\n\r\n\r\n  // const commitToPlan = async (planID, planName) => {\r\n  //   //assuming user exists...\r\n  //   let updatedUser = await postJsonDataUrlAfterAPIpushups('/commit', { userID: pushupContext.user._id, planID, name: planName });\r\n  //   pushupContext.updateUser(updatedUser);\r\n  // }\r\n\r\n  const handleViewPublicPlansToggle = async ({ target: { checked } }, what) => {\r\n    let settings = user.settings;\r\n    if (!settings.plans.public.listView) settings.plans.public.listView = {};\r\n    let listView = settings.plans.public.listView;\r\n    listView[what] = checked;\r\n\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateUserSettings', { fromFrontEnd: { settings } });\r\n    updateUser({ ...updatedUser });\r\n  }\r\n\r\n\r\n  ////FILTER BY MAX VALUE........................START\r\n  let [maxRepsHere, setMaxRepsHere] = React.useState(20);\r\n  React.useEffect(() => {\r\n    if (user) {\r\n      setMaxRepsHere(getUserCurrentInAssMaxRepOrDefault(user).reps);\r\n    }\r\n  }, [user])\r\n  const getUserCurrentInAssMaxRepOrDefault = (user) => {\r\n    if (!user) return ({ reps: 20, source: 'none' });\r\n    let maxReps = {};\r\n    if (user.pushupPlans.current && user.pushupPlans.current.assessments.initialAssessmentID) {\r\n      maxReps.reps = user.assessments.find(ass => ass._id === user.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n      maxReps.source = 'initial';\r\n      // console.log(\"MAX REPS from INIT ASS\",maxReps);\r\n    } else if (user.assessments && user.assessments.length > 0) {\r\n      maxReps.reps = user.assessments[0].reps;\r\n      maxReps.source = 'latest';\r\n    } else return ({ reps: 20, source: 'none' });\r\n    return maxReps;\r\n  }\r\n  const updatePlanByGivenTargetNumberOfReps = (newValue) => {\r\n    console.log(newValue);\r\n    setMaxRepsHere(newValue);\r\n  }\r\n  const updateFilterClicked = () => {\r\n    console.log(\"update filter clicked\", \"max reps now:\", maxRepsHere);\r\n  }\r\n  ////FILTER BY MAX VALUE..........................END\r\n\r\n  if (publicPlans === null) { return (<p>loading Public plans...</p>) }\r\n  if (user == null || user == undefined) { return (<p>loading user...</p>) }\r\n  else {\r\n    //rendering this only after plans were received from DB...\r\n    return (\r\n      <div style={{ backgroundColor: 'lightBlue', padding: '0' }}>\r\n      \r\n        {/* filter sort search view */}\r\n        <Accordion\r\n          className='p-1'\r\n          style={{ margin: '0', background: 'none', border: 'none', margin: '20px auto 10px auto' }}\r\n          defaultActiveKey={user.settings.plans.public.view ? '1' : '0'}\r\n        >\r\n          <Card style={{ border: 'none', backgroundColor: 'transparent' }}>\r\n            <Accordion.Toggle\r\n              as={Card.Header}\r\n              eventKey=\"1\"\r\n              id='publicPlansViewSettings'\r\n              onClick={togglePublicPlansView}\r\n              // className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n              // className=\"p-1 m-1 bg-none MMpointer btnOpacity\"\r\n              className=\"bg-none MMpointer btnOpacity\"\r\n              // style={{background:'white',margin:'0px 60px 0px 60px'}}\r\n              // style={{background:'yellow',margin:'0px 60px 0px 60px'}}\r\n              style={{ background: '#ffd400', maxWidth: '85vw', margin: 'auto', border: 'none', borderRadius: '7px 7px 0 0' }}\r\n\r\n            >\r\n              {/* <p style={{ float: 'right' }}>lKS L DSLKFJ SDF  🔽</p> */}\r\n              <h5 style={{ textAlign: 'center' }}>Filter, Sort, Search  🔽</h5>\r\n\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"1\">\r\n              <SCard style={{  border: '4px solid #ffd400', overflowY: 'auto', backgroundColor: 'white', paddingTope: '0' }}>\r\n                {/* <div style={{ backgroundColor: 'red' }}> */}\r\n                <div>\r\n                  {/* <div style={{view:'flex', flexFlow:'row'}}>View */}\r\n                  <div>{/* View */}\r\n                    <h3>view options</h3>\r\n                    {/* <div style={{ padding: '5px', display: 'flex', flexFlow: 'column' }}> */}\r\n                    <div style={{\r\n                      padding: '5px', display: 'inline-flex', flexFlow: 'row', alignItems: 'center', justifyContent: 'left',\r\n                      backgroundColor:'lightBlue', borderRadius:'40px', margin:'5px'\r\n                    }}>\r\n                      <Toggle\r\n                        id='publicPlansViewSummaryToggle'\r\n                        defaultChecked={user.settings.plans.public.listView.summary}\r\n                        // defaultChecked={context.user ? false : true}\r\n                        onChange={(e) => handleViewPublicPlansToggle(e, 'summary')}\r\n                      />\r\n                      <label style={{ margin: '0 0 0 10px' }} htmlFor='publicPlansViewSummaryToggle'>Summaries</label>\r\n                    </div>\r\n                    <div style={{\r\n                      padding: '5px', display: 'inline-flex', flexFlow: 'row', alignItems: 'center', justifyContent: 'left',\r\n                      backgroundColor:'lightBlue', borderRadius:'40px',margin:'5px', lineHeight:'10px' \r\n                    }}>\r\n                      <Toggle\r\n                        id='publicPlansViewTargetGroupToggle'\r\n                        defaultChecked={user.settings.plans.public.listView.targetGroup}\r\n                        // defaultChecked={context.user ? false : true}\r\n                        onChange={(e) => handleViewPublicPlansToggle(e, 'targetGroup')}\r\n                      />\r\n                      {/* <label style={{ margin: '0 0 0 10px' }} htmlFor='publicPlansViewSummaryToggle'>target group <span style={{fontSize:'5rem',height:'auto',width:'50px'}}>➳</span></label> */}\r\n                      <label style={{ margin: '0 0 0 10px' }} htmlFor='publicPlansViewTargetGroupToggle'>Rep ranges</label>\r\n                      <span style={{ fontSize: '2rem' }}>➳</span>\r\n                    </div>\r\n                    {/* <div style={{ padding: '5px', display: 'flex', flexFlow: 'row', alignItems: 'center', justifyContent: 'left' }}>\r\n                    <Toggle\r\n                      id='publicPlansViewDescriptionToggle'\r\n                      defaultChecked={user.settings.plans.public.listView.description}\r\n                      // defaultChecked={context.user ? false : true}\r\n                      onChange={(e) => handleViewPublicPlansToggle(e, 'description')}\r\n                    />\r\n                    <label style={{ margin: '0 0 0 10px' }} htmlFor='publicPlansViewDescriptionToggle'>Description</label>\r\n                  </div> */}\r\n\r\n                  </div>\r\n                  <div> {/* Filter */}\r\n                    <h3>filter</h3>\r\n                    <CounterAllIn settings={[1, 5, updatePlanByGivenTargetNumberOfReps, maxRepsHere, '', 'reps', 0, 1000]} />\r\n                    <p>Display only plans appropriate for people who can do __ pushups as maximum.</p>\r\n                    <button onClick={updateFilterClicked}>Filter</button>\r\n                  </div>\r\n                </div>\r\n                <div>{/* Sort */}\r\n                  <h3>Sort</h3>\r\n                  {/* <p>Sort by...</p>\r\n                  <p>number of pushups to be able to do</p>\r\n                  <p>number of training days</p>\r\n\r\n                  <p>recommended by users</p>\r\n                  <p>by results of other users</p> */}\r\n                </div>\r\n                {/* <h3>Apply changes</h3>\r\n                <p>search by name. SEARCH</p> */}\r\n              </SCard>\r\n            </Accordion.Collapse>\r\n          </Card>\r\n        </Accordion>\r\n\r\n        {/* Public plans list */}\r\n        <Accordion className='p-1' style={{ margin: '0', background: 'none', border: 'none' }} defaultActiveKey={-1}>\r\n          {/* <Accordion className='p-1' style={{ margin: '0', background: 'orange', border: 'none' }}> */}\r\n\r\n          {publicPlans.map((plan, index) => <PublicPlanToList key={index} plan={plan} index={index} viewSetting={user.settings.plans.public.listView} />)}\r\n        </Accordion>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default PublicPlans;","import React, { useContext, useEffect, useState } from 'react';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../functions/postJsonData';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\n// import PushUpsContextState from './state/PushUpsContextState'\r\n\r\nimport TrainingPlanOverview from './TrainingPlanOverview'\r\nimport PersonalPushupPlans from './PersonalPushupPlans';\r\nimport PublicPlans from './pushupPlans/publicPlans/PublicPlans';\r\n// import { Link, Route, Switch, HashRouter } from 'react-router-dom';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\n\r\n\r\nconst PushUpPlans = () => {\r\n  let pushupContext = useContext(PushUpsContext);\r\n  const [currentPlanName, setCurrentPlanName] = useState(null);\r\n  const [viewPersonalPlans, setViewPersonalPlans] = useState(false);\r\n  // let ready=true;\r\n  // let ready;\r\n\r\n  //display user's current plan name: (get plan's name and display it and cancel button)\r\n  // useEffect(() => {\r\n  //   setCurrentPlanName((pushupContext.user && pushupContext.user.pushupPlans.current) ? pushupContext.user.pushupPlans.current.name : null);\r\n  // }, [pushupContext]);\r\n\r\n\r\n\r\n  const finishCurrentTrainingPlan = async () => {\r\n    //assuming user and his current plan exists\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/endPlan', {});\r\n    pushupContext.updateUser(updatedUser);\r\n\r\n\r\n  }\r\n  console.log(\" PLANS running\");\r\n  return (\r\n    <div id='plansViewID' style={{ backgroundColor: 'lightBlue' }}>\r\n      {/* <Link to='/pushups'>Return</Link> */}\r\n\r\n      <div style={{ position: 'relative' }} >\r\n        <h2 style={{ textAlign: 'center' }}> {viewPersonalPlans ? 'My Plans' : 'Plans'}</h2>\r\n\r\n        <p style={{ color: 'gray', fontSize: '0.7rem', textAlign: 'center' }}>All plans are 14 days long.</p>\r\n        <button style={{ display: 'block', borderRadius: '10px 0 10px 0', fontSize: '1.3rem', padding: '0.3rem', margin: '10px 5px 10px auto' }} onClick={() => setViewPersonalPlans(previousState => !previousState)}>\r\n          {viewPersonalPlans ? 'Return' : 'My plans'}\r\n        </button>\r\n      </div>\r\n\r\n      {viewPersonalPlans ? <PersonalPushupPlans /> : <PublicPlans />}\r\n\r\n\r\n      {/* {(currentPlanName !== null && currentPlanName !== undefined) ?\r\n        (<div style={{\r\n          // display: 'flex', justifyContent: 'space-between',\r\n          backgroundColor: '#cbcbb8', padding: '5px 10px'\r\n        }}>\r\n          <p>You are currently commited to plan called:</p>\r\n          <p style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>\"{currentPlanName}\".</p>\r\n          <button onClick={finishCurrentTrainingPlan}>End/Archive my current training plan</button>\r\n        </div>)\r\n        : null} */}\r\n\r\n      {/* <Tabs style={{backgroundColor:'pink'}}> */}\r\n\r\n      {/* <Tabs style={{marginTop:'10px'}}>\r\n        <TabList style={{display:'flex',justifyContent:'space-around',borderBottom:'0px solid black', backgroundColor:'white', marginBottom:'0'}}>\r\n          <Tab style={{textAlign:'center',position:'relative',top:'0px', backgroundColor:'#add8e6',width:'40%',border:'none', borderRadius:'10px 10px 0 0'}}>Public Plans</Tab>\r\n          <Tab style={{textAlign:'center',position:'relative',top:'0px', backgroundColor:'yellow',width:'40%',border:'none', borderRadius:'10px 10px 0 0'}}>My Plans</Tab>\r\n        </TabList>\r\n        <TabPanel style={{backgroundColor:'pink'}}>\r\n          <PublicPlans />\r\n        </TabPanel>\r\n        <TabPanel style={{backgroundColor:'purple'}}>\r\n          <PersonalPushupPlans />\r\n        </TabPanel>\r\n      </Tabs> */}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      {/* <PublicPlans /> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PushUpPlans;","import React from 'react';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\n\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n// import { returnPersonalPlanFromPlanID } from '../functions/basics';\r\n\r\nconst InitialAssessment = ({ history }) => {\r\n  const { user, updateUser } = React.useContext(PushUpsContext);\r\n  const [assNotDoneOrDoneLateOrOk, SETassNotDoneOrDoneLateOrOk] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    const getLastAssessmentInfo = () => {\r\n      if (user.assessments) {\r\n        const { date, reps, notes } = user.assessments[0];\r\n        const differenceInDays = (dateNewerNormal, dateOlderSpecialFromMongoose) => {\r\n          const dateOlder = new Date(dateOlderSpecialFromMongoose);\r\n          var Difference_In_Time = dateNewerNormal.getTime() - dateOlder.getTime();\r\n          var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\r\n          return Difference_In_Days;\r\n        }\r\n        let daysInPast = differenceInDays(new Date(), date);\r\n        daysInPast = Math.round(daysInPast);\r\n        SETassNotDoneOrDoneLateOrOk({ daysInPast, reps, notes })\r\n      } else {\r\n        SETassNotDoneOrDoneLateOrOk(null);\r\n        //dont even show this option\r\n        // setsstate();\r\n\r\n      }\r\n    }\r\n    getLastAssessmentInfo();\r\n  }\r\n    //activate on every re-render if empty\r\n    //, []   ///now runs on every rerender, with [] runs only on first\r\n    , [user.assessments]   ///to prevent warning message - rerender also if this changes\r\n  )\r\n\r\n\r\n  const useThisAssessmentAsInitial = async () => {\r\n    console.log(\"click cc\");\r\n\r\n    //populate schedule with dates\r\n    let currentScheduleToUpdate = user.pushupPlans.current.schedule;\r\n    let timeNowInMs = new Date().getTime();\r\n    for (let i = 0; i < currentScheduleToUpdate.length; i++){\r\n      currentScheduleToUpdate[i].dueDate = new Date(timeNowInMs + 24 * 60 * 60 * 1000 * i); //i adds 1 day extra starting with nothing for today\r\n      currentScheduleToUpdate[i].dueDate = currentScheduleToUpdate[i].dueDate.toString();\r\n      \r\n    }\r\n    console.log(\"updated schedule: \", currentScheduleToUpdate);\r\n\r\n\r\n    const updatedUser = await postJsonDataUrlAfterAPIpushups('/setCoreAssessment', { type: 'initial',updateCurrentSchedule:true,currentScheduleToUpdate }); //and final as other option\r\n    console.log(\"max reps user update to: \", updatedUser);\r\n    updateUser({ ...updatedUser });\r\n\r\n    // history.push('/pushups/startMyTraining');\r\n    // history.push('/pushups');\r\n    //update in db: \r\n    //  user - this plan - assess initial - done\r\n    //  aseess - update the one with this ID\r\n    //   update also assesss history track in user current plan? NO\r\n\r\n  }\r\n\r\n  // <Route exact path='/pushups/maxRepsTest' component={MaxRepsTest} />\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h3>Initial assessment</h3>\r\n      <p>On the beginning and end of each Plan, we need to assess, what is your current max.</p>\r\n\r\n      <div style={{ backgroundColor: 'red' }}>\r\n        {!assNotDoneOrDoneLateOrOk ? <p>You didn't do any ass yet... Do it now - In main menu select \"Test your max reps\" and then come back here</p> :\r\n          assNotDoneOrDoneLateOrOk.daysInPast > 8 ? <p>it is too old ({assNotDoneOrDoneLateOrOk.daysInPast} days). Test yourself now - In main menu select \"Test Your Max Reps\" </p>\r\n            : <p>You did {assNotDoneOrDoneLateOrOk.reps} reps {assNotDoneOrDoneLateOrOk.daysInPast} days ago. {assNotDoneOrDoneLateOrOk.notes.length > 0 && <span><br></br>You also made following notes:<br></br>{assNotDoneOrDoneLateOrOk.notes}</span>}\r\n              <br></br> If you want to use this data as your initial assessment, click <button onClick={useThisAssessmentAsInitial}>Use This Data and Start the Training</button>, otherwise check your current \"max\" now - In main menu select \"Test your max reps\"</p>}\r\n      </div>\r\n      <p>once YES is clicked, training will </p>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(InitialAssessment);","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\n\r\nconst UsabilityIssues = ({ data,history }) => {\r\n  // {data.schedule.usability, data.schedule.usabilityOld, data.daysLateToday} - used by re-schedule\r\n  let { user, updateUser } = React.useContext(pushupsContext);\r\n  // let [stuffToUpdateOnDB, setStuffToUpdateOnDB] = React.useState({ data.fianl });\r\n\r\n  const [readAgain, setReadAgain] = React.useState(null);\r\n\r\n  console.log(\"D A T A: \", data);\r\n\r\n  // React.useEffect(() => {\r\n  //   if (user) {\r\n  //     // setStuffToUpdateOnDB({ usability: data.schedule.usability, updatedSchedule });//needs to be in the ReactEffect or sth, otherwise it would keep re-rendering\r\n  //   }\r\n  // }, [user]);\r\n\r\n  const continueToTraining = async () => {\r\n    console.log(\"continue\");\r\n\r\n    const updatedUser = await postJsonDataUrlAfterAPIpushups('/reschedule', {\r\n      usability: data.finalUsabilityForDB,\r\n      updatedSchedule: data.schedule ? data.schedule.updatedSchedule : undefined,\r\n      updateScheduleDayToDoFrom0OrUndefined: data.lastTraining ? data.lastTraining.updatedScheduleDayToDoFrom0 : undefined,\r\n      potentialUnfinishedTrainingAccounted: true\r\n    }); //and final as other option\r\n    // console.log(\"updatedUser-rescheduled\", updatedUser);\r\n    updateUser({ ...updatedUser });\r\n    history.push('/pushups/runMyTraining');\r\n\r\n    //update user on DB then here\r\n\r\n    //load training\r\n\r\n\r\n\r\n  }\r\n\r\n  if (!user) return <p>loading...</p>\r\n\r\n  return (\r\n    <div>\r\n      {/* usability - intro */}\r\n      <h1>Updating data \"usability\"...</h1>\r\n\r\n\r\n      <p>Every time you miss or don't finish a training, the ability to measure how effective this push-up plan is goes down. </p>\r\n\r\n      <p>Until now effect of the pushup plan on your improvement was possible to measure with cca\r\n      <span style={{ fontSize: '2rem' }}>{data.usabilityOriginal.rating}%</span>accuracy. </p>\r\n\r\n\r\n\r\n      {data.schedule && <div>\r\n        {/* schedule issue info */}\r\n        <h2>Schedule issue</h2>\r\n        <p>You are {data.schedule.daysLateToday} day{data.schedule.daysLateToday > 1 && 's'} late with your training.</p>\r\n        <p>Usability rating will be changed to <span style={{ fontSize: '2rem' }}>{data.schedule.usability.rating}%</span> .</p>\r\n\r\n        {/* schedule update*/}\r\n        <h5>Updating schedule</h5>\r\n        <p>The training you missed will be rescheduled for today and started now. Future trainings will be rescheduled accordingly.</p>\r\n      </div>}\r\n\r\n      {data.lastTraining && <div>\r\n        <h2>Issue: Unfinished Training (-10%)</h2>\r\n        <p>As you didn't finish (all the sets of) the previous training, \"usability\" will be lowered by 10%.</p>\r\n      </div>}\r\n\r\n\r\n      {/* info end  */}\r\n      <h2>Summary</h2>\r\n      <h6>New \"usability\" of your data will be <span style={{ fontSize: '2rem' }}>{data.finalUsabilityForDB.rating}%</span>.</h6>\r\n      <h6>({data.finalUsabilityForDB.daysOffSchedule} day{data.finalUsabilityForDB.daysOffSchedule != 1 && 's'} off the schedule changes and {data.finalUsabilityForDB.unfinishedTrainings} unfinished training{data.finalUsabilityForDB.unfinishedTrainings != 1 && 's'}. )</h6>\r\n\r\n      <p>If you are under 50%, you may consider committing to a new plan.</p>\r\n      <p>If you can stick to the plan schedule and get 100%, that would be impressive!</p>\r\n\r\n      {readAgain === null ? null : <h2>Read again.</h2>}\r\n      <button style={{ margin: '20px' }} onClick={continueToTraining}>Understood</button>\r\n      <button style={{margin:'20px'}}  onClick={() => setReadAgain(true)}>Not Understood</button>\r\n      \r\n\r\n\r\n\r\n      {/* check now day/training: */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(UsabilityIssues);","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport InitialAssessment from '../assessment/InitialAssessment';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { returnNumberOfDaysMissingCurrentSchedulleOrUndefined } from '../Home';\r\nimport UsabilityIssues from './UsabilityIssues';\r\nimport { returnTrueIfDatesHaveTheSameDay } from '../functions/basics';\r\n\r\n\r\n\r\n// import PushupsContext from '../state/PushUpsContextState'\r\n\r\nconst PrepareTraining2 = ({ history }) => {\r\n  let context = React.useContext(pushupsContext);\r\n  let { user } = context;\r\n  const [reschedulingInfo, setReschedulingInfo] = React.useState(null);\r\n  const [usabilityIssues, setUsabilityIssues] = React.useState({ checks: { scheduleChecked: false, lastTrainingChecked: false, lastTrainingCheckedPREP: false } });\r\n  let c0 = usabilityIssues.checks.lastTrainingCheckedPREP;\r\n  let cA = usabilityIssues.checks.scheduleChecked;\r\n  let cB = usabilityIssues.checks.lastTrainingChecked;\r\n  console.log(\"prepareTraining-2-Runing\",c0,cA,cB, usabilityIssues);\r\n\r\n  React.useEffect(() => {\r\n    //reset usabilityIssues any time user updates\r\n    // setUsabilityIssues({ checks: { scheduleChecked: false, lastTrainingChecked: false, lastTrainingCheckedPREP: false } });\r\n    // console.log(\"prepareTraining-2-Runing-userEffectAcivated\", usabilityIssues);\r\n\r\n\r\n    // console.log(\"USER EFFECT in training prep\");\r\n    if (context.user && context.user.pushupPlans.current && context.user.pushupPlans.current.assessments.initialAssessmentID) {\r\n      let { user, updateUser } = context;\r\n      let scheduleDayNumberFrom0 = user.pushupPlans.current.scheduleDayToDoFrom0;\r\n\r\n      /////ALL in summary: \r\n      //1.if last training from previous day existed, update scheduledaytodo first\r\n      //2. check that day to do against the schedule.if sch\r\n\r\n      //COULD BE DELETED AS SHOULD NEVER RUNmini bug important bug fix - update schedule number if last training was not finished (shall be done in unfinished training section but needs to be done before the schedule!)\r\n      //but just needed to create lastTraining object to identify of ot was unfinished training\r\n      if (usabilityIssues.checks.lastTrainingCheckedPREP === false) {\r\n        console.log(\"mini bug-fix running1\");\r\n\r\n        //check if last training finished\r\n        let dateToday = new Date();\r\n        let dateOfLastTrainingAsStringOrNull = user.pushupPlans.current.trainingHistory ? (user.pushupPlans.current.trainingHistory.length > 0 ? user.pushupPlans.current.trainingHistory[0].date : null) : null;\r\n        if (dateOfLastTrainingAsStringOrNull !== null) {//=if previous training exists\r\n          let datesAreTheSame = returnTrueIfDatesHaveTheSameDay(dateToday, dateOfLastTrainingAsStringOrNull);\r\n          if (!datesAreTheSame\r\n            && user.pushupPlans.current.trainingHistory[0].completed !== true\r\n          && !user.pushupPlans.current.trainingHistory[0].potentialUnfinishedTrainingAccounted) {\r\n            /////uncompleted->  update schedule day to do\r\n            console.log(\"mini bug-fix running2\");\r\n            usabilityIssues.lastTraining = { updatedScheduleDayToDoFrom0: scheduleDayNumberFrom0 }; //for DB in next component\r\n            usabilityIssues.lastTraining.completed = false;\r\n            if (user.pushupPlans.current.trainingHistory[0].scheduleDayUpdated !== true)scheduleDayNumberFrom0++; //for schedule here\r\n          }\r\n        }\r\n      }\r\n\r\n      //check if training is (over)due:\r\n      const dueDateIsAheadThisMuch = returnNumberOfDaysMissingCurrentSchedulleOrUndefined(user);\r\n\r\n      //schedule check Once:\r\n      if (usabilityIssues.checks.scheduleChecked === false) {\r\n        ////////update usability locally\r\n        let usability = user.pushupPlans.current.usability;\r\n        //create if doesn't exist (on older plans/can be removed with time)\r\n        if (usability === undefined) {\r\n          console.log(\"Creating 'USABILITY' property as this user didn't have one yet\");\r\n          usability = {\r\n            daysOffSchedule: 0,\r\n            unfinishedTrainings: 0,\r\n            rating: 100\r\n          }\r\n        }\r\n\r\n        // user.pushupPlans.current.usability = usability;\r\n        //update usability\r\n        let usabilityOld = { ...usability };\r\n        // usabilityIssues.usabilityOriginal = usability;\r\n        usabilityIssues.usabilityOriginal = usabilityOld;\r\n        //schedule\r\n        if (dueDateIsAheadThisMuch < 0) {//=user is late, change validity and reschedule trainings\r\n          console.log(\"dueDateIsAheadThisMuch: \", dueDateIsAheadThisMuch);\r\n\r\n\r\n          usability.daysOffSchedule = usability.daysOffSchedule + (dueDateIsAheadThisMuch * (-1));\r\n          usability.rating = 100 - (usability.daysOffSchedule + usability.unfinishedTrainings) * 10;\r\n          // console.log(usability);\r\n\r\n          //inform user (and update DB from there)\r\n          // setUsabilityIssues({ schedule: { usability, usabilityOld, daysLateToday: -dueDateIsAheadThisMuch } });\r\n          usabilityIssues.schedule = { usability, usabilityOld, daysLateToday: -dueDateIsAheadThisMuch };\r\n          usabilityIssues.finalUsabilityForDB = usabilityIssues.schedule.usability;\r\n          // console.log(\"USA5:\", usabilityIssues.finalUsabilityForDB);\r\n\r\n\r\n          ///////reschedule\r\n          let updatedSchedule = user.pushupPlans.current.schedule;\r\n          // let scheduleDayNumberFrom0 = user.pushupPlans.current.scheduleDayToDoFrom0;\r\n          // let scheduleDayNumberFrom0 = 4;\r\n          // console.log(\"scheduleDayNumberFrom0: \", scheduleDayNumberFrom0);\r\n          //populate schedule starting with current day with new dates\r\n          let timeNowInMs = new Date().getTime();\r\n          let counter = 0;\r\n          for (let i = scheduleDayNumberFrom0; i < updatedSchedule.length; i++) {\r\n            updatedSchedule[i].dueDate = new Date(timeNowInMs + 24 * 60 * 60 * 1000 * counter); //i adds 1 day extra starting with nothing for today\r\n            counter++;\r\n          }\r\n          usabilityIssues.schedule.updatedSchedule = updatedSchedule;\r\n        };\r\n        usabilityIssues.checks.scheduleChecked = true;\r\n      }\r\n\r\n      //training finished check once (if not checked in the past (earlier this day) already)\r\n      if (usabilityIssues.checks.lastTrainingChecked === false)       {\r\n        //check if last training finished\r\n        let dateToday = new Date();\r\n        let dateOfLastTrainingAsStringOrNull = user.pushupPlans.current.trainingHistory ? (user.pushupPlans.current.trainingHistory.length > 0 ? user.pushupPlans.current.trainingHistory[0].date : null) : null;\r\n        if (dateOfLastTrainingAsStringOrNull !== null) {//=if previous training exists\r\n          let datesAreTheSame = returnTrueIfDatesHaveTheSameDay(dateToday, dateOfLastTrainingAsStringOrNull);\r\n          if (!datesAreTheSame\r\n            && user.pushupPlans.current.trainingHistory[0].completed !== true\r\n            && !user.pushupPlans.current.trainingHistory[0].potentialUnfinishedTrainingAccounted\r\n          ) {\r\n            /////uncompleted->  update usability + info\r\n\r\n            console.log(\"...usabilityIssues.usabilityOriginal: \", usabilityIssues.usabilityOriginal);\r\n            //update validity\r\n            usabilityIssues.lastTraining.usabilityNewest = usabilityIssues.schedule ? JSON.parse(JSON.stringify(usabilityIssues.schedule.usability)) : JSON.parse(JSON.stringify(usabilityIssues.usabilityOriginal))\r\n            usabilityIssues.lastTraining.usabilityNewest.unfinishedTrainings = usabilityIssues.lastTraining.usabilityNewest.unfinishedTrainings + 1;\r\n            usabilityIssues.lastTraining.usabilityNewest.rating = usabilityIssues.lastTraining.usabilityNewest.rating - 10;\r\n            usabilityIssues.finalUsabilityForDB = usabilityIssues.lastTraining.usabilityNewest;\r\n            // console.log(\"USA10:\", usabilityIssues.finalUsabilityForDB);\r\n          }\r\n        }\r\n        usabilityIssues.checks.lastTrainingChecked = true;\r\n      }\r\n\r\n\r\n\r\n      setUsabilityIssues({ ...usabilityIssues });\r\n\r\n      //=if issue(s) found...\r\n      // console.log(\"UUUUUU usabilityIssues :\", usabilityIssues);\r\n      if (usabilityIssues.schedule || usabilityIssues.lastTraining) {\r\n        // setReschedulingInfo({usability,usabilityOld,daysLateToday:-dueDateIsAheadThisMuch});\r\n        setReschedulingInfo({ ...usabilityIssues });\r\n\r\n      } else { //=no issue found...\r\n        console.log(\"OK OK OK OK  :\", usabilityIssues);\r\n\r\n        history.push('/pushups/runMyTraining');\r\n      }\r\n    }\r\n  }, [user])\r\n\r\n\r\n  return (\r\n    <div>\r\n      {/* <h1>Training xx</h1> */}\r\n      {!context.user ? <p>you are guest. Login first(??)</p> :\r\n        !context.user.pushupPlans.current ? <p>select a plan first.</p> :\r\n          !context.user.pushupPlans.current.assessments.initialAssessmentID ? <InitialAssessment />\r\n            : reschedulingInfo !== null ? <UsabilityIssues data={reschedulingInfo} /> : <p>Loading...</p>\r\n      }\r\n    </div>\r\n    // : reschedulingInfo !== null ? <UsabilityIssues usability={reschedulingInfo.usability} usabilityOld={reschedulingInfo.usabilityOld} days={reschedulingInfo.daysLateToday} /> : <p>Loading...</p>\r\n  );\r\n};\r\n\r\nexport default withRouter(PrepareTraining2);","import React from 'react';\r\n// import PushUpsContext from './state/PushUpsContextState';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nimport { urlRoot } from '../../../globalState/globalVariables';\r\nimport postJsonData from '../../../functions/postJsonData'\r\n// import handleNewUserSubmit from './functions/handleNewUserSubmit';\r\n\r\n// import styled from 'styled-components'\r\n// const Sdiv = styled.div`\r\n//  background:orange;\r\n//  background:rgba(255, 166, 0, 0.452);\r\n//   padding:5px 10px;\r\n//   border: orange solid 2px;\r\n//  `\r\n\r\nconst AssessmentForm = ({ history }) => {\r\n  const [submitted, setSubmitted] = React.useState(false);\r\n  // const [user, setUser] = useState();\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n\r\n  console.log(\"CCC\", pushupContext);\r\n\r\n  const handleNewAssessmentSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // console.log(\"PP context:\", pushupContext);\r\n    const userInfoForServer = {\r\n\r\n      reps: e.target.assessmentReps.value,\r\n      notes: e.target.assessmentNotes.value,\r\n      // partOfPlan:\r\n    }\r\n\r\n    const apiUrl = `${urlRoot}/pushups/saveNewAssessment`;\r\n    try {\r\n      const updatedUser = await postJsonData(apiUrl, userInfoForServer);\r\n      pushupContext.updateUser(updatedUser);\r\n      console.log(\"server's response to PostJsonData: (updating context now)\", updatedUser);\r\n      setSubmitted(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      history.push('/pushups');\r\n      setSubmitted(false);\r\n    } catch (err) { console.log(err) };\r\n  };\r\n\r\n\r\n  return (\r\n    // <div style={{ border: '2px solid orange' }}>\r\n    <div>\r\n      <h3> Results</h3>\r\n      <form onSubmit={handleNewAssessmentSubmit}>\r\n        <p>Reps:</p>\r\n        <input id='assessmentReps'></input>\r\n        <p>Notes (changes in assessment execution):</p>\r\n        {/* <input id=\"password\" type='password'></input> */}\r\n        <textarea id=\"assessmentNotes\"></textarea>\r\n        {/* <input type='textarea' id=\"assessmentNotes\"></input> */}\r\n        <button id=\"submitAssessmentForm\" type='submit'>Submit</button>\r\n        {submitted&& <span id='confirmNewRepsSubmitSuccess'>Submitted.  Well done.</span>}\r\n        {/* <p id='signUpResult'></p> */}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(AssessmentForm);\r\n","import React from 'react';\r\nimport AssessmentForm from './AssessmentForm';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nconst MaxRepsTest = ({history}) => {\r\n  return (\r\n    <div>\r\n      <h2>Test Your Max Reps</h2>\r\n      <p>Do as many push-ups as you can.</p>\r\n      <div style={{ backgroundColor: 'lightgray' }}>\r\n        <h3>Rules - important!</h3>\r\n        <ul>\r\n          <li>Be FRESH: If you did any arm/chest workout today, do this test tomorrow or day after tomorrow.</li>\r\n          <br />\r\n          <li>Keep the PALMS \"shoulder-width\" apart, little bit wider and closer to hips - not parallel with shoulders.</li>\r\n          <li>ELBOWS/arms should make 45 degrees angle with the torso of your body each time you go down.</li>\r\n          <li>use FULL RANGE of the movement: Chest has to touch floor each time and elbows have to be locked each time.</li>\r\n          <li>KEEP MOVING: Once you start, you can't stop moving. How fast you do the reps, is up to you, you can also change the pace throughout, but you can't stop to rest, even in push-up position, even for 1 second. Once you can't move anymore, stop. </li>\r\n          <br />\r\n          <li>take NOTES: If you do any changes to the way you will assess yourself, note it down. Next time you will be assessing yourself, use the same style. (Different styles lead to different rep results and therefore it would be impossible to know, if you actually improved thank to the training, or not.) It is important to try to keep assessment conditions and consistent as possible, for assessment to be valid. </li>\r\n        </ul>\r\n      </div>\r\n      <button onClick={()=>history.push('/pushups/paceMaker')}>Use Pace Tracker</button>\r\n      <AssessmentForm />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(MaxRepsTest);","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip, Legend, LabelList, ResponsiveContainer, Label } from 'recharts';\r\n\r\nexport const SPTiny = styled.p`\r\nmargin:0;\r\n`\r\nconst LastTraining = ({ data, viewType }) => {\r\n  const [repsSum, setRepsSum] = React.useState(-1);\r\n  const [timeInMinutes, setTimeInMinutes] = React.useState(-1);\r\n  const calculateRepsSum = () => {\r\n    let repsSumCalc;\r\n    if (repsSum === -1) {\r\n      repsSumCalc = data.sets.reduce((acc, set) => acc + set.reps\r\n        , 0);\r\n      setRepsSum(repsSumCalc);\r\n    }\r\n  }\r\n\r\n  const calcTrainingTime = () => {\r\n    function differenceInMinutes(dt2, dt1) {\r\n      var diff = (dt2.getTime() - dt1.getTime()) / 1000;\r\n      diff /= 60;\r\n      return Math.abs(Math.round(diff));\r\n    }\r\n    if (timeInMinutes === -1) {\r\n      if (data.sets.length === 0) { setTimeInMinutes(0); return; };\r\n      // console.log(\"DATA:\",data);\r\n      // console.log(\"DATAd:\",data.date);\r\n      let td = differenceInMinutes(new Date(data.date), new Date(data.sets[0].date));\r\n      setTimeInMinutes(td);\r\n    }\r\n  }\r\n\r\n  const getSimpleDateIfTrueAlsoTime = (withTime) => {\r\n    var d = new Date(data.date);\r\n    var date = d.getDate();\r\n    var month = d.getMonth() + 1; // Since getMonth() returns month from 0-11 not 1-12\r\n    var year = d.getFullYear();\r\n    var dateStr = date + \"/\" + month + \"/\" + year;\r\n    var dateWithTimeStr = dateStr + '  ' + d.getHours() + ':' + d.getMinutes();\r\n    return withTime ? dateWithTimeStr : dateStr;\r\n  }\r\n\r\n  React.useEffect(() => {\r\n\r\n  }, [])\r\n\r\n  const getTrainingDataToChart = (tr) => {\r\n    let sets = tr.sets;\r\n    let dataForChart = [];\r\n    let setsNr = sets.length;\r\n    for (let i = setsNr - 1; i >= 0; i--) {\r\n      let set = sets[i];\r\n      let setInfo = {\r\n        setNumber: `set ${setsNr - i}`,\r\n        reps: set.reps,\r\n        repsNotes: set.repsNotes,\r\n        // breakDuration: set.breakDuration,\r\n        breakDuration: i === 0 ? 0 : 5,\r\n        breakDurationS: set.breakDuration ? set.breakDuration + ' s.' : null,\r\n      };\r\n      // let breakInfo = { key: 'break', data: set.breakDuration ? set.breakDuration : 0 };\r\n      dataForChart.push(setInfo);\r\n    }\r\n    // console.log(\"dataForChart3: \", dataForChart);\r\n    return dataForChart;\r\n  }\r\n\r\n\r\n\r\n\r\n  calculateRepsSum();\r\n  calcTrainingTime();\r\n\r\n  if (viewType === 'currentPlanView') {\r\n    return (\r\n      <p>\r\n        <span>{getSimpleDateIfTrueAlsoTime()}: {repsSum} reps</span>\r\n      </p>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: 'lightBlue' }} className='historyElementContainer'>\r\n      <h2 style={{ display: 'flex' }}>Last Training:</h2>\r\n      <p>{getSimpleDateIfTrueAlsoTime(true)}</p>\r\n\r\n      <div style={{}}>\r\n        <SPTiny style={{ textAlign: 'center' }}>{repsSum} reps done in {timeInMinutes} munites.</SPTiny>\r\n        <ResponsiveContainer height={200} width=\"95%\" >\r\n          {/* <BarChart width={350} height={350} margin={{ top: 25 }} data={getTrainingDataToChart(data)}> */}\r\n          <BarChart margin={{ top: 25, left: 15 }} data={getTrainingDataToChart(data)}>\r\n            {/* <CartesianGrid strokeDasharray=\"3 3\" /> */}\r\n            <XAxis dataKey=\"setNumber\" />\r\n            <YAxis >\r\n              <Label value=\"Reps\" angle={-90} position='insideLeft' />\r\n            </YAxis>\r\n            <Tooltip />\r\n            {/* <Legend verticalAlign=\"top\" height={56} /> */}\r\n            {/* <Legend/> */}\r\n            <Bar dataKey=\"reps\" fill=\"#8884d8\" >\r\n              <LabelList dataKey=\"reps\" position=\"top\" />\r\n            </Bar>\r\n            <Bar dataKey=\"breakDuration\" fill=\"#bfbfbfa1\" >\r\n              <LabelList dataKey=\"breakDurationS\" position=\"inside\" />\r\n            </Bar>\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n      {/* {data.sets.map((set, index) => <SPTiny key={index}>{index + 1}) {set.reps} reps {set.repsNotes && \"(\" + set.repsNotes + \")\"}</SPTiny>)} */}\r\n      <h5>Notes:</h5>\r\n      {data.sets.slice(0).reverse().map((set, index) => <SPTiny key={index}>Set {index + 1}: {set.repsNotes && \"(\" + set.repsNotes + \")\"}</SPTiny>)}\r\n      {/* <SPTiny>TOTAL: {repsSum} reps</SPTiny> */}\r\n      {/* <p>Training duration (in minutes): {timeInMinutes}</p> */}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LastTraining;","import React from 'react';\r\n\r\nconst UsabilityInfo = ({ usability }) => {\r\n  console.log(\"usability UUU: \", usability);\r\n  return (\r\n    // <div style={{backgroundColor:'gray'}}>\r\n    <div>\r\n      <h5>Data Usability</h5>\r\n      <p>Rating: {usability.rating}%</p>\r\n      <p>Days off the schedule: {usability.daysOffSchedule}</p>\r\n      <p>Unfinished Trainings: {usability.unfinishedTrainings}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsabilityInfo;","import React from 'react';\r\nimport LastTraining from './LastTraining';\r\n\r\nimport { BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip, Legend, LabelList, ResponsiveContainer, Label } from 'recharts';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { returnAnyPlanFromPlanID } from '../functions/basics';\r\nimport UsabilityInfo from './UsabilityInfo';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\n\r\n// const xAxisLabelMiro = \"Day of the month (training number)\";\r\n\r\n// const xAxisLabelMiro = () => {\r\n//   return (\r\n//     <text>\r\n//       test x\r\n//     </text>\r\n//   );\r\n// }\r\n\r\n\r\nexport const getSimpleDateIfTrueAlsoTime = (dateReceived, withTime = false, withYear = false,) => {\r\n  var d = new Date(dateReceived);\r\n  var date = d.getDate();\r\n  var month = d.getMonth() + 1; // Since getMonth() returns month from 0-11 not 1-12\r\n  var year = d.getFullYear();\r\n  var dateStr = date + \"/\" + month;\r\n  dateStr += withYear ? (\"/\" + year) : '';\r\n  var dateWithTimeStr = dateStr + '  ' + d.getHours() + ':' + d.getMinutes();\r\n  return withTime ? dateWithTimeStr : dateStr;\r\n}\r\n\r\nconst returnPersonalPlanFromPlanID = (personalPlans, planID) => {\r\n  // console.log(planID, personalPlans);\r\n  return personalPlans.find(plan => plan._id === planID)\r\n}\r\n\r\nconst returnPersonalPlanPositionFrom0FromPlanID = (personalPlans, planID) => {\r\n  // console.log(planID, personalPlans);\r\n  let index;\r\n  personalPlans.find((plan, i) => {\r\n    index = i;\r\n    return plan._id === planID\r\n  });\r\n  console.log(\"index: \", index);\r\n  return index;\r\n}\r\n\r\nconst TrainingsOfLatestPlan = ({\r\n  trainingSHistory,\r\n  currentPlanExecution,\r\n  assessments,\r\n  personalPushupPlans,\r\n  history\r\n}) => {\r\n\r\n  let { publicPlans } = React.useContext(PushUpsContext);\r\n\r\n  //get plan info\r\n  console.log(\"PPP:\"+currentPlanExecution.personal+'.');\r\n  let planInfo = returnAnyPlanFromPlanID(currentPlanExecution.planIDType, currentPlanExecution.personal, personalPushupPlans,publicPlans);\r\n  console.log(\"planInfo: \", planInfo);\r\n\r\n\r\n\r\n  //scroll to the end of the current plan chart, if it exists\r\n  const elementOfCurrentPlanHistory = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (elementOfCurrentPlanHistory.current) elementOfCurrentPlanHistory.current.scrollLeft += 2000;\r\n  }, [trainingSHistory]);\r\n\r\n  if (trainingSHistory === null) return null;\r\n\r\n\r\n  const getTrainingSDataToChart = (trainings) => {\r\n\r\n    const returnTotalReps = (training) => {\r\n      return training.sets.reduce((acc, set) => acc + set.reps, 0);\r\n    }\r\n    const returnTrainingTimeInMinutes = (training) => { //returns 0 if training has no sets in it\r\n      if (!training.sets || training.sets.length === 0) return 0;\r\n      function differenceInMinutes(dt2, dt1) {\r\n        var diff = (dt2.getTime() - dt1.getTime()) / 1000;\r\n        diff /= 60;\r\n        return Math.abs(Math.round(diff));\r\n      }\r\n      return differenceInMinutes(new Date(training.date), new Date(training.sets[0].date));\r\n    }\r\n\r\n    let dataForChart = [];\r\n    let numberOfTrainings = trainings.length;\r\n\r\n    //for each training...\r\n    for (let i = numberOfTrainings - 1; i >= 0; i--) {\r\n      let training = trainings[i];\r\n      let trainingInfoForChart = {\r\n        date2: getSimpleDateIfTrueAlsoTime(training.date, false),\r\n        date: new Date(training.date).getDate(),\r\n        trainingNumber: (training.trainingNumber ? '(' + training.trainingNumber + ')' : ''),\r\n        trainingName: 'Name?',\r\n        trainingNrAName: 'tr.Nr (Name)?',\r\n        trainingNotes: 'Notes?',\r\n        trainingDurationInMinutes: (returnTrainingTimeInMinutes(training) ? returnTrainingTimeInMinutes(training) + 'm' : ''),\r\n        repsInTotal: returnTotalReps(training) > 0 ? returnTotalReps(training) : null\r\n      };\r\n      dataForChart.push(trainingInfoForChart);\r\n    }\r\n    // console.log(\"dataForChart: \", dataForChart);\r\n    return dataForChart;\r\n\r\n\r\n  }\r\n\r\n  const returnAssessmentInfoFromAssID = (assessments, assID) => {\r\n    let wanted = assessments.find(ass => ass._id === assID);\r\n    return (wanted.reps + ' reps (' + getSimpleDateIfTrueAlsoTime(wanted.date, false, true) + ')');\r\n  }\r\n\r\n  const showAdjustThisPlan = () => {\r\n    const position = returnPersonalPlanPositionFrom0FromPlanID(personalPushupPlans.personal, currentPlanExecution.planIDType);\r\n    const plan = returnPersonalPlanFromPlanID(personalPushupPlans.personal, currentPlanExecution.planIDType);\r\n    history.push({\r\n      pathname: '/pushups/trainingPlans/adjustPersonal',\r\n      state: {\r\n        personalPlanPositionFrom0: position,\r\n        plan\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // console.log(\"trainingSHistory: \", trainingSHistory);\r\n  // console.log(\"currentPlanExecution: \", currentPlanExecution);\r\n  // console.log(\"___x1_\", personalPushupPlans.personal, currentPlanExecution.planIDType);\r\n  // console.log(\"___x2_\",returnPersonalPlanFromPlanID(personalPushupPlans.personal, currentPlanExecution.planIDType));\r\n  // console.log(\"___x3_\", returnPersonalPlanFromPlanID(personalPushupPlans.personal, currentPlanExecution.planIDType));\r\n\r\n\r\n  return (\r\n    <div\r\n      className='historyElementContainer'\r\n      style={{ backgroundColor: 'pink' }}\r\n    >\r\n      <h2>Current Plan History (Execution)</h2>\r\n      <h5>Name: {planInfo.name}</h5>\r\n      <h5>Initial assessment: {returnAssessmentInfoFromAssID(assessments, currentPlanExecution.assessments.initialAssessmentID)}</h5>\r\n      <h5>Trainings history:</h5>\r\n      {trainingSHistory.map((training, index) => <LastTraining key={index} data={training} viewType='currentPlanView' />)}\r\n\r\n\r\n      <div\r\n        style={{ display: 'flex', flexWrap: 'no-wrap', overflowX: 'auto' }}\r\n        ref={elementOfCurrentPlanHistory}\r\n      >\r\n        <ResponsiveContainer height={200} minWidth={trainingSHistory.length * 40} >\r\n          {/* <BarChart width={350} height={350} margin={{ top: 25 }} data={getTrainingDataToChart(data)}> */}\r\n          <BarChart margin={{ top: 25, left: 15, bottom: 35 }} data={getTrainingSDataToChart(trainingSHistory)}>\r\n            {/* <CartesianGrid strokeDasharray=\"3 3\" /> */}\r\n            {/* <XAxis dataKey={`${trainingNumber} (${trainingName})`} /> */}\r\n            <XAxis dataKey=\"date\" >\r\n              <Label value=\"Day of the month (training number)\" position='bottom' />\r\n              {/* <Label content={<xAxisLabelMiro />} position='bottom' /> */}\r\n            </XAxis>\r\n            <YAxis >\r\n              <Label value=\"Reps\" angle={-90} position='insideLeft' />\r\n            </YAxis>\r\n            <Tooltip />\r\n            {/* <Legend verticalAlign=\"top\" height={56} /> */}\r\n            {/* <Legend/> */}\r\n            <Bar dataKey=\"repsInTotal\" fill=\"#8884d8\" >\r\n              <LabelList dataKey=\"repsInTotal\" position=\"top\" />\r\n              {/* <LabelList dataKey=\"trainingNotes\" position=\"center\" /> */}\r\n              <LabelList dataKey=\"trainingNumber\" position=\"insideBottom\" />\r\n              <LabelList dataKey=\"trainingDurationInMinutes\" position=\"center\" />\r\n\r\n              {/* <LabelList dataKey=\"trainingName\" position=\"insideBottomRight\" /> */}\r\n              {/* <LabelList dataKey=\"reps\" position=\"insideTop\" /> */}\r\n            </Bar>\r\n            {/* <Bar dataKey=\"breakDuration\" fill=\"#bfbfbfa1\" >\r\n              <LabelList dataKey=\"breakDurationS\" position=\"inside\" />\r\n            </Bar> */}\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n      {/* <button onClick={showAdjustThisPlan}>View/Adjust plan</button>  */}\r\n      {/* %$£02 */}\r\n      <UsabilityInfo usability={currentPlanExecution.usability} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(TrainingsOfLatestPlan);","import React from 'react';\r\nimport { BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip, Legend, LabelList, ResponsiveContainer, Label, Cell } from 'recharts';\r\nimport { getSimpleDateIfTrueAlsoTime } from './CurrentPlan';\r\nimport { SPTiny } from './LastTraining';\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\nmargin: 0 5px 8px 5px;\r\n`\r\n\r\nconst getAssessmentsDataToChart = (assessments) => { //returns null if no assessments\r\n\r\n  if (assessments === null || assessments === undefined || assessments.length < 1) return null;\r\n\r\n  let dataForChart = [];\r\n  let numberOfAss = assessments.length;\r\n\r\n  //for each training...\r\n  for (let i = numberOfAss - 1; i >= 0; i--) {\r\n    let ass = assessments[i];\r\n    let assInfoForChart = {\r\n      date: {\r\n        dayMonth: getSimpleDateIfTrueAlsoTime(ass.date),\r\n        year: new Date(ass.date).getFullYear() + '',\r\n        full: getSimpleDateIfTrueAlsoTime(ass.date, true, true)\r\n      },\r\n      reps: ass.reps,\r\n      notes: ass.notes\r\n    };\r\n    dataForChart.push(assInfoForChart);\r\n  }\r\n  console.log(\"ASSdataForChart: \", dataForChart);\r\n  return dataForChart;\r\n}\r\n\r\n\r\nconst renderCustomizedLabel = (props) => {\r\n  const {\r\n    x, y, width, height, value,\r\n  } = props;\r\n  const radius = 20;\r\n\r\n  return (\r\n    <g>\r\n      {/* <circle cx={x + width / 2} cy={y - radius} r={radius} fill=\"#1184d8\" /> */}\r\n      {/* <text x={x + width / 2} y={y - radius} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\"> */}\r\n      <text x={x + width / 2} y={160} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\">\r\n        {/* {value.split(' ')[1]} */}\r\n        {value}\r\n      </text>\r\n      {/* <text x={x + width / 2} y={210} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\">\r\n        {value.dayMonth}\r\n      </text> */}\r\n    </g>\r\n  );\r\n};\r\nconst renderCustomizedLabel2 = (props) => {\r\n  const {\r\n    x, y, width, height, value,\r\n  } = props;\r\n  const radius = 20;\r\n\r\n  return (\r\n    <g>\r\n      {/* <circle cx={x + width / 2} cy={y - radius} r={radius} fill=\"#1184d8\" /> */}\r\n      {/* <text x={x + width / 2} y={y - radius} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\"> */}\r\n      <text x={x + width / 2} y={180} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\">\r\n        {/* {value.split(' ')[1]} */}\r\n        {value}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n\r\nconst CustomTooltip = ({ active, payload, label }) => {   //label == \"name\" property!!\r\n  if (active) {\r\n    console.log(\"payload:\", payload);\r\n    return (\r\n      <div style={{ backgroundColor: 'lightGray', padding: '10px', maxWidth: '200px' }}>\r\n        <SPTiny>{payload[0].payload.date.full}</SPTiny>\r\n        <SPTiny>{payload[0].payload.notes} </SPTiny>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nconst AssessmentsHistory = ({ assessments }) => {\r\n //scroll to the end of the current plan chart, if it exists\r\n const elementOfCurrentPlanHistory = React.useRef(null);\r\n React.useEffect(() => {\r\n   if (elementOfCurrentPlanHistory.current) elementOfCurrentPlanHistory.current.scrollLeft += 2000;\r\n }, [assessments]);\r\n\r\n  return (\r\n    <div\r\n      className='historyElementContainer'\r\n      style={{ backgroundColor: 'orange' }}\r\n    >\r\n      <h2>Assessments</h2>\r\n      {(assessments && assessments.length > 0) ?\r\n        <>\r\n          <div\r\n            style={{ display: 'flex', flexWrap: 'no-wrap', overflowX: 'auto' }}\r\n            ref={elementOfCurrentPlanHistory}\r\n          >\r\n            <ResponsiveContainer height={200} minWidth={assessments.length * 40} >\r\n              {/* <BarChart width={350} height={350} margin={{ top: 25 }} data={getTrainingDataToChart(data)}> */}\r\n              <BarChart margin={{ top: 25, left: 15, bottom: 55 }} data={getAssessmentsDataToChart(assessments)}>\r\n                {/* <CartesianGrid strokeDasharray=\"3 3\" /> */}\r\n                {/* <XAxis dataKey=\"date.dayMonth\" > */}\r\n                {/* <XAxis dataKey=\"\" > */}\r\n                {/* <XAxis > */}\r\n                {/* <Label value=\"date\" position='bottom' /> */}\r\n                {/* <LabelList dataKey=\"reps\" position=\"top\" content={renderCustomizedLabel}/> */}\r\n\r\n                {/* </XAxis> */}\r\n                <YAxis >\r\n                  <Label value=\"Reps\" angle={-90} position='insideLeft' />\r\n                </YAxis>\r\n                <Tooltip content={<CustomTooltip />} />\r\n                {/* <Legend verticalAlign=\"top\" height={56} /> */}\r\n                <Bar dataKey=\"reps\" fill=\"#8884d8\" >\r\n                  {/* <LabelList dataKey=\"reps\" position=\"top\" /> */}\r\n                  <LabelList dataKey=\"reps\" position=\"top\" />\r\n                  {/* <LabelList dataKey=\"reps\" position=\"top\" content={renderCustomizedLabel}/> */}\r\n                  {/* <LabelList dataKey=\"date\" position=\"bottom\" content={renderCustomizedLabel} /> */}\r\n                  <LabelList dataKey=\"date.dayMonth\" position=\"bottom\" content={renderCustomizedLabel} />\r\n                  <LabelList dataKey=\"date.year\" position=\"bottom\" content={renderCustomizedLabel2} />\r\n\r\n                  {\r\n                    assessments.map((entry, index) => (\r\n                      <Cell key={index} fill={assessments.length === index + 1 ? \"#ff0000\" : \"#8884d8\"} />\r\n                    ))\r\n                  }\r\n                  {/* <Cell key={index} stroke={assessments.length===index+1 ? \"#ff0000\":\"#000000\"} strokeWidth={assessments.length===index+1 ? 1 : 1} /> */}\r\n\r\n                </Bar>\r\n                {/* <Bar dataKey=\"breakDuration\" fill=\"#bfbfbfa1\" >\r\n              <LabelList dataKey=\"breakDurationS\" position=\"inside\" />\r\n            </Bar> */}\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n          <Accordion className='p-1' style={{ margin: '0px 10px 0px 20px', background: 'transparent' }}>\r\n            {/* <Card style={{background:'transparent', border:'none'}} > */}\r\n            <Card>\r\n              <Accordion.Toggle\r\n                as={Card.Header}\r\n                eventKey=\"1\"\r\n                className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n              // style={{background:'white',margin:'0px 60px 0px 60px'}}\r\n              >\r\n                Your Notes 🔽\r\n              </Accordion.Toggle>\r\n              <Accordion.Collapse eventKey=\"1\">\r\n                <SCard style={{ maxHeight: '100vh', overflowY: 'auto', backgroundColor: 'white' }}>\r\n                  {/* <p>(assuming reps needs to be logged, not time)</p> */}\r\n                  {assessments.map((ass, index) => {\r\n                    {/* return (<div key={index} style={{margin:'3px',backgroundColor:'lightGray', marginBottom:'10px'}}> */ }\r\n                    return (<div key={index}>\r\n                      <SPTiny >{getSimpleDateIfTrueAlsoTime(ass.date, true, true)}</SPTiny>\r\n                      <SPTiny style={{ paddingLeft: '10px' }}>{ass.notes && ass.notes}</SPTiny>\r\n                      {ass.notes && <br />}\r\n                    </div>)\r\n                  })}\r\n\r\n                </SCard>\r\n              </Accordion.Collapse>\r\n            </Card>\r\n          </Accordion>\r\n        </ >\r\n        : <p>No assessments done yet</p>}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AssessmentsHistory;","import React from 'react';\r\nimport LastTraining from './history/LastTraining';\r\nimport pushupsContext from './state/PushUpsContextState';\r\nimport CurrentPlan from './history/CurrentPlan';\r\nimport AssessmentsHistory from './history/AssessmentsHistory';\r\n\r\n\r\nconst returnPersonalPlanPointerFromPlanID = (user, planID) => {\r\n  let planLocationPointer = user.pushupPlans.personal.find(plan => plan._id === planID);\r\n  return planLocationPointer;\r\n}\r\n\r\nconst History = () => {\r\n\r\n  let context = React.useContext(pushupsContext);\r\n  React.useEffect(() => {\r\n    //sort refresh-user loading\r\n    // if (!context.user) { return } else setUserLoading(false);\r\n    if (!context.user) return;\r\n\r\n\r\n\r\n  }, [context]);\r\n\r\n  //render this if user doesn't exists\r\n  if (!context.user) { return (<p>login to see your training history</p>) }\r\n\r\n  return ( //all down here user exists - guaranteed\r\n    <div>\r\n      <h1>History of...</h1>\r\n  \r\n{/* last training */}\r\n      {(context.user.pushupPlans.current != null\r\n        && context.user.pushupPlans.current.trainingHistory.length != 0)\r\n        ? <LastTraining data={context.user.pushupPlans.current.trainingHistory[0]} />\r\n\r\n        : context.user.pushupPlans.history\r\n        && context.user.pushupPlans.history.length > 0\r\n        && context.user.pushupPlans.history[0].trainingHistory.length > 0\r\n        && <LastTraining data={context.user.pushupPlans.history[0].trainingHistory[0]} />\r\n      }\r\n\r\n      {/* current plan */}\r\n      {context.user.pushupPlans.current != null && //tested for null\r\n        <CurrentPlan\r\n          trainingSHistory={context.user.pushupPlans.current.trainingHistory.length > 0 ? context.user.pushupPlans.current.trainingHistory : null}\r\n          //assuming personal;not public pushup plan!!\r\n          currentPlanExecution={context.user.pushupPlans.current}\r\n          assessments={context.user.assessments}\r\n        personalPushupPlans={context.user.pushupPlans}\r\n        />\r\n      }\r\n\r\n      {/* assessments */}\r\n      <AssessmentsHistory assessments={context.user.assessments} />\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;","import React from 'react';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\n\r\nimport { urlRoot } from '../../globalState/globalVariables';\r\nimport postJsonData from '../../functions/postJsonData'\r\nimport { withRouter } from 'react-router-dom';\r\n// import handleNewUserSubmit from './functions/handleNewUserSubmit';\r\n\r\n// import styled from 'styled-components'\r\n// const Sdiv = styled.div`\r\n//  background:orange;\r\n//  background:rgba(255, 166, 0, 0.452);\r\n//   padding:5px 10px;\r\n//   border: orange solid 2px;\r\n//  `\r\n\r\nconst SignUp = ({history}) => {\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n\r\n  const handleNewUserSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const userInfoForServer = {\r\n      email: e.target.signUpEmail.value,\r\n      password: e.target.signUpPassword.value,\r\n      name: e.target.signUpUsername.value,\r\n    }\r\n    const apiUrl = `${urlRoot}/user/signup`;\r\n    const serverResponse = await postJsonData(apiUrl, userInfoForServer);\r\n    console.log(\"server returned:\", serverResponse);\r\n    document.querySelector('#signUpResult').innerHTML = \"RESULT: \" + serverResponse.message;\r\n    if (serverResponse.success) {\r\n      pushupContext.updateUser(serverResponse.data.newUser);\r\n\r\n      // console.log(\"RRRRR\", serverResponse.data.newUser);\r\n      history.push('/pushups');\r\n      \r\n      // console.log(\"updated pushup context: \", pushupContext);\r\n      // document.querySelector('#email').value = '';\r\n      // document.querySelector('#password').value = '';\r\n      // window.\r\n    };\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    // <div style={{ border: '2px solid orange' }}>\r\n    <div>\r\n      <h3> Sign up</h3>\r\n      <form onSubmit={handleNewUserSubmit}>\r\n        <p>email:</p>\r\n        <input id='signUpEmail'></input>\r\n        <p>password:</p>\r\n        {/* <input id=\"password\" type='password'></input> */}\r\n        <input id=\"signUpPassword\"></input>\r\n        <p>Username: (public)</p>\r\n        <input id=\"signUpUsername\"></input>\r\n\r\n        \r\n\r\n        <button id=\"submitSignUpForm\" type='submit'>Submit</button>\r\n        <p id='signUpResult'></p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(SignUp);\r\n","import React, {useContext } from 'react';\r\nimport PushUpsContextState from './state/PushUpsContextState'\r\n\r\nimport { urlRoot } from '../../globalState/globalVariables';\r\nimport postJsonData from '../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n// import handleNewUserSubmit from './functions/handleNewUserSubmit';\r\n\r\n\r\nconst LogIn = ({history}) => {\r\n  // const [user, setUser] = useState();\r\n  let userContext = useContext(PushUpsContextState); \r\n\r\n\r\n\r\n  const handleReturnedUserSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // console.log(\"clicked\")\r\n    const userInfoForServer = {\r\n      email: e.target.email2.value,\r\n      password: e.target.password2.value,\r\n\r\n    }\r\n    const apiUrl = `${urlRoot}/user/logInWithEmailAndPassword`;\r\n    const serverResponse = await postJsonData(apiUrl, userInfoForServer);\r\n    // console.log(\"server returned:\", serverResponse);\r\n\r\n    userContext.updateUser(serverResponse);\r\n    \r\n    // userContext.runReRender(1);\r\n\r\n    // userContext.updateUser({});\r\n    // console.log(\"user context updated:\", userContext);\r\n\r\n    //this if condition shouldn't be needed here, during re-render inner htm is not accessible!\r\n    if (document.querySelector('#LogInResult2')) document.querySelector('#LogInResult2').innerHTML = \"RESULT: \" + serverResponse.message;\r\n    \r\n    if (serverResponse.email) {\r\n      document.querySelector('#email2').value = '';\r\n      document.querySelector('#password2').value = '';\r\n      history.push('/pushups');\r\n    };\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h3> Log-in</h3>\r\n      <form onSubmit={handleReturnedUserSubmit}>\r\n        <p>email:</p>\r\n        <input type='email' id='email2' defaultValue='miroslav.makarov@gmail.com'></input>\r\n        <p>password:</p>\r\n        <input id=\"password2\" type='password'></input>\r\n        <button id=\"submitLogInWithEmailForm\" type='submit'>Submit</button>\r\n        <p id='LogInResult2'></p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(LogIn);\r\n","import React from 'react';\r\nimport SignUp from './SignUp'\r\nimport LogIn from './LogIn'\r\n\r\nimport { urlRoot, loginWithGoogleUrl, loginWithFacebookUrl,logoutFromGoogleUrl } from '../../globalState/globalVariables';\r\nimport postJsonData from '../../functions/postJsonData'\r\n\r\nimport { Accordion, Card } from 'react-bootstrap';\r\n// import Button from 'react-bootstrap/Button';\r\nimport styled from 'styled-components';\r\n\r\nimport Gicon from '../../images/google/Gicon.png';\r\nimport Ficon from '../../images/facebook/logoSmall.png';\r\n// const Sdiv = styled.div`\r\n//  /* background:orange; */\r\n//  background:rgba(255, 166, 0, 0.752);\r\n//   padding:5px 10px;\r\n//   border: orange solid 2px;\r\n//  `\r\n\r\n// const Gap = styled(SignUp)`\r\n// /* background:red; */\r\n// padding:30px !important;\r\n// background-color: red !important;\r\n// `\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\nmargin: 0 5px 8px 5px;\r\n`\r\n\r\nconst SignUpInOut = ({ setUser }) => {\r\n\r\n  const signInWithGoogleButtonClicked = async () => {\r\n    // const apiUrl = `${urlRoot}/authenticate/google`;\r\n    // // const apiUrl = `${urlRoot}/generalPushups/getPublicPlan_s`;\r\n    // const serverResponse = await postJsonData(apiUrl);\r\n\r\n    console.log(\"loginWithGoogleUrl: \", loginWithGoogleUrl);\r\n    window.location.replace(loginWithGoogleUrl);\r\n\r\n  }\r\n\r\n  // const signOutFromGoogleButtonClicked = () => {\r\n  //   console.log(\"logoutFromGoogleUrl: \", logoutFromGoogleUrl);\r\n  //   window.location.replace(logoutFromGoogleUrl);\r\n  //   // window.location.replace(\"http://localhost:3001/api/start\");\r\n  // }\r\n\r\n  const signInWithFacebookButtonClicked = () => {\r\n    console.log(\"loginWithFACEBOOKUrl clicked: \", loginWithFacebookUrl);\r\n    window.location.replace(loginWithFacebookUrl);\r\n    \r\n  }\r\n\r\n  return (\r\n    <div style={{ clear: 'left' }}>\r\n      {/* <Accordion as={SCAccordion} > */}\r\n\r\n      <div style={{ textAlign: 'center' }}>\r\n        <h5>You will be remembered on this device for automatic log-ins in the future. </h5><br /><h5> If you don't want that, log-out when you finish. </h5>\r\n      </div>\r\n\r\n      {/* google, facebook */}\r\n      <div style={{ display: 'flex', flexFlow: 'row', justifyContent: 'space-around' }}>\r\n        {/* <h3>External providers</h3> */}\r\n        <button style={{\r\n          fontSize: '4vw',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          backgroundColor: 'white',\r\n          borderRadius: '40px',\r\n          boxShadow: '0px 0px 5px 5px rgba(0,0,0,0.35)'\r\n          \r\n        }} onClick={signInWithGoogleButtonClicked}>\r\n          <img src={Gicon} style={{ width: '30px', height: '30px', margin: '4px', marginRight: '10px' }} alt=\"Logo\" />\r\n          <span>Sign-in with Google</span>\r\n        </button>\r\n\r\n<button style={{\r\n          fontSize: '4vw',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          backgroundColor: '#5353f5',\r\n          borderRadius: '40px',\r\n          // boxShadow: '6px 6px 5px 0px rgba(0,0,0,0.35)',\r\n          boxShadow: '0px 0px 5px 5px rgba(0,0,0,0.35)'\r\n// \r\n        }} onClick={signInWithFacebookButtonClicked}>\r\n           <img src={Ficon} style={{ width: '50px', height: '50px', margin: '4px', marginRight: '10px' }} alt=\"Logo\" />\r\n          <span>Sign-in with Facebook</span>\r\n          </button>\r\n      </div>\r\n      {/* <div style={{width:'30px',height:'30px', backgroundImage:`url(${Gicon})`}}></div> */}\r\n      {/* <div style={{width:'30px',height:'30px', background:'blue'}}></div> */}\r\n\r\n      <br />\r\n      <div>\r\n        <h3>Sign-up / Log-in with Email and Password</h3>\r\n        <Accordion className='p-3'>\r\n          <Card >\r\n            <Accordion.Toggle as={Card.Header} eventKey=\"0\" className=\"p-3 mb-2 bg-info text-white text-center btnOpacity\">\r\n              Sign-up\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"0\">\r\n              <SCard>\r\n                {/* <Sdiv as={SignUp} setUser={setUser}  /> */}\r\n                {/* <SignUp as={Sdiv} setUser={setUser}  /> */}\r\n                <SignUp />\r\n              </SCard>\r\n            </Accordion.Collapse>\r\n          </Card>\r\n          <Card >\r\n            <Accordion.Toggle as={Card.Header} eventKey=\"1\" className=\"p-3 mb-2 bg-info text-white MMpointer  text-center btnOpacity\">\r\n              Log-in\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"1\">\r\n              <SCard>\r\n                <LogIn />\r\n              </SCard>\r\n            </Accordion.Collapse>\r\n          </Card>\r\n        </Accordion>\r\n\r\n      </div>\r\n      <div>\r\n        {/* <h4> google sign-in</h4> */}\r\n        {/* <button onClick={signOutFromGoogleButtonClicked}>Sign-out from Google</button> */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUpInOut;","import React from 'react';\r\n\r\nconst PlanContext = React.createContext({\r\n  plan: null,\r\n  updatePlan(){}\r\n});\r\n\r\nexport default PlanContext;","import React from 'react';\r\nimport PlanContext from './ContextDefaults';\r\n\r\nimport imgMinus from '../img/minus.png';\r\nimport imgPlus from '../img/plus.png';\r\nimport imgMinusLight from '../img/minusLight.png';\r\nimport imgPlusLight from '../img/plusLight.png';\r\n\r\nimport styled from 'styled-components';\r\nimport CounterAllIn from '../basicComponents/CounterAllIn';\r\n\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport positionElementToTheTop from '../functions/styling/positionElementToTheTop';\r\n\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\n/* background-color: rgba(233, 154, 7, 0.62); */\r\nbackground-color: transparent;\r\nmargin: 0;\r\n`\r\n\r\nexport const SSet = styled.div`\r\n/* background-color: rgb(233, 225, 225); */\r\nbackground-color: rgb(151, 151, 152);\r\n\r\np,span,input,textarea{\r\n  font-size:1.3rem;\r\n}\r\ninput,span,textarea{\r\n  /* background-color:green; */\r\n  background:none;\r\n  /* background:linear-gradient(transparent 60%,red 100%); */\r\n  border:none;\r\n  /* border-bottom: 3px solid red; */\r\n  padding:5px;\r\n  /* width:auto; */\r\n  width:60px;\r\n    -webkit-box-shadow: none;\r\n    -moz-box-shadow: none;\r\n    box-shadow: none;\r\n}\r\nspan{\r\n  font-weight:bold;\r\n}\r\ninput{\r\n    color:black;\r\n    font-size:1.8rem;\r\n    color:white;\r\n    font-weight:bold;\r\n    text-align: center;\r\n    outline:none;\r\n    \r\n  }\r\n/* hide native htmml counting arrows */\r\n/* Chrome, Safari, Edge, Opera */\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n/* Firefox */\r\ninput[type=number] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\n\r\n/* textarea{\r\n  background-color:green;\r\n} */\r\n\r\npadding:3%;\r\nmargin-bottom: 10px;\r\n`;\r\n\r\nconst SSection = styled.div`\r\n/* background-color: yellow; */\r\nborder: 5px solid black;\r\npadding:10px;\r\n/* padding:3%; */\r\np{margin:0;}\r\nmargin-bottom:5px;\r\nbutton{\r\n  text-align: center;\r\n  display: block;\r\n  margin:5px auto -7px auto !important;\r\n  /* margin: auto !important; */\r\n  background-color:#ddd1d1;\r\n  outline:none;\r\n  /* border:none; */\r\n  &:hover{\r\n    background-color:red ;\r\n  /* opacity:1; */\r\n  }\r\n}\r\n`;\r\n\r\nconst SNote = styled.div`\r\n/* height:80px; */\r\n/* border: dotted black 1px; */\r\nbackground-color:lightgray;\r\np{\r\n    border-bottom:dotted 1px white;\r\n    padding-left:5px;\r\n}\r\ntextarea{\r\n  width:100%;\r\n  height:100%;\r\n  outline:none;\r\n}\r\np, textarea{font-size:0.8rem;}\r\n`;\r\n\r\n\r\n\r\n\r\nexport const SCounter = styled.div`\r\n/* background-color:blue; */\r\n/* background-image: url(${imgMinus}) no-repeat center center/cover; */\r\n/* background: url(\"https://robohash.org/1\") no-repeat center center/cover; */\r\n/* background: url(\"https://robohash.org/1\") no-repeat center center/cover; */\r\n\r\ndisplay:inline-box;\r\nwidth:50px;\r\nheight:50px;\r\npadding:0 3px;\r\nposition: relative;\r\n\r\ntouch-action: manipulation;\r\n\r\n:hover{\r\n    cursor:pointer;\r\n  /* background: radial-gradient(circle, rgba(255,100,0,1) 34%, rgba(42,8,8,0) 70%); */\r\n\r\n  }\r\n  :active{\r\n    img{background: radial-gradient(circle, rgb(215, 255, 0) 34%, rgba(42,8,8,0) 70%);}\r\n\r\n  }\r\nimg{\r\n  \r\n  width:100%; \r\n  /* width:110px;  */\r\n  /* height: 110px; */\r\n  /* height: 100%; */\r\n  height: auto;\r\n  /* background:radial-gradient(red); */\r\n  background: radial-gradient(circle, rgba(255,0,0,1) 34%, rgba(242,8,8,0) 70%);\r\n  /* background:url(${imgPlus}); */\r\n  /* background:url(imgPlus); */\r\n \r\n}\r\n#counterNumber{\r\n}\r\ndiv{\r\n  margin: auto;\r\n  position: absolute;\r\n   top: 43%; \r\n   /* top: ${() => '44%'};  */\r\nright: 50%; \r\n/* width:10px;height:10px; */\r\ntransform: translate(50%, -50%);\r\n  z-index:10;\r\n  /* content:  ${props => props.howMuch};  */\r\n  content:  ${() => '7'}; \r\n  content:'6';\r\n\r\n  font-size:0.8rem;\r\n  font-weight:800;\r\n  line-height:1rem;\r\n  color: white; \r\n\r\n  -webkit-touch-callout: none; /* iOS Safari */\r\n    -webkit-user-select: none; /* Safari */\r\n     -khtml-user-select: none; /* Konqueror HTML */\r\n       -moz-user-select: none; /* Old versions of Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n            user-select: none; /* Non-prefixed version, currently\r\n                                  supported by Chrome, Edge, Opera and Firefox */\r\n}\r\n\r\n`;\r\nexport const SCounterSmall = styled(SCounter)`\r\nwidth:30px;\r\nheight:30px;\r\ndiv { \r\n  top:46%;\r\n  font-size:0.5rem;\r\n}\r\n`;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Set = ({ set, position, trainingPosition }) => {\r\n  const thisSetRef = React.useRef();\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n  let { reps, repsAsPercentage, duration, repsNotes, breakAfterInSeconds, breakNotes, } = set;\r\n  let repsCalculatedFromMaxAndPercentage;\r\n  if (plan.repsAsPercentages && plan.maxRepsNeeded) {\r\n    repsCalculatedFromMaxAndPercentage = Math.round(repsAsPercentage / 100 * plan.maxRepsNeeded.reps);\r\n  }\r\n\r\n  let repsOrDuration = (reps !== undefined) ? ['reps', 'duration'] : ['duration', 'reps'];\r\n  position++; //so that set start with 1\r\n\r\n  const updateRepsOrDuration = ({ target: { value } }) => {\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]] = value;\r\n    // plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[1]] = undefined;\r\n    // console.log(\"this is got value,other undefined:\", [repsOrDuration[0]], plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]]);\r\n\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const updateRepOrDurationNotes = ({ target: { value } }) => {\r\n    let note = value;\r\n    if (note && note.length > 0) { note = note.charAt(0).toUpperCase() + note.slice(1); }\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].repsNotes = note;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const toggleRepsDuration = () => {\r\n    repsOrDuration = [repsOrDuration[1], repsOrDuration[0]];\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]] = plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[1]];\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[1]] = undefined;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const adjustBreakTime = ({ target: { value } }) => {\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].breakAfterInSeconds = value;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const adjustBreakNotes = ({ target: { value } }) => {\r\n    let note = value;\r\n    if (note && note.length > 0) { note = note.charAt(0).toUpperCase() + note.slice(1); }\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].breakNotes = note;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const duplicateSet = () => {\r\n    let currentSet = plan.trainings[trainingPosition - 1].sets[position - 1];\r\n    const newSet = { ...currentSet }; //can be done ad set doesn't objects or arrays\r\n    plan.trainings[trainingPosition - 1].sets.push(newSet);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const deleteSet = () => {\r\n    plan.trainings[trainingPosition - 1].sets.splice(position - 1, 1);\r\n\r\n    const oldSets = plan.trainings[trainingPosition - 1].sets;\r\n    const newSets = [...oldSets];\r\n    plan.trainings[trainingPosition - 1].sets = newSets;\r\n\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const adjust = (howMuch, what) => {\r\n\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][what] += howMuch;\r\n    if (plan.trainings[trainingPosition - 1].sets[position - 1][what] <= 0) plan.trainings[trainingPosition - 1].sets[position - 1][what] = 0;\r\n    // console.log(\"this is got value,other undefined:\", [repsOrDuration[0]], plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]]);\r\n    console.log(...plan.trainings[trainingPosition - 1].sets);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const implementNewValue = (what, newValue) => {\r\n\r\n    // plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]]  = newValue;\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][what] = newValue;\r\n    // console.log(...plan.trainings[trainingPosition - 1].sets);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n\r\n  ////interlink reps and %\r\n  let updatePercentagesValue = (newValue) => {\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].repsAsPercentage = newValue;\r\n    // plan.trainings[trainingPosition - 1].sets[position - 1].reps = Math.round(newValue / 100 * plan.maxRepsNeeded.reps);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  let updateRepsAsPartOfPercentagesValue = (newValue) => {\r\n    // plan.trainings[trainingPosition - 1].sets[position - 1].reps = newValue;\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].repsAsPercentage = Math.round(newValue / plan.maxRepsNeeded.reps * 100);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n\r\n    <Card style={{ backgroundColor: 'transparent', border: 'none', marginBottom: '10px' }}>\r\n      <Accordion.Toggle\r\n        as={Card.Header}\r\n        eventKey={position}\r\n        // className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n        className=\"p-1 bg-none MMpointer  text-center btnOpacity\"\r\n        style={{\r\n          background: 'orange',\r\n          margin: '0px 20px 0px 20px',\r\n          borderRadius: '10px 10px 0 0',\r\n          borderBottom: '1px dotted #00000078', //black semi-see-through\r\n          // borderRadius: '10px',\r\n          // border: 'none'\r\n\r\n        }}\r\n        // ref={thisSetRef}\r\n        id={`Training${trainingPosition}Set${position}ID`}\r\n        // onClick={() => positionElementToTheTop(thisSetRef.current, 350)}\r\n        onClick={() => positionElementToTheTop(document.getElementById(`Training${trainingPosition}Set${position}ID`), 350)}\r\n      // onClick={togglePublicPlansView}\r\n\r\n      >\r\n        <div style={{ display: 'flex', flexFlow: 'row', justifyContent: 'space-around', alignItems: 'center', padding: '5px' }}>\r\n          {/* <h5 style={{ textAlign: 'center', flex: 'auto' }}>Set {position}  🔽</h5> */}\r\n          <h5 style={{ margin: '0', padding: '0', textAlign: 'center', width: '50%' }}>Set {position}  🔽</h5>\r\n          <span style={{ color: 'black', fontSize: '12px', flex: 'none', width: '25%' }}>{reps ? reps : (repsAsPercentage + '% ('+repsCalculatedFromMaxAndPercentage+')')}reps</span>\r\n          <span style={{ color: 'gray', fontSize: '12px', flex: 'none', width: '25%' }}>{breakAfterInSeconds} s.</span>\r\n        </div>\r\n        {/* <p style={{ color: 'gray', fontSize: '13px' }}>(Organize on which day to do which training.)</p> */}\r\n      </Accordion.Toggle>\r\n      <Accordion.Collapse eventKey={position}>\r\n        <SCard style={{ overflowY: 'auto', backgroundColor: 'orange', padding: '1rem 0.5rem 1rem 0.5rem' }}>\r\n\r\n          <SSet>\r\n            <div >\r\n              {/* <h5 style={{ display: 'inline' }}> Set {position}</h5> */}\r\n              {/* <div style={{ display: 'inline-flex',width:'50%', justifyContent: 'flex-end', opacity: '0.6' }}> */}\r\n\r\n            </div>\r\n            <SSection>\r\n              <div>\r\n                {!plan.repsAsPercentages &&\r\n                  <div>\r\n                    <p style={{ textAlign: 'center' }}>{reps !== undefined ? 'Reps' : 'Duration'}</p>\r\n                    <div style={{ textAlign: 'center' }}>\r\n                      {/* <SCounterSmall onClick={() => adjust(-1, repsOrDuration[0])}>\r\n                  <img src={imgMinus} alt=\"\"></img>\r\n                  <div >1</div>\r\n                </SCounterSmall> */}\r\n                      {/* <SCounter onClick={() => adjust(-5, repsOrDuration[0])}><img src={imgMinus} alt=\"\"></img> <div >5</div></SCounter>\r\n                <input onChange={updateRepsOrDuration} type='number' value={reps !== undefined ? reps : duration}></input>\r\n                <SCounter onClick={() => adjust(5, repsOrDuration[0])}><img src={imgPlus} alt=\"\"></img> <div >5</div></SCounter>\r\n                <SCounterSmall onClick={() => adjust(1, repsOrDuration[0])}><img src={imgPlus} alt=\"\"></img> <div >1</div></SCounterSmall> */}\r\n                      {/* {reps == undefined && <p style={{ marginTop: '-20px', fontSize: '0.85rem' }}>seconds</p>} */}\r\n\r\n                      <CounterAllIn settings={[1, 5, (v) => implementNewValue('reps', v), reps, '', '',0]} />\r\n\r\n                    </div>\r\n                  </div>}\r\n\r\n\r\n\r\n                {plan.repsAsPercentages &&\r\n                  <div style={{ textAlign: 'center' }}>\r\n                    <CounterAllIn settings={[1, 5, updatePercentagesValue, repsAsPercentage, '%', 'of Max Reps',0]} />\r\n                    {/* <p style={{ textAlign: 'center' }}>makes... </p> */}\r\n                    <p style={{ textAlign: 'center' }}>= </p>\r\n                    <CounterAllIn settings={[1, 5, updateRepsAsPartOfPercentagesValue, repsCalculatedFromMaxAndPercentage, 'reps',0]} />\r\n                  </div>}\r\n\r\n              </div>\r\n              <SNote>\r\n                <p>Notes (Specify type of pushups, etc):</p>\r\n                <textarea onChange={updateRepOrDurationNotes} value={repsNotes} />\r\n              </SNote>\r\n              <button style={{ display: 'none' }} onClick={toggleRepsDuration}>\r\n                {reps !== undefined ? 'Replace \"Reps\" with \"Duration\"' : 'Replace \"Duration\" with \"Reps\"'}\r\n              </button>\r\n\r\n\r\n            </SSection>\r\n\r\n\r\n            <SSection>\r\n              <div>\r\n                <p style={{ textAlign: 'center' }}>Break</p>\r\n                <div style={{ textAlign: 'center' }}>\r\n                  {/* <SCounterSmall howMuch='-1' onClick={() => adjust(-5, 'breakAfterInSeconds')}><img src={imgMinus} alt=\"\"></img><div >5</div></SCounterSmall>\r\n            <SCounter onClick={() => adjust(-30, 'breakAfterInSeconds')}><img src={imgMinus} alt=\"\"></img><div >30</div></SCounter>\r\n            <input onChange={adjustBreakTime} type='number' value={breakAfterInSeconds}></input>\r\n            <SCounter onClick={() => adjust(30, 'breakAfterInSeconds')}><img src={imgPlus} alt=\"\"></img><div >30</div></SCounter>\r\n            <SCounterSmall onClick={() => adjust(5, 'breakAfterInSeconds')}><img src={imgPlus} alt=\"\"></img><div >5</div></SCounterSmall>\r\n            <p style={{ marginTop: '-20px', fontSize: '0.85rem' }}>seconds</p> */}\r\n\r\n                  <CounterAllIn settings={[5, 30, (v) => implementNewValue('breakAfterInSeconds', v), breakAfterInSeconds, '', 'seconds', 0]} />\r\n                </div>\r\n              </div>\r\n\r\n              <SNote>\r\n                <p>Notes (What to do during break?):</p>\r\n                <textarea onChange={adjustBreakNotes} value={breakNotes}></textarea>\r\n              </SNote>\r\n            </SSection>\r\n            {/* <div style={{ float: 'right', opacity: '0.6', marginTop: '-10px' }}> */}\r\n            <div className='adjustPlanDuplicateDeleteSetOrTrainingButtonsWrapper'>\r\n              <button className='adjustPlanDuplicateDeleteSetOrTrainingButton' onClick={duplicateSet}>Duplicate <br /> this set</button>\r\n              <button className='adjustPlanDuplicateDeleteSetOrTrainingButton' onClick={deleteSet}>Delete <br /> this set</button>\r\n            </div>\r\n\r\n\r\n          </SSet>\r\n\r\n        </SCard>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n\r\n  );\r\n};\r\n\r\nexport default Set;","const createPersonalSETStarter = (reps,repsAsPercentage, breakAfterInSeconds) => {\r\n  let set = {\r\n    reps,\r\n    repsAsPercentage,\r\n    duration:undefined,\r\n    repsNotes: undefined,\r\n    breakAfterInSeconds,\r\n    breakNotes: undefined\r\n  }\r\n  return set;\r\n}\r\nconst createPersonalTRAININGStarter = (name, repsAsPercentage = false, currentMax) => {\r\n  let training;\r\n  if (repsAsPercentage) {\r\n    training = {\r\n      name,\r\n      sets: [createPersonalSETStarter(Math.round(75/100 * currentMax),75 ,60,)]\r\n    };\r\n  }\r\n  else {\r\n    training = {\r\n      name,\r\n      sets: [createPersonalSETStarter(20, undefined,60)]\r\n    };\r\n  }\r\n  return training;\r\n}\r\n\r\nconst createPersonalPLANStarter = (name) => { //just to make mongoose id\r\n  let schedule =[];\r\n  for (let i = 0; i < 14; i++) schedule.push({trainingNumber: i<11 ? 1:0})\r\n  let plan = {  //DUPLICATE CODE IN MONGOOSE SCHEMA!!!!!\r\n    name,\r\n    trainings: [createPersonalTRAININGStarter()],\r\n    schedule,\r\n    //not implemented yet:\r\n    // description: undefined,\r\n    descriptionRich: undefined,\r\n    summary: undefined,\r\n    personal: 'yes-only',\r\n    // planType: - will be assigned only to specific plans with date to this object's ID\r\n  }\r\n  return plan;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport {  createPersonalPLANStarter, createPersonalTRAININGStarter, createPersonalSETStarter};","import React from 'react';\r\nimport Set, { SSet } from './Set.js';\r\nimport { createPersonalSETStarter } from './cratingObjectsfunctions';\r\nimport PlanContext from './ContextDefaults';\r\n\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport positionElementToTheTop from '../functions/styling/positionElementToTheTop';\r\n\r\nimport styled from 'styled-components';\r\nexport const STraining = styled.div`\r\n/* background-color: rgb(231, 204, 204); */\r\n/* background-color: red; */\r\npadding:3%;\r\nmargin-bottom: 10px;\r\ninput{padding-left:5px;margin-left:5px;}\r\n\r\n`;\r\n\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\n/* background-color: rgba(233, 154, 7, 0.62); */\r\nbackground-color: transparent;\r\nmargin: 0;\r\n`\r\n\r\n\r\nconst Training = ({ training, position }) => {\r\n  const trainingRef = React.useRef();\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n  // console.log(plan.trainings);\r\n\r\n\r\n  let { name, sets } = training;\r\n  position++;//so first is 1\r\n\r\n  // const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  const duplicateTraining = () => {\r\n    let currentTraining = plan.trainings[position - 1];\r\n    // const newTraining = { ...currentTraining }; //can be done ad set doesn't objects or arrays\r\n    const newTraining = JSON.parse(JSON.stringify(currentTraining))\r\n    plan.trainings.push(newTraining);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const deleteTraining = () => {\r\n    plan.trainings.splice(position - 1, 1);\r\n\r\n    //replace deleted trainings from the schedule\r\n    for (let i = 0; i < plan.schedule.length; i++) {\r\n      if (plan.schedule[i].trainingNumber > plan.trainings.length) plan.schedule[i].trainingNumber = plan.trainings.length;\r\n    }\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const createNewSet = () => {\r\n    let newSet;\r\n    if (plan.repsAsPercentages) { newSet = createPersonalSETStarter(Math.round(75 / 100 * plan.maxRepsNeeded.reps), 75, 60); }\r\n    else { newSet = createPersonalSETStarter(20, undefined, 60); }\r\n    plan.trainings[position - 1].sets.push(newSet);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const updateTrainingName = (e) => {\r\n    console.log(e.target.value);\r\n    plan.trainings[position - 1].name = e.target.value;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  return (\r\n\r\n    <Card style={{ backgroundColor: 'transparent', border: 'none', marginBottom: '10px' }}>\r\n      <Accordion.Toggle\r\n        as={Card.Header}\r\n        eventKey={position}\r\n        // className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n        className=\"p-1 bg-none MMpointer  text-center btnOpacity\"\r\n        style={{\r\n          background: 'yellow',\r\n          margin: '0px 20px 0px 20px',\r\n          // borderRadius:'10px 10px 0 0'\r\n          // borderRadius: '10px',\r\n          // border: 'none'\r\n          borderRadius: '10px 10px 0 0',\r\n          borderBottom: '1px dotted #00000078', //black semi-see-through\r\n        }}\r\n        ref={trainingRef}\r\n        onClick={() => positionElementToTheTop(trainingRef.current, 350)}\r\n      // onClick={togglePublicPlansView}\r\n\r\n      >\r\n        <h5 style={{ textAlign: 'center' }}>Training {position}  🔽</h5>\r\n        {/* <p style={{ color: 'gray', fontSize: '13px' }}>(Organize on which day to do which training.)</p> */}\r\n      </Accordion.Toggle>\r\n      <Accordion.Collapse eventKey={position}>\r\n        <SCard style={{ overflowY: 'auto', backgroundColor: 'yellow', padding: '1rem 0.5rem 1rem 0.5rem' }}>\r\n          <STraining>\r\n\r\n            <h5 >Name:\r\n            <input onChange={updateTrainingName} type='text' placeholder='optional field' value={name}></input>\r\n            </h5>\r\n\r\n\r\n\r\n            <Accordion\r\n              className='p-1'\r\n              style={{ background: 'transparent', margin: '10px -4%' }}\r\n              // defaultActiveKey={sets.length>1 ? -1 : 1}\r\n\r\n            >\r\n              {sets.map((set, index) => <Set key={index} position={index} set={set} trainingPosition={position} />)}\r\n\r\n              {/* create new set card */}\r\n              <Card style={{ backgroundColor: 'transparent', border: 'none', marginBottom: '10px' }}>\r\n                <Accordion.Toggle\r\n                  as={Card.Header}\r\n                  eventKey={sets.length + 1}\r\n                  // className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n                  className=\"p-1 bg-none MMpointer  text-center btnOpacity\"\r\n                  style={{\r\n                    background: 'orange',\r\n                    margin: '0px 20px 0px 20px',\r\n                    borderRadius: '10px',\r\n                    // borderBottom: '1px dotted black'\r\n                    // borderRadius: '10px',\r\n                    // border: 'none'\r\n                \r\n                  }}\r\n                  onClick={async () => {\r\n                    createNewSet();\r\n                    await new Promise(resolve => setTimeout(resolve, 10));//has to be here to wait for React to create that component\r\n                    positionElementToTheTop(document.getElementById(`Training${position}Set${sets.length}ID`), 350)\r\n\r\n                  }}\r\n\r\n                >\r\n                  <div style={{ display: 'flex', flexFlow: 'row', justifyContent: 'space-around', alignItems: 'center', padding: '5px' }}>\r\n                    {/* <h5 style={{ textAlign: 'center', flex: 'auto' }}>Set {position}  🔽</h5> */}\r\n                    <h5 style={{ margin: '0', padding: '0', textAlign: 'center', width: '50%' }}> Add new Set</h5>\r\n                    {/* <span style={{ color: 'gray', fontSize: '12px', flex: 'none', width: '50%' }}>{reps} reps</span> */}\r\n                  </div>\r\n                  {/* <p style={{ color: 'gray', fontSize: '13px' }}>(Organize on which day to do which training.)</p> */}\r\n                </Accordion.Toggle>\r\n                {/* <Accordion.Collapse eventKey={position}>\r\n        <SCard style={{ overflowY: 'auto', backgroundColor: 'orange', padding: '1rem 0.5rem 1rem 0.5rem' }}>\r\n\r\n        </SCard>\r\n      </Accordion.Collapse> */}\r\n              </Card>\r\n\r\n\r\n            </Accordion>\r\n            {/* <SSet>\r\n              <button onClick={createNewSet}>Create new Set</button>\r\n            </SSet> */}\r\n            {/* <div style={{ display: 'flex', justifyContent: 'flex-end', opacity: '0.6' }}> */}\r\n            <div className='adjustPlanDuplicateDeleteSetOrTrainingButtonsWrapper'>\r\n              <button className='adjustPlanDuplicateDeleteSetOrTrainingButton' onClick={duplicateTraining}>Duplicate <br /> this training</button>\r\n              <button className='adjustPlanDuplicateDeleteSetOrTrainingButton' onClick={deleteTraining}>Delete <br /> this training</button>\r\n            </div>\r\n          </STraining>\r\n        </SCard>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n\r\n\r\n\r\n  );\r\n};\r\n\r\nexport default Training;","import React from 'react';\r\nimport Training, { STraining } from './Training';\r\nimport styled from 'styled-components';\r\nimport PlanContext from './ContextDefaults';\r\n\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport positionElementToTheTop from '../functions/styling/positionElementToTheTop';\r\n\r\nconst STrainings = styled.div`\r\n/* background-color: rgb(222, 122, 122); */\r\n/* padding:10px 3%; */\r\n`;\r\n\r\nconst Trainings = ({ trainings }) => {\r\n  // console.log(\"trainings?:\", trainings);\r\n\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  const createNewTraining = () => {\r\n    console.log(\"create training clicked\");\r\n    // console.log(plan);\r\n    plan.newTraining(plan.repsAsPercentages, plan.repsAsPercentages ? plan.maxRepsNeeded.reps : undefined);\r\n    // updatePlan(plan);\r\n    updatePlan({ ...plan });\r\n    // updatePlan({});\r\n\r\n\r\n    // console.log(planContext);\r\n    // planContext.updatePlan({ahoj:'aa'});\r\n  }\r\n\r\n  return (\r\n    <STrainings>\r\n      {/* <h5>Trainings:</h5> */}\r\n\r\n      <Accordion\r\n        className='p-1'\r\n        style={{ background: 'transparent', margin: '10px -4%' }}\r\n        // defaultActiveKey={1}\r\n\r\n      >\r\n\r\n        {trainings.map((tr, index) => (<Training training={tr} key={index} position={index} />))}\r\n        \r\n        {/* schedule: */}\r\n     </Accordion>\r\n\r\n      {/* {trainings.map(tr => { return <p>training</p> })} */}\r\n      <STraining>\r\n        <button onClick={createNewTraining}>Add new Training</button>\r\n      </STraining>\r\n    </STrainings>\r\n\r\n  );\r\n};\r\n\r\nexport default Trainings;","import React from 'react';\r\n// import { TestContext } from '../ShowPersonalPlanToUserToAdjust'\r\nimport PlanContext from '../ContextDefaults';\r\n\r\nimport styled from 'styled-components';\r\nimport CounterAllIn from '../../basicComponents/CounterAllIn';\r\nexport const SSchedule = styled.div`\r\nbackground-color: lightgreen;\r\npadding:3%;\r\nmargin-top:35px;\r\n`\r\n\r\n\r\nconst Schedule = ({ children }) => {\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  ///////update schedule if needed (if old version without objects or if not 14 days)\r\n  if (plan) {\r\n    // console.log(\"plan.schedule before update:\", plan.schedule, plan.schedule.length);\r\n\r\n    //if schedule is not in object type, update that\r\n    if (plan.schedule.length > 0 && typeof plan.schedule[0] != 'object') {\r\n      for (let i = 0; i < plan.schedule.length; i++) {\r\n        plan.schedule[i] = { trainingNumber: plan.schedule[i] };\r\n      }\r\n    }\r\n\r\n    //if plan is shorter fill it\r\n    if (plan.schedule.length < 14) {\r\n      let extra = 14 - plan.schedule.length;\r\n      let posFromSchedule = 0;\r\n      for (let i = 1; i <= extra; i++) {\r\n        plan.schedule.push(plan.schedule.length > 10 ? { trainingNumber: 0 } : { trainingNumber: plan.schedule[posFromSchedule].trainingNumber });\r\n        posFromSchedule++;\r\n      }\r\n      console.log(\"plan.schedule after update:\", plan.schedule, plan.schedule.length);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const runSubmit = async (e, indexFrom0) => {\r\n    console.log(e.target.value);\r\n    plan.schedule[indexFrom0].trainingNumber = Number(e.target.value);\r\n    updatePlan({ ...plan });\r\n    console.log(plan);\r\n  }\r\n\r\n\r\n  return (\r\n    <SSchedule>\r\n      <h1>Trainings SCHEDULE</h1>\r\n      {/* OLD STYLE SCHEDULE: */}\r\n      {/* <div>\r\n        <h5>How many days will be one Cycle?:</h5>\r\n        <input onChange={getNumberOfDays} id='numberOfDays' type='number'></input>\r\n      </div>\r\n      <br></br>\r\n      {plan.schedule &&\r\n        <div>\r\n          <h5>Add trainings into the schedule (0 is default):</h5>\r\n          {plan.schedule.map((day, index) => {\r\n            return (\r\n              <div key={index}>\r\n                <span>Day {index + 1}:</span>\r\n                <input onChange={(e) => runSubmit(e, index)} value={plan.schedule[index]}></input>\r\n              </div>)\r\n          })}\r\n        </div>} */}\r\n\r\n      <div>\r\n        {/* <h3>Whole cycle view:</h3> */}\r\n        {/* {daysOfSchedule.map((day, index) => */}\r\n        {/* <h5>Add trainings into the schedule (1 represents 'training 1', 2 'training 2',... 0 represents day off.)</h5> */}\r\n        <h5>Decide which day to do which training. </h5>\r\n        <p> - As default, \"training number 1\" is scheduled for each day.</p>\r\n        <p> - If there should be no training on certain day, set the training number to 0.</p>\r\n        <p> - For example, if you created 3 trainings, you can select number from 0 to 3 for each day.</p>\r\n        {plan.schedule.map((scheduleDay, index) =>\r\n          <div key={index}\r\n            style={{\r\n              backgroundColor: `${index > 10 ? (index === 13 ? 'red' : (index === 12 ? 'orange' : 'yellow')) : (scheduleDay.trainingNumber === 0 ? 'gray' : 'green')}`,\r\n              margin: '3px', padding: '3px',\r\n\r\n            }}>\r\n\r\n            {index > 10 && <p style={{ textAlign: 'center', margin: '0', padding: '0', fontSize: '10px' }}>{index === 13 ? \"Day of final assessment. Don't train before the assessment!!!\" : 'Recovery day recommended.'}</p>}\r\n            <div style={{ display: 'flex', justifyContent: 'space-around', alignItems: 'center' }}>\r\n              {/* <span>Day {index<9 ? ('0'+(index+1)) : index+1}:</span> */}\r\n              {/* <div style={{display:'flex',flexFlow:'column'}}> */}\r\n              <span>Day {index < 9 && <span style={{ color: '#ffffff00' }}>0</span>}{index + 1}:</span>\r\n              {/* </div> */}\r\n              {/* <input\r\n              key={index}\r\n              id={'idScheduleInput' + index}\r\n              value={day}\r\n              onChange={({ target: { value } }) => { plan.schedule[index] = Number(value); updatePlan({ ...plan }) }}\r\n              >\r\n              </input> */}\r\n              {/* const [p1counterSmall, p1counterBig, onChangeFunctionReceivingNewValueAsParameter, initialValue, sideText, smallTextUnderTheNumber, minValue, MaxValue] = settings; */}\r\n\r\n              <CounterAllIn settings={[\r\n                0,\r\n                index === 13 ? 0 : 1,\r\n                (value) => { plan.schedule[index].trainingNumber = Number(value); updatePlan({ ...plan }) },\r\n                scheduleDay.trainingNumber,\r\n                '',\r\n                '',\r\n                0,\r\n                index === 13 ? 0 : plan.trainings.length\r\n              ]} />\r\n            </div>\r\n\r\n\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* <input onChange={({ target: { value } }) => { daysOfSchedule[index] = value; setDaysOfSchedule(daysOfSchedule) }}>hi</input> */}\r\n\r\n    </SSchedule>\r\n  );\r\n};\r\n\r\n\r\nexport default Schedule;","import React from 'react';\r\nimport PlanContext from '../ContextDefaults';\r\n\r\nimport { getSimpleDateIfTrueAlsoTime } from '../../functions/basics';\r\n\r\nimport CounterAllIn from '../../basicComponents/CounterAllIn';\r\n\r\nconst MaxRepsUsedForRepsPercentages = () => {\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  // const [currentValueOfMaxReps, setCurrentValueOfMaxReps] = React.useState(plan.maxRepsNeeded.reps);\r\n\r\n  const fReceivingUpdatedMaxReps = (updatedMaxValue) => {\r\n    // setCurrentValueOfMaxReps(updatedMaxValue);\r\n    if (plan.maxRepsNeeded.type !== 'userGenerated') {\r\n      plan.maxRepsNeeded.reps2 = plan.maxRepsNeeded.reps;\r\n      plan.maxRepsNeeded.type2 = plan.maxRepsNeeded.type;\r\n    }\r\n    plan.maxRepsNeeded.reps = updatedMaxValue;\r\n    plan.maxRepsNeeded.type = 'userGenerated';\r\n\r\n    //////reps are now calculated dynamically from % and max. any time % or max reps or specific reps are updated , rep are recalculated from current reps%\r\n    // plan.trainings.forEach(training => {\r\n    //   let sets = training.sets;\r\n    //   sets.forEach(set => {\r\n    //     if (set.reps) {\r\n    //       set.reps = Math.round(set.repsAsPercentage / 100 * plan.maxRepsNeeded.reps);\r\n    //     }\r\n    //   })\r\n    // })\r\n    // console.log(\"plan before update:\", plan);\r\n\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h3>Max reps used to calculate %:</h3>\r\n      {/* <h3 style={{display:'inline',backgroundColor:'lightGray'}}>{plan.maxRepsNeeded.reps}</h3> */}\r\n      {/* <h3 style={{ width: '70px', textAlign: 'center', margin: 'auto', backgroundColor: 'lightGray' }}>{plan.maxRepsNeeded.reps}</h3> */}\r\n      {/* <CounterAllIn settings={[1, 5, fReceivingUpdatedMaxReps, currentValueOfMaxReps]} /> */}\r\n      <CounterAllIn settings={[1, 5, fReceivingUpdatedMaxReps, plan.maxRepsNeeded.reps]} />\r\n      <div style={{ textAlign: 'center' }}>\r\n        <span>(</span>\r\n        {plan.maxRepsNeeded.type === 'userGenerated' ? <span>This is number generated by you.\r\n            {plan.maxRepsNeeded.type2 === 'initialAssessment' ? <span>)<br /> (In your initial assessment from {getSimpleDateIfTrueAlsoTime(plan.maxRepsNeeded.date, false, true)} you did {plan.maxRepsNeeded.reps2} reps.</span>\r\n            : plan.maxRepsNeeded.type2 === 'latestMaxReps' ? <span>)<br /> (Your most current Max Reps from {getSimpleDateIfTrueAlsoTime(plan.maxRepsNeeded.date, false, true)} is {plan.maxRepsNeeded.reps2} reps.</span> : null\r\n          }</span>\r\n          : plan.maxRepsNeeded.type === 'initialAssessment' ? <span>This is your initial assessment data of your current Plan - from {getSimpleDateIfTrueAlsoTime(plan.maxRepsNeeded.date, false, true)}.</span>\r\n            : plan.maxRepsNeeded.type === 'latestMaxReps' ? <span>This is your most current Max Reps data - from {getSimpleDateIfTrueAlsoTime(plan.maxRepsNeeded.date, false, true)}</span>\r\n              : plan.maxRepsNeeded.type === 'default' ? <span>This is just a random number as you didn't do any assessment yet.</span>\r\n                : null}\r\n        <span>)</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaxRepsUsedForRepsPercentages;","import React from 'react';\r\nimport PlanContext from './ContextDefaults';\r\nimport MaxRepsUsedForRepsPercentages from './repsAsPercentages/MaxRepsUsedForRepsPercentages';\r\n\r\n//get current max\r\nconst getCurrentMaxReps = (user) => { //.reps; .type: 'initialAssessment'; 'latestMaxReps'; 'default'\r\n  let maxRepsNeeded = {};\r\n  let initAssRepsId = user.pushupPlans.current ? user.pushupPlans.current.assessments.initialAssessmentID : undefined;\r\n  if (initAssRepsId !== undefined && initAssRepsId !== null) {\r\n    maxRepsNeeded = user.assessments.find(ass => ass._id === initAssRepsId);\r\n    maxRepsNeeded.type = 'initialAssessment';\r\n    // console.log(\"initAssReps: \", maxRepsNeeded);\r\n  } else {\r\n    //init ass doesn't exist, get latest max reps\r\n    if (user.assessments && user.assessments.length > 0) {\r\n      maxRepsNeeded = user.assessments[0];\r\n      maxRepsNeeded.type = 'latestMaxReps';\r\n      // console.log(\"MaxReps found: \", maxRepsNeeded);\r\n    } else {\r\n      maxRepsNeeded.reps = 20;\r\n      maxRepsNeeded.type = 'default';\r\n    }\r\n  }\r\n  // console.log(\"maxRepsNeeded:\", maxRepsNeeded);\r\n  return maxRepsNeeded;\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst PercentagesRegimeActivator = ({ user }) => {\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  //onClick function...\r\n  const activateDeactivatePercentageRegime = (autoActivated = false) => {\r\n    // console.log(\"XX\", autoActivated);\r\n    if (!plan.repsAsPercentages) {\r\n      // console.log(\"plan:\", plan);\r\n      plan.repsAsPercentages = true;\r\n      plan.maxRepsNeeded = getCurrentMaxReps(user);//.reps; .type: 'initialAssessment'; 'latestMaxReps'; 'default'\r\n      // console.log(\"maxRepsNeeded:\", plan.maxRepsNeeded.reps, plan.maxRepsNeeded.type);\r\n      //create all the values on the plan \r\n      plan.trainings.forEach(training => {\r\n        let sets = training.sets;\r\n        sets.forEach(set => {\r\n          if (set.reps) { //some sets may use duration\r\n            let repsAsPercentage = Math.round(set.reps / plan.maxRepsNeeded.reps * 100);\r\n            set.repsAsPercentage = repsAsPercentage;\r\n            set.reps = null;\r\n            // set.reps = 0;\r\n            // set.reps =Math.round(repsAsPercentage/100 * maxRepsNeeded.reps); //causes warning as type number is changed to 'undefined', but tha shall be ok as i will change it back later\r\n            //don't delete .reps yet\r\n          }\r\n        })\r\n      })\r\n      // console.log(\"plan before update:\", plan);\r\n      updatePlan({ ...plan });\r\n    } else if (autoActivated !== true) {\r\n      // console.log(\"REQUEST TO DEACTIVATE %%%%%%%%%%%%%%%%%%...\");\r\n      //deactivate %...\r\n\r\n      //create all the values on the plan \r\n      plan.trainings.forEach(training => {\r\n        let sets = training.sets;\r\n        sets.forEach(set => {\r\n          set.reps = Math.round(set.repsAsPercentage / 100 * plan.maxRepsNeeded.reps); //causes warning as type number is changed to 'undefined', but tha shall be ok as i will change it back later\r\n          set.repsAsPercentage = undefined;\r\n        })\r\n      })\r\n      plan.repsAsPercentages = undefined;\r\n      plan.maxRepsNeeded = undefined;\r\n      // console.log(\"plan before update:\", plan);\r\n      updatePlan({ ...plan });\r\n    }\r\n\r\n    //upon duplicating/deleting/creating new set,training - it needs to do that to the set also\r\n\r\n    // make sure that will update the UI so that the UI also refreshes(but not DB as user didn't save changes.)\r\n    //create logic to display all the % values if those exists\r\n    // then display current max reps and all the values\r\n  }\r\n\r\n  //to simulate button click\r\n  // React.useEffect(() => { if (user) activateDeactivatePercentageRegime(true); }, [user])\r\n\r\n  //set current max reps if plan is set to % regime\r\n  React.useEffect(() => {\r\n    console.log(\"MAX REPS SHALL BE PART OF PLAN NOW\");\r\n    if (user && plan.repsAsPercentages && !plan.maxRepsNeeded) {\r\n      plan.maxRepsNeeded = getCurrentMaxReps(user);\r\n      updatePlan({ ...plan });\r\n    }\r\n  }, [user, plan])\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={activateDeactivatePercentageRegime} style={{ display: 'block', margin: '15px 10%', padding: '15px', width: '80%' }}><h5>{plan.repsAsPercentages && 'DE-'}Activate % regime</h5></button>\r\n      {/* <button>What is % regime? -></button> */}\r\n      <p style={{ textAlign: 'center' }}>If % regime is activated, reps are calculated dynamically from user's initial assessment data (or current max, if initial assessment currently doesn't exist.)</p>\r\n      { (plan.repsAsPercentages && plan.maxRepsNeeded) ? <MaxRepsUsedForRepsPercentages /> : null }\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default PercentagesRegimeActivator;","import React from 'react';\r\nimport Trainings from './Trainings';\r\nimport styled from 'styled-components';\r\nimport { createPersonalTRAININGStarter } from './cratingObjectsfunctions';\r\nimport PlanContext from './ContextDefaults';\r\nimport Schedule from './schedule/Schedule';\r\nimport { SLink } from '../Home';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData'\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport PercentagesRegimeActivator from './PercentagesRegimeActivator';\r\n// import TextEditorReactQuill from './richTextEditing/TextEditorReactQuill';\r\nimport TextEditorReactQuill from '../basicComponents/richTextEditing/TextEditorReactQuill';\r\n\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport positionElementToTheTop from '../functions/styling/positionElementToTheTop';\r\n\r\n\r\nconst SPlan = styled.div`\r\nbackground-color: brown;\r\npadding:3%;\r\n`;\r\n\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\n/* background-color: rgba(233, 154, 7, 0.62); */\r\nbackground-color: transparent;\r\nmargin: 0;\r\n`\r\n\r\n// const ShowPersonalPlanToUserToAdjust = ({ planToAdjust, plantToAdjust:{name, trainings} }) => {\r\nconst ShowPersonalPlanToUserToAdjust = ({ planToAdjust, history, adjustingNotCreating, publicPlan }) => {\r\n  // console.log(\"adjustingNotCreating: \", adjustingNotCreating);\r\n\r\n  const planAdjustTrainingRef = React.useRef(null);\r\n  const planAdjustScheduleRef = React.useRef(null);\r\n  const planAdjustPublicRef = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    // (async () => { await new Promise(resolve => setTimeout(resolve, 350)); })()\r\n    //scroll should be within this async anyway to be delayed\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n\r\n\r\n  console.log(\"publicPlan???:\", publicPlan);\r\n  // let { name, trainings, schedule } = planToAdjust;\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n\r\n  const planWMethods = {\r\n    ...planToAdjust,\r\n    newTraining(repsAsPercentages, maxReps) {\r\n      this.trainings.push(createPersonalTRAININGStarter(undefined, repsAsPercentages, maxReps));\r\n      return this;\r\n    }\r\n  }\r\n  const [plan, updatePlan] = React.useState(planWMethods);\r\n  const [thisNameExistsAlready, setThisNameExistsAlready] = React.useState(false);\r\n  const planPackage = { plan, updatePlan };\r\n\r\n\r\n  //tools to deal with checking for unique name\r\n  const [name, setName] = React.useState(plan.name);\r\n  const [richDescription, setRichDescription] = React.useState(plan.descriptionRich ? plan.descriptionRich : plan.description);\r\n  const [summary, setSummary] = React.useState(plan.summary ? plan.summary : null);\r\n  // const [richDescription, setRichDescription] = React.useState(plan.descriptionRich);\r\n  const [publicPlansNames, setPublicPlansNames] = React.useState(null);\r\n  let publicPlans = pushupContext.publicPlans;\r\n  // console.log(\"publicPlans: \", publicPlans);\r\n  // console.log(\"pushupContext: \", pushupContext);\r\n\r\n  React.useEffect(() => {\r\n    if (publicPlans) {\r\n      let publicPlansNamesSupportVar = publicPlans.map(publicPlan => publicPlan.name);\r\n      setPublicPlansNames(publicPlansNamesSupportVar);\r\n      // console.log(\"publicPlansNames: \", publicPlansNames);\r\n    }\r\n  }, [publicPlans]);\r\n\r\n\r\n  const [submitted, setSubmitted] = React.useState(false);\r\n  React.useEffect(() => {\r\n    if (adjustingNotCreating === undefined) { //undefined==plan is created, doesn't have position\r\n      document.querySelector('#planNameInputHere').focus();\r\n    }\r\n  }, []);\r\n\r\n\r\n  // console.log(\"PLAN to update:\", plan);\r\n\r\n  React.useEffect(() => {\r\n    //search through all public names. if this one exists within\r\n    if (publicPlansNames) {//=once names were loaded from context...\r\n      let thisNameExistsAlreadySupportVar = publicPlansNames.find(nameInDb => name === nameInDb);\r\n      setThisNameExistsAlready(thisNameExistsAlreadySupportVar);\r\n    }\r\n  }, [name, publicPlansNames]);\r\n\r\n  const updatePlanName = ({ target: { value } }) => {\r\n    // to deal with names in DB\r\n    setName(value);\r\n\r\n    plan.name = value;\r\n    updatePlan({ ...plan });\r\n    // pushupContext.user.p\r\n    // pushupContext.updateUser(pushupContext.user);\r\n  }\r\n\r\n\r\n  const updateSummaryValue = (updatedSummary) => {\r\n    // console.log(\"updating plan\")\r\n    plan.summary = updatedSummary;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  // const updatePlanDescription = ({ target: { value } }) => {\r\n  //   // console.log(value);\r\n  //   plan.description = value;\r\n  //   updatePlan({ ...plan });\r\n  // }\r\n  const saveRichDescriptionToDB = async (updatedDescription) => {\r\n    if (adjustingNotCreating) {\r\n      //assuming this is adjustable personal plan on db side...\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updatePlanDescriptionRich', { positionFrom0: adjustingNotCreating, updatedDescription, publicPlan });\r\n      pushupContext.updateUser({ ...updatedUser });\r\n    } else {\r\n      plan.descriptionRich = updatedDescription;\r\n      updatePlan({ ...plan });\r\n    }\r\n  }\r\n  const updateRichDescriptionValue = (updatedDescription) => {\r\n    console.log(\"updating plan\")\r\n    plan.descriptionRich = updatedDescription;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n\r\n\r\n  const handleFormSubmit = async () => {\r\n    try {\r\n      // plan.s chedule = plan.s chedule.map(day => day > 0 ? day : 0);\r\n      // console.log(\"plan with cleaned schedule\", plan);\r\n\r\n      //change notes  first letters to upper cases:\r\n\r\n\r\n      let updatedUser;\r\n      if (adjustingNotCreating >= 0) {\r\n        updatedUser = await postJsonDataUrlAfterAPIpushups('/saveChangesInPersonalPlanContent', { plan, positionFrom0: adjustingNotCreating, publicPlan });\r\n        // console.log(\"updated planXX:\", updatedUser);\r\n\r\n      } else {\r\n        updatedUser = await postJsonDataUrlAfterAPIpushups('/addPersonalPlan', { newPlan: plan });\r\n      }\r\n\r\n      pushupContext.updateUser(updatedUser);\r\n      setSubmitted(true);\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      history.push('/pushups/trainingPlans');\r\n      setSubmitted(false);\r\n\r\n\r\n    } catch (err) { console.log(err) }\r\n  }\r\n\r\n  const [state1, setState1] = React.useState({ b: 'default useContext', counter: 0 })\r\n  // console.log(\"state1=context now:\", state1);\r\n\r\n  React.useEffect(() => {\r\n    console.log(\"^plan updated to: \", plan);\r\n    // console.log(\"^set-data now: \",plan.trainings[0].sets[0].reps,plan.trainings[0].sets[0].repsAsPercentage+'%', plan.trainings[0].sets)\r\n  }, [plan])\r\n\r\n  let customStylesHere = {\r\n    minHeight: '200px',\r\n    border: '1px gray solid !important',\r\n    borderRadius: '0.5em',\r\n    // backgroundColor: '#fefcfc'\r\n    backgroundColor: '#fff3d0'\r\n  }\r\n\r\n  return (\r\n    <SPlan>\r\n      <PlanContext.Provider value={planPackage}>\r\n\r\n\r\n        {submitted ? <h1 style={{ backgroundColor: 'green', textAlign: 'center', color: 'white', padding: '20px' }}>Submitted. Great Work!</h1>\r\n          : <SLink\r\n            as='button'\r\n            style={{ display: 'block', width: '100%', margin: '10px auto', textAlign: 'center' }}\r\n            type=\"submit\"\r\n            onClick={handleFormSubmit}>\r\n            Save {adjustingNotCreating >= 0 ? 'Changes' : 'Plan'}\r\n          </SLink>}\r\n        {/* <form id='personalPlanForm'> */}\r\n        <h3>1) Plan name: <input id='planNameInputHere' type='text' onChange={updatePlanName} placeholder='mandatory field' value={plan.name} style={{ backgroundColor: `${thisNameExistsAlready ? \"red\" : \"white\"}`, maxWidth: '90vw' }}></input></h3>\r\n        {/* <p style={{ textAlign:'center', color:'lightGray', fontSize: `${thisNameExistsAlready ? \"1.3rem\" : \"13px\"}` }}>This name CAN{thisNameExistsAlready && \"'T\"} be used for public plan{thisNameExistsAlready && \", as other public plan has this name already\"}.</p> */}\r\n        <p style={{ textAlign: 'center', color: 'lightGray', fontSize: `${thisNameExistsAlready ? \"1.3rem\" : \"13px\"}` }}>{thisNameExistsAlready && \"This name CAN'T be used for public plan, as other public plan has this name already. (You can still use this name for your personal plan.)\"}</p>\r\n        {/* <Trainings trainings={trainings} /> */}\r\n\r\n\r\n\r\n\r\n\r\n\r\n        {/* <button type=\"submit\" onClick={handleFormSubmit}>Save Plan</button> */}\r\n\r\n\r\n        {/* extra settings to publish the plan */}\r\n        <Accordion\r\n          className='p-1'\r\n          style={{ background: 'transparent', margin: '10px -4%' }}\r\n        // defaultActiveKey='0'\r\n        // defaultActiveKey='10'\r\n        // defaultActiveKey={user ? (user.settings ? '1' : '0') : '0'}\r\n        // defaultActiveKey={viewController ? (viewController.public.view ? '1' : '0') : '1'}\r\n        >\r\n          {/* <Card style={{background:'transparent', border:'none'}} > */}\r\n\r\n          <Card style={{ backgroundColor: 'transparent', border: 'none', marginBottom: '10px' }}>\r\n            <Accordion.Toggle\r\n              as={Card.Header}\r\n              eventKey=\"10\"\r\n              // className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n              className=\"p-1 bg-none MMpointer  text-center btnOpacity\"\r\n              style={{\r\n                background: 'white',\r\n                margin: '0px 20px 0px 20px',\r\n                // borderRadius:'10px 10px 0 0'\r\n                // borderRadius: '10px',\r\n                // border: 'none',\r\n                borderRadius: '10px 10px 0 0',\r\n                borderBottom: ' 1px dotted #00000078', //black semi-see-through\r\n                // borderStyle:'groove'\r\n              }}\r\n              // onClick={togglePublicPlansView}\r\n              ref={planAdjustTrainingRef}\r\n              onClick={() => positionElementToTheTop(planAdjustTrainingRef.current, 350)}\r\n            >\r\n              <h4>2) Trainings 🔽</h4>\r\n              <p style={{ color: 'gray', fontSize: '13px' }}>(Create 1 or more trainings.)</p>\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"10\">\r\n              <SCard style={{ overflowY: 'auto', backgroundColor: 'white', padding: '1rem 0.5rem 1rem 0.5rem' }}>\r\n                <Trainings trainings={plan.trainings} />\r\n              </SCard>\r\n            </Accordion.Collapse>\r\n          </Card>\r\n\r\n          {/* schedule: */}\r\n          <Card style={{ backgroundColor: 'transparent', border: 'none', marginBottom: '10px' }}>\r\n            <Accordion.Toggle\r\n              as={Card.Header}\r\n              eventKey=\"20\"\r\n              // className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n              className=\"p-1 bg-none MMpointer  text-center btnOpacity\"\r\n              style={{\r\n                background: 'white',\r\n                margin: '0px 20px 0px 20px',\r\n                // borderRadius:'10px 10px 0 0'\r\n                // borderRadius: '10px',\r\n                borderRadius: '10px 10px 0 0',\r\n                borderBottom: ' 1px dotted #00000078', //black semi-see-through\r\n              }}\r\n              ref={planAdjustScheduleRef}\r\n              onClick={() => positionElementToTheTop(planAdjustScheduleRef.current, 350)}\r\n            // onClick={togglePublicPlansView}\r\n\r\n\r\n            >\r\n              <h4>3) Schedule 🔽</h4>\r\n              <p style={{ color: 'gray', fontSize: '13px' }}>(Organize on which day to do which training.)</p>\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"20\">\r\n              <SCard style={{ overflowY: 'auto', backgroundColor: 'white', padding: '1rem 0.5rem 1rem 0.5rem' }}>\r\n                <Schedule />\r\n              </SCard>\r\n            </Accordion.Collapse>\r\n          </Card>\r\n\r\n          {/* adtional for publishing: */}\r\n          <Card style={{ backgroundColor: 'transparent', border: 'none', marginTop: '20px' }}>\r\n            <Accordion.Toggle\r\n              as={Card.Header}\r\n              eventKey=\"30\"\r\n              // className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n              className=\"p-1 bg-none MMpointer  text-center btnOpacity\"\r\n              style={{\r\n                background: 'lightGray',\r\n                margin: '0px 60px 0px 60px',\r\n                // borderRadius:'10px 10px 0 0'\r\n                borderRadius: '10px 10px 0 0',\r\n                borderBottom: ' 1px dotted #00000078', //black semi-see-through\r\n              }}\r\n              ref={planAdjustPublicRef}\r\n              onClick={() => positionElementToTheTop(planAdjustPublicRef.current, 350)}\r\n            // onClick={togglePublicPlansView}\r\n            >\r\n              <p>4) Extra settings to publish the plan 🔽</p>\r\n              <p style={{ color: 'gray', fontSize: '10px' }}>(Summary, Description,Target Group,...)</p>\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"30\">\r\n              <SCard style={{ overflowY: 'auto', backgroundColor: 'lightGray', padding: '1rem 0.5rem 1rem 0.5rem' }}>\r\n                <h4 style={{ display: 'inline' }}>Summary:</h4>\r\n                <span>(max 150 characters)   </span>\r\n                <TextEditorReactQuill\r\n                  placeholder={\"Write here... (Plan without summary can't be published.)\"}\r\n                  initialValue={summary}\r\n                  onChange={updateSummaryValue}\r\n                  customStyles={customStylesHere}\r\n                />\r\n                <h4>Detailed Description: </h4>\r\n                {/* <textarea style={{ width: '100%', height: '100px' }} type='text' onChange={updatePlanDescription} value={plan.description} placeholder='Mandatory field for public plans. (Write description if you intent to make this plan public.)'></textarea> */}\r\n                {adjustingNotCreating ? <TextEditorReactQuill placeholder={\"Write here... (Plan without description can't be published.)\"} initialValue={richDescription} onChange={updateRichDescriptionValue} onSubmit={saveRichDescriptionToDB} customStyles={customStylesHere} submitButtonText='Save description' />\r\n                  : <TextEditorReactQuill\r\n                    placeholder={\"Write here... (Plan without description can't be published.)\"}\r\n                    initialValue={richDescription}\r\n                    onChange={updateRichDescriptionValue}\r\n                    customStyles={customStylesHere}\r\n                  />}\r\n\r\n                <PercentagesRegimeActivator user={pushupContext.user} />\r\n\r\n              </SCard>\r\n            </Accordion.Collapse>\r\n          </Card>\r\n        </Accordion>\r\n\r\n\r\n\r\n        {submitted ? <h1 style={{ backgroundColor: 'green', textAlign: 'center', color: 'white', padding: '20px' }}>Submitted. Great Work!</h1>\r\n          : <SLink\r\n            as='button'\r\n            style={{ display: 'block', width: '100%', margin: '10px auto', textAlign: 'center' }}\r\n            type=\"submit\"\r\n            onClick={handleFormSubmit}>\r\n            Save {adjustingNotCreating >= 0 ? 'Changes' : 'Plan'}\r\n          </SLink>}\r\n        {/* <button onClick={handleTest}>Plan test</button> */}\r\n        {/* </form> */}\r\n      </PlanContext.Provider>\r\n    </SPlan>\r\n  );\r\n};\r\n\r\nexport default withRouter(ShowPersonalPlanToUserToAdjust);","import React from 'react';\r\nimport { SLink } from '../../../App';\r\nimport ShowPersonalPlanToUserToAdjust from './ShowPersonalPlanToUserToAdjust';\r\n\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\n\r\n\r\n////delete\r\n// import PushUpsContext from '../state/PushUpsContextState';\r\n////up to here\r\n\r\n\r\nconst AdjustPersonalPushupPlan = (props) => {\r\n  //newest\r\n  let { user, updateUser,publicPlans } = React.useContext(PushUpsContext);\r\n  let positionFrom0 = props.match.params.positionFrom0;\r\n  let id = props.match.params.id;\r\n  let publicPlan = false;\r\n  console.log(\"XXXX \", props.match.params);\r\n  // let plan=user.pushupPlans.personal[positionFrom0];\r\n  let plan;\r\n  if (user) {\r\n    if (positionFrom0 >= 0) {\r\n      plan = user.pushupPlans.personal[positionFrom0]\r\n    } else if (positionFrom0==='-125') {\r\n      console.log(\"this is public plan!\");\r\n      plan = publicPlans.find((plan, planPositionFrom0) => {\r\n        positionFrom0 = planPositionFrom0;\r\n        publicPlan = true;\r\n        return plan._id === id\r\n      })\r\n    } else {\r\n      plan = user.pushupPlans.personal.find((plan, planPositionFrom0) => {\r\n        positionFrom0 = planPositionFrom0;\r\n        return plan._id === id\r\n      })\r\n    }\r\n  }\r\n  console.log(\"PLAN \", plan);\r\n\r\n  //old -  to renew\r\n  // const [plan, setPlan] = React.useState(null);\r\n\r\n  //renew following line\r\n  let stateP = props.location.state;\r\n\r\n  ////////////delete from here\r\n  // const [stateP, setStateP] = React.useState(props.location.state);\r\n  // let { user, updateUser } = React.useContext(PushUpsContext);\r\n  // React.useEffect(() => {\r\n  //   if (!user) return;\r\n  //   setStateP({\r\n  //     personalPlanPositionFrom0: 1,\r\n  //     plan: user.pushupPlans.personal[1]\r\n  //   })\r\n  // }, [user])\r\n  ////////////delete up to here\r\n\r\n\r\n  console.log(\"props location state: \", stateP);\r\n  // console.log(\"props location state: \",props.location.state);\r\n\r\n  // React.useEffect(() => {\r\n  //   if (props.location.state) {\r\n  //     setPlan(props.location.state);\r\n  //     console.log(\"adjust if true\");\r\n  //     console.log(\"plan: \", plan);\r\n  //   }\r\n  //  }, []);\r\n  console.log(\"plan in state (in adjust): \", plan);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Adjust plan</h1>\r\n      {/* <p>position: {stateP.personalPlanPositionFrom0}</p> */}\r\n      {/* {stateP != undefined ? <ShowPersonalPlanToUserToAdjust planToAdjust={stateP.plan} adjustingNotCreating={stateP.personalPlanPositionFrom0} /> */}\r\n      {plan != undefined ? <ShowPersonalPlanToUserToAdjust planToAdjust={plan} adjustingNotCreating={positionFrom0} publicPlan={publicPlan} />\r\n        : <p>loading (or error if it takes too long :-).</p>}\r\n      {/*  <p>State undefined. No plan selected now. Go back and select plan to adjust.</p>} */}\r\n\r\n      {/* {(typeof plan == \"object\") ? <div>{JSON.stringify(plan)}</div> : <p> {plan} </p>} */}\r\n      {/* {plan!=null ?? <ShowPersonalPlanToUserToAdjust planToAdjust={plan} />} */}\r\n      {/* {plan ?? <p>xxdddd</p>} */}\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdjustPersonalPushupPlan;","import React from 'react';\r\nimport { SLink } from '../../../App';\r\n// import styled from 'styled-components';\r\nimport { createPersonalPLANStarter } from './cratingObjectsfunctions'\r\nimport ShowPersonalPlanToUserToAdjust from './ShowPersonalPlanToUserToAdjust';\r\n\r\n\r\nconst CreatingPersonalPushupPlan = () => {\r\n  const [planX, setPlanX] = React.useState(null);\r\n\r\n  const createPersonalPushupPlan = () => {\r\n    let newPlan = createPersonalPLANStarter(\"My 1\");\r\n    setPlanX(newPlan);\r\n    console.log(\"new plan template created:\", newPlan);\r\n  }\r\n\r\n  // createPersonalPushupPlan();\r\n  React.useEffect(() => {\r\n    createPersonalPushupPlan();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {planX ? <ShowPersonalPlanToUserToAdjust planToAdjust={planX} /> : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreatingPersonalPushupPlan;","import React from 'react';\r\nimport { TrainingContext, skipThisDay } from './RunTraining';\r\n\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\n\r\n\r\n\r\nconst CurrentTrainingInfo = ({history}) => {\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n  let pushupContext = React.useContext(pushupsContext);\r\n\r\n\r\n  const skipThisDay = async () => {\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/setTheNextTraining', {rescheduleDates:true});\r\n    history.push('/pushups');\r\n    pushupContext.updateUser({ ...updatedUser });\r\n    await new Promise(resolve => setTimeout(resolve, 250));\r\n    history.push('/pushups/startMyTraining');\r\n  }\r\n\r\n  // console.log(\"CURRNET TRAINING INFO running\")\r\n  return (\r\n    <div>\r\n      <h1>Current training info:</h1>\r\n      \r\n      <h4>\r\n        Training Number: {trainingState.main.trainingNumber}\r\n        <p>Training Name: {trainingState.main.training.name ? ('\"' + trainingState.main.training.name + '\"') : '(no name)'}</p>\r\n        \r\n      </h4>\r\n      <p>Part of plan: {trainingState.main.plan.name}</p>\r\n\r\n      {/* trainingState.main.setNumberFrom1 */}\r\n      <ul>{trainingState.main.training.sets.map((set, index) =>\r\n        <li key={index} style={{backgroundColor:index<trainingState.main.setNumberFrom1-1 ? 'gray':(index===trainingState.main.setNumberFrom1-1 ? 'yellow':'lightGray')}}>\r\n          {/* Set {index + 1}: {set.reps ? `${set.reps} reps` : `${set.duration} seconds`} */}\r\n          Set {index + 1}: {set.reps} reps\r\n          <br/>\r\n          Exercise Notes: {set.repsNotes}\r\n          <br/>\r\n          Break after: {set.breakAfterInSeconds}s.\r\n          <br/>\r\n          Break Notes: {set.breakNotes}\r\n\r\n        </li>)}\r\n      </ul>\r\n      \r\n      <div style={{position:'fixed',bottom:'0',width:'100%', background:'black', display:'flex',justifyContent:'center'}}>\r\n        <button style={{width:'80%',fontSize:'1.5rem', margin:'1rem',background:'LightGreen'}} onClick={() => { setTrainingState({ ...trainingState, stage: (trainingState.stage + 1) }) }}>{trainingState.main.continueStartedTraining===true? 'Continue':'Start'}</button>\r\n      </div>\r\n      \r\n     {pushupContext.user.pushupPlans.current.personal==='yes-only' && <button onClick={skipThisDay} style={{fontSize:'1rem', margin:'1rem'}}>Skip this training.</button>}\r\n     <br/><br/>\r\n      <br/><br/>\r\n      <br/><br/>\r\n      <br/><br/> \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(CurrentTrainingInfo);","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { TrainingContext } from './RunTraining';\r\n\r\nconst SScreen = styled.div`\r\nbackground-color: yellow;\r\n`\r\nconst SButton = styled.button`\r\nwidth:30%;\r\npadding:3%;\r\nmargin:2%;\r\n\r\nheight:100px;\r\nfont-size:2rem;\r\n/* border-radius: 20px 10px 20px 0; */\r\nborder-radius: 10px;\r\n/* border-bottom-right-radius: 20px; */\r\n`\r\nconst SButton2 = styled(SButton)`\r\nwidth:60%;\r\n`\r\n\r\n\r\nconst ShowSetToDo = () => {\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n  let isLastSet = trainingState.main.setNumberFrom1 >= trainingState.main.training.sets.length ? true : false;\r\n\r\n  let set = trainingState.main.set;\r\n  console.log(\"trainingState SET\", trainingState);\r\n  // console.log(\"CURRNET SET running\")\r\n  // console.log(\"set info\", set)\r\n\r\n  // const startBreakLogData = () => {\r\n  //   setTrainingState({ red: !trainingState.red });\r\n  //   setTrainingState({ stage: 2 });\r\n  // }\r\n  return (\r\n    <SScreen>\r\n      <h1>SET To Do</h1>\r\n      {isLastSet && <h2>This is your last set.</h2>}\r\n      {/* <p style={{fontSize:'4rem', textAlign:'center', marginBottom:'-2rem', fontWeight:'bold'}}>{set.reps ? set.reps : set.duration}</p> */}\r\n      <p style={{fontSize:'4rem', textAlign:'center', marginBottom:'-2rem', fontWeight:'bold'}}>{set.reps}</p>\r\n      <p style={{fontSize:'2rem', textAlign:'center',marginTop:'0'}}>reps</p>\r\n      {/* <p style={{fontSize:'2rem', textAlign:'center',marginTop:'0'}}>{set.reps ? 'reps' : 'seconds'}</p> */}\r\n      {set.repsNotes &&\r\n        <p> Exercise Notes: {set.repsNotes}</p>}\r\n      {/* <button onClick={startBreakLogData}>Start Break (+ Log data)</button> */}\r\n\r\n      {!isLastSet && <h3 style={{ textAlign: 'center' }}>Start break and...</h3>}\r\n      <SButton onClick={() => { setTrainingState({ ...trainingState, stage: 2 }) }}>\r\n        Adjust\r\n      </SButton>\r\n      <SButton2 onClick={() => { setTrainingState({ ...trainingState, stage: 2.5 }) }}>\r\n        Save\r\n      </SButton2>\r\n      <h3 style={{textAlign:'center'}}>...data</h3>\r\n\r\n    </SScreen>\r\n  );\r\n};\r\n\r\nexport default ShowSetToDo;","import React from 'react';\r\n\r\nimport { SCounter, SCounterSmall } from '../personalPushupPlans/Set';\r\nimport imgMinus from '../img/minus.png';\r\nimport imgPlus from '../img/plus.png';\r\n\r\nconst CounterTool = ({ small, big, value, setValue }) => {\r\n\r\n  const updateByClickedValue = (howMuch) => {\r\n    setValue(value + howMuch > 0 ? value + howMuch : 0);\r\n  }\r\n\r\n  const updateByTypedValue = ({ target: { value } }) => {\r\n    setValue((value * 1)>0 ? value*1 : undefined );\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <SCounterSmall onClick={() => updateByClickedValue(-small)}> <img src={imgMinus} alt=\"\"></img> <div >{small}</div>          </SCounterSmall>\r\n      <SCounter onClick={() => updateByClickedValue(-big)}><img src={imgMinus} alt=\"\"></img> <div >{big}</div></SCounter>\r\n      {/* <input type='number' onChange={updateByTypedValue} value={value * 1}></input> */}\r\n      <input type='number' onChange={updateByTypedValue} value={value}></input>\r\n      <SCounter onClick={() => updateByClickedValue(big)}><img src={imgPlus} alt=\"\"></img> <div >{big}</div></SCounter>\r\n      <SCounterSmall onClick={() => updateByClickedValue(small)}><img src={imgPlus} alt=\"\"></img> <div >{small}</div></SCounterSmall>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CounterTool;","import React from 'react';\r\nimport { TrainingContext } from './RunTraining';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\n\r\n\r\nconst BreakTimer = ({ external, duration, timeLeft,breakExtensionInSeconds, breakStartedAt }) => {\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  // let pushupContext = React.useContext(PushUpsContext);\r\n  // let {user} = React.useContext(PushUpsContext);\r\n\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n\r\n  // const [remindingBreakTime, setRemindingBreakTime] = React.useState(trainingState.main.set.breakAfterInSeconds);\r\n  const { remindingBreakTime, setRemindingBreakTime } = timeLeft;\r\n\r\n\r\n\r\n  // React.useEffect(\r\n  //   () => {\r\n  //     // duration.setBreakDuration(duration.breakDuration + 1);\r\n  //     duration.setBreakDuration(durationBefore=> durationBefore + 1);\r\n\r\n  //     if (remindingBreakTime < 1) {\r\n  //       // console.log(\"time is UP!\");\r\n  //       if (!external.breakTimerFinished) {\r\n  //         console.log(\"firing timer FINISHEd\");\r\n  //         external.setBreakTimerFinished(true);\r\n  //       };\r\n  //     };\r\n  //     const id = setInterval(() => setRemindingBreakTime(remindingBreakTime - 1), 1000);\r\n  //     return () => {\r\n  //       clearInterval(id);\r\n  //     };\r\n  //   },\r\n  //   [remindingBreakTime]\r\n  // );\r\n\r\n   //break 2.0\r\n  React.useEffect(\r\n    () => {\r\n      if (remindingBreakTime < 1) {\r\n        // console.log(\"time is UP!\");\r\n        if (!external.breakTimerFinished) {\r\n          console.log(\"firing timer FINISHEd\");\r\n          external.setBreakTimerFinished(true);\r\n        };\r\n      };\r\n\r\n      // console.log(\"break duration 2.0: reminding time:\", remindingBreakTime);\r\n      // console.log(\"break duration 2.0: \", duration.breakDuration);\r\n\r\n      let difference = Math.round((Date.now() - breakStartedAt.getTime()) / 1000)+1; //has to start with 1, otherwise other value wouldn't update\r\n      // console.log(\"difference: \", difference);\r\n      duration.setBreakDuration(difference);\r\n      const id = setInterval(() => setRemindingBreakTime(trainingState.main.set.breakAfterInSeconds - difference + breakExtensionInSeconds), 1000);\r\n      return () => { clearInterval(id); };\r\n    }, [remindingBreakTime]);\r\n\r\n  return (\r\n    <span style={{ fontSize: '4rem' }}>{remindingBreakTime}</span>\r\n  );\r\n};\r\n\r\nexport default BreakTimer;","import React from 'react';\r\n\r\nimport useSound from 'use-sound';\r\nimport soundGetReady from '../../sounds/files/getReady/taffFemale.mp3';\r\nimport soundBeep from '../../sounds/files/facebook/Complete and Success/Complete 2.m4a';\r\nimport soundStart from '../../sounds/files/startBlow/airHorn.mp3';\r\n\r\nconst BreakSounds = ({\r\n  breakLength,\r\n  breakDuration,\r\n  soundsOn\r\n}) => {\r\n  const [soundBeepPlay] = useSound(soundBeep);\r\n  const [soundGetReadyPlay] = useSound(soundGetReady);\r\n  const [soundStartPlay] = useSound(soundStart);\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (!soundsOn) return;//don't play sounds if that is the user's setting\r\n    let remindingBreakTime = breakLength - breakDuration;\r\n    if (remindingBreakTime === 10) soundGetReadyPlay();\r\n    if (remindingBreakTime < 4 && remindingBreakTime > 0) soundBeepPlay();\r\n    if (remindingBreakTime === 0) soundStartPlay();\r\n  }, [breakDuration])\r\n\r\n  return (\r\n    <></>\r\n  );\r\n};\r\n\r\nexport default BreakSounds;","import React from 'react';\r\n\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport { TrainingContext } from './RunTraining';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData'\r\n\r\nimport { SCounter, SCounterSmall } from '../personalPushupPlans/Set';\r\nimport imgMinus from '../img/minus.png';\r\nimport imgPlus from '../img/plus.png';\r\nimport CounterTool from '../basicComponents/CounterToolOld';\r\nimport BreakTimer from './BreakTimer';\r\nimport BreakSounds from './BreakSounds';\r\nimport CounterAllIn from '../basicComponents/CounterAllIn';\r\nimport { returnAssessmentFromAssID } from '../functions/basics';\r\n\r\n\r\nimport useSound from 'use-sound';\r\nimport soundBreakBackground from '../../sounds/files/breakMusic/Derek_Clegg_-_09_-_Youre_The_Dummy.mp3';\r\n\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\nmargin: 0 5px 8px 5px;\r\n`\r\nlet stopMusic = false;\r\n\r\nconst StartBreakLogData = ({ saveDefaultData }) => {\r\n\r\n\r\n  const [breakTimerFinished, setBreakTimerFinished] = React.useState(false);\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n  let set = trainingState.main.set;\r\n\r\n\r\n  // const [breakDuration, setBreakDuration] = React.useState(-1); //if 0, numbers don't add up elsewhere. don't change!\r\n  const [breakDuration, setBreakDuration] = React.useState(0); //new version\r\n\r\n  const [setWasSavedToHistory, setSetSavedToHistory] = React.useState(trainingState.main.set.reps ? false : true);\r\n  const [updatedReps, setUpdatedReps] = React.useState(set.reps);\r\n  const [updatedRepsForChangesInPlan, setUpdatedRepsForChangesInPlan] = React.useState(set.reps);\r\n  const [updatedRepsAsPercentageForChangesInPlan, setUpdatedRepsAsPercentageForChangesInPlan] = React.useState(set.repsAsPercentage ? set.repsAsPercentage : undefined);\r\n  let isLastSet = trainingState.main.setNumberFrom1 >= trainingState.main.training.sets.length ? true : false;\r\n\r\n  const [notes, setNotes] = React.useState(trainingState.main.set.repsNotes);\r\n  const [notesForChangesInPlan, setNotesForChangesInPlan] = React.useState(trainingState.main.set.repsNotes);\r\n  const [changePlan, setChangePlan] = React.useState(false);\r\n\r\n  //for break2.0\r\n  // const [breakStartedAt, setBreakStartedAt] = React.useState(new Date());\r\n  const [breakStartedAt] = React.useState(new Date());\r\n  // let breakStartedAt;\r\n  // React.useEffect(() => {\r\n  //   console.log(\"SAVING HISTORY STARTING - use effect running\");\r\n  //   breakStartedAt = new Date();\r\n  // }, []);\r\n\r\n\r\n\r\n  // const updateNotes = async () => {\r\n  //   await ;\r\n  // }\r\n\r\n  const registerPlanChanges = (number) => {\r\n    setUpdatedRepsForChangesInPlan(number);\r\n    setChangePlan(true);\r\n  }\r\n  //save data\r\n  const saveRepsToHistory = async () => { //onClick function\r\n    console.log(\"SAVING HISTORY STARTING\");\r\n    setSetSavedToHistory(true); //here!?!?\r\n\r\n    let setToSave = {\r\n      reps: updatedReps,\r\n      executedRepsAsPercentageOfInitialAssessment: updatedReps / trainingState.main.initialAssessmentRepsNumber * 100, //%$£101\r\n      repsNotes: notes,\r\n      date: new Date(),\r\n      break: { startedAt: breakStartedAt }\r\n    }\r\n    // console.log(\"setToSave: \", setToSave);\r\n\r\n    const add1ToSetsDone = () => {\r\n      trainingState.main.setsDone = trainingState.main.setsDone + 1;\r\n      setTrainingState({ ...trainingState });\r\n    }\r\n\r\n    //IF saving FIRST SET\r\n    if (trainingState.main.setsDone === 0 && trainingState.main.continueStartedTraining === false) {\r\n      //create training in user's history\r\n      console.log(\"Saving first set. create training in user's history...\")\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/startNewTraining',\r\n        {\r\n          trainingNumber1IsFirst: trainingState.main.trainingNumber,\r\n          trainingName: trainingState.main.training.name,\r\n          trainingStartedAt: trainingState.main.trainingStartedAt,\r\n          set: setToSave\r\n        });\r\n      pushupContext.updateUser({ ...updatedUser });\r\n      console.log(\"NEW TRAINING IN HISTORY (with 1 set) was CREATED, sets done updated. (Both user and training context should be refreshed.)\");\r\n    } else {\r\n      let thisTrHistory = pushupContext.user.pushupPlans.current.trainingHistory[0];\r\n      thisTrHistory.sets.unshift(setToSave);\r\n      // trainingState.main.trExecution.sets.unshift(setToSave);\r\n      // let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateTrainingExecution', trainingState.main.trExecution);\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateTrainingExecution', thisTrHistory);\r\n    }\r\n    add1ToSetsDone();\r\n\r\n    //update changes in the plan?\r\n    console.log(\"change plan data: \", changePlan, updatedRepsForChangesInPlan, notesForChangesInPlan);\r\n    // console.log(\"sets done: \", trainingState.main.setsDone);\r\n    if (changePlan) {\r\n\r\n      let planDataToUpdate = { reps: updatedRepsForChangesInPlan, repsNotes: notesForChangesInPlan, repsAsPercentage: updatedRepsAsPercentageForChangesInPlan };\r\n      console.log(\"plan shall be updated\", planDataToUpdate);\r\n      const updatedUserX = await postJsonDataUrlAfterAPIpushups('/saveChangesInPersonalPlanContentUsingPlanID', { planDataToUpdate });\r\n      // console.log(\"dataFromBackend: \", updatedUserX);\r\n\r\n      pushupContext.updateUser({ ...updatedUserX });\r\n      // pushupContext.updateUser(updatedUserX);\r\n      // for (let i = 1; i < 100; i++) {\r\n\r\n      //         await new Promise(resolve => setTimeout(resolve, 100));\r\n      //         console.log(\"S0 current training info set1: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[0]);\r\n      //         console.log(\"S0 current training info set2: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[1]);\r\n      //       }\r\n\r\n      // console.log(\"S1 current training info set1: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[0]);\r\n      // console.log(\"S1 current training info set2: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[1]);\r\n      // console.log(\"UUUUUU Set In Plan shall be updated.\")\r\n      setChangePlan(false);\r\n    }\r\n\r\n\r\n    // set the next training\r\n    if (isLastSet) {\r\n      console.log(\"XXXXXX this was L A S T set: \", isLastSet);\r\n      //mark this training as completed\r\n\r\n      let updatedUser2 = await postJsonDataUrlAfterAPIpushups('/setTheNextTraining', { markLastTrainingAsSuccessfullyCompleted: true });\r\n      pushupContext.updateUser({ ...updatedUser2 });\r\n    }\r\n    console.log(\"SAVING HISTORY FINISHING\");\r\n    // console.log(\"Scurrent training info set1: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[0]);\r\n    // console.log(\"Scurrent training info set2: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[1]);\r\n  }\r\n\r\n  //if user selected to SAVE Predefined Reps (or duration-in the future)\r\n  let hideRepsToSave = false;\r\n  if (saveDefaultData && !setWasSavedToHistory) {\r\n    hideRepsToSave = true;\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (saveDefaultData) {\r\n      saveRepsToHistory();\r\n    }\r\n  }, []);\r\n\r\n//for music and extending breaks\r\n // let remindingBreakTime = set.breakAfterInSeconds - breakDuration;\r\n  const [remindingBreakTime, setRemindingBreakTime] = React.useState(trainingState.main.set.breakAfterInSeconds);\r\n  const [breakExtensionInSeconds, setBreakExtensionInSeconds] = React.useState(0);\r\n\r\n  ///MUSIC\r\n  const [soundBreakBackgroundPlay, BackgroundMusicSettings] = useSound(soundBreakBackground);\r\n  const [backgroundMusicFaded, setBackgroundMusicFaded] = React.useState(false);\r\n  const [backgroundMusicFaded2, setBackgroundMusicFaded2] = React.useState(false);\r\n  const [backgroundMusicStarted, setBackgroundMusicStarted] = React.useState(false);\r\n  const [backgroundMusicPlaying, setBackgroundMusicPlaying] = React.useState(false);\r\n\r\n \r\n\r\n  React.useEffect(() => {\r\n    // console.log(\"musicOn? \", pushupContext.user.settings.training.music);\r\n    // console.log(\"backgroundMusicPlaying\", backgroundMusicPlaying);\r\n    // console.log(\"backgroundMusicFaded\", backgroundMusicFaded);\r\n    if (!pushupContext.user.settings.training.music) {  //don't play music if that is user's setting\r\n      if (backgroundMusicStarted && backgroundMusicPlaying && !backgroundMusicFaded && BackgroundMusicSettings.sound) {// stop music in case it was playing\r\n        // console.log(\"userFade\");\r\n        BackgroundMusicSettings.sound.fade(1, 0, 1000);\r\n        // setBackgroundMusicFaded(true);\r\n        setBackgroundMusicPlaying(false);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // console.log(\"breakDuration: \", breakDuration);\r\n    // console.log(BackgroundMusicSettings.sound)\r\n\r\n    if (breakDuration >= 2 && BackgroundMusicSettings.sound && !backgroundMusicPlaying && !backgroundMusicFaded) { //smaller number could cause error as music may not be ready\r\n      // console.log(\"playing-volume up\")\r\n      BackgroundMusicSettings.sound.fade(0, 1, 4000);\r\n      setBackgroundMusicPlaying(true);\r\n      if (!backgroundMusicStarted) { soundBreakBackgroundPlay(); console.log(\"play-Start\") }\r\n      setBackgroundMusicStarted(true);\r\n    }\r\n    if (remindingBreakTime <= 13 && backgroundMusicPlaying && !backgroundMusicFaded2 && BackgroundMusicSettings.sound) {\r\n      // console.log(\"fading prep\");\r\n\r\n      BackgroundMusicSettings.sound.fade(1, 0.3, 1000);\r\n      setBackgroundMusicFaded2(true);\r\n    }\r\n    if (remindingBreakTime <= 10 && backgroundMusicPlaying && !backgroundMusicFaded && BackgroundMusicSettings.sound) {\r\n      // console.log(\"fading main\");\r\n      BackgroundMusicSettings.sound.fade(0.3, 0, 5000);\r\n      setBackgroundMusicFaded(true);\r\n      setBackgroundMusicPlaying(false);\r\n      // console.log(\"FADE set to TRUE!!\")\r\n    }\r\n  }, [breakDuration, pushupContext])\r\n\r\n\r\n\r\n\r\n  const moveToTheNextStage = async () => {\r\n    // console.log(\"MOVE TO THE NEXT STAGE f.\");\r\n\r\n    //save currently finished break duration (and notes)...\r\n    if (!isLastSet) {\r\n      let thisTrHistory = pushupContext.user.pushupPlans.current.trainingHistory[0];\r\n      thisTrHistory.sets[0].breakDuration = breakDuration;\r\n      thisTrHistory.sets[0].breakNotes = trainingState.main.set.breakNotes;\r\n      thisTrHistory.sets[0].break.finishedAt = new Date();\r\n\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateTrainingExecution', thisTrHistory);\r\n      pushupContext.updateUser({ ...updatedUser });\r\n\r\n      trainingState.main.setNumberFrom1 = thisTrHistory.sets.length + 1;\r\n      trainingState.main.set = trainingState.main.training.sets[trainingState.main.setNumberFrom1 - 1];\r\n      trainingState.stage = 1;\r\n    } else {\r\n      //move to the next stage...\r\n      trainingState.stage = 10; //on the end by adding 1 to stage it will finish\r\n    }\r\n    console.log(\"trainingStateXX\", trainingState);\r\n    setTrainingState({ ...trainingState });\r\n\r\n    //fade music\r\n    console.log(\"FADE???\", backgroundMusicFaded)\r\n    if (backgroundMusicPlaying && backgroundMusicFaded == false && BackgroundMusicSettings.sound) {\r\n      console.log(\"FADE-YES\");\r\n      BackgroundMusicSettings.sound.fade(1, 0, 1000);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if ((breakTimerFinished || isLastSet) && setWasSavedToHistory) {\r\n      // console.log(\"set saved and break finished -> time to update page\")\r\n      moveToTheNextStage();\r\n    }\r\n  }, [breakTimerFinished, setWasSavedToHistory]);\r\n\r\n\r\n\r\n  //plan with %\r\n  const returnsUpdatedPercentagesValue = (newPercentageValue) => {\r\n    setUpdatedRepsAsPercentageForChangesInPlan(newPercentageValue);\r\n    let initialAssesmentReps = returnAssessmentFromAssID(pushupContext.user, pushupContext.user.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n    // console.log(\"initialAssesmentReps:\", initialAssesmentReps);\r\n    // setUpdatedRepsForChangesInPlan;\r\n    let calculatedReps = Math.round(newPercentageValue / 100 * initialAssesmentReps);\r\n    setUpdatedRepsForChangesInPlan(calculatedReps);\r\n    setChangePlan(true);\r\n  }\r\n\r\n  const returnupdatedRepsAsPartOfPercentagesValue = (newRepValue) => {\r\n    setUpdatedRepsForChangesInPlan(newRepValue);\r\n    let initialAssesmentReps = returnAssessmentFromAssID(pushupContext.user, pushupContext.user.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n    // console.log(\"initialAssesmentReps:\", initialAssesmentReps);\r\n    // setUpdatedRepsForChangesInPlan;\r\n    let calculatedPercentages = Math.round(newRepValue / initialAssesmentReps * 100);\r\n    setUpdatedRepsAsPercentageForChangesInPlan(calculatedPercentages);\r\n    setChangePlan(true);\r\n  }\r\n\r\n  // if (pushupContext.user) console.log(\"set.repsAsPercentage: \", set.repsAsPercentage);\r\n\r\n\r\n  //extend break time\r\n  // const [remindingBreakTime, setRemindingBreakTime] = React.useState(trainingState.main.set.breakAfterInSeconds);\r\n\r\n  const extendBreakBy = secondsToExtend => {\r\n    setBreakExtensionInSeconds(previousState => previousState + 30);\r\n}\r\n\r\n  return (\r\n    <div>\r\n\r\n      {!isLastSet && <BreakSounds soundsOn={pushupContext.user.settings.training.sound} breakDuration={breakDuration} breakLength={set.breakAfterInSeconds} />}\r\n      {!isLastSet ? <span>Break: <BreakTimer external={{ breakTimerFinished, setBreakTimerFinished }} duration={{ breakDuration, setBreakDuration }} timeLeft={{remindingBreakTime, setRemindingBreakTime}} breakExtensionInSeconds={breakExtensionInSeconds} breakStartedAt={breakStartedAt} /> </span> : <span>This is the last set.</span>}\r\n        <button onClick={()=>extendBreakBy(30)}>+30 seconds</button>\r\n      {/* Skip break btn. */}  {setWasSavedToHistory && <button onClick={moveToTheNextStage}>Skip break</button>}\r\n\r\n      {/* LOGGING DATA */}\r\n      {set.reps && !setWasSavedToHistory && hideRepsToSave == false &&\r\n        <div>\r\n          {/* reps history */}\r\n          <div style={{ backgroundColor: 'brown', padding: '5px', margin: '5px' }}>\r\n            <h1>Save to training history...</h1>\r\n            <p>(assuming reps needs to be logged, not time)</p>\r\n            <p>Reps done: </p>\r\n\r\n            {/* <CounterTool small={1} big={5} value={updatedReps} setValue={setUpdatedReps} /> */}\r\n            <CounterTool small={1} big={5} value={updatedReps} setValue={setUpdatedReps} />\r\n\r\n            {/* notes */}\r\n\r\n            <p>{notes ? 'Adjust' : 'Add'} note:</p>\r\n            <textarea value={notes} onChange={(e) => setNotes(e.target.value)} style={{ height: '100px', width: '100%' }} ></textarea>\r\n            <br />\r\n            {/* <button style={{ margin: '10px' }} onClick={saveRepsToHistory}>{isLastSet ? 'Save set and finish training' : 'Save set'}</button> */}\r\n          </div>\r\n\r\n          {/* Adjust this set in the plan (if it is personal adjustable plan) */}\r\n          {trainingState.main.plan.personal && trainingState.main.plan.personal === 'yes-only' &&\r\n            <Accordion className='p-3' style={{ backgroundColor: 'orange' }}>\r\n              <Card >\r\n                <Accordion.Toggle as={Card.Header} eventKey=\"1\" className=\"p-3 mb-2 bg-info text-white MMpointer  text-center btnOpacity\">\r\n                  Adjust this set also in my pushup plan\r\n              </Accordion.Toggle>\r\n                <Accordion.Collapse eventKey=\"1\">\r\n                  <SCard>\r\n                    <p>(assuming reps needs to be logged, not time)</p>\r\n\r\n                    {!set.repsAsPercentage && <div>\r\n                      <p>Reps to do: </p>\r\n                      <CounterTool small={1} big={5} value={updatedRepsForChangesInPlan} setValue={registerPlanChanges} />\r\n\r\n                    </div>}\r\n\r\n                    {set.repsAsPercentage &&\r\n                      <div>\r\n                        <CounterAllIn settings={[1, 5, returnsUpdatedPercentagesValue, updatedRepsAsPercentageForChangesInPlan, '%', 'of Max Reps']} />\r\n                        {/* <p style={{ textAlign: 'center' }}>makes... </p> */}\r\n                        <p style={{ textAlign: 'center' }}>= </p>\r\n                        <CounterAllIn settings={[1, 5, returnupdatedRepsAsPartOfPercentagesValue, updatedRepsForChangesInPlan, 'reps']} />\r\n                      </div>}\r\n\r\n                    <p>{notes ? 'Adjust' : 'Add'} note:</p>\r\n                    <textarea value={notesForChangesInPlan} onChange={(e) => { setNotesForChangesInPlan(e.target.value); setChangePlan(true) }} style={{ height: '100px', width: '100%' }} ></textarea>\r\n                    <br />\r\n                  </SCard>\r\n                </Accordion.Collapse>\r\n              </Card>\r\n            </Accordion>\r\n          }\r\n\r\n\r\n          <button style={{ display: 'block', width: '80%', margin: '10px 10%', fontSize: '2rem', textAlign: 'center' }} onClick={saveRepsToHistory}>{isLastSet ? 'Save and finish training' : 'Save'}</button>\r\n        </div>}\r\n\r\n      {/* show BREAK info if it exists: */}\r\n      {\r\n        !isLastSet && setWasSavedToHistory && trainingState.main.set.breakNotes &&\r\n        <div>\r\n          <h2>Break info:</h2>\r\n          <p>{trainingState.main.set.breakNotes}</p>\r\n        </div>\r\n      }\r\n\r\n      {/* show next set info if it exists: */}\r\n      {\r\n        !isLastSet && setWasSavedToHistory &&\r\n        <div>\r\n          <h2>Next set:</h2>\r\n          <p>{trainingState.main.training.sets[trainingState.main.setNumberFrom1].reps ?\r\n            trainingState.main.training.sets[trainingState.main.setNumberFrom1].reps + ' reps'\r\n            : trainingState.main.training.sets[trainingState.main.setNumberFrom1].duration + ' seconds'}\r\n          </p>\r\n          <p>{trainingState.main.training.sets[trainingState.main.setNumberFrom1].repsNotes && trainingState.main.training.sets[trainingState.main.setNumberFrom1].repsNotes}</p>\r\n        </div>\r\n      }\r\n\r\n\r\n\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default StartBreakLogData;","import React from 'react';\r\n\r\nimport useSound from 'use-sound';\r\nimport soundTrainingFinished from '../../sounds/files/trainingFinishedCelebration/Trumpets8s.mp3';\r\n\r\n\r\nconst TrainingFinished = ({ soundOn }) => {\r\n  const [soundTrainingFinishedPlay] = useSound(soundTrainingFinished);\r\n\r\n  React.useEffect(() => {\r\n    if (!soundOn) return; //don't play sound if that is user's setting\r\n    soundTrainingFinishedPlay();\r\n  }, [soundTrainingFinishedPlay]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Training finished. Well done!</h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrainingFinished;","import React from 'react';\r\nimport { TrainingContext } from './RunTraining';\r\nimport CurrentTrainingInfo from './CurrentTrainingInfo';\r\nimport ShowSetToDo from './ShowSetToDo';\r\nimport StartBreakLogData from './StartBreakLogData';\r\nimport BreakContinued from './BreakContinued';\r\nimport TrainingFinished from './TrainingFinished';\r\n\r\nimport pushupsContext from '../state/PushUpsContextState';\r\n\r\n\r\nconst TrainingSwitcher = () => {\r\n  let pushupContext = React.useContext(pushupsContext);\r\n\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  // console.log(\"TC: \", trainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n  // console.log(\"trainingState main: \", trainingState.main);\r\n  // console.log(\"stage: \", trainingState.stage);\r\n  \r\n\r\n  switch (trainingState.stage) {\r\n    case 0: {return <CurrentTrainingInfo/>; break;}\r\n    case 1: {return <ShowSetToDo/>; break;}\r\n    case 2: { return <StartBreakLogData />; break;}\r\n    case 2.5: { return <StartBreakLogData saveDefaultData/>; break;}\r\n    // case 3: { return <BreakContinued/>; break;}\r\n    case 10: { return <TrainingFinished soundOn={pushupContext.user.settings.training.sound}/>; break;}\r\n      default: return <p>TrainingSwitcher - Training stage not found.</p>\r\n  }\r\n};\r\n\r\nexport default TrainingSwitcher;","import React from 'react';\r\n\r\nconst TrainingStopWatch = () => {\r\n  const [trainingTime, setTrainingTime] = React.useState({seconds:0,minutes:0});\r\n  React.useEffect(\r\n    () => {\r\n      let id;\r\n      if (trainingTime.seconds === 59) {\r\n        id = setInterval(() => setTrainingTime({ seconds:0, minutes:trainingTime.minutes+1 }), 1000);\r\n      } else {\r\n        id = setInterval(() => setTrainingTime({ ...trainingTime, seconds: (trainingTime.seconds + 1)}), 1000);\r\n      }\r\n      return () => clearInterval(id);\r\n    },\r\n    [trainingTime]\r\n  );\r\n\r\n\r\n  return (\r\n    <span style={{ marginRight: '15px', padding: '7px', backgroundColor: 'lightBlue' }}>{trainingTime.minutes}m {trainingTime.seconds}s</span>\r\n\r\n  );\r\n};\r\n\r\nexport default TrainingStopWatch;","import React from 'react';\r\n\r\nconst SetsToDoAllIn = ({ trainingState: { stage, main: { training, setNumberFrom1 } } }) => {\r\n  // console.log(\"SETS TO DO: \", setNumberFrom1, training.sets.length);\r\n\r\n\r\n\r\n  return (\r\n    <div style={{ display: 'inline', overflow: 'scroll' }}>\r\n      <span>Sets:</span>\r\n      {training.sets.map((set, index) =>\r\n        <span\r\n          style={{\r\n            backgroundColor:\r\n              `${\r\n              // stage === 0 ? 'lightgrey' :\r\n                index + 1 < setNumberFrom1 ?\r\n                  'grey'\r\n                  : index + 1 === setNumberFrom1 ?\r\n                    ((stage === 1 ||stage===0) ? 'yellow' : 'gray')\r\n                    : 'lightgrey'\r\n              }`,\r\n            padding: '3px',\r\n            margin: '3px'\r\n          }}\r\n          key={index}\r\n        >\r\n          {/* {set.reps ? (set.reps + '') : (set.duration + 's')} */}\r\n          {set.reps}\r\n        </span>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SetsToDoAllIn;","import React from 'react';\r\nimport \"react-toggle/style.css\";\r\nimport Toggle from 'react-toggle';\r\n\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData'\r\n\r\nconst SoundAndMusicControls = () => {\r\n  let context = React.useContext(pushupsContext);\r\n\r\n  const updateUserTrainingSettings = async (what, how) => {\r\n    try {\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateTrainingSettings', { what, how });\r\n      // context.user.settings.training[what] = how;\r\n      // console.log(\"user's training music/sound settings updated.\");\r\n      // console.log(\"user with new training set-up: ,\", updatedUser);\r\n      // console.log(\"date now:\", new Date());\r\n      // console.log(\"user with new training set-up: ,\", updatedUser.pushupPlans.current.trainingHistory[0]);\r\n      context.updateUser(updatedUser);\r\n    } catch (err) { console.log(\"e1\", err) }\r\n    // context.updateUser({ ...updatedUser });\r\n  }\r\n\r\n\r\n  let handleTrainingSoundsToggle = ({ target: { checked } }) => {\r\n    // console.log(\"toggle :\", checked);\r\n    updateUserTrainingSettings('sound', checked);\r\n  }\r\n  let handleTrainingMusicToggle = ({ target: { checked } }) => {\r\n    // console.log(\"toggle :\", checked);\r\n    updateUserTrainingSettings('music', checked);\r\n  }\r\n  // console.log(\"CONTEXT MUSIC ISSUE\", context);\r\n  console.log(\"MUSIC context user \", context);\r\n  return (\r\n    <div style={{backgroundColor:'orange', padding:'5px'}}>\r\n      <p style={{textAlign:'center'}}>Training Audio:</p>\r\n      <div style={{ display: 'flex', justifyContent: 'space-evenly' }}>\r\n        {/* <div> */}\r\n        <div style={{padding:'5px', display:'flex',flexFlow:'column'}}>\r\n          <Toggle\r\n            id='trainingSoundsToggle'\r\n            defaultChecked={context.user ? context.user.settings.training.sound : true}\r\n            // defaultChecked={context.user ? false : true}\r\n            onChange={handleTrainingSoundsToggle}\r\n          />\r\n          <label htmlFor='trainingSoundsToggle'>Sounds</label>\r\n        </div>\r\n        <div style={{ padding: '5px', display:'flex',flexFlow:'column' }}>\r\n          <Toggle\r\n            id='trainingMusicToggle'\r\n            // defaultChecked={this.state.cheeseIsReady}\r\n            // defaultChecked={true}\r\n            defaultChecked={context.user ? context.user.settings.training.music : true}\r\n            // defaultChecked={context.user ? false : true}\r\n     \r\n     \r\n            onChange={handleTrainingMusicToggle}\r\n          />\r\n          <label htmlFor='trainingMusicToggle'>Music</label>\r\n        </div>\r\n      </div>\r\n   </div>\r\n  );\r\n};\r\n\r\nexport default SoundAndMusicControls;","import React from 'react';\r\nimport TrainingStopWatch from './TrainingStopWatch';\r\nimport SetsToDoAllIn from './SetsToDoAllIn';\r\nimport SoundAndMusicControls from './SoundAndMusicControls';\r\n\r\nconst TrainingHeaders = ({ trainingState }) => {\r\n  // console.log(\"HHH HH H H H :\", trainingState);\r\n  return (\r\n   <div>\r\n      <div\r\n        style={{\r\n          backgroundColor: 'lightgreen',\r\n          padding: '10px',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          \r\n        }}>\r\n        {/* <h2>Training Headers</h2> */}\r\n        {/* <SetsStillToDo trainingState={trainingState} /> */}\r\n        <SetsToDoAllIn trainingState={trainingState} />\r\n     \r\n        {/* <TotalTrainingTime /> */}\r\n        {/* <TrainingStopWatch /> */}\r\n        <TrainingStopWatch />\r\n        {/* last row: */}\r\n      </div>\r\n      {/* <SoundAndMusicControls/> */}\r\n\r\n   </div>\r\n  );\r\n};\r\n\r\nexport default TrainingHeaders;","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { returnTrueIfDatesHaveTheSameDay } from '../functions/basics';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\n\r\nconst DayOfFinalAssessment = ({history}) => {\r\n  let { user, updateUser } = React.useContext(pushupsContext);\r\n  let initAss = user.assessments.find(ass => ass._id === user.pushupPlans.current.assessments.initialAssessmentID);\r\n\r\n  let isDayOfLastAssessmentToday = () => {\r\n    let assDate = user.assessments[0].date;\r\n    let today = new Date();\r\n    return returnTrueIfDatesHaveTheSameDay(assDate, today);\r\n  }\r\n\r\n  const buttonClickedUseLastAssessmentAsFinal = async () => {\r\n    //%$£03\r\n    console.log(\"click\");\r\n    const updatedUser = await postJsonDataUrlAfterAPIpushups('/setCoreAssessment', { type: 'final'}); //and final as other option\r\n    //redirect to main menu, + alert user\r\n    history.push('/pushups');\r\n    alert('Congrats. You finished 14-days cycle. Now, take coupe of days break or pick a new (or the same) plan to follow.');\r\n    updateUser({ ...updatedUser }); \r\n\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>Today is Day of Final assessment</h1>\r\n      <p>On the end of each Plan, we need to assess, what is your current max.</p>\r\n      <p>\r\n        In your initial assessment you managed to do\r\n        <span style={{ fontSize: '2rem' }}>{initAss.reps}</span>\r\n         reps.\r\n         {initAss.notes && <span>with following notes: \"{initAss.notes}\".</span>}\r\n      </p>\r\n\r\n\r\n      {/* user.pushupPlans.current.assessments */}\r\n\r\n      <div style={{ backgroundColor: 'red' }}>\r\n        {!user.pushupPlans.current.assessments.finalAssessment ?\r\n          (!isDayOfLastAssessmentToday() ? //marked NOT done\r\n            <p>It is time to test your new max reps. Do that (in main menu select \"Test your max reps\") and then come back here.  </p> //reps test not done yet\r\n            : <>\r\n              {/* //reps test done, but not marked as final assessment */}\r\n              {/* <p>You did {user.assessments[0].reps} reps in today's assessment.</p> */}\r\n              <p>You did <span style={{ fontSize: '3rem' }}>{user.assessments[0].reps}</span> reps in today's assessment.</p>\r\n              \r\n              <p>\r\n                To use/log this data as your final assessment, click\r\n            <button onClick={buttonClickedUseLastAssessmentAsFinal}>Mark this data as my Final Assessment</button>\r\n            . (You can allways test your current \"max\" again - In main menu select \"Test your max reps\".)\r\n            </p>\r\n            </>)\r\n          : null //final ass marked done\r\n        }\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(DayOfFinalAssessment);","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { withRouter } from 'react-router-dom';\r\n// import CurrentTrainingInfo from './CurrentTrainingInfo';\r\n// import ShowSetToDo from './ShowSetToDo';\r\nimport TrainingSwitcher from './TrainingSwitcher';\r\n// import TrainingStopWatch from './TrainingStopWatch';\r\nimport TrainingHeaders from './TrainingHeaders';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate } from '../functions/basics';\r\nimport DayOfFinalAssessment from './DayOfFinalAssessment';\r\n\r\n\r\n//Training context\r\nexport const TrainingContext = React.createContext({});\r\n\r\nconst setupTrainingContext = (userHere, publicPlanIfNeeded) => {\r\n\r\n  //PLAN\r\n  let plan = {}; //template\r\n  //get plan template from id\r\n  if (userHere.pushupPlans.current.personal.includes('yes-only')) {//=personal from current user\r\n    // console.log(\"PERSONAL\");\r\n    plan = userHere.pushupPlans.personal.find(plan => plan._id === userHere.pushupPlans.current.planIDType);\r\n    // console.log(\"CURRENT PLAN TEMPLATE:\", plan);\r\n  } else if (userHere.pushupPlans.current.personal.includes('yes-finished')) {\r\n    //get finished personal training plan \r\n    plan = userHere.pushupPlans.personalFinished.find(plan => plan._id === userHere.pushupPlans.current.planIDType);\r\n  } else {\r\n    //get public plan\r\n    // plan = userHere.pushupPlans.current; //this should be enough as this contains all the info needed for training, no need to search for plan itself in public plans\r\n    plan = publicPlanIfNeeded;\r\n  }\r\n\r\n  //TRAINING\r\n  // const trainingNumberPosition0IsFirstNumber = userHere.pushupPlans.current.trainingToDoNextNumberPositionInSchedulleArrayFrom0;\r\n  const trainingNumberPosition0IsFirstNumber = userHere.pushupPlans.current.scheduleDayToDoFrom0;\r\n\r\n  //final ass.dealings\r\n  let finalAssessment = false;\r\n  if (trainingNumberPosition0IsFirstNumber === 13) return { finalAssessment: true };\r\n\r\n  // console.log(\"TR ISUUE: \", plan, trainingNumberPosition0IsFirstNumber);\r\n  let numberOfThisTrainingTemplate = plan.schedule[trainingNumberPosition0IsFirstNumber].trainingNumber;\r\n  if (numberOfThisTrainingTemplate === 0) return 'dayOff';\r\n\r\n  let training = plan.trainings[numberOfThisTrainingTemplate - 1]  //template from plan; training 1 is here on position 0.\r\n  // let trExecution;  // trExecution = context.user.pushupPlans.current.trainingHistory[0];\r\n\r\n  //SET(s)\r\n  let set = training.sets[0]; //set instructions (not execution)\r\n  let setNumberFrom1 = 1;\r\n  let setsDone = 0;\r\n  // let totalSets = training.sets.length; //total number of sets (to do and done - all together)\r\n\r\n ///// if plan is as % of initial assessment, recalculate % to reps\r\n  let initialAssessmentRepsNumber;\r\n  if (plan.repsAsPercentages) {\r\n    console.log(\"Plan is in form of reps as PERCENTAGES - reps will be calculated.\")\r\n    //get init.ass\r\n    initialAssessmentRepsNumber = userHere.assessments.find(ass => ass._id == userHere.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n    // console.log(\"initialAssessmentRepsNumber: \", initialAssessmentRepsNumber);\r\n    //calc reps for each set in This training.\r\n    training.sets.forEach(set => set.reps = Math.round(set.repsAsPercentage / 100 * initialAssessmentRepsNumber));\r\n  }\r\n  // %$£100 in future for faster load calculate specific reps upon committing to the plan which is Finished or Public, and save these calculations on user's current execution plan. Then when training starts just use those fixed numbers\r\n\r\n\r\n\r\n\r\n  /////\"continue training\" set up (if it exists)\r\n  //if last training execution was today and is unfinished, add this to the package as startedTrainingExecution; else as undefined\r\n  let continueStartedTraining = false;\r\n  let lastTrainingMatch = return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate(userHere);\r\n  if (lastTrainingMatch === 1\r\n    && userHere.pushupPlans.current.trainingHistory[0].completed != true) {\r\n\r\n    continueStartedTraining = true;\r\n    let startedTraining = userHere.pushupPlans.current.trainingHistory[0];\r\n    let numberOfSetsAlreadyDone = userHere.pushupPlans.current.trainingHistory[0].sets.length;\r\n    set = training.sets[numberOfSetsAlreadyDone];\r\n    setNumberFrom1 = numberOfSetsAlreadyDone + 1;\r\n    setsDone = numberOfSetsAlreadyDone;\r\n    // console.log(\"setting up CONTINUED training: \",userHere, startedTraining, set,'\\n', setNumberFrom1,  numberOfSetsAlreadyDone, setsDone);\r\n    //adjust set info\r\n  }\r\n\r\n\r\n\r\n\r\n  ////PACKAGE\r\n  let trainingPackage = {\r\n    plan,\r\n    training,\r\n    trainingNumber: numberOfThisTrainingTemplate, //0=day off\r\n    trainingStartedAt: new Date(),\r\n    // trExecution,\r\n    setNumberFrom1,\r\n    set,\r\n    setsDone,\r\n    continueStartedTraining, //true / false\r\n    initialAssessmentRepsNumber // only for saving reps as % to user's execution history\r\n  };\r\n\r\n  return { stage: 0, main: trainingPackage };\r\n}\r\n\r\n\r\n\r\n\r\nconst RunTraining = ({ history }) => {\r\n  let context = React.useContext(pushupsContext);\r\n  const [trainingContextVariable, setTrainingContextVariable] = React.useState(undefined);\r\n  console.log(\"training CONTEXT: \", trainingContextVariable);\r\n  const [todayIsDayOff, setTodayIsDayOff] = React.useState(false);\r\n  const [userLoading, setUserLoading] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n    //sort refresh-user loading\r\n    if (!context.user) { return } else setUserLoading(false);\r\n\r\n    //set training context\r\n    if (trainingContextVariable === undefined) {\r\n      let publicPlanIfNeeded;\r\n      if (context.user.pushupPlans.current.personal === 'public') publicPlanIfNeeded = context.publicPlans.find(plan => plan._id === context.user.pushupPlans.current.planIDType);\r\n      let trainingContextToUse = setupTrainingContext(context.user, publicPlanIfNeeded);\r\n      if (trainingContextToUse === 'dayOff') setTodayIsDayOff(true);\r\n      setTrainingContextVariable(trainingContextToUse);\r\n\r\n    }\r\n\r\n\r\n  }, [context]);\r\n\r\n  // React.useEffect(() => {\r\n  //   // console.log(\"TCV (trainingContextVariable) updated. Current: \", trainingContextVariable);\r\n\r\n  //   //  // update training context based on the user context...\r\n  //   // if (context.user && trainingContextVariable.main.setsDone > 0) {\r\n  //   // trainingContextVariable.main.trExecution = context.user.pushupPlans.current.trainingHistory[0];\r\n  //   // }\r\n  // }, [trainingContextVariable]);\r\n\r\n  //skipping trainings for plans in development\r\n  const skipThisDay = async () => {\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/setTheNextTraining', {});\r\n    history.push('/pushups');\r\n    context.updateUser({ ...updatedUser });\r\n    await new Promise(resolve => setTimeout(resolve, 250));\r\n    history.push('/pushups/startMyTraining');\r\n  }\r\n\r\n  if (userLoading) return <p>loading user...</p>\r\n  if (trainingContextVariable.finalAssessment === true) return <DayOfFinalAssessment />\r\n\r\n  if (todayIsDayOff) return (\r\n    <div>\r\n      <h3>Today is your day off.</h3>\r\n      <button onClick={skipThisDay}>Skip this day.</button>\r\n    </div>)\r\n  if (trainingContextVariable) return (\r\n    <div>\r\n      <TrainingContext.Provider value={[trainingContextVariable, setTrainingContextVariable]}>\r\n        <TrainingHeaders trainingState={trainingContextVariable} />\r\n        <TrainingSwitcher />\r\n      </TrainingContext.Provider>\r\n    </div>);\r\n\r\n  return <h1>Training - Training context is most probably currently undefined; this html shouldn't really appear at all.</h1>\r\n};\r\n\r\nexport default withRouter(RunTraining);","import React from 'react';\r\nimport { SLink } from '../../../App';\r\n\r\nimport useSound from 'use-sound';\r\nimport soundBeep from '../../sounds/files/facebook/Complete and Success/Complete 2.m4a';\r\nimport soundStart from '../../sounds/files/startBlow/airHorn.mp3';\r\n\r\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\n// import ChangingProgressProvider from './pacemaker/ChangingProgressProvider';\r\n// import { Link } from 'react-router-dom';\r\n\r\nconst setMyDots = (setDots, howMany) => {\r\n  let dots = '';\r\n  console.log(\"howMany \", howMany);\r\n  for (let i = 1; i <= howMany; i++) {\r\n    dots += '.';\r\n  }\r\n  // console.log(dots);\r\n  setDots(dots);\r\n}\r\n\r\nconst PaceMaker = () => {\r\n  const [counter, setCounter] = React.useState(-5);\r\n  const [dots, setDots] = React.useState('...'); //doesn't matter how many is here\r\n\r\n  const [cycleMs, setCycleMS] = React.useState(0);\r\n  const [numberOfReps, setNumberOfReps] = React.useState(0);\r\n  const [showResult, setShowResult] = React.useState(false);\r\n  const [soundBeepPlay] = useSound(soundBeep);\r\n  const [soundStartPlay] = useSound(soundStart);\r\n\r\n\r\n  const [paceMakerStarted, setPaceMakerStarted] = React.useState(false);\r\n\r\n  //setDefaultDots\r\n  React.useEffect(() => {\r\n    setMyDots(setDots, counter * -1);\r\n  }, []);\r\n\r\n  // // use milliseconds\r\n  React.useEffect(() => {\r\n    let intervalMs;\r\n    if (cycleMs === 0) intervalMs = setInterval(() => setCycleMS(100), 20);\r\n    return () => {\r\n      clearInterval(intervalMs);\r\n    };\r\n  }, [cycleMs]);\r\n\r\n  //use 1s timer\r\n  // console.log(\"pacemaker refreshed, cycleMs: \", cycleMs);\r\n  React.useEffect(() => {\r\n    let interval;\r\n    if (paceMakerStarted) {\r\n      // duration.setBreakDuration(duration.breakDuration + 1);\r\n      if (counter < 0) soundBeepPlay()\r\n      else if (counter === 0) soundStartPlay()\r\n      else if (counter > 0) { }\r\n      interval = setInterval(() => { setCounter(counter + 1) }, 1000);\r\n      //countReps\r\n      if (counter>=0 && counter % 2 === 0) {\r\n        setNumberOfReps(counter / 2 + 1);\r\n        // console.log(numberOfReps);\r\n        // soundBeepPlay();\r\n        setCycleMS(0);\r\n        // console.log(\"RESET MS\");\r\n        counter >= 0 && speechSynthesis.speak(new SpeechSynthesisUtterance(numberOfReps + 1));\r\n      }\r\n    }\r\n    //set dots\r\n    setMyDots(setDots, counter * -1);\r\n\r\n\r\n    //clear up function\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  },\r\n    [counter, paceMakerStarted]\r\n  );\r\n\r\n\r\n  const stopAndLogReps = () => {\r\n    setPaceMakerStarted(false);\r\n    setNumberOfReps(numberOfReps - 1);\r\n    setShowResult(true);\r\n    setCycleMS(0);\r\n    setCounter(1000);\r\n    // console.log(\"number of reps:\", numberOfReps);\r\n    //beep each second (read number)\r\n  }\r\n\r\n  const resetPaceMaker = () => {\r\n    setPaceMakerStarted(false);\r\n    setNumberOfReps(0);\r\n    setShowResult(false);\r\n    setCounter(-5);\r\n    // console.log(\"number of reps:\", numberOfReps);\r\n    //beep each second (read number)\r\n  }\r\n\r\n  const circleTapped = () => {\r\n    console.log(\"tap\");\r\n    if (!paceMakerStarted && !showResult) {//start\r\n      setPaceMakerStarted(true)\r\n    }\r\n    if (paceMakerStarted) { //stop\r\n      stopAndLogReps();\r\n    }\r\n    if (!paceMakerStarted && showResult) { //reset\r\n      resetPaceMaker();\r\n    }\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      <h1>Pace Tracker</h1>\r\n      <p>(2 seconds per rep.)</p>\r\n      {/* <h3>{counter < 0 ? counter * -1 : 'Go!'}</h3> */}\r\n      {/* {counter < 0 ? <h1 style={{fontSize:'200px', lineHeight:'100px'}}>{dots}</h1> : <h3>Go!</h3>} */}\r\n      {counter < 0 ? <h1 style={{fontSize:'200px',lineHeight:'0px', display:'inline', marginBottom:'20px'}}>{dots}</h1> : <h3>Go!</h3>}\r\n      {/* {counter >= 0 && */}\r\n      <div\r\n        onClick={circleTapped}\r\n        style={{ width: '80%', margin: 'auto' }}\r\n      >\r\n        <CircularProgressbarWithChildren\r\n          value={cycleMs}\r\n          // text={counter==0 ? 'Go!': `${numberOfReps}`}\r\n          // text={counter<0 ? `${counter}`: counter==0 ? 'Go!': `${numberOfReps}`}\r\n          text={`${numberOfReps}`} //to show 0 too\r\n          background='true'\r\n          styles={buildStyles({\r\n            pathTransition: cycleMs === 0 ? \"none\" : \"stroke-dashoffset 2s linear 0s\",\r\n            // textSize: '50px',\r\n            // paddingTop: '2rem',\r\n            // dominantBaseline: 'top'\r\n            // pathColor: `hsl(${numberOfReps * 3}, 100%, 50%)`,\r\n            pathColor: `${(counter < 0 ||counter>=1000) ? 'gray' : 'green'}`,\r\n            textColor: '#f88',\r\n            // trailColor: '#d6d6d6',\r\n            trailColor: `${(counter < 0 ||counter>=1000) ? 'gray' : 'none'}`,\r\n\r\n            backgroundColor: `${counter < -1  ? 'red' : counter === -1 ? 'yellow' : paceMakerStarted ? 'lightgreen' : showResult ? 'lightblue' : 'red' }`,\r\n            // Whether to use rounded or flat corners on the ends - can use 'butt' or 'round'\r\n            // strokeLinecap: 'butt',\r\n          })}\r\n        >\r\n          <p style={{ marginTop: 200, fontSize: '2rem' }}>\r\n            {/* Tap to */}\r\n            {!paceMakerStarted && !showResult && <span> Start</span>}\r\n            {paceMakerStarted && <span> Stop</span>}\r\n            {!paceMakerStarted && showResult && <span> Reset</span>}\r\n            {/* . */}\r\n          </p>\r\n        </CircularProgressbarWithChildren>\r\n      </div>\r\n      {/* } */}\r\n\r\n      {/* \r\n      {!paceMakerStarted && !showResult && <button onClick={() => setPaceMakerStarted(true)}>Start</button>}\r\n      {paceMakerStarted && <button onClick={stopAndLogReps}>Stop</button>}\r\n      {!paceMakerStarted && showResult && <button onClick={resetPaceMaker}>Reset</button>}\r\n       */}\r\n\r\n      {showResult &&\r\n        <div>\r\n          <p>You did {numberOfReps} reps.</p>\r\n          <p>Save it as current Max<SLink to='/pushups/maxRepsTest'>Here</SLink></p>\r\n\r\n        </div>}\r\n      {/* <button onClick={() => setPaceMakerStarted(!paceMakerStarted)}>{paceMakerStarted ? 'Stop' : 'Start'}</button> */}\r\n      {/* {paceMakerStarted && <button onClick={startPaceMaker}>Stop</button>} */}\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaceMaker;","import React from 'react';\r\n\r\n// import SoundAndMusicControls from './SoundAndMusicControls';\r\nimport SoundAndMusicControls from './Training/SoundAndMusicControls';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\n// import { SLink } from '../../App';\r\nconst SLink2 = styled(Link)`\r\ndisplay:block;\r\nmargin:10px;\r\nbackground-color:orange;\r\npadding: 3px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n}\r\ntransition-duration: 0.25s;\r\n`\r\nconst SLink3 = styled.div`\r\nmargin:10px;\r\nbackground-color: gray;\r\ncolor: white;\r\npadding: 3px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n}\r\ntransition-duration: 0.25s;\r\n`\r\n\r\n\r\nconst SideBarContent = ({ pathname, setSideBarOpen }) => {\r\n  return (\r\n    <div>\r\n      {/*navigations */}\r\n      {/* <div style={{ backgroundColor: 'yellow', padding: '5px' }}>\r\n        <h3 style={{ textAlign: 'center' }}>Navigation</h3>\r\n        {pathname === '/pushups' ? null\r\n          : <SLink2\r\n            onClick={() => setSideBarOpen(false)}\r\n            // style={{ float: 'left' }}\r\n            style={{ display: 'block', margin: '1rem' }}\r\n            to='/pushups'>Main Menu</SLink2>}\r\n        {pathname == '/pushups/maxRepsTest' ? <SLink3>Test Your Max Reps</SLink3> : <SLink2 onClick={() => setSideBarOpen(false)} to='/pushups/maxRepsTest'>Test Your Max Reps</SLink2>}\r\n        {pathname == '/pushups/trainingPlans' ? <SLink3>Training Plans</SLink3> : <SLink2 onClick={() => setSideBarOpen(false)} to='/pushups/trainingPlans'>Training Plans</SLink2>}\r\n        {pathname == '/pushups/runMyTraining' ? <SLink3>Start Training</SLink3> : <SLink2 onClick={() => setSideBarOpen(false)} to='/pushups/startMyTraining'>Start Training</SLink2>}\r\n        {pathname == '/pushups/userProfile' ? <SLink3>My profile(history)</SLink3> : <SLink2 onClick={() => setSideBarOpen(false)} to='/pushups/userProfile'>My profile(history)</SLink2>}\r\n      </div> */}\r\n\r\n      {/* local controls */}\r\n      {pathname === '/pushups/runMyTraining' && <div style={{ backgroundColor: 'lightBlue', padding: '5px' }}>\r\n        <h3 style={{ textAlign: 'center' }}>Local controls</h3>\r\n        {/* training context     */}\r\n        {pathname === '/pushups/runMyTraining' && <SoundAndMusicControls />}\r\n      </div>}\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SideBarContent;","import React from 'react';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nconst FinishPersonalPushupPlan = (props) => {\r\n  const { history } = props;\r\n  let { user, updateUser } = React.useContext(PushUpsContext);\r\n  let positionFrom0 = props.match.params.positionFrom0;\r\n  let plan = user ? user.pushupPlans.personal[positionFrom0] : undefined;\r\n\r\n  const markPlanAsFinished = async () => {\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/finishPersonalPlan', {positionFrom0});\r\n    updateUser({ ...updatedUser });\r\n    history.push('/pushups/trainingPlans');\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Finishing Personal Pushup Plan</h1>\r\n      <p>%?: {plan && `${plan.repsAsPercentages}`}</p>\r\n      <p>(If you are currently \"commited\" to this plan, this will commitment be ended (plan execution will be archived).(Start new commitment using this finished plan.))</p>\r\n\r\n      {plan && plan.repsAsPercentages === undefined ? <p>you better change plan to % plan.</p> : <p>All looks good. Remember plan can't be changed/adjusted after this.(But can be duplicated).</p>}\r\n\r\n      <button onClick={markPlanAsFinished}>Submit as finished</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(FinishPersonalPushupPlan);","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport CounterAllIn from '../basicComponents/CounterAllIn';\r\nimport { SLink } from '../../../App';\r\n\r\n\r\n\r\n\r\nconst PublishPushupPlan = ({ history, match }) => {\r\n  let { user, updateUser, publicPlans, updatePublicPlans } = React.useContext(PushUpsContext);\r\n  const [publicPlansNames, setPublicPlansNames] = React.useState(null);\r\n\r\n  //setting up recommended initial reps locally\r\n  const [initialMaxReps, setInitialMaxReps] = React.useState({ reps: 20, rangeAsPercentage: 20, rangeAsReps: [18, 22] });\r\n  React.useEffect(() => {\r\n    let rangeAsReps = [0, 0];\r\n    let max = initialMaxReps.reps;\r\n    let range = initialMaxReps.rangeAsPercentage;\r\n    rangeAsReps[0] = Math.round(max - max * range / 100);\r\n    rangeAsReps[1] = Math.round(max + max * range / 100);\r\n    setInitialMaxReps((v) => ({ ...v, rangeAsReps }));\r\n  }, [initialMaxReps.reps, initialMaxReps.rangeAsPercentage]);\r\n  console.log(initialMaxReps);\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (publicPlans) {\r\n      let publicPlansNamesSupportVar = publicPlans.map(publicPlan => publicPlan.name);\r\n      setPublicPlansNames(publicPlansNamesSupportVar);\r\n      // console.log(\"publicPlansNames: \", publicPlansNames);\r\n    }\r\n  }, [publicPlans]);\r\n\r\n  React.useEffect(() => {\r\n    // let plan = user ? user.pushupPlans.personalFinished[positionFrom0] : undefined;\r\n    let userReps = (user && user.assessments && user.assessments.length > 0) ? user.assessments[0].reps : undefined;\r\n    if (userReps) setInitialMaxReps(v => ({ ...v, reps: userReps }));\r\n  }, [user]);\r\n\r\n\r\n  let positionFrom0 = match.params.positionFrom0;\r\n  console.log(\"PublishPushupPlan element loaded \", publicPlans);\r\n  const buttonActionPublishPlan = async () => {\r\n\r\n    if (user) {\r\n      let planSummary = user.pushupPlans.personalFinished[positionFrom0].summary;\r\n      let planDescription = user.pushupPlans.personalFinished[positionFrom0].description;\r\n      let planDescriptionRich = user.pushupPlans.personalFinished[positionFrom0].descriptionRich;\r\n      // console.log(\"plan.description: \", plan.description);\r\n      if (((planDescription === undefined || planDescription === null || planDescription === '')\r\n        && (planDescriptionRich === undefined || planDescriptionRich === null || planDescriptionRich === ''))\r\n        || (planSummary === undefined || planSummary === null || planSummary === '')) {\r\n        // history.push('/pushups/trainingPlans');\r\n        alert('Plan has to have \"Summary\" and \"Description\" to be publishable. (Duplicate this plan, add summary/description to it and publish that duplicate.');\r\n        history.push('/pushups/trainingPlans');\r\n        return;\r\n      }\r\n    }\r\n\r\n    //check if name is unique -search through all public names. if this one exists within\r\n    if (publicPlansNames) {//=once names were loaded from context...\r\n      let thisPlanName = user.pushupPlans.personalFinished[positionFrom0].name;\r\n      console.log(\"thisPlanNameS: \", publicPlansNames);\r\n      console.log(\"thisPlanName: \", thisPlanName);\r\n      let thisNameExistsAlreadySupportVar = publicPlansNames.find(nameInDb => thisPlanName === nameInDb);\r\n      console.log(\"thisNameExistsAlreadySupportVar: \", thisNameExistsAlreadySupportVar);\r\n      if (thisNameExistsAlreadySupportVar) {\r\n        console.log(\"love\");\r\n        // history.push('/pushups/trainingPlans');\r\n        alert('this name exists already. Duplicate this plan and change the name.');\r\n        history.push('/pushups/trainingPlans');\r\n        return;\r\n      }\r\n    }\r\n    console.log(\"PUBLISHING PLAN!!\");\r\n    let data = await postJsonDataUrlAfterAPIpushups('/publishPlan', { positionFrom0, initialMaxReps });\r\n    updateUser({ ...data.user });\r\n    updatePublicPlans([...data.plans]);\r\n    history.push('/pushups/trainingPlans');\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      {/* <SLink to='/pushups/trainingPlans'>Plans</SLink>  link to go back to the plans */}\r\n      <h1>Publish pushup plan...</h1>\r\n      <div>\r\n        <h3>Specify target group:</h3>\r\n        <div>How many reps should be able to do typical user of your plan? \r\n        <br />\r\n        {/* Initial max reps (average): */}\r\n        <CounterAllIn settings={[1, 5, (newValue) => setInitialMaxReps((r) => ({ ...r, reps: newValue })), initialMaxReps.reps, undefined, undefined, 1, 1000]} />\r\n          {/* <br /> */}\r\n        {/* (Using your current max as default value.) */}\r\n        </div>\r\n        <div>\r\n          Set some reps range:<br/>\r\n          <CounterAllIn settings={[1, 5, (newValue) => setInitialMaxReps((r) => ({ ...r, rangeAsPercentage: newValue })), initialMaxReps.rangeAsPercentage, '%', '', 0, 1000]} />\r\n        {/* (Recommended about 20%) */}\r\n        </div>\r\n        {/* <div>Initial max reps range: <CounterAllIn settings={[0, 0,(newValue)=> setInitialMaxReps((r)=>({...r,reps:newValue})), initialMaxReps.reps, undefined, undefined, 1, 1000]} /></div> */}\r\n        {/* <h4>Initial max reps range: from </h4> */}\r\n        <h4>This plan will be recommended to users who can do between {initialMaxReps.rangeAsReps[0]} and {initialMaxReps.rangeAsReps[1]} reps.</h4>\r\n      </div>\r\n      <p>Finished Plan in Array position (from0): {positionFrom0}.</p>\r\n      <button onClick={buttonActionPublishPlan}>Publish</button>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(PublishPushupPlan);","import React from 'react';\r\nimport {frontEndPushupsUrlRoot} from '../../globalState/globalVariables'\r\n\r\nconst Intro = () => {\r\n  const urlTextToCopy = frontEndPushupsUrlRoot;\r\n  const [textCopied, setTextCopied] = React.useState(false);\r\n  const appUrlToCopy = React.useRef(null);\r\n  const copyTextToClipboardClicked = () => {\r\n    console.log(\"love\");\r\n    // appUrlToCopy.current.execCommand('copy');\r\n\r\n    const el = document.createElement('textarea');\r\n    el.value = urlTextToCopy;\r\n    document.body.appendChild(el);\r\n    el.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(el);\r\n\r\n    setTextCopied(true);\r\n\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>Intro</h1>\r\n      <div style={{ backgroundColor: 'lightGray' }}>\r\n        <h3>Use Chrome</h3>\r\n        <p>For the best experience, use Chrome browser to download this app.</p>\r\n        <p>1) Tap to copy app url:</p>\r\n        <div onClick={copyTextToClipboardClicked} style={{ color: 'gray', padding: '1rem', fontSize: '0.8rem' }}>\r\n          <p ref={appUrlToCopy}>{urlTextToCopy}</p>\r\n          <p style={{ textAlign: 'center', color: 'red' }}> {textCopied ? 'Copied.' : ` `}</p>\r\n        </div>\r\n\r\n        <p>2) Click <a style={{ fontWeight: 'bold' }} href=\"https://play.google.com/store/apps/details?id=com.android.chrome\" target=\"_blank\">here</a> to open/download Chrome browser.</p>\r\n        <p>3) paste copied link into Chrome.</p>\r\n        <p>4) Click 'Install' on the top on the app screen.</p>\r\n        <p> - HAPPY END - </p>\r\n\r\n      </div>\r\n      <h3>What</h3>\r\n      <p>This app is designed to help you improve your Pushups REPS (by using tested prep plans)</p>\r\n      <h3>Why</h3>\r\n      <h3>How</h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Intro;","import React from 'react';\r\n// import PushUpsContext from '../../state/PushUpsContextState';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\n\r\n\r\nconst Community = () => {\r\n  let { user, updateUser, publicPlans, allUsers } = React.useContext(PushUpsContext);\r\n  return (\r\n    <div>\r\n      <h1>Community</h1>\r\n      <p>Hopefully, once...</p>\r\n      <p>SHARE:</p>\r\n      <p>invite friend</p>\r\n      <p>post on social media (Facebook)</p>\r\n      <p>get shareable link</p>\r\n      <h3>Existing users:</h3>\r\n      {allUsers ? allUsers.names.map((user,i) => <p key={i}>{user.name}</p>):<p>loading...</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Community;","import React from 'react';\r\n// import PushUpsContext from '../../state/PushUpsContextState';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\n\r\n\r\nconst UserProfile = () => {\r\n  let { user, updateUser, publicPlans, allUsers } = React.useContext(PushUpsContext);\r\n  return (\r\n    <div>\r\n      <h1>User Profile</h1>\r\n      <p>Hopefully, once...</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;","import { urlRoot } from './globalState/globalVariables';\r\nimport { postJsonDataUrlAfterAPIpushups, postJsonDataUrlAfterAPI } from './functions/postJsonData';\r\n\r\n\r\nconst myPublicValidKey = 'BByn6l9bvGGsFgaL8FPe_SDZfnI45uNbpipyPf0DT4RlmYMkEiImM2e3DBdxMVLHdT6q9o5EcWx6ykld7tR6CgA';\r\nconst convertedVapidKey = urlBase64ToUint8Array(myPublicValidKey);\r\n\r\nfunction urlBase64ToUint8Array(base64String) {\r\n  const padding = \"=\".repeat((4 - base64String.length % 4) % 4)\r\n  // eslint-disable-next-line\r\n  const base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\")\r\n\r\n  const rawData = window.atob(base64)\r\n  const outputArray = new Uint8Array(rawData.length)\r\n\r\n  for (let i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i)\r\n  }\r\n  return outputArray\r\n}\r\n\r\nasync function sendSubscription(subscription, newOrExisting, deviceName) {\r\n  //Miro section start\r\n  console.log(\"FETCH SUBSCRIPTION is about to start................................\");\r\n  // let ansFromServer1 = await postJsonDataUrlAfterAPIpushups('/testCORS', {});\r\n  // console.log(\"FETCH SUBSCRIPTION miro test f1. returned:\", ansFromServer1);\r\n\r\n  // let ansFromServer2 = await postJsonDataUrlAfterAPIpushups('/testCORS2', {});\r\n  // console.log(\"FETCH SUBSCRIPTION miro test f2. returned:\", ansFromServer2);\r\n\r\n  // let ansFromServer3 = await postJsonDataUrlAfterAPI('/testCORS3', {});\r\n  // console.log(\"FETCH SUBSCRIPTION miro test f3. returned:\", ansFromServer3);\r\n\r\n  // let ansFromServer4 = await postJsonDataUrlAfterAPI('/testCORS4', {});\r\n  // console.log(\"FETCH SUBSCRIPTION miro test f4. returned:\", ansFromServer4);\r\n\r\n  const notificationSubscription = { subscription: { subscription, newOrExisting, deviceName } };\r\n  // let ansFromServerS = await postJsonDataUrlAfterAPI('/notifications/subscribe', subscription);\r\n  // let ansFromServerS = await postJsonDataUrlAfterAPI('/notifications/subscribe', notificationSubscription);\r\n  try {\r\n    let ansFromServerS = await postJsonDataUrlAfterAPI('/pushups/notifications/subscribe', notificationSubscription);\r\n\r\n    // let ansFromServerS = await postJsonDataUrlAfterAPI('/pushups/notifications/subscribe', notificationSubscription);\r\n    console.log(\"FETCH SUBSCRIPTION miro test S. returned:\", ansFromServerS);\r\n    return { success: true, message: 'success - subscription saved in DB' }\r\n  } catch (err) {\r\n    return { success: false, message: 'error - subscription NOT saved in DB' }\r\n  }\r\n  //Miro section end\r\n\r\n\r\n  // return fetch(`${urlRoot}/notifications/subscribe`, {\r\n  //   method: 'POST',\r\n  //   // body: { subscription: JSON.stringify(subscription) },\r\n  //   body: JSON.stringify(subscription),\r\n  //   headers: {\r\n  //     'Content-Type': 'application/json'\r\n  //   },\r\n  //   credentials: 'include'\r\n  // })\r\n}\r\n\r\n// export async function subscribeUser(deviceName) {\r\n//   console.log(\"MMSS007 'subscribeUser' runnning\");\r\n//   let resultMiroVariable= {success: false, message:'some issues here...:-('};//Miro's variable for tracking success\r\n//   if ('serviceWorker' in navigator) {\r\n//     console.log(\"MMSS007 'serviceWorker ready ? ? ?\");\r\n//     navigator.serviceWorker.ready.then(async function (registration) {\r\n//       console.log(\"MMSS007 'serviceWorker ready\");  \r\n//       if (!registration.pushManager) {\r\n//         console.log('MMSS007 Push manager unavailable.');\r\n//         // resultMiroVariable = { success: false, message: 'MMSS007 Push manager unavailable.' };\r\n//         // return resultMiroVariable;\r\n//       }\r\n\r\n//       registration.pushManager.getSubscription().then(async function (existedSubscription) {\r\n//         if (existedSubscription === null) {\r\n//           console.log('MMSS007 No subscription detected, make a request.')\r\n//           registration.pushManager.subscribe({\r\n//             applicationServerKey: convertedVapidKey,\r\n//             userVisibleOnly: true,\r\n//           }).then(async function (newSubscription) {\r\n//             console.log('MMSS007 New subscription added.')\r\n//             resultMiroVariable = await sendSubscription(newSubscription, 'new',deviceName);\r\n//             // return resultMiroVariable;\r\n//           }).catch(function (e) {\r\n//             if (Notification.permission !== 'granted') {\r\n//               console.log('MMSS007 Permission was not granted.')\r\n//             } else {\r\n//               console.error('MMSS007 An error ocurred during the subscription process.', e)\r\n//             }\r\n//           })\r\n//         } else {\r\n//           console.log('MMSS007 Existed subscription detected.')\r\n//           resultMiroVariable = await sendSubscription(existedSubscription, 'existing',deviceName); //not needed here?\r\n//           // return resultMiroVariable;\r\n//         }\r\n//       })\r\n//     })\r\n//       .catch(function (e) {\r\n//         console.error('An error ocurred during Service Worker registration.', e);\r\n//         resultMiroVariable = { success: false, message: 'An error ocurred during Service Worker registration.' };\r\n//         // return resultMiroVariable;\r\n//       })\r\n//   }\r\n//   return resultMiroVariable;\r\n// }\r\n\r\n\r\nexport async function subscribeUser(deviceName) {\r\n  console.log(\"MMSS007 'subscribeUser' runnning\");\r\n  let resultMiroVariable = { success: false, message: 'some issues here...:-(' };//Miro's variable for tracking success\r\n  if ('serviceWorker' in navigator) {\r\n    console.log(\"MMSS007 'serviceWorker ready ? ? ?\");\r\n    try {\r\n      let registration = await navigator.serviceWorker.ready;\r\n      console.log(\"MMSS007 'serviceWorker ready\");\r\n      if (!registration.pushManager) {\r\n        console.log('MMSS007 Push manager unavailable.');\r\n        resultMiroVariable = { success: false, message: 'MMSS007 Push manager unavailable.' };\r\n        return resultMiroVariable;\r\n      }\r\n\r\n      let existedSubscription = await registration.pushManager.getSubscription();\r\n      if (existedSubscription === null) {\r\n        console.log('MMSS007 No subscription detected, make a request.');\r\n        try {\r\n          let newSubscription = await registration.pushManager.subscribe({\r\n            applicationServerKey: convertedVapidKey,\r\n            userVisibleOnly: true,\r\n          })\r\n\r\n          console.log('MMSS007 New subscription added.')\r\n          resultMiroVariable = await sendSubscription(newSubscription, 'new', deviceName);\r\n          return resultMiroVariable;\r\n        } catch (e) {\r\n          if (Notification.permission !== 'granted') {\r\n            console.log('MMSS007 Permission was not granted.')\r\n          } else {\r\n            console.error('MMSS007 An error ocurred during the subscription process.', e)\r\n          }\r\n        }\r\n      } else {\r\n        console.log('MMSS007 Existed subscription detected.')\r\n        resultMiroVariable = await sendSubscription(existedSubscription, 'existing', deviceName); //not needed here?\r\n        return resultMiroVariable;\r\n      }\r\n\r\n    } catch (e) {\r\n      console.error('An error ocurred during Service Worker registration.', e);\r\n      resultMiroVariable = { success: false, message: 'An error ocurred during Service Worker registration.' };\r\n      return resultMiroVariable;\r\n    }\r\n  }\r\n  return resultMiroVariable;\r\n}","import React from 'react';\r\nimport Toggle from 'react-toggle';\r\nimport Counter from '../basicComponents/CounterAllIn';\r\n\r\nconst TrainingTodayNotification = ({ todayNotificationsHandler, index }) => {\r\n  const { todayNotifications, setTodayNotifications } = todayNotificationsHandler;\r\n  let thisNotification = todayNotifications[index];\r\n  // console.log(\"thisNotification: NNNN N NNN\", thisNotification);\r\n\r\n\r\n\r\n\r\n  const handleTrainingTodayNotificationChangeClick = async ({ target: { checked } }) => {\r\n    setTodayNotifications(todayNotifications => {\r\n      todayNotifications[index].on = checked;\r\n      return [...todayNotifications];\r\n    });\r\n\r\n    // let forWhen = time;\r\n    // let what = 'TrainingTodayNotifications';\r\n    // // let how = checked; //true or false\r\n    // let how = [{ on: checked, time }]; //true or false\r\n    // try {\r\n    //   let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateNotificationsSettings', { what, how, forWhen });\r\n    //   updateUser(updatedUser);\r\n    // } catch (err) { console.log(\"e1\", err) }\r\n  }\r\n\r\n  const setTime = (hoursOrMinutes, newValue) => {\r\n    setTodayNotifications(todayNotifications => {\r\n      todayNotifications[index].time[hoursOrMinutes] = newValue;\r\n      return [...todayNotifications];\r\n    });\r\n  }\r\n\r\n  const deleteThisNotificationClicked = () => {\r\n    // console.log(\"TT \", todayNotifications);\r\n\r\n    setTodayNotifications(todayNotifications => {\r\n      console.log(\"index:\", index);\r\n      todayNotifications.splice(index, 1);\r\n      // console.log(\"xx: \", xx);\r\n      return [...todayNotifications];\r\n    });\r\n    //   // todayNotifications[index].time[hoursOrMinutes] = newValue;\r\n    //   // return [...todayNotifications];\r\n    // });\r\n  }\r\n\r\n  return (\r\n    <div style={{backgroundColor:'lightGreen', margin:'5px'}}>\r\n      <h5>Notification {index + 1}</h5>\r\n      <Toggle\r\n        defaultChecked={thisNotification.on}\r\n        onChange={handleTrainingTodayNotificationChangeClick}\r\n      />\r\n      <button style={{backgroundColor:'red',borderRadius:'15px' }}onClick={deleteThisNotificationClicked}>Delete</button>\r\n      <br />\r\n      <Counter settings={[1, 5, (newValue) => setTime('hours', newValue), todayNotifications[index].time.hours, '', 'hours', 0, 23]} />\r\n      <br />\r\n      <Counter settings={[1, 10, (newValue) => setTime('minutes', newValue), todayNotifications[index].time.minutes, '', 'minutes', 0, 59]} />\r\n      <br />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrainingTodayNotification;","\r\nimport React, { useEffect, useContext } from 'react';\r\nimport { Button } from 'react-bootstrap';\r\nimport PushUpsContextState from '../state/PushUpsContextState'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { SLink } from '../../../App';\r\n\r\n\r\nimport signInWithJWTCookie from '../functions/signInWithJWTCookie';\r\nimport postJsonData from '../../../functions/postJsonData'\r\n// import { Button } from 'react-bootstrap';\r\nimport { urlRoot } from '../../../globalState/globalVariables';\r\n\r\n\r\n\r\nconst Logout = ({history}) => {\r\n  let userContext = useContext(PushUpsContextState);\r\n\r\n  const logOut = async () => {\r\n    await postJsonData(`${urlRoot}/user/logOut`, {});\r\n    // await postJsonData(`${urlRoot}/user/logOut2`, {});\r\n    console.log(\"-----------------------------logout-\");\r\n    // await postJsonData(`/api/user/logOut`, {});\r\n    // await postJsonData(`/api/user/logOut2`, {});\r\n    // await postJsonData(`${urlRoot}/start`, {}); //wrong url\r\n    // setUser({});\r\n\r\n    /////////////!!!\r\n    let guest = await signInWithJWTCookie();\r\n    // console.log(\"UUUUUU to guest:\", guest);\r\n    userContext.updateUser({ ...guest });  // change context - user to  GUEST\r\n    history.push('/pushups');\r\n\r\n    // console.log(\"user Context--> \", userContext);\r\n\r\n    //refresh page now - not needed  // window.location.reload();\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Button onClick={logOut}>Log-out</Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(Logout);","import React from 'react';\r\n// import PushUpsContext from '../../state/PushUpsContextState';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\n\r\nimport \"react-toggle/style.css\";\r\nimport Toggle from 'react-toggle';\r\n\r\nimport Counter from './basicComponents/CounterAllIn';\r\n\r\n// import pushupsContext from '../state/PushUpsContextState';\r\nimport pushupsContext from './state/PushUpsContextState';\r\n// import { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData'\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../functions/postJsonData'\r\n// import { setNotificationWithAgenda } from '../../../../server-express-project/mongoDB/notificationsController';\r\n\r\n// import { subscribeUser } from '../src/subscription';\r\nimport { subscribeUser } from '../../subscription';\r\nimport TrainingTodayNotification from './userSettings/TrainingTodayNotification';\r\nimport Logout from './userSettings/Logout';\r\n\r\nimport { SLink } from './Home';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst UserSettings = () => {\r\n  let { user, updateUser, publicPlans, allUsers } = React.useContext(PushUpsContext);\r\n\r\n  //.............................PWA push notifications SETUP START\r\n  const [notificationSupportedInfo, setNotificationSupportedInfo] = React.useState(`${(\"serviceWorker\" in navigator && \"PushManager\" in window) ? 'Notifications are supported by your browser.' : 'Notifications are NOT supported by this browser!'}` + `${' Permission to display notification: ' + Notification.permission}`);\r\n\r\n  const checkPWAWebPushNotifications = async () => {\r\n    console.log(\"click\");\r\n    // alert(`${\"serviceWorker\" in navigator && \"PushManager\" in window}`);\r\n    // alert(\"serviceWorker\" in navigator && \"PushManager\" in window);\r\n    // let xx = await Notification.requestPermission();\r\n    Notification.requestPermission()\r\n      .then(xx => {\r\n        console.log(xx);\r\n        setNotificationSupportedInfo(xx);\r\n        // alert(xx);  \r\n      })\r\n\r\n  }\r\n  // setHtmlInfo(Notification.permission);\r\n  function sendNotification(title = \"NotificationTest\", text = \"success\") {\r\n    // const img = \"/PushupMediumSquare192.png\";\r\n    const img = \"PushupMediumSquare192.png\";\r\n\r\n    // const text = \"Take a look at this brand new t-shirt!\";\r\n    // const title = \"New Product Available\";\r\n    const options = {\r\n      body: text,\r\n      // icon: \"/images/jason-leung-HM6TMmevbZQ-unsplash.jpg\",\r\n      icon: \"PushupMediumSquare192.png\", //otherwise bell icon i guess\r\n      vibrate: [200, 100, 200],\r\n      tag: \"new-product\",\r\n      image: img,\r\n      badge: \"https://spyna.it/icons/android-icon-192x192.png\",\r\n      actions: [{ action: \"Detail\", title: \"View\", icon: \"https://via.placeholder.com/128/ff0000\" }]\r\n    };\r\n    navigator.serviceWorker.ready.then(function (serviceWorker) {\r\n      serviceWorker.showNotification(title, options);\r\n    });\r\n  }\r\n  const showPWAWebPushNotification = () => {\r\n    // console.log(\"MMA0: \", navigator);\r\n    console.log(\"MMA: \", navigator.serviceWorker);\r\n    // console.log(\"MMA2: \", 'serviceWorker' in navigator);\r\n\r\n    //following 2 lines bring sme positive result but .ready will never stop waiting, while .getRegistration can return undefined after short while\r\n    navigator.serviceWorker.ready.then(sw => {\r\n      console.log(\"MMB1\", sw);\r\n      // sw.showNotification('Hi2.1');\r\n    });\r\n    // navigator.serviceWorker.getRegistration()\r\n    //   .then(sw => {\r\n    //     console.log(\"MMB2\", sw);\r\n    //     if (sw) sw.showNotification('Hi');\r\n    //   })\r\n    sendNotification();\r\n  }\r\n  //.............................PWA push notifications SETUP END\r\n\r\n  const [deviceName, setDeviceName] = React.useState('deviceName');\r\n\r\n  let supportVarNotificationOn = false;\r\n  let supportVarNotificationTime;\r\n  let trainingTodayNotificationsSupportVar = [];\r\n  // React.useEffect(() => {\r\n\r\n  if (user.settings\r\n    && user.settings.notifications\r\n    && user.settings.notifications.specific\r\n    && user.settings.notifications.specific.TrainingTodayNotifications) {\r\n    // console.log(\"BUTTON SHOULD BE GREEN\");\r\n    // setTrainingTodayNotification(user.settings.notifications.specific.TrainingTodayNotification);\r\n    supportVarNotificationOn = user.settings.notifications.specific.TrainingTodayNotifications[0].on;\r\n    supportVarNotificationTime = user.settings.notifications.specific.TrainingTodayNotifications[0].time;\r\n    trainingTodayNotificationsSupportVar = user.settings.notifications.specific.TrainingTodayNotifications;\r\n  }\r\n  // }, [user]);\r\n  // console.log(\"BUTTON SHOULD BE GREEN ,\", supportVarNotificationOn);\r\n  const [trainingTodayNotification, setTrainingTodayNotification] = React.useState(supportVarNotificationOn);\r\n  let [time, setTime] = React.useState(supportVarNotificationTime ? supportVarNotificationTime : { hours: 20, minutes: 0 });\r\n\r\n  const [todayNotifications, setTodayNotifications] = React.useState(trainingTodayNotificationsSupportVar);\r\n  React.useEffect(() => { console.log(\"todayNotifications CHANGED TO:\", todayNotifications) }, [todayNotifications]);\r\n  const todayNotificationsHandler = { todayNotifications, setTodayNotifications };\r\n  console.log(\"todayNotifications------:\", todayNotifications);\r\n\r\n  const handleTrainingTodayNotificationChangeClick = async ({ target: { checked } }) => {\r\n\r\n    setTrainingTodayNotification(checked);\r\n    let forWhen = time;\r\n    let what = 'TrainingTodayNotifications';\r\n    // let how = checked; //true or false\r\n    let how = [{ on: checked, time }]; //true or false\r\n    try {\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateNotificationsSettings', { what, how, forWhen });\r\n      updateUser(updatedUser);\r\n    } catch (err) { console.log(\"e1\", err) }\r\n  }\r\n\r\n  // const updateNotificationTimeButtonAction = async (notificationNumber) => {\r\n  //   ///TIMES\r\n  //   let x = new Date();\r\n  //   console.log(x)\r\n  //   let y = x.toUTCString();\r\n  //   console.log(y);\r\n  //   let z = new Date(`${y} UTC`);\r\n  //   console.log(z);\r\n  //   // let xx = new Date.toUTCString();\r\n  //   // console.log(xx);\r\n  //   let x1 = x.getTimezoneOffset() / -60;\r\n  //   console.log(\"x1:\", x1);\r\n\r\n  //   // let x2 = Date.UTC();\r\n  //   // console.log(\"x2:\", x2);\r\n  //   // console.log(Date.UTC());\r\n  //   // console.log(Date.now());\r\n  //   let supportVarLocalTime = new Date();\r\n  //   let localTimeExtraHours = supportVarLocalTime.getTimezoneOffset() / -60;\r\n\r\n  //   let forWhen = time;\r\n  //   // let what = 'TrainingTodayNotification';\r\n  //   // let how = true; //true or false\r\n  //   let what = 'TrainingTodayNotifications';\r\n  //   // let how = checked; //true or false\r\n  //   let how = [{ on: trainingTodayNotification, time }]; //true or false\r\n  //   try {\r\n  //     let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateNotificationsSettings', { what, how, forWhen, localTimeExtraHours });\r\n  //     updateUser(updatedUser);\r\n  //   } catch (err) { console.log(\"e1\", err) }\r\n  // }\r\n\r\n  const updateTodayNotificationsButtonAction = async () => {\r\n    ///TIMES\r\n    let x = new Date();\r\n    console.log(x)\r\n    let y = x.toUTCString();\r\n    console.log(y);\r\n    let z = new Date(`${y} UTC`);\r\n    console.log(z);\r\n    // let xx = new Date.toUTCString();\r\n    // console.log(xx);\r\n    let x1 = x.getTimezoneOffset() / -60;\r\n    console.log(\"x1:\", x1);\r\n\r\n    // let x2 = Date.UTC();\r\n    // console.log(\"x2:\", x2);\r\n    // console.log(Date.UTC());\r\n    // console.log(Date.now());\r\n    let supportVarLocalTime = new Date();\r\n    let localTimeExtraHours = supportVarLocalTime.getTimezoneOffset() / -60;\r\n\r\n    let forWhen = time;\r\n    // let what = 'TrainingTodayNotification';\r\n    // let how = true; //true or false\r\n    let what = 'TrainingTodayNotifications';\r\n    // let how = checked; //true or false\r\n    // let how = [{ on: trainingTodayNotification, time }]; //true or false\r\n    let how = todayNotifications;\r\n    try {\r\n      // let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateNotificationsSettings', { what, how, forWhen, localTimeExtraHours });\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateNotificationsSettings', { what, how, localTimeExtraHours });\r\n      updateUser(updatedUser);\r\n    } catch (err) { console.log(\"e1\", err) }\r\n  }\r\n\r\n\r\n  const useThisDeviceForNotificationsButtonClicked = async () => {\r\n    console.log(\"useThisDeviceForNotificationsButtonClicked clicked, deviceName: \", deviceName);\r\n    let result = await subscribeUser();\r\n    console.log(\"RESULTTTTTT of subscribing user: \", result);\r\n    // subscribeUser(deviceName);\r\n  }\r\n\r\n  const checkDeviceName = () => {\r\n  }\r\n\r\n  const addTrainingTodayNotificationClicked = () => {\r\n\r\n    console.log(\"addTrainingTodayNotificationClicked\");\r\n    \r\n    setTodayNotifications(todayNotifications => {\r\n      todayNotifications.push({on:true,time:{hours:12,minutes:30}})\r\n      // todayNotifications[index].on = checked;\r\n      return [...todayNotifications];\r\n    });\r\n\r\n    // setTodayNotifications(todayNotifications => {\r\n    //   todayNotifications[index].time[hoursOrMinutes] = newValue;\r\n    //   return [...todayNotifications];\r\n    // });\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h1>Settings</h1>\r\n      <SLink to='/pushups/userProfile'>My profile</SLink>\r\n      <Logout />\r\n      <div style={{ backgroundColor: 'lightGray' }}>\r\n        <h3>Notifications</h3>\r\n        {/* PWA Push Notifications */}\r\n        <p style={{ color: 'bray', fontSize: '10px', paddingLeft: '4px' }}>Info: {notificationSupportedInfo}</p>\r\n        {Notification.permission === 'default' &&\r\n          <button onClick={checkPWAWebPushNotifications} style={{ backgroundColor: 'yellow' }}>Activate Notifications</button>}\r\n        {Notification.permission === 'granted' &&\r\n          <div>\r\n            <button onClick={showPWAWebPushNotification} style={{ backgroundColor: 'yellow' }}>Test Notifications</button>\r\n          {user.authority.power > 1 && <button onClick={useThisDeviceForNotificationsButtonClicked}>Activate sending notifications to this device for this account (if test didn't work).</button>}\r\n          \r\n          </div>\r\n        }\r\n        {Notification.permission === 'denied' && <h3 style={{ color: 'red' }}>Notifications are blocked on this device.</h3>}\r\n\r\n\r\n\r\n        {/* <span>Name this device: </span> */}\r\n        {/* <input onChange={(e) => setDeviceName(e.target.value)} value={deviceName}></input> */}\r\n\r\n\r\n        <br /><br />\r\n        <h4>Training Today Notifications:</h4>\r\n        <p>Notify me on the day of training at...</p>\r\n\r\n        <h5>Notification 1</h5>\r\n\r\n        {/* <Toggle\r\n          // id='trainingSoundsToggle'\r\n          // defaultChecked={trainingTodayNotification}\r\n          defaultChecked={trainingTodayNotification}\r\n\r\n          // defaultChecked={context.user ? false : true}\r\n          onChange={handleTrainingTodayNotificationChangeClick}\r\n        /> */}\r\n        {/* <p>hours: <input value={time.hours} onChange={(e) => { e.persist(); console.log(e.target); setTime((time) => ({ ...time, hours: e.target.value * 1 })) }}></input></p> */}\r\n        {/* <p>minutes: <input type='number' value={time.minutes} onChange={(e) => { e.persist(); console.log(e.target); setTime((time) => ({ ...time, minutes: e.target.value * 1 })) }}></input></p> */}\r\n     \r\n        {/* <br />\r\n        <Counter settings={[1, 5, (newValue) => setTime((time) => ({ ...time, hours: newValue })), time.hours, '', 'hours', 0, 23]} />\r\n        <br />\r\n        <Counter settings={[1, 10, (newValue) => setTime((time) => ({ ...time, minutes: newValue })), time.minutes, '', 'minutes', 0, 59]} />\r\n        <br /> */}\r\n        \r\n        {/* <label htmlFor='trainingSoundsToggle'>Sounds</label> */}\r\n      </div>\r\n      <div style={{ margin: '20px', backgroundColor: 'lightGray' }}>\r\n        <h1>TEST</h1>\r\n        {todayNotifications.map((not, i) => (<TrainingTodayNotification key={i} index={i} todayNotificationsHandler={todayNotificationsHandler} />))}\r\n        <button onClick={addTrainingTodayNotificationClicked}>Add 'training today' notification</button>\r\n      </div>\r\n      <button onClick={updateTodayNotificationsButtonAction}> SAVE CHANGES <br/>(Update \"Training Today Notifications\" settings)</button>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserSettings;","import React from 'react';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\nimport UserSettings from './UserSettings';\r\n\r\nconst UserSettingsCheck = () => {\r\n  let { user, updateUser, publicPlans, allUsers } = React.useContext(PushUpsContext);\r\n\r\n  if (!user) return (<p>loading user data...</p>)\r\n  if (!user.email) return (<p>Module available only to registered users. Please register or log-in.</p>)\r\n  return (<UserSettings/>);\r\n};\r\n\r\nexport default UserSettingsCheck;","import React, { Component } from 'react';\r\nimport UserStatus from './UserStatus';\r\nimport PushUpPlans from './PushUpPlans';\r\nimport globalStyles from './styles/globalStyles2.scss'\r\nimport { Route, Switch, withRouter, Link } from 'react-router-dom';\r\nimport PrepareTraining from './Training/PrepareTraining';\r\nimport PushupsHome from './Home';\r\nimport PushUpsContext  // , { pushUpsState }\r\n  from './state/PushUpsContextState';\r\nimport MaxRepsTest from './assessment/MaxRepsTest';\r\n// import { SLink } from '../../App'\r\nimport History from './History'\r\nimport SignUpInOut from './SignUpInOut';\r\nimport AdjustPersonalPushupPlan from './personalPushupPlans/AdjustPersonalPushupPlan';\r\nimport CreatingPersonalPushupPlan from './personalPushupPlans/CreatingPersonalPushupPlan';\r\nimport RunTraining from './Training/RunTraining';\r\nimport ShowSetToDo from './Training/ShowSetToDo';\r\nimport PaceMaker from './assessment/PaceMaker';\r\nimport PrepareTraining2 from './Training/PrepareTraining';\r\n\r\nimport Sidebar from \"react-sidebar\";\r\nimport SideBarContent from './SideBarContent';\r\nimport FinishPersonalPushupPlan from './personalPushupPlans/FinishPersonalPushupPlan';\r\nimport ViewPushupPlan from './pushupPlans/ViewPushupPlan';\r\nimport PublishPushupPlan from './personalPushupPlans/PublishPushupPlan';\r\nimport { postJsonDataUrlAfterAPIgeneralPushups } from '../../functions/postJsonData';\r\nimport styled from 'styled-components';\r\nimport Intro from './Intro';\r\nimport Community from './Community';\r\nimport UserProfile from './UserProfile';\r\nimport UserSettings from './UserSettings';\r\nimport UserSettingsCheck from './UserSettingsCheck';\r\n\r\nexport const SLink = styled(Link)`\r\nmargin:auto 5px;\r\nbackground-color:orange;\r\npadding: 10px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n  /* font-size:20px; */\r\n}\r\n/* transition: background-color, color; */\r\ntransition-duration: 0.25s;\r\n`\r\n\r\n\r\n//stitch:\r\n// import { StitchAuthProvider, useStitchAuth } from \"./stitch/ReactStitchAuth\";\r\n\r\nconst PushupsMain = ({ location: { pathname } }) => {\r\n  //React Context\r\n  // let context2 = useContext(PushUpsContext);\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXX\");\r\n\r\n  ///get public plans\r\n  // const [publicPlans, setPublicPlans] = React.useState(null);\r\n  let { publicPlans, updatePublicPlans } = React.useContext(PushUpsContext);\r\n  let { allUsers, updateAllUsers } = React.useContext(PushUpsContext);\r\n  const pwaLaunchedInInfo = React.useRef(null);\r\n  const pwaBeforeInstallFired = React.useRef(null);\r\n  const pwaInstalled = React.useRef(null);\r\n  const [pwaReadyToInstall, setPwaReadyToInstall] = React.useState(null);\r\n  const [pwaDisplayMode, setPwaDisplayMode] = React.useState('?view?')\r\n\r\n\r\n  // const [pwaReadyToInstallTest, setPwaReadyToInstallTest] = React.useState('a');\r\n\r\n\r\n  //////PWA \"save app\" handling-----------------------PWA START\r\n  //install PWA prompt/event\r\n  let deferredPrompt;\r\n  const dealWithPWAPrompt = (e) => {\r\n    // Prevent the mini-infobar from appearing on mobile\r\n    e.preventDefault();\r\n    deferredPrompt = e;\r\n    setPwaReadyToInstall(e);\r\n    // setPwaReadyToInstallTest('b');\r\n    // alert(\"beforeinstallprompt event fired, e(vent) shall be saved\");\r\n    // pwaBeforeInstallFired.current.innerHTML = `i.e.Fired`;\r\n    console.log(\"PWA PWA PWA PWA PWA beforeinstallprompt event fired, e(vent) shall be saved\");\r\n    // Stash the event so it can be triggered later.\r\n\r\n    // Update UI notify the user they can install the PWA\r\n    // showInstallPromotion();\r\n  }\r\n  window.addEventListener('beforeinstallprompt', dealWithPWAPrompt);\r\n  // app installed event\r\n  const dealWithAppWasInstalledEvent = e => {\r\n    // alert('PWA was installed! well done 👍 :-).');\r\n    pwaInstalled.current.innerHTML = `installed`;\r\n    console.log('PWA was installed! well done 👍 :-).');\r\n  }\r\n  window.addEventListener('appinstalled', dealWithAppWasInstalledEvent);\r\n  //app (PWA) launched from tab vs standalone event\r\n  const registerHowAppWasLaunched = (e) => {\r\n    // console.log(\"---------------------registerHowAppWasLaunched\");\r\n    let displayMode = 'tab';\r\n    if (navigator.standalone) {\r\n      displayMode = 'app-ios';\r\n    }\r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      displayMode = 'app';\r\n    }\r\n    // Log launch display mode to analytics\r\n    // alert(`DISPLAY_MODE_LAUNCH: ${displayMode}`);\r\n    // pwaLaunchedInInfo.current.innerHTML = `${displayMode}`;\r\n    // pwaLaunchedInInfo.current.innerHTML = `xx`;\r\n    setPwaDisplayMode(displayMode);\r\n    // console.log('DISPLAY_MODE_LAUNCH:', displayMode);\r\n\r\n    //Track when the display mode changes\r\n    // window.matchMedia('(display-mode: standalone)').addListener((evt) => {\r\n    //   let displayMode = 'browser tab';\r\n    //   if (evt.matches) {\r\n    //     displayMode = 'standalone';\r\n    //   }\r\n    //   // Log display mode change to analytics\r\n    //   alert(`DISPLAY_MODE_CHANGED: ${displayMode}`);\r\n    //   console.log(`DISPLAY_MODE_CHANGED: ${displayMode}`);\r\n    // });\r\n\r\n  }\r\n  window.addEventListener('DOMContentLoaded', registerHowAppWasLaunched);\r\n  //button to install PWA app\r\n  // buttonInstall.addEventListener('click', (e) => {\r\n  const installPwaButtonClicked = () => {\r\n    // Hide the app provided install promotion\r\n    // hideMyInstallPromotion();\r\n    // Show the install prompt\r\n    if (pwaReadyToInstall === null) {\r\n      alert('Event not available anymore');\r\n      return;\r\n    }\r\n    pwaReadyToInstall.prompt();\r\n    // Wait for the user to respond to the prompt\r\n    pwaReadyToInstall.userChoice.then((choiceResult) => {\r\n      if (choiceResult.outcome === 'accepted') {\r\n        console.log('User accepted the install prompt');\r\n      } else {\r\n        console.log('User dismissed the install prompt');\r\n      }\r\n      setPwaReadyToInstall(null);\r\n    });\r\n  };\r\n  //-----------------------------------------------------PWA END\r\n\r\n\r\n\r\n  // console.log(\"PUBLIC LANS: \", publicPlans);\r\n  React.useEffect(() => {\r\n    const doAsAsync = async () => {\r\n      // console.log(\"P app STARTED\");\r\n      try {\r\n        // console.log(\"REQUESTING ALL -PLANS- FROM SERVER\");\r\n        // let publicPlans = await postJsonDataUrlAfterAPIgeneralPushups('/getPublicPlan_s', {});\r\n        let publicPlansHereLocally = postJsonDataUrlAfterAPIgeneralPushups('/getPublicPlan_s', {});\r\n        // let publicPlans;\r\n        // console.log(\"POST - publicPlans received from Server: \", publicPlans);\r\n\r\n\r\n        // console.log(\"REQUESTING (All) -USERS- FROM SERVER\");\r\n        let allUsersHereLocally = postJsonDataUrlAfterAPIgeneralPushups('/getAllUsers', {});\r\n        // let publicPlans;\r\n        // console.log(\"POST - publicPlans received from Server: \", publicPlans);\r\n        // updatePublicPlans([...publicPlans]);\r\n\r\n\r\n        publicPlansHereLocally = await publicPlansHereLocally;\r\n        updatePublicPlans([...publicPlansHereLocally]);\r\n        allUsersHereLocally = await allUsersHereLocally;\r\n        updateAllUsers({ ...allUsersHereLocally });\r\n\r\n        // updateUser({ ...updatedUser });\r\n      } catch (err) { console.log(err); };\r\n    }\r\n    doAsAsync();\r\n\r\n\r\n\r\n\r\n    return () => {\r\n      // window.removeEventListener('beforeinstallprompt', dealWithPWAPrompt);\r\n      // window.removeEventListener('appinstalled', dealWithAppWasInstalledEvent);\r\n      // window.removeEventListener('DOMContentLoaded', registerHowAppWasLaunched); //one more event listener is inside if this f.\r\n\r\n    }\r\n  }, []);\r\n\r\n\r\n\r\n  ///Stitch\r\n  // const { isLoggedIn, actions } = useStitchAuth();\r\n  // const stitchAuth = useStitchAuth();\r\n  // console.log(\"STITCH: is logged in:\", isLoggedIn);\r\n  // console.log(\"useStitchAuth Response: \", stitchAuth);\r\n\r\n  const [sideBarOpen, setSideBarOpen] = React.useState(false);\r\n  return (\r\n    <>\r\n      {/* menu-header */}\r\n      <div id='mainNavBar' style={{ backgroundColor: 'black', paddingBottom: '0px', display: 'flex', justifyContent: 'flex-end', position: 'sticky', top: '0', zIndex: '1000' }}>\r\n        {/* <div style={{ backgroundColor: 'black', paddingBottom: '2px', display: 'flex', justifyContent: 'center', position: 'sticky', top: '0', zIndex: '1000' }}> */}\r\n        {/* <div style={{ backgroundColor: 'black', paddingBottom: '2px', display: 'flex', justifyContent: 'flex-start', position: 'sticky', top: '0', zIndex: '1000' }}> */}\r\n        {/* {pathname === '/pushups' ? null : <SLink style={{ float: 'left' }} to='/pushups'>Main Menu</SLink>} */}\r\n\r\n        {/* Sidebar */}\r\n        {pathname === '/pushups' ? null\r\n          : <Sidebar\r\n            sidebar={<b>\r\n              <SideBarContent pathname={pathname} setSideBarOpen={setSideBarOpen} />\r\n            </b>}\r\n            open={sideBarOpen}\r\n            onSetOpen={setSideBarOpen}\r\n            styles={{\r\n              // display:\"inline\",\r\n              sidebar: {\r\n                position: \"fixed\",\r\n                background: \"yellow\",\r\n                maxWidth: \"80vw\",\r\n                transition: \"transform .1s ease-out\",\r\n                WebkitTransition: \"-webkit-transform .1s ease-out\",\r\n                background: \"lightGray\",\r\n              },\r\n              root: {\r\n                position: \"undefined\",\r\n                // background: \"pink\",\r\n                display: \"inline\",\r\n                float: 'left'\r\n              },\r\n              content: {\r\n                position: \"undefined\",\r\n                top: \"undefined\",\r\n                left: \"undefined\",\r\n                right: \"undefined\",\r\n                bottom: \"undefined\",\r\n                transition: \"left .1s ease-out, right .1s ease-out\",\r\n                display: \"inline\",\r\n                float: 'left'\r\n              },\r\n              overlay: {\r\n                transition: \"opacity .1s ease-out, visibility .1s ease-out\",\r\n                // display: \"inline !important\",\r\n              }\r\n            }}\r\n          >\r\n            {pathname === '/pushups/runMyTraining' &&\r\n              <button\r\n                onClick={() => setSideBarOpen(true)}\r\n                style={{ padding: '1rem', backgroundColor: \"purple\" }}\r\n              >Options\r\n              </button>}\r\n          </Sidebar>\r\n        }\r\n\r\n        {/* INTALL APP PROMPT and INFO */}\r\n        {/* <p style={{ color: 'yellow' }}>{pwaReadyToInstallTest}</p> */}\r\n        {/* <p ref={pwaBeforeInstallFired} style={{ color: `${pwaReadyToInstall === null ? 'red' : 'lightGreen'}`, paddingRight: '3px' }}>e</p> */}\r\n        {/* {pwaReadyToInstall != null && <button style={{ backgroundColor: 'yellow', paddingBottom: '2px' }} onClick={installPwaButtonClicked}>Install</button>} */}\r\n        {pwaReadyToInstall != null && <button style={{ backgroundColor: 'yellow', borderRadius: '5px' }} onClick={installPwaButtonClicked}>Install App</button>}\r\n        {/* <p ref={pwaInstalled} style={{ color: 'orange', paddingRight: '3px' }}></p>//we don't know if app was installed(?) */}\r\n        {/* <p ref={pwaLaunchedInInfo} style={{ color: 'white' }}>{pwaDisplayMode}</p> */}\r\n\r\n\r\n        {/* navigation buttons wrapper */}\r\n        {pathname === '/pushups' ? null :\r\n          <div style={{ display: 'flex', justifyContent: 'space-around', paddingBottom: '2px' }}>\r\n            {/* <Route path='/pushups/trainingPlans/' render={() => <SLink to='/pushups/trainingPlans'>Plans</SLink>} /> */}\r\n            {/* <Route path='/pushups/trainingPlans/publish' render={() => <SLink to='/pushups/trainingPlans'>Plans</SLink>} /> */}\r\n            {/* <Route path='/pushups/trainingPlans/view' render={() => <SLink to='/pushups/trainingPlans'>Plans</SLink>} /> */}\r\n            {pathname.includes('/pushups/trainingPlans/') ? <SLink to='/pushups/trainingPlans'>Plans</SLink> : null}\r\n            <SLink to='/pushups'>Main Menu</SLink>\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n\r\n\r\n      {/* <Route exact path='/pushups' component={UserStatus} /> */}\r\n      <Route exact path='/' component={UserStatus} />\r\n      <Route path='/pushups' component={UserStatus} />\r\n\r\n\r\n      {/* <UserStatus /> */}\r\n      {/* <button onClick={actions.handleLogout}>Stitch anonym. logout</button>\r\n      <button onClick={() => actions.handleLogin(\"anonymous\")}>Stitch anonym. login</button>\r\n      <button provider=\"google\" onClick={() => actions.handleLogin(\"google\")}>         Log In with Google      </button> */}\r\n\r\n      <Switch>\r\n\r\n        <Route exact path='/' component={PushupsHome} />\r\n        <Route exact path='/pushups' component={PushupsHome} />\r\n        <Route exact path='/pushups/Sign-upLog-in' component={SignUpInOut} />\r\n\r\n        <Route exact path='/pushups/intro' component={Intro} />\r\n        <Route exact path='/pushups/trainingPlans' component={PushUpPlans} />\r\n        <Route path='/pushups/trainingPlans/createPersonal' component={CreatingPersonalPushupPlan} />\r\n        {/* <Route path='/pushups/trainingPlans/adjustPersonal' component={AdjustPersonalPushupPlan} /> */}\r\n        {/* following 2 can't be swapped as it would not work as each is using different url params */}\r\n        <Route path='/pushups/trainingPlans/adjustPersonal/:positionFrom0/:id' component={AdjustPersonalPushupPlan} />\r\n        <Route path='/pushups/trainingPlans/adjustPersonal/:positionFrom0' component={AdjustPersonalPushupPlan} />\r\n\r\n        <Route path='/pushups/trainingPlans/finishPersonal/:positionFrom0' component={FinishPersonalPushupPlan} />\r\n        <Route path='/pushups/trainingPlans/publish/:positionFrom0' component={PublishPushupPlan} />\r\n        <Route path='/pushups/trainingPlans/view/:type/:ID' component={ViewPushupPlan} />\r\n\r\n        <Route exact path='/pushups/maxRepsTest' component={MaxRepsTest} />\r\n        <Route exact path='/pushups/paceMaker' component={PaceMaker} />\r\n\r\n        <Route exact path='/pushups/startMyTraining' component={PrepareTraining2} />\r\n        <Route exact path='/pushups/runMyTraining' component={RunTraining} />\r\n        <Route exact path='/pushups/showSetToDo' component={ShowSetToDo} />\r\n\r\n        <Route exact path='/pushups/userProfile' component={UserProfile} />\r\n        <Route exact path='/pushups/settings' component={UserSettingsCheck} />\r\n        <Route exact path='/pushups/history' component={History} />\r\n        <Route exact path='/pushups/community' component={Community} />\r\n\r\n        {/* <Route path='/pushups/trainingPlans/viewAdjustPersonal' component={ViewAdjustPersonalPushupPlan} /> */}\r\n\r\n        {/* <Route component={FirstPage} /> catch all other routes */}\r\n      </Switch>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nconst PushupsMainWithRouter = withRouter(PushupsMain);\r\n\r\nclass PushupsContextsComponent extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      user: null,\r\n      info: 'Pushups context',\r\n      // reRender: 0,\r\n      updateUser: (newUser) => {\r\n        this.setState({ ...this.state, user: newUser }, async () => {\r\n          console.log(\"'Pushup context' - USER - updated to \", this.state.user);\r\n          console.log(\"whole 'Pushup context' now: \", this.state);\r\n        });\r\n      },\r\n      publicPlans: null,\r\n      updatePublicPlans: (updatedPlans) => {\r\n        this.setState({ ...this.state, publicPlans: updatedPlans }, async () => {\r\n          console.log(\"'Pushup context' - PUBLIC PLANS - updated to \", this.state.publicPlans);\r\n          console.log(\"whole 'Pushup context' now: \", this.state);\r\n\r\n        });\r\n      },\r\n      allUsers: null,\r\n      updateAllUsers: (updatedUsers) => {\r\n        this.setState({ ...this.state, allUsers: updatedUsers }, async () => {\r\n          console.log(\"'Pushup context' - ALL USERS - updated to \", this.state.allUsers);\r\n          console.log(\"whole 'Pushup context' now: \", this.state);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      // <PushUpsContext.Provider value={pushUpsState}>\r\n      <PushUpsContext.Provider value={this.state}>\r\n        <PushupsMainWithRouter />\r\n      </PushUpsContext.Provider>\r\n    )\r\n  }\r\n}\r\n\r\n// export default withRouter(PushupsContexts);\r\nexport default PushupsContextsComponent;\r\n\r\n\r\n\r\n\r\n\r\n// export default Pushups;","import React, { useState } from 'react';\r\n\r\nconst CwUseState = () => {\r\n  const [stateH, setStateH] = useState({ counter: 0 })\r\n  const add1 = () => {\r\n    setStateH({ counter: stateH.counter + 1 });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h3>UseState component:</h3>\r\n      <button onClick={add1}> Add 1 </button>\r\n      <p>counter: <span>{stateH.counter}</span></p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CwUseState;","import React from 'react';\r\nimport CwUseState from './CwUseState';\r\n\r\nconst States = () => {\r\n  return (\r\n    <div>\r\n       <h1>Components with states</h1>\r\n        <CwUseState></CwUseState>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default States;\r\n","// creates CSS classes serverState which changes backgrounds, available everywhere\r\nimport React from 'react';\r\n\r\nlet nameOfServerStateCssClass = 'serverState';\r\n\r\nclass WakeUpserverState extends React.Component {\r\n  // constructor(props) {\r\n  //   super(props);\r\n  // }\r\n\r\n  changeServerStateSubClassTo = (subClassName) => {\r\n    // console.log(\"subclass: \", subClassName, `${nameOfServerStateCssClass}${subClassName}`);\r\n    document.querySelectorAll(`.${nameOfServerStateCssClass}`).forEach(El => El.setAttribute('class', `${nameOfServerStateCssClass} ${nameOfServerStateCssClass}${subClassName}`));\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.changeServerStateSubClassTo('Activating');\r\n    // if (document.querySelector(`.${nameOfServerStateCssClass}On`)) return;\r\n    fetch(this.props.url)\r\n      .then(res => {\r\n        return res.json()\r\n      })\r\n      .then(\r\n        (result) => {\r\n          this.changeServerStateSubClassTo('On');\r\n        },\r\n        (error) => {\r\n          console.log(\"Error in fetch:\", error);\r\n          this.changeServerStateSubClassTo('Err');\r\n        }\r\n      )\r\n  }\r\n\r\n  render(props) {\r\n    let cssContent = `\r\n      .serverState{font-weight:bold;}\r\n      .serverStateOn{color:green;}\r\n      .serverStateActivating{color:yellow;}\r\n      .serverStateOff{color:grey;}\r\n      .serverStateErr{color:red;}\r\n    `;\r\n    return (\r\n      <style>{cssContent}</style >\r\n    );\r\n  }\r\n}\r\n\r\nexport default WakeUpserverState;","import React from 'react';\r\n// import { Howl, Howler } from 'howler';\r\n\r\nconst Sounds = () => {\r\n  const context = new window.AudioContext();\r\n\r\n  function playFile(filepath) {\r\n    // see https://jakearchibald.com/2016/sounds-fun/\r\n    // Fetch the file\r\n    fetch(filepath)\r\n      // Read it into memory as an arrayBuffer\r\n      .then(response => response.arrayBuffer())\r\n      // Turn it from mp3/aac/whatever into raw audio data\r\n      .catch(err => console.log(\"Miro-error: \", err))\r\n\r\n      .then(arrayBuffer => context.decodeAudioData(arrayBuffer))\r\n      .catch(err => console.log(\"Miro-error: \", err))\r\n\r\n      .then(audioBuffer => {\r\n        // Now we're ready to play!\r\n        const soundSource = context.createBufferSource();\r\n        soundSource.buffer = audioBuffer;\r\n        soundSource.connect(context.destination);\r\n        soundSource.start();\r\n      })\r\n      .catch(err => console.log(\"Miro-error: \", err));\r\n  }\r\n\r\n\r\n\r\n  const successClick = () => {\r\n    /////CSS tricks\r\n    // playFile('https://s3-us-west-2.amazonaws.com/s.cdpn.io/3/success.mp3');\r\n    playFile('Button1.m4a');\r\n\r\n    ////stack overflow\r\n    // var audio = new Audio('C:\\Users\\Miros\\Documents\\GitHub\\MERN\\reactAndExpressForHeroku\\client-react-project\\src\\Components\\sounds\\files\\facebook\\Button1.m4a');\r\n    // audio.play();\r\n\r\n    ///////HOWEL library\r\n    // var sound = new Howl({\r\n    //   src: ['./files/facebook/Button1.m4a']\r\n    // });\r\n    // sound.play();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Sounds</h1>\r\n      <button onClick={successClick} >Play Success Sound</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sounds;","import React from 'react';\r\n// import { Howl, Howler } from 'howler';\r\nimport useSound from 'use-sound';\r\n// import soundX from './files/facebook/Complete and Success/Complete 1.m4a'\r\nimport soundX from './files/facebook/Complete and Success/Complete 2.m4a'\r\n\r\nconst SoundsReact = () => {\r\n\r\n  const [playSound] = useSound(soundX);\r\n  const test = () => {\r\n    \r\n    console.log(\"hi\");\r\n    playSound();\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h1>Sounds</h1>\r\n      {/* <button onClick={playSound} >Play Sound</button> */}\r\n      <button onClick={test} >Play Sound</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SoundsReact;","//rsc  -> f.c.\r\nimport React from 'react';\r\nimport { Link, Route, Switch, HashRouter, withRouter,Redirect } from 'react-router-dom';\r\nimport './App.css';\r\n// import FirstPage from './Components/FirstPage'\r\nimport Playground from './Components/playground/Playground'\r\nimport APIPage from './Components/APIPage'\r\n// import Test from './Components/Test'\r\nimport styled from 'styled-components'\r\nimport TRpage from './Components/translate/TRpage'\r\n// import MongoDB from './Components/mongoDB/MongoDB'\r\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css'\r\nimport Pushups from './Components/pushups/Pushups'\r\nimport States from './Components/states/States'\r\n\r\n// import SignUp from './Components/mongoDB/components/SignUp'\r\n\r\n///stitch provider\r\n// import { StitchAuthProvider } from \"./Components/pushups/stitch/ReactStitchAuth\";\r\n\r\n\r\nimport WakeUpserverState from './Components/APIs/WakeUpServerCleaned';\r\nimport { urlRoot } from './globalState/globalVariables';\r\nimport Sounds from './Components/sounds/Sounds';\r\nimport SoundsReact from './Components/sounds/SoundsReact';\r\n\r\nconst SMenu = styled.div`\r\ndisplay: flex;\r\nflex-wrap:wrap;\r\njustify-content: center;\r\n\r\nalign-items: center;\r\nbackground-color: yellow;\r\n/* overflow:auto; */\r\n`\r\nexport const SLink = styled(Link)`\r\nmargin:10px;\r\nbackground-color:orange;\r\npadding: 3px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n  /* font-size:20px; */\r\n}\r\n/* transition: background-color, color; */\r\ntransition-duration: 0.25s;\r\n`\r\nfunction App({location:{hash}}) {\r\n  // console.log(\"history: \", hash.includes('#/'));\r\n  // console.log(\"history: \", (hash=='#/'));\r\n  return (\r\n    // div replaced to HAshRouter\r\n    <HashRouter basename='/' className=\"App\">\r\n\r\n      {/* <header className=\"App-header\">\r\n      </header> */}\r\n      {/* <Switch> */}\r\n      \r\n      \r\n      {/* <Route exact path='/pushups' component={Pushups} /> */}\r\n\r\n      {!hash.includes(\"#/\") && // to hide menu\r\n        <SMenu>\r\n          <SLink to='/'>Home</SLink>\r\n          <SLink to='/pageAPI'>Public API</SLink>\r\n          <SLink to='/pageTr'>Translate API</SLink>\r\n          <SLink to='/playground'>Playground</SLink>\r\n          {/* <SLink to='/mongoDB'>Mongo DB</SLink> */}\r\n          <SLink to='/states'>states-useless</SLink>\r\n          <SLink to='/pushups'>Pushups</SLink>\r\n          {/* <SLink to='/sounds'>Sounds</SLink> */}\r\n          <SLink to='/sounds/React'>Sounds in React</SLink>\r\n\r\n          <WakeUpserverState url={urlRoot + '/start'} />\r\n          <span style={{ textAlign: 'center', fontSize: '11px', border: '3px dotted gray' }}>\r\n            <div className='serverState'> Server-State</div>\r\n            <span>Environment:</span> <span style={{ color: 'red' }}> {process.env.NODE_ENV}</span>\r\n          </span>\r\n        </SMenu>}\r\n      {/* </Switch> */}\r\n      <Switch>\r\n        {/* <Route exact path='/' component={FirstPage} /> */}\r\n        <Route exact path='/'><Redirect to='/pushups'/></Route>\r\n        <Route exact path='/playground' component={Playground} />\r\n        <Route exact path='/pageAPI' component={APIPage} />\r\n        <Route exact path='/pageTr' component={TRpage} />\r\n        {/* <Route exact path='/mongoDB' component={MongoDB} /> */}\r\n        <Route exact path='/states' component={States} />\r\n        <Route exact path='/sounds' component={Sounds} />\r\n        <Route exact path='/sounds/React' component={SoundsReact} />\r\n        <Route path='/pushups' component={Pushups} />\r\n        {/* <Route component={FirstPage} /> catch all other routes */}\r\n      </Switch>\r\n      {/* <SignUp/> */}\r\n\r\n\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.0/8 are considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport function register(config) {\r\n  //MM added\r\n  if (!('serviceWorker' in navigator)) { console.log(\"MM: Service worker not supported on this browser/device.\"); }\r\n  //MM added end.\r\n\r\n  //MM001 change\r\n  // if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n  if ('serviceWorker' in navigator) { //MM to make it run in localhost too (just intuitive experiment)\r\n\r\n\r\n\r\n    console.log(\"SERVICE WORKER register setup running\");\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      console.log(\"SERVICE WORKER  won't work as PUBLIC_URL is on a different origin from what our page is served on.see https://github.com/facebook/create-react-app/issues/2374\");\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      // const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n      // MM001b\r\n\r\n      //frm https://medium.com/@seladir/how-to-implement-web-push-notifications-in-your-node-react-app-9bed79b53f34\r\n      const swFileName = process.env.NODE_ENV === 'production'\r\n        ? 'service-worker.js'\r\n        : 'custom-sw.js';\r\n      const swUrl = `${process.env.PUBLIC_URL}/${swFileName}`;\r\n\r\n      // let swUrl;\r\n      // if (process.env.NODE_ENV === 'production') {\r\n      //   swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n      // } else {\r\n      //   // swUrl = `${__dirname}/serviceWorker.js`;   //NONE working:-(\r\n      //   // swUrl = './serviceWorker.js';\r\n      //   // swUrl = '/serviceWorker.js';\r\n      //   swUrl = '/service-worker.js';\r\n      // }\r\n\r\n\r\n         if (isLocalhost) {\r\n        console.log(\"MM SW on LOCALHOST - check\");\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n\r\n\r\n\r\n\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  console.log(\"MM Valid sw found. registering it... (navigator:)\",  navigator)\r\n  navigator.serviceWorker\r\n    .register(swUrl)  //MM here sw is being registered\r\n    .then(registration => {\r\n      console.log(\"MM. sw was registered: \", registration);\r\n      // console.log(\"MM. navigatior now: \", navigator);\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  console.log(\"MM checking if sw is valid\");\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n\r\n      // console.log(\"MM we got some response\", response.status === 404,contentType != null);\r\n      console.log(\"MM sw is valid:\", !(response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)));\r\n\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n// import { subscribeUser } from '../src/subscription';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n// subscribeUser();\r\n","module.exports = __webpack_public_path__ + \"static/media/Complete 2.2655ec0c.m4a\";","module.exports = __webpack_public_path__ + \"static/media/airHorn.95897491.mp3\";"],"sourceRoot":""}