{"version":3,"sources":["Components/pushups/img/minusLight.png","Components/pushups/img/plusLight.png","Components/pushups/img/minus.png","Components/sounds/files/getReady/taffFemale.mp3","Components/sounds/files/breakMusic/Derek_Clegg_-_09_-_Youre_The_Dummy.mp3","Components/sounds/files/trainingFinishedCelebration/Trumpets8s.mp3","Components/pushups/img/plus.png","Components/playground/SortableGallery.js","Components/playground/Playground.js","Components/APIs/Dogs.js","Components/APIs/DogsFrame.js","Components/APIs/CatsFrame.js","Components/APIs/APITemplate.js","globalState/globalVariables.js","Components/APIPage.js","functions/translate.js","Components/translate/TRpage.js","Components/pushups/state/PushUpsContextState.js","functions/postJsonData.js","Components/pushups/functions/signInWithJWTCookie.js","Components/pushups/UserStatus.js","Components/pushups/TrainingPlanOverview.js","Components/pushups/functions/basics.js","Components/pushups/Home.js","functions/objectSize.js","Components/pushups/PersonalPushupPlans.js","Components/pushups/pushupPlans/publicPlans/PublicPlanToList.js","Components/pushups/pushupPlans/publicPlans/PublicPlans.js","Components/pushups/PushUpPlans.js","Components/pushups/assessment/InitialAssessment.js","Components/pushups/Training/UsabilityIssues.js","Components/pushups/Training/PrepareTraining.js","Components/pushups/assessment/AssessmentForm.js","Components/pushups/assessment/MaxRepsTest.js","Components/pushups/history/LastTraining.js","Components/pushups/history/UsabilityInfo.js","Components/pushups/history/CurrentPlan.js","Components/pushups/history/AssessmentsHistory.js","Components/pushups/History.js","Components/pushups/SignUp.js","Components/pushups/LogIn.js","Components/pushups/SignUpInOut.js","Components/pushups/personalPushupPlans/ContextDefaults.js","Components/pushups/basicComponents/CounterAllIn.js","Components/pushups/personalPushupPlans/Set.js","Components/pushups/personalPushupPlans/cratingObjectsfunctions.js","Components/pushups/personalPushupPlans/Training.js","Components/pushups/personalPushupPlans/Trainings.js","Components/pushups/personalPushupPlans/schedule/Schedule.js","Components/pushups/personalPushupPlans/repsAsPercentages/MaxRepsUsedForRepsPercentages.js","Components/pushups/personalPushupPlans/PercentagesRegimeActivator.js","Components/pushups/basicComponents/richTextEditing/TextEditorReactQuill.js","Components/pushups/personalPushupPlans/ShowPersonalPlanToUserToAdjust.js","Components/pushups/personalPushupPlans/AdjustPersonalPushupPlan.js","Components/pushups/personalPushupPlans/CreatingPersonalPushupPlan.js","Components/pushups/Training/CurrentTrainingInfo.js","Components/pushups/Training/ShowSetToDo.js","Components/pushups/basicComponents/CounterToolOld.js","Components/pushups/Training/BreakTimer.js","Components/pushups/Training/BreakSounds.js","Components/pushups/Training/StartBreakLogData.js","Components/pushups/Training/TrainingFinished.js","Components/pushups/Training/TrainingSwitcher.js","Components/pushups/Training/TrainingStopWatch.js","Components/pushups/Training/SetsToDoAllIn.js","Components/pushups/Training/SoundAndMusicControls.js","Components/pushups/Training/TrainingHeaders.js","Components/pushups/Training/DayOfFinalAssessment.js","Components/pushups/Training/RunTraining.js","Components/pushups/assessment/PaceMaker.js","Components/pushups/SideBarContent.js","Components/pushups/personalPushupPlans/FinishPersonalPushupPlan.js","Components/pushups/pushupPlans/view/ViewSet.js","Components/pushups/pushupPlans/view/ViewTraining.js","Components/pushups/pushupPlans/view/ViewSchedule.js","Components/pushups/pushupPlans/ViewPushupPlan.js","Components/pushups/personalPushupPlans/PublishPushupPlan.js","Components/pushups/Intro.js","Components/pushups/Community.js","Components/pushups/Pushups.js","Components/states/CwUseState.js","Components/states/States.js","Components/APIs/WakeUpServerCleaned.js","Components/sounds/Sounds.js","Components/sounds/SoundsReact.js","App.js","serviceWorker.js","subscription.js","index.js","Components/sounds/files/facebook/Complete and Success/Complete 2.m4a","Components/sounds/files/startBlow/airHorn.mp3"],"names":["module","exports","SGalleryWrapper","styled","div","Simg","img","Image","props","src","imageUrl","alt","SortableSingleImageContainer","SortableElement","SortableImagesContainer","SortableContainer","imagesUrls","map","index","key","SortableGallery","useState","numberOfPictures","picturesArray","i","push","returnPicturesArray","pictures","setPictures","onSortEnd","oldIndex","newIndex","console","log","newArray","arrayMove","axis","SPlaygroundWrapper","Playground","DogsAPI","error","setError","isLoaded","setIsLoaded","data","setdata","useEffect","fetch","then","res","json","result","message","DogsFrame","Dogs","Note","p","APITemplate","state","this","url","setState","title","style","backgroundColor","margin","Object","entries","arr","color","JSON","stringify","React","Component","urlRoot","frontEndPushupsUrlRoot","SFrame","APIPage","translate","from","to","textToTranslate","postJsonData","a","options","method","headers","body","response","SHighlight","TRpage","inputChangeHandler","e","target","value","submitted","handleSubmit","preventDefault","translationObject","TextTranslated","translated","handleSubmit2","checkCzechHighlight","alertUserForSec","text","durationInSec","alertForSec","document","createElement","innerHTML","id","animationDuration","querySelector","append","Promise","resolve","setTimeout","remove","getSelectionText","window","getSelection","toString","selection","type","createRange","alert","onSubmit","placeholder","onChange","className","onTouchEnd","onClick","onTouchEndCapture","onTouchCancel","onTouchCancelCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","pushUpsState","user","info","reRender","updateUser","newUser","PushUpsContext","createContext","postJsonDataUrlAfterAPIpushups","urlEnd","credentials","dataToReturn","postJsonDataUrlAfterAPIgeneralPushups","postJsonDataUrlAfterAPI","checkIfNewGuestOrCookiesDisabled","cookieCreated","cookieName","data2","cookiesEnabled","location","replace","signInWithJWTCookie","stage1","cookieFound","userToUse","email","withRouter","history","userStatusInfo","setUserStatusInfo","userContext","useContext","PushUpsContextState","userA","updateUserContextFromCookie","logOut","guest","resetGuestButton","pathname","display","float","textAlign","paddingRight","name","Button","getSimpleDateIfTrueAlsoTime","dateReceived","withTime","withYear","d","Date","date","getDate","month","getMonth","year","getFullYear","dateStr","dateWithTimeStr","getHours","getMinutes","returnAssessmentFromAssID","assID","assessments","find","ass","_id","returnTrueIfDatesHaveTheSameDay","d1a","d2a","d1","d2","return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate","pushupPlans","current","trainingHistory","length","dateToday","dateOfLastTraining","SLink","Link","returnNumberOfDaysMissingCurrentSchedulleOrUndefined","undefined","currentPlan","dayToDoFrom0","scheduleDayToDoFrom0","initialAssessmentID","todayA","otherDayA","otherDayIsThisNumberOfDaysAhead","today","otherDay","smallerThenBigger","getTime","returnDaysDifference","schedule","dueDate","Home","dueDateIsAheadThisMuch","pushupsContext","setInfo","testingCORS","setTestingCORS","ansFromServer1","xx","textInfoFirstLineLocalVariable","completed","scheduleDayUpdated","updatedUser","doItAsAsync","finalAssessmentDueIn","continueTraining","textLine1","textLine2","textLine3","days","fontSize","cursor","roughSizeOfObject","object","objectList","stack","bytes","pop","indexOf","SPersonalPushupPlans","MyExistingPlans","SPlanLink","SButtonWrapper","personalPlanAction","positionFrom0","action","personal","personalPlanPositionFrom0","plan","objForServer","planPositionFrom0","objectSize","personalFinishedPlanAction","personalFinished","personalFinishedPlanPositionFrom0","padding","border","indexFrom0","updatePublicPlans","publicPlans","publicPlanButtonClickAction","publicPlanID","updatedUserOrPlans","planIDType","description","targetGroup","initialMaxReps","rangeAsReps","executions","summary","uncompleted","authority","power","SCard","Card","Body","PublicPlans","pushupContext","togglePublicPlansView","publicPlansAccordion","settings","plans","public","view","Accordion","background","defaultActiveKey","Toggle","as","Header","eventKey","Collapse","maxHeight","overflowY","PushUpPlans","currentPlanName","setCurrentPlanName","finishCurrentTrainingPlan","justifyContent","fontWeight","assNotDoneOrDoneLateOrOk","SETassNotDoneOrDoneLateOrOk","reps","notes","daysInPast","dateNewerNormal","dateOlderSpecialFromMongoose","dateOlder","differenceInDays","Math","round","getLastAssessmentInfo","useThisAssessmentAsInitial","currentScheduleToUpdate","timeNowInMs","updateCurrentSchedule","readAgain","setReadAgain","continueToTraining","usability","finalUsabilityForDB","updatedSchedule","updateScheduleDayToDoFrom0OrUndefined","lastTraining","updatedScheduleDayToDoFrom0","potentialUnfinishedTrainingAccounted","usabilityOriginal","rating","daysLateToday","daysOffSchedule","unfinishedTrainings","context","reschedulingInfo","setReschedulingInfo","checks","scheduleChecked","lastTrainingChecked","lastTrainingCheckedPREP","usabilityIssues","setUsabilityIssues","c0","cA","cB","scheduleDayNumberFrom0","dateOfLastTrainingAsStringOrNull","usabilityOld","counter","usabilityNewest","parse","setSubmitted","handleNewAssessmentSubmit","userInfoForServer","assessmentReps","assessmentNotes","apiUrl","SPTiny","LastTraining","viewType","repsSum","setRepsSum","timeInMinutes","setTimeInMinutes","repsSumCalc","sets","reduce","acc","set","calculateRepsSum","td","dt2","dt1","diff","abs","differenceInMinutes","calcTrainingTime","height","width","top","left","tr","dataForChart","setsNr","setNumber","repsNotes","breakDuration","breakDurationS","getTrainingDataToChart","dataKey","angle","position","fill","slice","reverse","UsabilityInfo","trainingSHistory","currentPlanExecution","personalPushupPlans","planInfo","planID","typePersonalOnlyFinishedPublic","publicPushupPlans","returnAnyPlanFromPlanID","elementOfCurrentPlanHistory","useRef","scrollLeft","wanted","returnAssessmentInfoFromAssID","training","flexWrap","overflowX","ref","minWidth","bottom","trainings","returnTotalReps","returnTrainingTimeInMinutes","trainingInfoForChart","date2","trainingNumber","trainingName","trainingNrAName","trainingNotes","trainingDurationInMinutes","repsInTotal","getTrainingSDataToChart","getAssessmentsDataToChart","assInfoForChart","dayMonth","full","renderCustomizedLabel","x","y","textAnchor","dominantBaseline","renderCustomizedLabel2","CustomTooltip","active","payload","label","maxWidth","AssessmentsHistory","content","entry","paddingLeft","History","CurrentPlan","handleNewUserSubmit","signUpEmail","password","signUpPassword","signUpUsername","serverResponse","success","handleReturnedUserSubmit","email2","password2","defaultValue","SignUpInOut","setUser","clear","PlanContext","updatePlan","SWrapper","SCounter","imgMinus","imgPlus","howMuch","SCounterSmall","returnValueInMinMaxRange","newValue","min","max","CounterAllIn","p1counterSmall","p1counterBig","onChangeFunctionReceivingNewValueAsParameter","initialValue","sideText","smallTextUnderTheNumber","minValue","MaxValue","localValue","setLocalValue","initialValueWasSetUp","setInitialValueWasSetUp","htmlInputEl","textbox","inputFilter","test","forEach","event","addEventListener","oldValue","oldSelectionStart","selectionStart","oldSelectionEnd","selectionEnd","hasOwnProperty","setSelectionRange","updateLocalValueFromButton","alignItems","visibility","substring","marginLeft","marginTop","SSet","SSection","SNote","Set","repsCalculatedFromMaxAndPercentage","trainingPosition","repsAsPercentage","duration","breakAfterInSeconds","breakNotes","repsAsPercentages","maxRepsNeeded","repsOrDuration","adjust","what","note","charAt","toUpperCase","currentSet","newSet","splice","oldSets","newSets","createPersonalSETStarter","createPersonalTRAININGStarter","currentMax","STraining","Training","currentTraining","newTraining","STrainings","Trainings","SSchedule","Schedule","children","extra","posFromSchedule","scheduleDay","Number","MaxRepsUsedForRepsPercentages","updatedMaxValue","reps2","type2","getCurrentMaxReps","initAssRepsId","PercentagesRegimeActivator","autoActivated","QuillReactEditor","submitButtonText","hideToolbar","setValue","modules","toolbar","b","c","readOnly","theme","formats","SPlan","planToAdjust","adjustingNotCreating","planWMethods","maxReps","thisNameExistsAlready","setThisNameExistsAlready","planPackage","setName","descriptionRich","richDescription","publicPlansNames","setPublicPlansNames","publicPlansNamesSupportVar","publicPlan","focus","thisNameExistsAlreadySupportVar","nameInDb","saveRichDescriptionToDB","updatedDescription","updateRichDescriptionValue","handleFormSubmit","newPlan","Provider","TextEditorReactQuill","updatedSummary","AdjustPersonalPushupPlan","match","params","stateP","CreatingPersonalPushupPlan","planX","setPlanX","createPersonalPushupPlan","createPersonalPLANStarter","trainingContext","TrainingContext","trainingState","setTrainingState","skipThisDay","main","setNumberFrom1","stage","continueStartedTraining","SScreen","SButton","button","SButton2","ShowSetToDo","isLastSet","marginBottom","CounterTool","small","big","updateByClickedValue","BreakTimer","external","remindingBreakTime","setRemindingBreakTime","setBreakDuration","breakTimerFinished","setBreakTimerFinished","setInterval","clearInterval","BreakSounds","breakLength","soundsOn","useSound","soundBeep","soundBeepPlay","soundGetReady","soundGetReadyPlay","soundStart","soundStartPlay","StartBreakLogData","saveDefaultData","setWasSavedToHistory","setSetSavedToHistory","updatedReps","setUpdatedReps","updatedRepsForChangesInPlan","setUpdatedRepsForChangesInPlan","updatedRepsAsPercentageForChangesInPlan","setUpdatedRepsAsPercentageForChangesInPlan","setNotes","notesForChangesInPlan","setNotesForChangesInPlan","changePlan","setChangePlan","saveRepsToHistory","setToSave","executedRepsAsPercentageOfInitialAssessment","initialAssessmentRepsNumber","add1ToSetsDone","setsDone","trainingNumber1IsFirst","trainingStartedAt","thisTrHistory","unshift","planDataToUpdate","updatedUserX","markLastTrainingAsSuccessfullyCompleted","updatedUser2","hideRepsToSave","soundBreakBackground","soundBreakBackgroundPlay","BackgroundMusicSettings","backgroundMusicFaded","setBackgroundMusicFaded","backgroundMusicFaded2","setBackgroundMusicFaded2","backgroundMusicStarted","setBackgroundMusicStarted","backgroundMusicPlaying","setBackgroundMusicPlaying","music","sound","fade","moveToTheNextStage","number","newPercentageValue","initialAssesmentReps","calculatedReps","newRepValue","calculatedPercentages","TrainingFinished","soundOn","soundTrainingFinished","soundTrainingFinishedPlay","TrainingSwitcher","TrainingStopWatch","seconds","minutes","trainingTime","setTrainingTime","marginRight","SetsToDoAllIn","overflow","SoundAndMusicControls","updateUserTrainingSettings","how","flexFlow","defaultChecked","checked","htmlFor","TrainingHeaders","initAss","buttonClickedUseLastAssessmentAsFinal","finalAssessment","assDate","isDayOfLastAssessmentToday","trainingContextVariable","setTrainingContextVariable","todayIsDayOff","setTodayIsDayOff","userLoading","setUserLoading","publicPlanIfNeeded","trainingContextToUse","userHere","includes","trainingNumberPosition0IsFirstNumber","numberOfThisTrainingTemplate","numberOfSetsAlreadyDone","setupTrainingContext","setMyDots","setDots","howMany","dots","PaceMaker","setCounter","cycleMs","setCycleMS","numberOfReps","setNumberOfReps","showResult","setShowResult","paceMakerStarted","setPaceMakerStarted","intervalMs","interval","speechSynthesis","speak","SpeechSynthesisUtterance","lineHeight","styles","buildStyles","pathTransition","pathColor","textColor","trailColor","SideBarContent","setSideBarOpen","markPlanAsFinished","ViewSet","setText","lastSetNumberFrom1","planViewContextData","planViewContext","percentages","showNotes","source","repsAsNumber","maxInfo","gridTemplateColumns","ViewTraining","ViewSchedule","day","setShowNotes","planLinks","ID","personalPlans","rangeAsPercentage","setInitialMaxReps","range","v","userReps","buttonActionPublishPlan","planSummary","planDescription","planDescriptionRich","thisPlanName","r","Intro","Community","allUsers","names","PushupsMainWithRouter","updateAllUsers","pwaLaunchedInInfo","pwaBeforeInstallFired","pwaInstalled","pwaReadyToInstall","setPwaReadyToInstall","pwaDisplayMode","setPwaDisplayMode","navigator","Notification","permission","htmlInfo","setHtmlInfo","displayMode","standalone","matchMedia","matches","checkPWAWebPushNotifications","requestPermission","publicPlansHereLocally","allUsersHereLocally","doAsAsync","sideBarOpen","paddingBottom","zIndex","sidebar","open","onSetOpen","transition","WebkitTransition","root","right","overlay","prompt","userChoice","choiceResult","outcome","serviceWorker","ready","sw","showNotification","icon","vibrate","tag","image","badge","actions","sendNotification","exact","path","component","UserStatus","PushupsHome","FinishPersonalPushupPlan","PublishPushupPlan","ViewPushupPlan","MaxRepsTest","PrepareTraining2","RunTraining","PushupsContextsComponent","updatedPlans","updatedUsers","CwUseState","stateH","setStateH","States","WakeUpserverState","changeServerStateSubClassTo","subClassName","querySelectorAll","El","setAttribute","Sounds","AudioContext","arrayBuffer","catch","err","decodeAudioData","audioBuffer","soundSource","createBufferSource","buffer","connect","destination","start","SoundsReact","soundX","playSound","SMenu","hash","basename","process","Pushups","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","convertedVapidKey","base64String","repeat","base64","rawData","atob","outputArray","Uint8Array","charCodeAt","urlBase64ToUint8Array","sendSubscription","subscription","ansFromServerS","ReactDOM","render","getElementById","URL","href","origin","contentType","get","status","unregister","reload","checkValidServiceWorker","pushManager","getSubscription","existedSubscription","subscribe","applicationServerKey","userVisibleOnly","newSubscription"],"mappings":"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","file":"static/js/main.40db39bf.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/plusLight.a55aab25.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/taffFemale.996f7eac.mp3\";","module.exports = __webpack_public_path__ + \"static/media/Derek_Clegg_-_09_-_Youre_The_Dummy.3d8fffdc.mp3\";","module.exports = __webpack_public_path__ + \"static/media/Trumpets8s.289d2da1.mp3\";","module.exports = __webpack_public_path__ + \"static/media/plus.76c6a9e0.png\";","import React, { useState } from 'react';\r\n// import { render } from 'react-dom';\r\nimport styled from 'styled-components';\r\nimport { SortableContainer, SortableElement, arrayMove } from 'react-sortable-hoc';\r\n// const arrayMove = require('array-move');\r\n\r\nconst SGalleryWrapper = styled.div`\r\nmargin:10px 40px;\r\ntext-align: center;\r\nbackground-color: lightgrey;\r\n@media(max-width: 400px) { \r\n  margin:3px;\r\n}\r\n`\r\nconst Simg = styled.img`\r\nwidth:200px;\r\nmax-width:25%;\r\nmargin: 10px;\r\nbackground: linear-gradient(  rgba(0,0,0,0),white);\r\n/* background-color:white; */\r\n`\r\n\r\n\r\nconst Image = props =>\r\n  // <div>\r\n    <Simg src={props.imageUrl} alt=\"\"></Simg>\r\n  // </div>\r\n\r\nconst SortableSingleImageContainer = SortableElement(props => <Image imageUrl={props.imageUrl}></Image>)\r\n\r\n\r\nconst SortableImagesContainer = SortableContainer(props =>\r\n  <div>\r\n    {props.imagesUrls.map((imageUrl, index) =>\r\n      <SortableSingleImageContainer key={imageUrl} index={index} imageUrl={imageUrl}></SortableSingleImageContainer>)}\r\n  </div>)\r\n\r\n\r\nconst SortableGallery = () => {\r\n  const returnPicturesArray = (numberOfPictures) => {\r\n    const picturesArray = [];\r\n    for (let i = 1; i <= numberOfPictures; i++) {\r\n      picturesArray.push(`https://robohash.org/${i}`);\r\n    };\r\n    return picturesArray;\r\n  }\r\n  const [pictures, setPictures] = useState(returnPicturesArray(10));\r\n\r\n\r\n  const onSortEndF = ({ oldIndex, newIndex }) => {\r\n    console.log(\"on sort end fired\");\r\n    let newArray = arrayMove(pictures, oldIndex, newIndex);\r\n    setPictures(newArray);\r\n  };\r\n\r\n\r\n  return (\r\n    <SGalleryWrapper>\r\n      <h2>Sortable gallery</h2>\r\n      {/* <div>{pictures.map(picture => <Simg src={picture} alt=\"\"></Simg>)}</div> */}\r\n      <SortableImagesContainer imagesUrls={pictures} onSortEnd={onSortEndF} axis='xy'></SortableImagesContainer>\r\n    </SGalleryWrapper>\r\n  );\r\n};\r\n\r\nexport default SortableGallery;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport SortableGallery from './SortableGallery'\r\n// import SortableGallery2 from './SortableGallery2' //only works with vertical sorting\r\nconst SPlaygroundWrapper = styled.div`\r\ntext-align: center;\r\n`\r\nfunction Playground() {\r\n  return (\r\n    <SPlaygroundWrapper>\r\n      <h1>My React Playground</h1>\r\n      {/* <div>{pictures.map(picture => <Simg src={picture} alt=\"\"></Simg>)}</div>  */}\r\n      <SortableGallery />\r\n      {/* <SortableGallery2 /> */}\r\n    </SPlaygroundWrapper>\r\n  );\r\n}\r\n\r\nexport default Playground;","import React, { useState, useEffect } from 'react';\r\n\r\nfunction DogsAPI() {\r\n\r\n  const [error, setError] = useState(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [data, setdata] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(\"https://dog.ceo/api/breeds/image/random\")\r\n      .then(res => res.json())\r\n      .then(\r\n        (result) => {\r\n          setIsLoaded(true);\r\n          setdata(result.message);\r\n        },\r\n        (error) => {  // Note: it's important to handle errors here instead of a catch() block so that we don't swallow exceptions from actual bugs in components.\r\n          setIsLoaded(true);\r\n          setError(error);\r\n        }\r\n      )\r\n  }, [])   // Note: the empty deps array [] means this useEffect will run once similar to componentDidMount()\r\n\r\n  if (error) {\r\n    return <div>Error: {error.message}</div>;\r\n  } else if (!isLoaded) {\r\n    return <div>Loading...</div>;\r\n  } else {\r\n    return (\r\n      <>\r\n        <div>{data}</div>\r\n        {/* <ul> */}\r\n\r\n        {/* {items.map(item => (\r\n            <li key={item.name}>\r\n              {item.name} {item.price}\r\n            </li> */}\r\n        {/* ))} */}\r\n        {/* </ul> */}\r\n      </>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default DogsAPI;\r\n","import React from 'react';\r\nimport DogsAPI from './Dogs';\r\n\r\nconst DogsFrame = () => {\r\n  return (\r\n    <div>\r\n      <h3>Dogs API (CORS: yes)</h3>\r\n      <DogsAPI/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DogsFrame;","import React from 'react';\r\nimport CatsAPI from './Cats';\r\nimport styled from 'styled-components';\r\n\r\nexport const Note = styled.p`\r\ncolor: blue;\r\nfont-style:italic;\r\nfont-size:0.8rem;\r\n\r\n`;\r\nconst CatsFrame = () => {\r\n  return (\r\n    <div>\r\n      <h3>Cats API (CORS: no)</h3>\r\n      <Note>note</Note>\r\n      <CatsAPI />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CatsFrame;","import React from 'react';\r\nimport { Note } from './CatsFrame';\r\n// import { Redirect } from 'react-router-dom';\r\n\r\nclass APITemplate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // console.log(\"props url in constructor:\", props.url);\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      data: [],\r\n      // url: props.url,\r\n      // title:props.title\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // console.log(\"component did mount\", this.state);\r\n    fetch(this.props.url)\r\n      .then(res => {\r\n        // console.log(\"first  in fetch: \", res);\r\n        // console.log(\"first  in fetch: \", res.body);\r\n        return res.json()\r\n      })\r\n      .then(\r\n        (result) => {\r\n          // console.log(\"Result second in fetch:\", result);\r\n\r\n          this.setState({\r\n            isLoaded: true,\r\n            data: result\r\n          });\r\n        },\r\n        // Note: it's important to handle errors here\r\n        // instead of a catch() block so that we don't swallow\r\n        // exceptions from actual bugs in components.\r\n        (error) => {\r\n\r\n          this.setState({\r\n            isLoaded: true,\r\n            error\r\n          });\r\n          if (error) console.log(\"Error second in fetch:\", error);\r\n\r\n        }\r\n      )\r\n  }\r\n\r\n  render(props) {\r\n    const { data } = this.state;\r\n    // console.log(\"state in render:\", this.state);\r\n    // console.log(\"props in render:\", props); //no props - undefined!!\r\n    // console.log(\" url in state in render:\", url);\r\n    // console.log(\" error in state in render:\", error);\r\n    // console.log(\"type of received data in render: \", (typeof data == 'object'));\r\n\r\n\r\n    let key = 0;\r\n    return (\r\n      <div>\r\n        <h3>{this.props.title}</h3>\r\n        <Note> getting from url: \"{this.props.url}\"</Note>\r\n        {/* <div>Error: {error}</div> */}\r\n        {/* <div>Error:</div> */}\r\n        {/* {error ? Object.keys(error).map(obj => <div>{obj}:{data[obj].name}</div>) : <p>No error</p>} */}\r\n        {/* <br /> */}\r\n        {/* <div>Is loaded: {isLoaded}</div> */}\r\n        <div style={{ backgroundColor: 'red', margin: '10px' }}>\r\n          <h5> Data received-></h5>\r\n          {(typeof data == \"object\") ? Object.entries(data).map(arr => { key++; return <div key={key}> <span style={{ color: 'blue' }}> {arr[0]} </span> : {JSON.stringify(arr[1])}</div>; }) : <p>{data}</p>}\r\n          {/* {(typeof data == \"object\") ? <div>{JSON.stringify(data)}</div> : <p> {data} </p>}  */}\r\n        </div>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default APITemplate;","let urlRoot = '';\r\nlet urlRootWithoutApi = '';\r\nlet frontEndPushupsUrlRoot = ''\r\nif (process.env.NODE_ENV === 'development') {\r\n  urlRoot = 'http://localhost:3001/api';\r\n  urlRootWithoutApi = 'http://localhost:3001';\r\n  frontEndPushupsUrlRoot = 'http://localhost:3000/MERN-ReactForExpress#/pushups';\r\n}\r\nif (process.env.NODE_ENV !== 'development') {\r\n  urlRoot = 'https://mern-express-heroku.herokuapp.com/api';\r\n  urlRootWithoutApi = 'https://mern-express-heroku.herokuapp.com';\r\n  frontEndPushupsUrlRoot = 'https://mmacode.github.io/MERN-ReactForExpress/#/pushups';\r\n\r\n}\r\n\r\n\r\n\r\n// urlRoot = 'https://mern-express-heroku.herokuapp.com/api';\r\n// urlRoot = 'http://localhost:3001/api';\r\n\r\nexport { urlRoot, urlRootWithoutApi, frontEndPushupsUrlRoot };\r\n// export default urlRoot ;\r\n","import React from 'react';\r\n// import CatsFrame from './APIs/CatsFrame';\r\nimport DogsFrame from './APIs/DogsFrame';\r\nimport APITemplate from './APIs/APITemplate';\r\nimport { urlRoot } from '../globalState/globalVariables';\r\nimport styled from 'styled-components'\r\n\r\n\r\nconsole.log(urlRoot);\r\n\r\n// const Block = styled(CatsAPI)`\r\n// background-color: green !important;\r\n// min-height:100px;\r\n// min-width:300px;\r\n// `;\r\nconst SFrame = styled.div`\r\n>*{\r\nbackground-color: lightgreen;\r\nmin-height:100px;\r\nmin-width:300px;\r\nmargin:10px;\r\n}\r\n`;\r\n\r\n\r\nfunction APIPage() {\r\n  // urlRoot = 'https://mern-express-heroku.herokuapp.com/api';\r\n  // urlRoot = 'http://localhost:3001/api';\r\n  return (\r\n    <>\r\n      <h2>This is API page.</h2>\r\n      <SFrame>\r\n        {/* <CatsFrame /> */}\r\n        <DogsFrame />\r\n        <APITemplate url={urlRoot+'/json'} title='test of simple local API from Express'/>\r\n        <APITemplate url={urlRoot+'/json/cats'} title='cats from Remote API using CORS'/>\r\n        {/* <APITemplate url='/api/send' /> */}\r\n        {/* <APITemplate url='/api/write' /> */}\r\n\r\n\r\n      </SFrame>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default APIPage;","import { urlRoot } from '../globalState/globalVariables';\r\n\r\nlet translate = async (from, to, textToTranslate) => {\r\n\r\n  async function postJsonData(url, data) {//object  \r\n    const options = {\r\n      method: 'POST', // *GET, POST, PUT, DELETE, etc.\r\n      headers: {\r\n        'Content-Type': 'application/json'  // 'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: JSON.stringify(data) // body data type must match \"Content-Type\" header\r\n    }\r\n    const response = await fetch(url, options);\r\n    console.log(\"1.Fetch res in translate:\", response);\r\n    return await response.json(); // parses JSON response into native JavaScript objects\r\n  }\r\n\r\n  return await\r\n    // postJsonData('http://localhost:3001/api/translate',\r\n    // postJsonData('https://mern-express-heroku.herokuapp.com/api/translate',\r\n    postJsonData(`${urlRoot}/translate`,\r\n    {\r\n      from,\r\n      to,\r\n      translate: textToTranslate,\r\n    })\r\n    .then((data) => {\r\n      console.log(\"Data from server: \",data); // JSON data parsed by `response.json()` call\r\n      // console.log(data.translated); // JSON data parsed by `response.json()` call\r\n      return data;\r\n    });\r\n}\r\n\r\nexport default translate;","import React, { Component } from 'react'\r\nimport translate from '../../functions/translate'\r\nimport styled from 'styled-components';\r\nimport './alert.css';\r\n\r\nconst SHighlight = styled.p`\r\ndisplay: inline-block;\r\n/* display: flex; align-items: center;justify-content: center; margin:auto; */\r\nbackground-color: yellowgreen;\r\npadding: 10px 20px;\r\n`\r\n// const salert = styled.p`\r\n// `\r\n\r\n\r\nexport default class TRpage extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      textToTranslate: '',\r\n      submitted: false,\r\n      TextTranslated: null\r\n    }\r\n  };\r\n\r\n  inputChangeHandler = async (e) => {\r\n    this.setState({ textToTranslate: e.target.value });\r\n    this.setState({ submitted: false });\r\n  }\r\n\r\n  handleSubmit = async e => {\r\n    e.preventDefault();\r\n    this.setState({ submitted: true });\r\n    // console.log(this.state.textToTranslate);\r\n\r\n    let translationObject = await translate('en', 'cs', this.state.textToTranslate);\r\n    this.setState({ TextTranslated: translationObject.translated });\r\n\r\n    // const formX = document.querySelector('#translate-form-1');\r\n    // formX.reset();\r\n  }\r\n\r\n  handleSubmit2 = async e => {\r\n    e.preventDefault();\r\n    this.setState({ submitted: true });\r\n    let translationObject = await translate('cs', 'en', this.state.textToTranslate);\r\n    this.setState({ TextTranslated: translationObject.translated });\r\n  }\r\n\r\n\r\n  checkCzechHighlight = e => {\r\n    \r\n    // short alert\r\n    let alertUserForSec = async (text, durationInSec) => {\r\n      let alertForSec = document.createElement('p');\r\n      // alertForSec.textContent = text;\r\n      alertForSec.innerHTML = text;\r\n      alertForSec.id = \"alertForSec\";\r\n      // alertForSec.classList.add(\"flyingAlert\");\r\n      alertForSec.style.animationDuration = durationInSec + \"s\";\r\n      let hook = document.querySelector(\"#translateForms\");\r\n      hook.append(alertForSec);\r\n      await new Promise(resolve => setTimeout(resolve, durationInSec * 1000));\r\n      // console.log('XXXXXXXXXXX alert pop up');\r\n      document.querySelector(\"#alertForSec\").remove();\r\n    }\r\n\r\n\r\n\r\n    function getSelectionText(e) {\r\n      // e.preventDefault();\r\n      var text = \"\";\r\n      if (window.getSelection) {\r\n        console.log(\"text received\");\r\n        text = window.getSelection().toString();\r\n      } else if (document.selection && document.selection.type !== \"Control\") {\r\n        console.log(\"control received\");\r\n\r\n        text = document.selection.createRange().text;\r\n      } else {\r\n        console.log(\"screwed\");\r\n\r\n        alert('no');\r\n      }\r\n      return text;\r\n    }\r\n    console.log(getSelectionText(e));\r\n    alertUserForSec(getSelectionText(e), 1);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Translate page</h1>\r\n        <div id='translateForms'>\r\n\r\n          <form id='translate-form-1' onSubmit={this.handleSubmit}>\r\n            <h4>From ENGLISH to CZECH:</h4>\r\n            {/* method=\"post\" */}\r\n            {/* <input type='text' placeholder=\"English text...\" value={this.state.enText} onChange={this.inputChangeHandler} /> */}\r\n            <input type='text' placeholder=\"English text...\" onChange={this.inputChangeHandler} />\r\n            {/* <input type='text' value='Home' onChange={this.inputChangeHandler} /> */}\r\n            <button type=\"submit\">Submit</button>\r\n          </form>\r\n          <form id='translate-form-1' onSubmit={this.handleSubmit2}>\r\n            <h4>From CZECH to ENGLISH:</h4>\r\n            {/* method=\"post\" */}\r\n            <input type='text' placeholder=\"English text...\" onChange={this.inputChangeHandler} />\r\n            {/* <input type='text' value='Home' onChange={this.inputChangeHandler} /> */}\r\n            <button type=\"submit\">Submit</button>\r\n          </form>\r\n          {/* <span>{this.state.submitted ? 'Submitted' : 'Recorded'}: </span> */}\r\n          {/* <span>\"{this.state.enText}\"</span> */}\r\n          {typeof this.state.TextTranslated == 'string' && <SHighlight>{this.state.TextTranslated}</SHighlight>}\r\n        </div>\r\n        <div>\r\n          {/* <p className='textToHighlight' onClick={this.checkCzechHighlight} >Švýcarsko, mezi Čechy většinou známé precizností a vysokou úrovní infrastruktury, si při zvládání epidemie koronaviru nevede zrovna nejlépe. V zemi s více než 27 tisíci nakaženými a tisíci mrtvými dosud neplatí povinné nošení roušek, a to ani pro zaměstnance obchodů. Když jdete ven se zakrytým obličejem, lidé na vás koukají jako na malomocného, shodují se Češi žijící v zemi. */}\r\n          <p className='textToHighlight' onTouchEnd={this.checkCzechHighlight} >Švýcarsko, mezi Čechy většinou známé precizností a vysokou úrovní infrastruktury, si při zvládání epidemie koronaviru nevede zrovna nejlépe. V zemi s více než 27 tisíci nakaženými a tisíci mrtvými dosud neplatí povinné nošení roušek, a to ani pro zaměstnance obchodů. Když jdete ven se zakrytým obličejem, lidé na vás koukají jako na malomocného, shodují se Češi žijící v zemi.\r\n              Zdroj: https://www.idnes.cz/zpravy/zahranicni/koronavirus-covid-19-svycarsko-nakazeni-nemocni-opatreni.A200417_112621_zahranicni_vlc</p>\r\n          {/* <p onTouch={this.checkCzechHighlight} >Touch Another is for staff to reuse \"(washable) surgical gowns or coveralls or similar suitable clothing (for example, long-sleeved laboratory coat, long-sleeved patient gown or industrial coverall) with a disposable plastic apron for AGPs (aerosol-generating procedures) and high-risk settings with forearm washing once gown or coverall is removed\".</p> */}\r\n          <button onClick={this.checkCzechHighlight}>Click me now</button>\r\n          <p onTouchEndCapture={this.checkCzechHighlight} >TouchEndCapture Another is for staff to reuse</p>\r\n          <p onTouchCancel={this.checkCzechHighlight} >TouchCancel Another is for staff to reuse</p>\r\n          <p onTouchCancelCapture={this.checkCzechHighlight} > TouchCancelCapture Another is for staff to reuse</p>\r\n          <p onTouchMove={this.checkCzechHighlight} >TouchMove Another is for staff to reuse</p>\r\n          <p onTouchMoveCapture={this.checkCzechHighlight} >TouchMoveCapture Another is for staff to reuse</p>\r\n          <p onTouchStart={this.checkCzechHighlight} >TouchStart Another is for staff to reuse</p>\r\n          <p onTouchStartCapture={this.checkCzechHighlight} >TouchStartCapture Another is for staff to reuse</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n","import { createContext } from 'react';\r\nexport let pushUpsState = {\r\n  user: null,\r\n  info: 'Pushups context',\r\n  reRender:0,\r\n  updateUser(newUser) {\r\n    this.user = newUser;\r\n    console.log(\"context updated to \", this);\r\n    this.reRender += 1;\r\n  }\r\n};\r\n\r\nconst PushUpsContext = createContext(pushUpsState);\r\nexport default PushUpsContext;\r\n\r\n","import { urlRoot } from '../globalState/globalVariables';\r\n\r\nexport async function postJsonDataUrlAfterAPIpushups(urlEnd, data) {\r\n  let url = urlRoot + '/pushups' + urlEnd;\r\n  let dataToReturn;\r\n  // console.log(\"1 Starting PostJson SEND Pushups request with url and data:\",url, data);\r\n  try {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n      credentials: 'include'\r\n    };\r\n    // options.credentials = 'include';\r\n    const response = await fetch(url, options);\r\n    // console.log(\"fetched response:\", response);\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    // console.log(\"POSTPushupJSON JSON RESPONSE:\", dataToReturn);\r\n    // console.log(\"type of...\", typeof dataToReturn);\r\n    return dataToReturn;\r\n  }\r\n  catch (err) {\r\n    console.log(\"!!!err in receiving json data back from postJsonDataUrlAfterAPIpushups request\", err);\r\n    dataToReturn = err;\r\n    return dataToReturn;\r\n  }\r\n  // return dataToReturn;\r\n}\r\n\r\nexport async function postJsonDataUrlAfterAPIgeneralPushups(urlEnd, data) {\r\n  let url = urlRoot + '/generalPushups' + urlEnd;\r\n  let dataToReturn;\r\n  // console.log(\"1 Starting PostJson SEND Pushups request with url and data:\",url, data);\r\n  try {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n      credentials: 'include'\r\n    };\r\n    // options.credentials = 'include';\r\n    const response = await fetch(url, options);\r\n    // console.log(\"fetched response:\", response);\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    // console.log(\"POSTPushupJSON JSON RESPONSE:\", dataToReturn);\r\n    // console.log(\"type of...\", typeof dataToReturn);\r\n    return dataToReturn;\r\n  }\r\n  catch (err) {\r\n    console.log(\"!!!err in receiving json data back from postJsonDataUrlAfterAPIgeneralPushups request\", err);\r\n    dataToReturn = err;\r\n    return dataToReturn;\r\n  }\r\n  // return dataToReturn;\r\n}\r\n\r\nexport async function postJsonDataUrlAfterAPI(urlEnd, data) {\r\n  let url = urlRoot + urlEnd;\r\n  let dataToReturn;\r\n  // console.log(\"1 Starting PostJson SEND Pushups request with url and data:\",url, data);\r\n  try {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n      credentials: 'include'\r\n    };\r\n    // options.credentials = 'include';\r\n    const response = await fetch(url, options);\r\n    // console.log(\"fetched response:\", response);\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    // console.log(\"POSTPushupJSON JSON RESPONSE:\", dataToReturn);\r\n    // console.log(\"type of...\", typeof dataToReturn);\r\n    return dataToReturn;\r\n  }\r\n  catch (err) {\r\n    console.log(\"!!!err in receiving json data back from postJsonDataUrlAfterAPI request\", err);\r\n    dataToReturn = err;\r\n    return dataToReturn;\r\n  }\r\n  // return dataToReturn;\r\n}\r\n\r\nasync function postJsonData(url, data) {\r\n  let dataToReturn;\r\n  console.log(\"1 Starting PostJson SEND (No Pushups) request with url and data:\",url, data);\r\n\r\n  try {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n      credentials: 'include'\r\n    };\r\n    // options.credentials = 'include';\r\n    const response = await fetch(url, options);\r\n    // const response = await fetch(url, {credentials:'include'});\r\n    // console.log(\"fetched response:\", response);\r\n    dataToReturn = await response.json(); // parses JSON response into native JavaScript objects\r\n    // console.log(\"DATA returned from server: \", ...dataToReturn);\r\n    console.log(\"DATA returned from server: \", dataToReturn);\r\n  }\r\n  catch (err) {\r\n    console.log(\"!!!err in receiving json data back from POSTJson request\", err);\r\n    dataToReturn = err;\r\n  }\r\n  return dataToReturn;\r\n}\r\n\r\nexport default postJsonData;","import { urlRoot, frontEndPushupsUrlRoot } from '../../../globalState/globalVariables';\r\nimport { postJsonDataUrlAfterAPI } from '../../../functions/postJsonData';\r\n// import { withRouter } from 'react-router-dom';\r\n\r\nconst checkIfNewGuestOrCookiesDisabled = async (cookieCreated) => { //cookieCreated contains name of the cookie created\r\n  //no cookie existed\r\n  console.log(\"checking if cookies can be created. (no cookie was received on server...)\");\r\n  // console.log(data);\r\n  if (cookieCreated) {\r\n    // contact server and see if created cookie is sent back (if yes, it is guest profile and just leave it)\r\n    console.log(\"Cookie was created by server\")\r\n    console.log(\"contacting server to see if created cookie persisted... cookie name: \", cookieCreated);\r\n    let data2 = await postJsonDataUrlAfterAPI('/user/checkIfCookiesEnabled', { cookieName: cookieCreated });\r\n    console.log(\"COOKIES ENABLED CHECK - data results: \", data2);\r\n    if (data2.cookiesEnabled == false) {\r\n      alert('Enable third party cookies for app to work. (Your data will not be shared with anyone. Click here if you want to know about how we are using cookies.) You will be directed to the home.');\r\n      window.location.replace(`${frontEndPushupsUrlRoot}`);\r\n      ////// history.push('/pushups');\r\n    } else {\r\n      console.log(\"This is just new Guest user. Don't worry, be happy :-). \");\r\n    }\r\n\r\n  } else {\r\n    console.log(\"Cookie originaly not found on server, but also new not created -> some other problem.\");\r\n  }\r\n}\r\n\r\n\r\nconst signInWithJWTCookie = async () => {\r\n  // console.log(\"trying to sign in with cokie\");\r\n  try {\r\n    let stage1 = await fetch(`${urlRoot}/user/checkJWTCookie`, { credentials: 'include' })\r\n    // let { user } = await stage1.json();\r\n    // console.log(\"trying to sign in with cokie - succes01-data(user or guest)\", stage1);\r\n\r\n    let data = await stage1.json();\r\n    // console.log(\"trying to sign in with cokie - succes02-proccesesd data(user or guest)\", data);\r\n    // console.log(\"trying to sign in with cokie - succes02-proccesesd data(user:)\", data.user);\r\n    // console.log(\"trying to sign in with cokie - succes02-proccesesd data(guest)\", data.guest);\r\n\r\n    // if (data.user) return data.user\r\n    // else if (!data.cookieFound) await checkIfNewGuestOrCookiesDisabled(data.cookieCreated)\r\n    // else console.log(\"Cookie found. some other problem: \", data);\r\n\r\n    if (data.user) return data.user\r\n    else {\r\n      if (!data.cookieFound) {\r\n        console.log(\"NO COOKIES FOUND\");\r\n        // await checkIfNewGuestOrCookiesDisabled(data.cookieCreated);\r\n        checkIfNewGuestOrCookiesDisabled(data.cookieCreated);\r\n      }\r\n      if (data.userToUse) {\r\n        return data.userToUse //=created guest  \r\n      } else console.log(\"no user of guest found. no user created. some other problem: \", data);\r\n\r\n    }\r\n\r\n  }\r\n  catch (error) {\r\n    // console.log(\"Error second in fetch:\", error);\r\n    console.log(\"trying to sign in with cokie - error (Server not working probably)\", error);\r\n\r\n    return { email: 'error', data: error };\r\n  }\r\n}\r\n\r\nexport default signInWithJWTCookie;","import React, { useEffect, useContext } from 'react';\r\nimport PushUpsContextState from './state/PushUpsContextState'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { SLink } from '../../App';\r\n\r\nimport signInWithJWTCookie from './functions/signInWithJWTCookie';\r\n// import SignUpInOut from './SignUpInOut'\r\nimport postJsonData from '../../functions/postJsonData'\r\nimport { Button } from 'react-bootstrap';\r\nimport { urlRoot } from '../../globalState/globalVariables';\r\n\r\n\r\n\r\n\r\nconst UserStatus = ({ history }) => {\r\n  const [userStatusInfo, setUserStatusInfo] = React.useState('notYetLoaded');\r\n  let userContext = useContext(PushUpsContextState);\r\n  // console.log(\"USER CONTEXT in user status:\", userContext.user);\r\n  // console.log(\"USER CONTEXT in user status email:\", userContext.user.email);\r\n  let user = null;\r\n\r\n  // if (userContext.user && userContext.user.email) {//this is never true anyway I guess\r\n  if (userContext.user) {//to allow to load Guest too\r\n    user = userContext.user;\r\n  }\r\n\r\n  useEffect(() => {\r\n    // console.log(\"GETTING USER\");\r\n    setUserStatusInfo('loading');\r\n    const updateUserContextFromCookie = async () => {\r\n      let userA = await signInWithJWTCookie();\r\n      // let userA = await postJsonData(`${urlRoot}/user/checkJWTCookie`, {});\r\n      // let userA;\r\n      \r\n      // console.log(\"CCCCCchecked With Cookie - Response:\", userA); //either{ user: { }} or {...}\r\n      // setUser(userA);\r\n\r\n      userContext.updateUser(userA);\r\n      setUserStatusInfo('loaded');\r\n\r\n      // console.log(\"<userStatus> context --> \", userContext);\r\n      // return () => { console.log(\"dismounting??: \", user) };\r\n    };\r\n\r\n    // console.log(\"effect running...\")\r\n    updateUserContextFromCookie();\r\n  }\r\n    , []   ///now runs on every rerender, with [] runs only on first\r\n  )\r\n\r\n  const logOut = async () => {\r\n    // let response = await postJsonData(`${urlRoot}/user/logOut`, {});\r\n    await postJsonData(`${urlRoot}/user/logOut`, {});\r\n    // setUser({});\r\n    let guest = await signInWithJWTCookie();\r\n    // console.log(\"UUUUUU to guest:\", guest);\r\n    userContext.updateUser({ ...guest });  // change context - user to  GUEST\r\n    history.push('/pushups');\r\n\r\n    // console.log(\"user Context--> \", userContext);\r\n\r\n    //refresh page now - not needed  // window.location.reload();\r\n  }\r\n\r\n  const resetGuestButton = async () => {\r\n    let data = await postJsonData(`${urlRoot}/guest/resetGuest`, {});\r\n    console.log(\"reset guest DDDDDDDDDDDDDDData:\", data);\r\n    userContext.updateUser({ ...data.guest });\r\n\r\n  }\r\n\r\n  // console.log(\"history.location.pathname: \", history.location.pathname);\r\n  if (history.location.pathname === '/pushups' || history.location.pathname === '/') {\r\n    // if (user) console.log(\"!!!!\",user.name);\r\n    return (\r\n      <div style={{ display: \"inline\", float: \"right\" }}>\r\n        {/* <p>XX: {user && user.email}</p> */}\r\n        {/* <p>{userStatusInfo}</p> */}\r\n        <p style={{ textAlign: 'right', paddingRight: '5px', display: \"inline\" }}>Welcome\r\n          {/* {userStatusInfo === 'loading' ? 'Identifying current user...'///Identifying current user */}\r\n\r\n          {/* user status */}\r\n          {userStatusInfo === 'loading' ?\r\n            'loading...'///Identifying current user\r\n            : (user && user.email) ?\r\n              (<span style={{ color: 'green' }}> {user.name} <Button onClick={logOut}>Log-out</Button> </span>)\r\n              : (user && user.name === 'Guest' ?\r\n                <span style={{ color: 'red' }}>\"Guest\" <br /><button onClick={resetGuestButton}>reset guest</button></span>\r\n                : <span style={{ color: 'red' }}>\"? ? ?\"<br /> <button onClick={resetGuestButton}>reset guest</button></span>)\r\n          }\r\n\r\n          {/* login button */}\r\n          {(!user || !user.email) &&\r\n            (<SLink to='/pushups/Sign-upLog-in'> Sign-up / Log-in </SLink>)\r\n            /* (<Link  to='/pushups/Sign-upLog-in'> Sign-up / Log-in </Link>) */\r\n          }\r\n\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n  else { return null };\r\n};\r\n\r\nexport default withRouter(UserStatus);","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst STrainingPlanOverview = styled.div`\r\nbackground-color: orange;\r\npadding:2rem;\r\n/* margin:2rem; */\r\n\r\nbutton{\r\n  /* background-color: red; */\r\n}\r\n\r\n`\r\n\r\nconst TrainingPlanOverview = (props) => {\r\n  return (\r\n    <STrainingPlanOverview>\r\n      {props.children}\r\n    </STrainingPlanOverview>\r\n  );\r\n};\r\n\r\nexport default TrainingPlanOverview;","export const getSimpleDateIfTrueAlsoTime = (dateReceived, withTime = false, withYear = false,) => {\r\n  var d = new Date(dateReceived);\r\n  var date = d.getDate();\r\n  var month = d.getMonth() + 1; // Since getMonth() returns month from 0-11 not 1-12\r\n  var year = d.getFullYear();\r\n  var dateStr = date + \"/\" + month;\r\n  dateStr += withYear ? (\"/\" + year) : '';\r\n  var dateWithTimeStr = dateStr + '  ' + d.getHours() + ':' + d.getMinutes();\r\n  return withTime ? dateWithTimeStr : dateStr;\r\n}\r\n\r\nexport const returnPersonalPlanFromPlanID = (user, planID) => {\r\n  // console.log(planID, personalPlans);\r\n\r\n  return user.pushupPlans.personal.find(plan => plan._id === planID)\r\n}\r\n\r\nexport const returnAssessmentFromAssID = (user, assID) => {\r\n  let wanted = user.assessments.find(ass => ass._id === assID);\r\n  return wanted;\r\n}\r\n\r\n\r\nexport const returnTrueIfDatesHaveTheSameDay = (d1a, d2a) => {\r\n  const d1 = new Date(d1a);\r\n  const d2 = new Date(d2a);\r\n  return d1.getFullYear() === d2.getFullYear() &&\r\n    d1.getMonth() === d2.getMonth() &&\r\n    d1.getDate() === d2.getDate();\r\n}\r\n\r\nexport const returnDaysDifference = (todayA, otherDayA) => { //-3 returned = other day is 3 days older\r\n  // console.log(\"todayA: \", todayA, \"otherDayA: \", otherDayA);\r\n  const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds\r\n  let otherDayIsThisNumberOfDaysAhead = 0;\r\n  const today = new Date(todayA);\r\n  const otherDay = new Date(otherDayA);\r\n\r\n\r\n  let smallerThenBigger = [{}, {}];\r\n  if (today - otherDay > 0) {\r\n    smallerThenBigger[0].date = otherDay;\r\n    smallerThenBigger[0].name = 'otherDay';\r\n    smallerThenBigger[1].date = today;\r\n    smallerThenBigger[1].name = 'today';\r\n  } else {\r\n    smallerThenBigger[0].date = today;\r\n    smallerThenBigger[0].name = 'today';\r\n    smallerThenBigger[1].date = otherDay;\r\n    smallerThenBigger[1].name = 'otherDay';\r\n  }\r\n\r\n  //keep adjusting dates until the same/ count adjustments and watch which is which\r\n  while (!returnTrueIfDatesHaveTheSameDay(smallerThenBigger[0].date, smallerThenBigger[1].date)) {\r\n    //add day to the smaller day\r\n    smallerThenBigger[0].date = new Date(smallerThenBigger[0].date.getTime() + oneDay);\r\n    if (smallerThenBigger[0].name === 'today') { otherDayIsThisNumberOfDaysAhead++; }\r\n    else { otherDayIsThisNumberOfDaysAhead--; }\r\n  }\r\n  return otherDayIsThisNumberOfDaysAhead;\r\n}\r\n\r\nexport const return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate = (user) => {\r\n  if (!user.pushupPlans.current\r\n    || !user.pushupPlans.current.trainingHistory\r\n    || !(user.pushupPlans.current.trainingHistory.length > 0)) {\r\n    return 0;\r\n  }\r\n\r\n  let dateToday = new Date();\r\n  let dateOfLastTraining = user.pushupPlans.current.trainingHistory[0].date;\r\n  let datesAreTheSame = returnTrueIfDatesHaveTheSameDay(dateToday, dateOfLastTraining);\r\n  return datesAreTheSame ? 1 : 2;\r\n};\r\n\r\nexport const returnAnyPlanFromPlanID = (planID, typePersonalOnlyFinishedPublic, personalPushupPlans, publicPushupPlans) => {//type: \"yes-only\" \"yes-finished\" \"public\"\r\n  // console.log(\"PPPplanID, typePersonalOnlyFinishedPublic: \",planID, typePersonalOnlyFinishedPublic);\r\n  // console.log(\"typePersonalOnlyFinishedPublic:\" + typePersonalOnlyFinishedPublic + '.');\r\n  if (typePersonalOnlyFinishedPublic === 'yes-only') { console.log(\"1\"); return personalPushupPlans.personal.find(plan => plan._id === planID); }\r\n  else if (typePersonalOnlyFinishedPublic === 'yes-finished') { console.log(\"2\"); return personalPushupPlans.personalFinished.find(plan => plan._id === planID); }\r\n  else if (typePersonalOnlyFinishedPublic === 'public') { console.log(\"3\"); return publicPushupPlans.find(plan => plan._id === planID); }\r\n  else { console.log(\"error in 'returnAnyPlanFromPlanID'.\"); }\r\n\r\n}","// import React from 'react';\r\nimport React from 'react';\r\nimport pushupsContext from './state/PushUpsContextState';\r\nimport { returnDaysDifference, returnTrueIfDatesHaveTheSameDay, return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate } from './functions/basics';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../functions/postJsonData';\r\n\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport styled from 'styled-components'\r\nexport const SLink = styled(Link)`\r\ndisplay: block;\r\nfont-size:2rem;\r\nmargin:10px;\r\nbackground-color:orange;\r\npadding: 3px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n  /* font-size:20px; */\r\n}\r\n/* transition: background-color, color; */\r\ntransition-duration: 0.25s;\r\n`\r\nexport const returnNumberOfDaysMissingCurrentSchedulleOrUndefined = (user) => {\r\n  if (user.pushupPlans.current === null || user.pushupPlans.current === undefined) return undefined;\r\n  let currentPlan = user.pushupPlans.current;\r\n  let dayToDoFrom0 = currentPlan.scheduleDayToDoFrom0;\r\n  if (dayToDoFrom0 === undefined || dayToDoFrom0 === null || user.pushupPlans.current.assessments.initialAssessmentID === null) return undefined;\r\n\r\n  // console.log(\"TESTS:\", dayToDoFrom0);\r\n  // console.log(\"TESTS:\", currentPlan.schedule);\r\n  // console.log(\"TESTS:\", currentPlan.schedule[dayToDoFrom0].dueDate);\r\n  // there is current plan with scheduled day; carry on...\r\n  let trainingThisMAnyDaysAhead = returnDaysDifference(new Date(), currentPlan.schedule[dayToDoFrom0].dueDate);\r\n  // console.log(\"trainingThisMAnyDaysAhead: \", trainingThisMAnyDaysAhead);\r\n  return trainingThisMAnyDaysAhead;\r\n}\r\n\r\nconst Home = (props) => {\r\n  const { user, updateUser } = React.useContext(pushupsContext);\r\n  const [info, setInfo] = React.useState(\"loading Data... (Pray everyone:-)\");\r\n  let dueDateIsAheadThisMuch;\r\n  // console.log(\"running home\")\r\n  //check if today's date matches the date of the training to do\r\n\r\n  const [testingCORS, setTestingCORS] = React.useState({ testingCORS: 'not started' });\r\n  React.useEffect(() => {\r\n    setTestingCORS({ testingCORS: 'useEffectStarted' });\r\n    (async () => {\r\n      setTestingCORS({ testingCORS: 'asyncF started' });\r\n\r\n      let ansFromServer1 = await postJsonDataUrlAfterAPIpushups('/testCORS', {});\r\n  //     // setTestingCORS({ ...testingCORS, ansFromServer });\r\n      setTestingCORS(xx => ({ ...xx, ...ansFromServer1 }));\r\n\r\n  //     let ansFromServer2 = await postJsonDataUrlAfterAPIpushups('/testCORS2', {});\r\n  //     // setTestingCORS({ ...testingCORS, ansFromServer });\r\n  //     setTestingCORS(xx => ({ ...xx, ...ansFromServer2 }));\r\n    })()\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    console.log(\"home -user useEfect\");\r\n    if (user) {\r\n\r\n      //update schedule day if needed (=if last training happened, but didn't finish and now is different day --> scheduled day needs to be updated to next number (but not counting break days); and consider final assessment day)\r\n      if (user.pushupPlans\r\n        && user.pushupPlans.current\r\n        && user.pushupPlans.current.trainingHistory\r\n        && user.pushupPlans.current.trainingHistory.length > 0\r\n        && user.pushupPlans.current.trainingHistory[0].completed != true\r\n        && user.pushupPlans.current.trainingHistory[0].scheduleDayUpdated != true\r\n        // && user.pushupPlans.current.trainingHistory[0].hovno != true\r\n      ) {\r\n        //if the date is not today, update schedule day\r\n\r\n        const dateAsToday = return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate(user);\r\n\r\n        // let dateToday = new Date();\r\n        // let dateOfLastTraining = user.pushupPlans.current.trainingHistory[0].date;\r\n        // let datesAreTheSame = returnTrueIfDatesHaveTheSameDay(dateToday, dateOfLastTraining);\r\n        // console.log(\"DATE OF THE LAST TR IS TODAY (1yes,2 no)?\", dateAsToday);\r\n        // if (!datesAreTheSame) {\r\n        if (dateAsToday === 2) {\r\n          //update sch day on DB\r\n          console.log(\"update sch day on DB\");\r\n          let doItAsAsync = async () => {\r\n            const updatedUser = await postJsonDataUrlAfterAPIpushups('/updateScheduleDay', {});\r\n            // console.log(\"updatedUser-rescheduled\", updatedUser);\r\n            updateUser({ ...updatedUser });\r\n          }\r\n          doItAsAsync();\r\n        }\r\n      }\r\n\r\n\r\n\r\n      dueDateIsAheadThisMuch = returnNumberOfDaysMissingCurrentSchedulleOrUndefined(user);\r\n      // console.log(\"dueDateIsAheadThisMuch: \", dueDateIsAheadThisMuch);\r\n      let textInfoFirstLineLocalVariable;\r\n      // switch (dueDateIsAheadThisMuch) {\r\n      // case null:\r\n      //   textInfoLocalVariable = 'loading Data... (Pray everyone:-))';\r\n      //   break;\r\n\r\n      //check if training was started already\r\n      let continueTraining = false;\r\n\r\n      if (return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate(user) === 1\r\n        && user.pushupPlans.current.trainingHistory[0].completed != true) { continueTraining = true; }\r\n\r\n      //final assessment date (if exists)\r\n      //find in how many days is final assessment (if training has goog schedule = on time or traiining waiting in future)\r\n      let finalAssessmentDueIn;\r\n      if (user.pushupPlans.current\r\n        && user.pushupPlans.current.scheduleDayToDoFrom0\r\n        // && user.pushupPlans.current.schedule\r\n        // && user.pushupPlans.current.schedule[13]\r\n        // && user.pushupPlans.current.schedule[13].date\r\n      ) {\r\n        // console.log(\"XXXXXXXXXXXXXXXXXX\");\r\n        finalAssessmentDueIn = 13 - user.pushupPlans.current.scheduleDayToDoFrom0;\r\n      }\r\n\r\n      // console.log(\"XXDD\", dueDateIsAheadThisMuch)\r\n      // dueDateIsAheadThisMuch = 1;\r\n      textInfoFirstLineLocalVariable =\r\n        // dueDateIsAheadThisMuch<10 ? 'ahoj' :\r\n        dueDateIsAheadThisMuch === undefined ?\r\n          (user.pushupPlans.current ? (user.pushupPlans.current.assessments.initialAssessmentID === null ? 'Whenever you are ready' : 'no scheduled date')\r\n            : 'Select training Plan First'\r\n          )\r\n          // : dueDateIsAheadThisMuch === 0 ? <>{continueTraining ? 'Continue Started Training' : 'Your training is Due'}{finalAssessmentDueIn !== undefined && <p>Final assessment due in 21 days.</p>}</>\r\n          : dueDateIsAheadThisMuch === 0 ? 'Your training is Due'\r\n            : dueDateIsAheadThisMuch === 1 ? 'tomorrow'\r\n              : dueDateIsAheadThisMuch > 1 ? `in ${dueDateIsAheadThisMuch} days`\r\n                : dueDateIsAheadThisMuch === -1 ? `You are 1 day late.`\r\n                  : dueDateIsAheadThisMuch < -1 ? `You are ${-dueDateIsAheadThisMuch} days late.`\r\n                    : '-...-';\r\n\r\n      // console.log(\"textInfoFirstLineLocalVariable: \", dueDateIsAheadThisMuch, textInfoFirstLineLocalVariable);\r\n      setInfo({\r\n        textLine1: continueTraining, //show only if exists\r\n        textLine2: textInfoFirstLineLocalVariable,\r\n        textLine3: finalAssessmentDueIn, //show only if exists\r\n        days: dueDateIsAheadThisMuch,\r\n\r\n      });\r\n      // setTextInfo(\"Ahoj\");\r\n    } else {\r\n      //this is a guest i guess... reset buttons' texts\r\n      setInfo({\r\n        textLine1: undefined, //show only if exists\r\n        textLine2: undefined,\r\n        textLine3: undefined, //show only if exists\r\n        days: undefined,\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n\r\n  // console.log(\"textInfo: \", info.textLine2);\r\n  return (\r\n    <div>\r\n      <h1 style={{ fontSize: '7vw', margin: '20px auto', textAlign: 'center' }}>Tested <br /> Pushups Plans</h1>\r\n      {/* onesignal web push notifications */}\r\n      {/* <div class='onesignal-customlink-container'></div> */}\r\n      <p>v1.11</p>\r\n      <p>{JSON.stringify(testingCORS)}</p>\r\n\r\n      <SLink to='/pushups/intro'>Intro/About</SLink>\r\n      <SLink to='/pushups/maxRepsTest'>Test Your Max Reps</SLink>\r\n      <SLink to='/pushups/trainingPlans'>Training Plans</SLink>\r\n      <br />\r\n\r\n      {((info.days > 0 || info.textLine2 === 'Select training Plan First')\r\n        //&& (!user || !user.authority || user.authority.power < 10)\r\n      ) ?\r\n        //training is in the future (or no plan selected) (=gray button):\r\n        <SLink to='/pushups' style={{ backgroundColor: 'gray', fontSize: '1rem', color: 'lightBlue', cursor: 'not-allowed' }}>\r\n          {info.textLine2 === 'Select training Plan First' ? 'Start' : 'Next'} Training\r\n          <p style={{ fontSize: '2rem', color: 'white' }}>{info.textLine2}</p>\r\n        </SLink> :\r\n\r\n        //%$£008\r\n        //training is now or late\r\n        <SLink to='/pushups/startMyTraining'>\r\n          {info.textLine1 ? 'Continue training' : 'Start Training'}\r\n          <p style={{ fontSize: '1rem', color: 'lightGray' }}>{info.textLine2}</p>\r\n          { //info about final assessment:\r\n            info.textLine3 < 23 &&\r\n            <p style={{ fontSize: '1rem', color: 'gray' }}>{info.textLine3 === 0 ? 'Final assessment is Due Today' : `(${info.textLine3} day${info.textLine3 === 1 ? '' : 's'} to Final Assessment)`}</p>}\r\n        </SLink>\r\n      }\r\n\r\n      {/*if training was sucessfully finished, label it  */}\r\n      {/* check if day of last training (if any exists) is today. if yes and training not finished, show \"continue training option\" */}\r\n\r\n\r\n\r\n      <br /><br />\r\n      {/* show only if user exists: */}<SLink to='/pushups/history'>History</SLink>\r\n      {/* show only if user exists: */}<SLink to='/pushups/community'>Community</SLink>\r\n      {/* show only if user exists: */}<SLink to='/pushups/userProfile'>My profile / Settings)</SLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;","function roughSizeOfObject( object ) {\r\n\r\n  var objectList = [];\r\n  var stack = [ object ];\r\n  var bytes = 0;\r\n\r\n  while ( stack.length ) {\r\n      var value = stack.pop();\r\n\r\n      if ( typeof value === 'boolean' ) {\r\n          bytes += 4;\r\n      }\r\n      else if ( typeof value === 'string' ) {\r\n          bytes += value.length * 2;\r\n      }\r\n      else if ( typeof value === 'number' ) {\r\n          bytes += 8;\r\n      }\r\n      else if\r\n      (\r\n          typeof value === 'object'\r\n          && objectList.indexOf( value ) === -1\r\n      )\r\n      {\r\n          objectList.push( value );\r\n\r\n          for( var i in value ) {\r\n              stack.push( value[ i ] );\r\n          }\r\n      }\r\n  }\r\n  return bytes;\r\n}\r\n\r\nexport default roughSizeOfObject;","import React from 'react';\r\nimport { SLink } from './Home';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../functions/postJsonData'\r\nimport objectSize from '../../functions/objectSize'\r\nimport styled from 'styled-components';\r\n\r\nconst SPersonalPushupPlans = styled.div`\r\nbackground-color: yellow;\r\npadding:3%;\r\n`\r\n\r\nconst MyExistingPlans = styled.div`\r\nbackground-color:lightgreen;\r\npadding:15px;\r\n/* margin:3%; */\r\nmargin-top:20px;\r\n\r\n`\r\nconst SPlanLink = styled.div`\r\nmargin:5px;\r\nbackground-color:#56cd56;\r\npadding:10px;\r\ndisplay:flex;\r\njustify-content: space-between;\r\nflex-wrap:wrap;\r\n`\r\nconst SButtonWrapper = styled.div`\r\ndisplay:flex;\r\nflex-flow:row wrap;\r\ndiv{\r\n  flex:1 1 auto;\r\ndisplay:flex;\r\njustify-content:space-around;\r\n}\r\nbutton{\r\n  margin:10px;\r\n  border-radius:10px;\r\n  width:50%;\r\n  };\r\n`\r\n\r\n\r\nconst PersonalPushupPlans = ({ history }) => {\r\n  let { user, updateUser } = React.useContext(PushUpsContext);\r\n\r\n  const personalPlanAction = async (positionFrom0, action) => {\r\n\r\n    // console.log(\"objectSize1\", objectSize(user));\r\n\r\n    if (action == 'submitAsFinished') {\r\n      console.log(\"submitAsFinished\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/finishPersonal/${positionFrom0}`,\r\n        // state: {\r\n        //   personalPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personal[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'view') {\r\n      console.log(\"view\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/view/inDevelopment/${user.pushupPlans.personal[positionFrom0]._id}`,\r\n        state: {\r\n          personalPlanPositionFrom0: positionFrom0,\r\n          plan: user.pushupPlans.personal[positionFrom0]\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'viewAdjust') {\r\n      console.log(\"adjust\");\r\n      // console.log(\"adjust - props:\", props);\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/adjustPersonal/${positionFrom0}`,\r\n        state: {\r\n          personalPlanPositionFrom0: positionFrom0,\r\n          plan: user.pushupPlans.personal[positionFrom0]\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    let objForServer = { planPositionFrom0: positionFrom0, action }\r\n    try {\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/manipulatePersonalPlan', objForServer);\r\n      // console.log(\"res from server on USERPLAN ACTION BUTTON:\", updatedUser);\r\n      updateUser({ ...updatedUser });\r\n\r\n      console.log(\"objectSize1\", objectSize(user));\r\n\r\n    } catch (err) { console.log(err); };\r\n  }\r\n\r\n  const personalFinishedPlanAction = async (positionFrom0, action) => {\r\n\r\n    // console.log(\"objectSize1\", objectSize(user));\r\n\r\n    // if (action == 'submitAsFinished') {\r\n    //   console.log(\"submitAsFinished\");\r\n    //   history.push({\r\n    //     pathname: `/pushups/trainingPlans/finishPersonal/${positionFrom0}`,\r\n    //     // state: {\r\n    //     //   personalPlanPositionFrom0: positionFrom0,\r\n    //     //   plan: user.pushupPlans.personal[positionFrom0]\r\n    //     // }\r\n    //   });\r\n\r\n    //   return;\r\n    // }\r\n\r\n    console.log(\"button action, plan numberFrom0: \", action, positionFrom0);\r\n    if (action == 'publish') {\r\n      console.log(\"publish clicked\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/publish/${positionFrom0}`,\r\n        // state: {\r\n        //   personalPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personal[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (action == 'view') {\r\n      console.log(\"view\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/view/finished/${user.pushupPlans.personalFinished[positionFrom0]._id}`,\r\n        state: {\r\n          personalFinishedPlanPositionFrom0: positionFrom0,\r\n          plan: user.pushupPlans.personalFinished[positionFrom0]\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    //// commit, duplicate, delete actions - on server side:\r\n    let objForServer = { planPositionFrom0: positionFrom0, action }\r\n    try {\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/manipulatePersonalFinishedPlan', objForServer);\r\n      updateUser({ ...updatedUser });\r\n    } catch (err) { console.log(err); };\r\n  }\r\n\r\n  return (\r\n    <SPersonalPushupPlans>\r\n      <h1 style={{ display: 'inline' }}> My personal pushup plans</h1>\r\n      <SLink style={{ margin: '10px 0 0 30px', display: 'inline-block', padding: '5px 20px', border: '3px red solid' }} to='/pushups/trainingPlans/createPersonal'>Create new</SLink>\r\n\r\n\r\n      <MyExistingPlans>\r\n        <h3>Private - Finished (Non-Adjustable)</h3>\r\n        <p>info what are these for...</p>\r\n        {(user && user.pushupPlans && user.pushupPlans.personalFinished && user.pushupPlans.personalFinished.length > 0) ?\r\n          <> {user.pushupPlans.personalFinished.map((plan, indexFrom0) =>\r\n            <SPlanLink key={indexFrom0}>\r\n              <span>{plan.name}</span>\r\n              <SButtonWrapper>\r\n                <div>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'commit')}>Commit</button>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'publish')}>Publish</button>\r\n                </div>\r\n                <div>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'view')}>View</button>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'duplicate')}>Duplicate</button>\r\n                  <button onClick={() => personalFinishedPlanAction(indexFrom0, 'delete')}>Delete</button>\r\n                </div>\r\n              </SButtonWrapper>\r\n\r\n            </SPlanLink>)}\r\n          </> : <span>No personal plans made.</span>}\r\n      </MyExistingPlans>\r\n\r\n      <MyExistingPlans>\r\n        <h3>Private - In Development (Adjustable)</h3>\r\n        <p>info what are these for...</p>\r\n        {(user && user.pushupPlans && user.pushupPlans.personal && user.pushupPlans.personal.length > 0) ?\r\n          <> {user.pushupPlans.personal.map((plan, indexFrom0) =>\r\n            <SPlanLink key={indexFrom0}>\r\n              <span>{plan.name}</span>\r\n              <SButtonWrapper>\r\n                <div>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'commit')}>Commit</button>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'submitAsFinished')}>Submit as Finished</button>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'view')}>View</button>\r\n\r\n                </div>\r\n                <div>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'viewAdjust')}>Adjust</button>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'duplicate')}>Duplicate</button>\r\n                  <button onClick={() => personalPlanAction(indexFrom0, 'delete')}>Delete</button>\r\n                </div>\r\n                {/* <span>(rearrange)</span> */}\r\n              </SButtonWrapper>\r\n\r\n            </SPlanLink>)}\r\n          </> : <span>No personal plans made.</span>}\r\n\r\n\r\n      </MyExistingPlans>\r\n\r\n\r\n      {/* <SLink style={{ margin: '10px 0 0 0' }} to='/pushups/trainingPlans/createPersonal'>Create new</SLink> */}\r\n\r\n\r\n    </SPersonalPushupPlans>\r\n  );\r\n};\r\n\r\nexport default withRouter(PersonalPushupPlans);","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\n// import PushUpsContext from './state/PushUpsContextState';\r\nimport PushUpsContext from '../../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../../functions/postJsonData'\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\n\r\nconst SPlanLink = styled.div`\r\n/* margin:5px; */\r\nbackground-color:#56cd56;\r\npadding:10px;\r\n/* display:flex; */\r\n/* justify-content: space-between; */\r\n/* flex-wrap:wrap; */\r\n`\r\nconst SButtonWrapper = styled.div`\r\ndisplay:flex;\r\n/* flex-flow:row wrap; */\r\ndiv{\r\n  /* flex:1 1 auto; */\r\n/* display:flex; */\r\n/* justify-content:space-around; */\r\n}\r\nbutton{\r\n  margin:10px;\r\n  border-radius:10px;\r\n  /* width:50%; */\r\n  };\r\n`\r\n\r\nconst PublicPlanToList = ({ plan, history }) => {\r\n  let { user, updateUser,publicPlans, updatePublicPlans } = React.useContext(PushUpsContext);\r\n\r\n\r\n  const publicPlanButtonClickAction = async (publicPlanID, action) => {\r\n\r\n    console.log(\"button action, plan id: \", publicPlanID, action);\r\n\r\n    if (action == 'view') {\r\n      console.log(\"view\");\r\n      history.push({\r\n        pathname: `/pushups/trainingPlans/view/public/${publicPlanID}`,\r\n        // state: {\r\n        //   personalFinishedPlanPositionFrom0: positionFrom0,\r\n        //   plan: user.pushupPlans.personalFinished[positionFrom0]\r\n        // }\r\n      });\r\n\r\n      return;\r\n    }\r\n    //// commit, duplicate, delete actions - on server side:\r\n    \r\n    try { \r\n      if (action === 'duplicate') alert('Adjustable copy of public plan will appear in your \"Private plans in development\" section')\r\n      let objForServer = { publicPlanID, action }\r\n      let updatedUserOrPlans = await postJsonDataUrlAfterAPIpushups('/interactWithPublicPlan', objForServer);\r\n\r\n      if (action === 'delete') {\r\n        updatePublicPlans([...updatedUserOrPlans]);\r\n        if (user.pushupPlans.current && user.pushupPlans.current.planIDType === publicPlanID) {\r\n          user.pushupPlans.current = null; //this was done on backend too but was not send to front end\r\n          updateUser({ ...user });\r\n          // window.location.reload(true);\r\n        }\r\n      } else { updateUser({ ...updatedUserOrPlans }); }\r\n\r\n\r\n    } catch (err) { console.log(err); };\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: 'lightBlue', margin: '3%', padding: '3%' }}>\r\n      {/* <p>Name: {plan.name}</p> */}\r\n\r\n      {/* <SPlanLink key={plan._id}> */}\r\n      <h3>{plan.name}</h3>\r\n      <h5>Description:</h5>\r\n      <p>{plan.description}</p>\r\n      <br />\r\n      <p>Target group - reps range: Users able to do from {plan.targetGroup.initialMaxReps.rangeAsReps[0]} to {plan.targetGroup.initialMaxReps.rangeAsReps[1]} reps.</p>\r\n      <p>Unfinished: {plan.executions.summary.completed}, length: {plan.executions.completed.length}</p>\r\n      <p>Finished: {plan.executions.summary.uncompleted}, length: {plan.executions.uncompleted.length}</p>\r\n      {/* </SPlanLink> */}\r\n\r\n      <SButtonWrapper>\r\n        {/* <div> */}\r\n        <button onClick={() => publicPlanButtonClickAction(plan._id, 'commit')}>Commit</button>\r\n        {/* </div> */}\r\n        {/* <div> */}\r\n        <button onClick={() => publicPlanButtonClickAction(plan._id, 'view')}>View</button>\r\n        <button onClick={() => publicPlanButtonClickAction(plan._id, 'duplicate')}>Duplicate</button>\r\n        {user && user.email && user.authority && user.authority.power >= 10 &&\r\n          <button style={{ backgroundColor: 'red' }} onClick={() => publicPlanButtonClickAction(plan._id, 'delete')}>Delete</button>\r\n        }\r\n        {/* </div> */}\r\n\r\n      </SButtonWrapper>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(PublicPlanToList);","import React from 'react';\r\nimport TrainingPlanOverview from '../../TrainingPlanOverview';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../../functions/postJsonData';\r\nimport PushUpsContext from '../../state/PushUpsContextState';\r\nimport PublicPlanToList from './PublicPlanToList';\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\nmargin: 0 5px 8px 5px;\r\n`\r\n\r\n\r\n\r\nconst PublicPlans = () => {\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n  const { user, updateUser, publicPlans } = pushupContext;\r\n  // const [viewController, setViewController] = React.useState(undefined);\r\n  // console.log(\"Public PLANS RErendered;\")\r\n  // React.useEffect(() => {\r\n  //   if (user) {\r\n  //     console.log(\"USER in PUBLIC PLANS refreshed\");\r\n  //     setViewController(user.settings.plans);\r\n  //     console.log(\"uuU: \", user.settings.plans.public.view);\r\n  //     if (viewController)      console.log(\"uuu \", viewController.public.view);\r\n  //   }\r\n  // },[user])\r\n\r\n  //GET public plans\r\n  // const [publicPlans, setPublicPlans] = React.useState(null);\r\n  // const getPublicPlans = async (positionFrom0) => {\r\n  // let publicPlansSupportVar = await postJsonDataUrlAfterAPIpushups('/getPublicPlan_s', {});\r\n  // setPublicPlans(publicPlansSupportVar);\r\n  // console.log(\"publicPlansSupportVar: \", publicPlansSupportVar);\r\n  // }\r\n  // if (publicPlans === null) {\r\n  // getPublicPlans();\r\n  // return (publicPlans === null && <p>loading Public plans...</p>)\r\n  // };\r\n\r\n\r\n  const togglePublicPlansView = async () => {\r\n    console.log(\"Toggle view\");\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/plansViewSettings', { publicPlansAccordion: 'toggle' });\r\n    console.log(\"U P DA A T E ED  user: \", updatedUser);\r\n    console.log(\"public plans VIEW: \", user.settings.plans.public.view);\r\n    updateUser({ ...updatedUser });\r\n    // console.log(\"user.settings.plans.public.view: \");\r\n  }\r\n\r\n\r\n  // const commitToPlan = async (planID, planName) => {\r\n  //   //assuming user exists...\r\n  //   let updatedUser = await postJsonDataUrlAfterAPIpushups('/commit', { userID: pushupContext.user._id, planID, name: planName });\r\n  //   pushupContext.updateUser(updatedUser);\r\n  // }\r\n\r\n\r\n  if (publicPlans === null) return (<p>loading Public plans...</p>)\r\n  if (user === null) return (<p>loading user...</p>)\r\n  //rendering this only after plans were received from DB...\r\n  return (\r\n    <div style={{ backgroundColor: 'lightBlue', padding: '3%' }}>\r\n      <Accordion\r\n        className='p-1'\r\n        style={{ margin: '0px 10px 0px 20px', background: 'transparent' }}\r\n        defaultActiveKey={user.settings.plans.public.view ? '1' : '0'}\r\n        // defaultActiveKey={user ? (user.settings ? '1' : '0') : '0'}\r\n        // defaultActiveKey={viewController ? (viewController.public.view ? '1' : '0') : '1'}\r\n      >\r\n        {/* <Card style={{background:'transparent', border:'none'}} > */}\r\n        <Card>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey=\"1\"\r\n            className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n            // style={{background:'white',margin:'0px 60px 0px 60px'}}\r\n            onClick={togglePublicPlansView}\r\n          >\r\n            Public Plans 🔽\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <SCard style={{ maxHeight: '100vh', overflowY: 'auto', backgroundColor: 'white' }}>\r\n              {/* <p>(assuming reps needs to be logged, not time)</p> */}\r\n              {publicPlans.map((plan, index) => <PublicPlanToList key={index} plan={plan} />)}\r\n\r\n              {/* <TrainingPlanOverview>\r\n                <h3>3 days split - 5x Max reps</h3>\r\n                <p>about the training</p>\r\n                <br />\r\n                <p>Commit to this training for 2 weeks.<button id='trainingPlanID_001' className='btnOpacity' onClick={() => commitToPlan('000000000000000000000001', '3 days split - 5x Max reps')}> Commit (not currently possible as plan not saved in db (and under appropriate id)</button></p>\r\n              </TrainingPlanOverview> */}\r\n\r\n            </SCard>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n      </Accordion>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PublicPlans;","import React, { useContext, useEffect, useState } from 'react';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../functions/postJsonData';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\n// import PushUpsContextState from './state/PushUpsContextState'\r\n\r\nimport TrainingPlanOverview from './TrainingPlanOverview'\r\nimport PersonalPushupPlans from './PersonalPushupPlans';\r\nimport PublicPlans from './pushupPlans/publicPlans/PublicPlans';\r\n// import { Link, Route, Switch, HashRouter } from 'react-router-dom';\r\n\r\n\r\nconst PushUpPlans = () => {\r\n  let pushupContext = useContext(PushUpsContext);\r\n  const [currentPlanName, setCurrentPlanName] = useState(null);\r\n  // let ready=true;\r\n  // let ready;\r\n\r\n  //display user's current plan name: (get plan's name and display it and cancel button)\r\n  useEffect(() => {\r\n    setCurrentPlanName((pushupContext.user && pushupContext.user.pushupPlans.current) ? pushupContext.user.pushupPlans.current.name : null);\r\n  }, [pushupContext]);\r\n\r\n\r\n\r\n  const finishCurrentTrainingPlan = async () => {\r\n    //assuming user and his current plan exists\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/endPlan', {});\r\n    pushupContext.updateUser(updatedUser);\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/* <Link to='/pushups'>Return</Link> */}\r\n      <h2>Plans</h2>\r\n      {(currentPlanName !== null && currentPlanName !== undefined) ?\r\n        (<div style={{ display: 'flex', justifyContent: 'space-between', backgroundColor: '#cbcbb8', padding: '5px 10px' }}>\r\n          <span>You are currently commited to plan called:<span style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>\"{currentPlanName}\"</span>.</span>\r\n          <button onClick={finishCurrentTrainingPlan}>End/Archive my current training plan</button>\r\n        </div>)\r\n        : null}\r\n      \r\n      <PublicPlans/>\r\n      <PersonalPushupPlans />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PushUpPlans;","import React from 'react';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\n\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n// import { returnPersonalPlanFromPlanID } from '../functions/basics';\r\n\r\nconst InitialAssessment = ({ history }) => {\r\n  const { user, updateUser } = React.useContext(PushUpsContext);\r\n  const [assNotDoneOrDoneLateOrOk, SETassNotDoneOrDoneLateOrOk] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    const getLastAssessmentInfo = () => {\r\n      if (user.assessments) {\r\n        const { date, reps, notes } = user.assessments[0];\r\n        const differenceInDays = (dateNewerNormal, dateOlderSpecialFromMongoose) => {\r\n          const dateOlder = new Date(dateOlderSpecialFromMongoose);\r\n          var Difference_In_Time = dateNewerNormal.getTime() - dateOlder.getTime();\r\n          var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\r\n          return Difference_In_Days;\r\n        }\r\n        let daysInPast = differenceInDays(new Date(), date);\r\n        daysInPast = Math.round(daysInPast);\r\n        SETassNotDoneOrDoneLateOrOk({ daysInPast, reps, notes })\r\n      } else {\r\n        SETassNotDoneOrDoneLateOrOk(null);\r\n        //dont even show this option\r\n        // setsstate();\r\n\r\n      }\r\n    }\r\n    getLastAssessmentInfo();\r\n  }\r\n    //activate on every re-render if empty\r\n    //, []   ///now runs on every rerender, with [] runs only on first\r\n    , [user.assessments]   ///to prevent warning message - rerender also if this changes\r\n  )\r\n\r\n\r\n  const useThisAssessmentAsInitial = async () => {\r\n    console.log(\"click cc\");\r\n\r\n    //populate schedule with dates\r\n    let currentScheduleToUpdate = user.pushupPlans.current.schedule;\r\n    let timeNowInMs = new Date().getTime();\r\n    for (let i = 0; i < currentScheduleToUpdate.length; i++){\r\n      currentScheduleToUpdate[i].dueDate = new Date(timeNowInMs + 24 * 60 * 60 * 1000 * i ); //i adds 1 day extra starting with nothing for today\r\n    }\r\n    console.log(\"updated schedule: \", currentScheduleToUpdate);\r\n\r\n\r\n    const updatedUser = await postJsonDataUrlAfterAPIpushups('/setCoreAssessment', { type: 'initial',updateCurrentSchedule:true,currentScheduleToUpdate }); //and final as other option\r\n    console.log(\"max reps user update to: \", updatedUser);\r\n    updateUser({ ...updatedUser });\r\n\r\n    // history.push('/pushups/startMyTraining');\r\n    // history.push('/pushups');\r\n    //update in db: \r\n    //  user - this plan - assess initial - done\r\n    //  aseess - update the one with this ID\r\n    //   update also assesss history track in user current plan? NO\r\n\r\n  }\r\n\r\n  // <Route exact path='/pushups/maxRepsTest' component={MaxRepsTest} />\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h3>Initial assessment</h3>\r\n      <p>On the beginning and end of each Plan, we need to assess, what is your current max.</p>\r\n\r\n      <div style={{ backgroundColor: 'red' }}>\r\n        {!assNotDoneOrDoneLateOrOk ? <p>You didn't do any ass yet... Do it now - In main menu select \"Test your max reps\" and then come back here</p> :\r\n          assNotDoneOrDoneLateOrOk.daysInPast > 8 ? <p>it is too old ({assNotDoneOrDoneLateOrOk.daysInPast} days). Test yourself now - In main menu select \"Test Your Max Reps\" </p>\r\n            : <p>You did {assNotDoneOrDoneLateOrOk.reps} reps {assNotDoneOrDoneLateOrOk.daysInPast} days ago. {assNotDoneOrDoneLateOrOk.notes.length > 0 && <span><br></br>You also made following notes:<br></br>{assNotDoneOrDoneLateOrOk.notes}</span>}\r\n              <br></br> If you want to use this data as your initial assessment, click <button onClick={useThisAssessmentAsInitial}>Use This Data and Start the Training</button>, otherwise check your current \"max\" now - In main menu select \"Test your max reps\"</p>}\r\n      </div>\r\n      <p>once YES is clicked, training will </p>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(InitialAssessment);","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\n\r\nconst UsabilityIssues = ({ data,history }) => {\r\n  // {data.schedule.usability, data.schedule.usabilityOld, data.daysLateToday} - used by re-schedule\r\n  let { user, updateUser } = React.useContext(pushupsContext);\r\n  // let [stuffToUpdateOnDB, setStuffToUpdateOnDB] = React.useState({ data.fianl });\r\n\r\n  const [readAgain, setReadAgain] = React.useState(null);\r\n\r\n  console.log(\"D A T A: \", data);\r\n\r\n  // React.useEffect(() => {\r\n  //   if (user) {\r\n  //     // setStuffToUpdateOnDB({ usability: data.schedule.usability, updatedSchedule });//needs to be in the ReactEffect or sth, otherwise it would keep re-rendering\r\n  //   }\r\n  // }, [user]);\r\n\r\n  const continueToTraining = async () => {\r\n    console.log(\"continue\");\r\n\r\n    const updatedUser = await postJsonDataUrlAfterAPIpushups('/reschedule', {\r\n      usability: data.finalUsabilityForDB,\r\n      updatedSchedule: data.schedule ? data.schedule.updatedSchedule : undefined,\r\n      updateScheduleDayToDoFrom0OrUndefined: data.lastTraining ? data.lastTraining.updatedScheduleDayToDoFrom0 : undefined,\r\n      potentialUnfinishedTrainingAccounted: true\r\n    }); //and final as other option\r\n    // console.log(\"updatedUser-rescheduled\", updatedUser);\r\n    updateUser({ ...updatedUser });\r\n    history.push('/pushups/runMyTraining');\r\n\r\n    //update user on DB then here\r\n\r\n    //load training\r\n\r\n\r\n\r\n  }\r\n\r\n  if (!user) return <p>loading...</p>\r\n\r\n  return (\r\n    <div>\r\n      {/* usability - intro */}\r\n      <h1>Updating data \"usability\"...</h1>\r\n\r\n\r\n      <p>Every time you miss or don't finish a training, the ability to measure how effective this push-up plan is goes down. </p>\r\n\r\n      <p>Until now effect of the pushup plan on your improvement was possible to measure with cca\r\n      <span style={{ fontSize: '2rem' }}>{data.usabilityOriginal.rating}%</span>accuracy. </p>\r\n\r\n\r\n\r\n      {data.schedule && <div>\r\n        {/* schedule issue info */}\r\n        <h2>Schedule issue</h2>\r\n        <p>You are {data.schedule.daysLateToday} day{data.schedule.daysLateToday > 1 && 's'} late with your training.</p>\r\n        <p>Usability rating will be changed to <span style={{ fontSize: '2rem' }}>{data.schedule.usability.rating}%</span> .</p>\r\n\r\n        {/* schedule update*/}\r\n        <h5>Updating schedule</h5>\r\n        <p>The training you missed will be rescheduled for today and started now. Future trainings will be rescheduled accordingly.</p>\r\n      </div>}\r\n\r\n      {data.lastTraining && <div>\r\n        <h2>Issue: Unfinished Training (-10%)</h2>\r\n        <p>As you didn't finish (all the sets of) the previous training, \"usability\" will be lowered by 10%.</p>\r\n      </div>}\r\n\r\n\r\n      {/* info end  */}\r\n      <h2>Summary</h2>\r\n      <h6>New \"usability\" of your data will be <span style={{ fontSize: '2rem' }}>{data.finalUsabilityForDB.rating}%</span>.</h6>\r\n      <h6>({data.finalUsabilityForDB.daysOffSchedule} day{data.finalUsabilityForDB.daysOffSchedule != 1 && 's'} off the schedule changes and {data.finalUsabilityForDB.unfinishedTrainings} unfinished training{data.finalUsabilityForDB.unfinishedTrainings != 1 && 's'}. )</h6>\r\n\r\n      <p>If you are under 50%, you may consider committing to a new plan.</p>\r\n      <p>If you can stick to the plan schedule and get 100%, that would be impressive!</p>\r\n\r\n      {readAgain === null ? null : <h2>Read again.</h2>}\r\n      <button style={{ margin: '20px' }} onClick={continueToTraining}>Understood</button>\r\n      <button style={{margin:'20px'}}  onClick={() => setReadAgain(true)}>Not Understood</button>\r\n      \r\n\r\n\r\n\r\n      {/* check now day/training: */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(UsabilityIssues);","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport InitialAssessment from '../assessment/InitialAssessment';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { returnNumberOfDaysMissingCurrentSchedulleOrUndefined } from '../Home';\r\nimport UsabilityIssues from './UsabilityIssues';\r\nimport { returnTrueIfDatesHaveTheSameDay } from '../functions/basics';\r\n\r\n\r\n\r\n// import PushupsContext from '../state/PushUpsContextState'\r\n\r\nconst PrepareTraining2 = ({ history }) => {\r\n  let context = React.useContext(pushupsContext);\r\n  let { user } = context;\r\n  const [reschedulingInfo, setReschedulingInfo] = React.useState(null);\r\n  const [usabilityIssues, setUsabilityIssues] = React.useState({ checks: { scheduleChecked: false, lastTrainingChecked: false, lastTrainingCheckedPREP: false } });\r\n  let c0 = usabilityIssues.checks.lastTrainingCheckedPREP;\r\n  let cA = usabilityIssues.checks.scheduleChecked;\r\n  let cB = usabilityIssues.checks.lastTrainingChecked;\r\n  console.log(\"prepareTraining-2-Runing\",c0,cA,cB, usabilityIssues);\r\n\r\n  React.useEffect(() => {\r\n    //reset usabilityIssues any time user updates\r\n    // setUsabilityIssues({ checks: { scheduleChecked: false, lastTrainingChecked: false, lastTrainingCheckedPREP: false } });\r\n    // console.log(\"prepareTraining-2-Runing-userEffectAcivated\", usabilityIssues);\r\n\r\n\r\n    // console.log(\"USER EFFECT in training prep\");\r\n    if (context.user && context.user.pushupPlans.current && context.user.pushupPlans.current.assessments.initialAssessmentID) {\r\n      let { user, updateUser } = context;\r\n      let scheduleDayNumberFrom0 = user.pushupPlans.current.scheduleDayToDoFrom0;\r\n\r\n      /////ALL in summary: \r\n      //1.if last training from previous day existed, update scheduledaytodo first\r\n      //2. check that day to do against the schedule.if sch\r\n\r\n      //COULD BE DELETED AS SHOULD NEVER RUNmini bug important bug fix - update schedule number if last training was not finished (shall be done in unfinished training section but needs to be done before the schedule!)\r\n      //but just needed to create lastTraining object to identify of ot was unfinished training\r\n      if (usabilityIssues.checks.lastTrainingCheckedPREP === false) {\r\n        console.log(\"mini bug-fix running1\");\r\n\r\n        //check if last training finished\r\n        let dateToday = new Date();\r\n        let dateOfLastTrainingAsStringOrNull = user.pushupPlans.current.trainingHistory ? (user.pushupPlans.current.trainingHistory.length > 0 ? user.pushupPlans.current.trainingHistory[0].date : null) : null;\r\n        if (dateOfLastTrainingAsStringOrNull !== null) {//=if previous training exists\r\n          let datesAreTheSame = returnTrueIfDatesHaveTheSameDay(dateToday, dateOfLastTrainingAsStringOrNull);\r\n          if (!datesAreTheSame\r\n            && user.pushupPlans.current.trainingHistory[0].completed !== true\r\n          && !user.pushupPlans.current.trainingHistory[0].potentialUnfinishedTrainingAccounted) {\r\n            /////uncompleted->  update schedule day to do\r\n            console.log(\"mini bug-fix running2\");\r\n            usabilityIssues.lastTraining = { updatedScheduleDayToDoFrom0: scheduleDayNumberFrom0 }; //for DB in next component\r\n            usabilityIssues.lastTraining.completed = false;\r\n            if (user.pushupPlans.current.trainingHistory[0].scheduleDayUpdated !== true)scheduleDayNumberFrom0++; //for schedule here\r\n          }\r\n        }\r\n      }\r\n\r\n      //check if training is (over)due:\r\n      const dueDateIsAheadThisMuch = returnNumberOfDaysMissingCurrentSchedulleOrUndefined(user);\r\n\r\n      //schedule check Once:\r\n      if (usabilityIssues.checks.scheduleChecked === false) {\r\n        ////////update usability locally\r\n        let usability = user.pushupPlans.current.usability;\r\n        //create if doesn't exist (on older plans/can be removed with time)\r\n        if (usability === undefined) {\r\n          console.log(\"Creating 'USABILITY' property as this user didn't have one yet\");\r\n          usability = {\r\n            daysOffSchedule: 0,\r\n            unfinishedTrainings: 0,\r\n            rating: 100\r\n          }\r\n        }\r\n\r\n        // user.pushupPlans.current.usability = usability;\r\n        //update usability\r\n        let usabilityOld = { ...usability };\r\n        // usabilityIssues.usabilityOriginal = usability;\r\n        usabilityIssues.usabilityOriginal = usabilityOld;\r\n        //schedule\r\n        if (dueDateIsAheadThisMuch < 0) {//=user is late, change validity and reschedule trainings\r\n          // console.log(\"dueDateIsAheadThisMuch: \", dueDateIsAheadThisMuch);\r\n\r\n\r\n          usability.daysOffSchedule = usability.daysOffSchedule + (dueDateIsAheadThisMuch * (-1));\r\n          usability.rating = 100 - (usability.daysOffSchedule + usability.unfinishedTrainings) * 10;\r\n          // console.log(usability);\r\n\r\n          //inform user (and update DB from there)\r\n          // setUsabilityIssues({ schedule: { usability, usabilityOld, daysLateToday: -dueDateIsAheadThisMuch } });\r\n          usabilityIssues.schedule = { usability, usabilityOld, daysLateToday: -dueDateIsAheadThisMuch };\r\n          usabilityIssues.finalUsabilityForDB = usabilityIssues.schedule.usability;\r\n          // console.log(\"USA5:\", usabilityIssues.finalUsabilityForDB);\r\n\r\n\r\n          ///////reschedule\r\n          let updatedSchedule = user.pushupPlans.current.schedule;\r\n          // let scheduleDayNumberFrom0 = user.pushupPlans.current.scheduleDayToDoFrom0;\r\n          // let scheduleDayNumberFrom0 = 4;\r\n          // console.log(\"scheduleDayNumberFrom0: \", scheduleDayNumberFrom0);\r\n          //populate schedule starting with current day with new dates\r\n          let timeNowInMs = new Date().getTime();\r\n          let counter = 0;\r\n          for (let i = scheduleDayNumberFrom0; i < updatedSchedule.length; i++) {\r\n            updatedSchedule[i].dueDate = new Date(timeNowInMs + 24 * 60 * 60 * 1000 * counter); //i adds 1 day extra starting with nothing for today\r\n            counter++;\r\n          }\r\n          usabilityIssues.schedule.updatedSchedule = updatedSchedule;\r\n        };\r\n        usabilityIssues.checks.scheduleChecked = true;\r\n      }\r\n\r\n      //training finished check once (if not checked in the past (earlier this day) already)\r\n      if (usabilityIssues.checks.lastTrainingChecked === false)       {\r\n        //check if last training finished\r\n        let dateToday = new Date();\r\n        let dateOfLastTrainingAsStringOrNull = user.pushupPlans.current.trainingHistory ? (user.pushupPlans.current.trainingHistory.length > 0 ? user.pushupPlans.current.trainingHistory[0].date : null) : null;\r\n        if (dateOfLastTrainingAsStringOrNull !== null) {//=if previous training exists\r\n          let datesAreTheSame = returnTrueIfDatesHaveTheSameDay(dateToday, dateOfLastTrainingAsStringOrNull);\r\n          if (!datesAreTheSame\r\n            && user.pushupPlans.current.trainingHistory[0].completed !== true\r\n            && !user.pushupPlans.current.trainingHistory[0].potentialUnfinishedTrainingAccounted\r\n          ) {\r\n            /////uncompleted->  update usability + info\r\n\r\n            console.log(\"...usabilityIssues.usabilityOriginal: \", usabilityIssues.usabilityOriginal);\r\n            //update validity\r\n            usabilityIssues.lastTraining.usabilityNewest = usabilityIssues.schedule ? JSON.parse(JSON.stringify(usabilityIssues.schedule.usability)) : JSON.parse(JSON.stringify(usabilityIssues.usabilityOriginal))\r\n            usabilityIssues.lastTraining.usabilityNewest.unfinishedTrainings = usabilityIssues.lastTraining.usabilityNewest.unfinishedTrainings + 1;\r\n            usabilityIssues.lastTraining.usabilityNewest.rating = usabilityIssues.lastTraining.usabilityNewest.rating - 10;\r\n            usabilityIssues.finalUsabilityForDB = usabilityIssues.lastTraining.usabilityNewest;\r\n            // console.log(\"USA10:\", usabilityIssues.finalUsabilityForDB);\r\n          }\r\n        }\r\n        usabilityIssues.checks.lastTrainingChecked = true;\r\n      }\r\n\r\n\r\n\r\n      setUsabilityIssues({ ...usabilityIssues });\r\n\r\n      //=if issue(s) found...\r\n      // console.log(\"UUUUUU usabilityIssues :\", usabilityIssues);\r\n      if (usabilityIssues.schedule || usabilityIssues.lastTraining) {\r\n        // setReschedulingInfo({usability,usabilityOld,daysLateToday:-dueDateIsAheadThisMuch});\r\n        setReschedulingInfo({ ...usabilityIssues });\r\n\r\n      } else { //=no issue found...\r\n        console.log(\"OK OK OK OK  :\", usabilityIssues);\r\n\r\n        history.push('/pushups/runMyTraining');\r\n      }\r\n    }\r\n  }, [user])\r\n\r\n\r\n  return (\r\n    <div>\r\n      {/* <h1>Training xx</h1> */}\r\n      {!context.user ? <p>you are guest. Login first(??)</p> :\r\n        !context.user.pushupPlans.current ? <p>select a plan first.</p> :\r\n          !context.user.pushupPlans.current.assessments.initialAssessmentID ? <InitialAssessment />\r\n            : reschedulingInfo !== null ? <UsabilityIssues data={reschedulingInfo} /> : <p>Loading...</p>\r\n      }\r\n    </div>\r\n    // : reschedulingInfo !== null ? <UsabilityIssues usability={reschedulingInfo.usability} usabilityOld={reschedulingInfo.usabilityOld} days={reschedulingInfo.daysLateToday} /> : <p>Loading...</p>\r\n  );\r\n};\r\n\r\nexport default withRouter(PrepareTraining2);","import React from 'react';\r\n// import PushUpsContext from './state/PushUpsContextState';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nimport { urlRoot } from '../../../globalState/globalVariables';\r\nimport postJsonData from '../../../functions/postJsonData'\r\n// import handleNewUserSubmit from './functions/handleNewUserSubmit';\r\n\r\n// import styled from 'styled-components'\r\n// const Sdiv = styled.div`\r\n//  background:orange;\r\n//  background:rgba(255, 166, 0, 0.452);\r\n//   padding:5px 10px;\r\n//   border: orange solid 2px;\r\n//  `\r\n\r\nconst AssessmentForm = ({ history }) => {\r\n  const [submitted, setSubmitted] = React.useState(false);\r\n  // const [user, setUser] = useState();\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n\r\n  console.log(\"CCC\", pushupContext);\r\n\r\n  const handleNewAssessmentSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // console.log(\"PP context:\", pushupContext);\r\n    const userInfoForServer = {\r\n\r\n      reps: e.target.assessmentReps.value,\r\n      notes: e.target.assessmentNotes.value,\r\n      // partOfPlan:\r\n    }\r\n\r\n    const apiUrl = `${urlRoot}/pushups/saveNewAssessment`;\r\n    try {\r\n      const updatedUser = await postJsonData(apiUrl, userInfoForServer);\r\n      pushupContext.updateUser(updatedUser);\r\n      console.log(\"server's response to PostJsonData: (updating context now)\", updatedUser);\r\n      setSubmitted(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      history.push('/pushups');\r\n      setSubmitted(false);\r\n    } catch (err) { console.log(err) };\r\n  };\r\n\r\n\r\n  return (\r\n    // <div style={{ border: '2px solid orange' }}>\r\n    <div>\r\n      <h3> Results</h3>\r\n      <form onSubmit={handleNewAssessmentSubmit}>\r\n        <p>Reps:</p>\r\n        <input id='assessmentReps'></input>\r\n        <p>Notes (changes in assessment execution):</p>\r\n        {/* <input id=\"password\" type='password'></input> */}\r\n        <textarea id=\"assessmentNotes\"></textarea>\r\n        {/* <input type='textarea' id=\"assessmentNotes\"></input> */}\r\n        <button id=\"submitAssessmentForm\" type='submit'>Submit</button>\r\n        {submitted&& <span id='confirmNewRepsSubmitSuccess'>Submitted.  Well done.</span>}\r\n        {/* <p id='signUpResult'></p> */}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(AssessmentForm);\r\n","import React from 'react';\r\nimport AssessmentForm from './AssessmentForm';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nconst MaxRepsTest = ({history}) => {\r\n  return (\r\n    <div>\r\n      <h2>Test Your Max Reps</h2>\r\n      <p>Do as many push-ups as you can.</p>\r\n      <div style={{ backgroundColor: 'lightgray' }}>\r\n        <h3>Rules - important!</h3>\r\n        <ul>\r\n          <li>Be FRESH: If you did any arm/chest workout today, do this test tomorrow or day after tomorrow.</li>\r\n          <br />\r\n          <li>Keep the PALMS \"shoulder-width\" apart, little bit wider and closer to hips - not parallel with shoulders.</li>\r\n          <li>ELBOWS/arms should make 45 degrees angle with the torso of your body each time you go down.</li>\r\n          <li>use FULL RANGE of the movement: Chest has to touch floor each time and elbows have to be locked each time.</li>\r\n          <li>KEEP MOVING: Once you start, you can't stop moving. How fast you do the reps, is up to you, you can also change the pace throughout, but you can't stop to rest, even in push-up position, even for 1 second. Once you can't move anymore, stop. </li>\r\n          <br />\r\n          <li>take NOTES: If you do any changes to the way you will assess yourself, note it down. Next time you will be assessing yourself, use the same style. (Different styles lead to different rep results and therefore it would be impossible to know, if you actually improved thank to the training, or not.) It is important to try to keep assessment conditions and consistent as possible, for assessment to be valid. </li>\r\n        </ul>\r\n      </div>\r\n      <button onClick={()=>history.push('/pushups/paceMaker')}>Use Pace Tracker</button>\r\n      <AssessmentForm />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(MaxRepsTest);","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip, Legend, LabelList, ResponsiveContainer, Label } from 'recharts';\r\n\r\nexport const SPTiny = styled.p`\r\nmargin:0;\r\n`\r\nconst LastTraining = ({ data, viewType }) => {\r\n  const [repsSum, setRepsSum] = React.useState(-1);\r\n  const [timeInMinutes, setTimeInMinutes] = React.useState(-1);\r\n  const calculateRepsSum = () => {\r\n    let repsSumCalc;\r\n    if (repsSum === -1) {\r\n      repsSumCalc = data.sets.reduce((acc, set) => acc + set.reps\r\n        , 0);\r\n      setRepsSum(repsSumCalc);\r\n    }\r\n  }\r\n\r\n  const calcTrainingTime = () => {\r\n    function differenceInMinutes(dt2, dt1) {\r\n      var diff = (dt2.getTime() - dt1.getTime()) / 1000;\r\n      diff /= 60;\r\n      return Math.abs(Math.round(diff));\r\n    }\r\n    if (timeInMinutes === -1) {\r\n      if (data.sets.length === 0) { setTimeInMinutes(0); return; };\r\n      // console.log(\"DATA:\",data);\r\n      // console.log(\"DATAd:\",data.date);\r\n      let td = differenceInMinutes(new Date(data.date), new Date(data.sets[0].date));\r\n      setTimeInMinutes(td);\r\n    }\r\n  }\r\n\r\n  const getSimpleDateIfTrueAlsoTime = (withTime) => {\r\n    var d = new Date(data.date);\r\n    var date = d.getDate();\r\n    var month = d.getMonth() + 1; // Since getMonth() returns month from 0-11 not 1-12\r\n    var year = d.getFullYear();\r\n    var dateStr = date + \"/\" + month + \"/\" + year;\r\n    var dateWithTimeStr = dateStr + '  ' + d.getHours() + ':' + d.getMinutes();\r\n    return withTime ? dateWithTimeStr : dateStr;\r\n  }\r\n\r\n  React.useEffect(() => {\r\n\r\n  }, [])\r\n\r\n  const getTrainingDataToChart = (tr) => {\r\n    let sets = tr.sets;\r\n    let dataForChart = [];\r\n    let setsNr = sets.length;\r\n    for (let i = setsNr - 1; i >= 0; i--) {\r\n      let set = sets[i];\r\n      let setInfo = {\r\n        setNumber: `set ${setsNr - i}`,\r\n        reps: set.reps,\r\n        repsNotes: set.repsNotes,\r\n        // breakDuration: set.breakDuration,\r\n        breakDuration: i === 0 ? 0 : 5,\r\n        breakDurationS: set.breakDuration ? set.breakDuration + ' s.' : null,\r\n      };\r\n      // let breakInfo = { key: 'break', data: set.breakDuration ? set.breakDuration : 0 };\r\n      dataForChart.push(setInfo);\r\n    }\r\n    // console.log(\"dataForChart3: \", dataForChart);\r\n    return dataForChart;\r\n  }\r\n\r\n\r\n\r\n\r\n  calculateRepsSum();\r\n  calcTrainingTime();\r\n\r\n  if (viewType === 'currentPlanView') {\r\n    return (\r\n      <p>\r\n        <span>{getSimpleDateIfTrueAlsoTime()}: {repsSum} reps</span>\r\n      </p>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: 'lightBlue' }} className='historyElementContainer'>\r\n      <h2 style={{ display: 'flex' }}>Last Training:</h2>\r\n      <p>{getSimpleDateIfTrueAlsoTime(true)}</p>\r\n\r\n      <div style={{}}>\r\n        <SPTiny style={{ textAlign: 'center' }}>{repsSum} reps done in {timeInMinutes} munites.</SPTiny>\r\n        <ResponsiveContainer height={200} width=\"95%\" >\r\n          {/* <BarChart width={350} height={350} margin={{ top: 25 }} data={getTrainingDataToChart(data)}> */}\r\n          <BarChart margin={{ top: 25, left: 15 }} data={getTrainingDataToChart(data)}>\r\n            {/* <CartesianGrid strokeDasharray=\"3 3\" /> */}\r\n            <XAxis dataKey=\"setNumber\" />\r\n            <YAxis >\r\n              <Label value=\"Reps\" angle={-90} position='insideLeft' />\r\n            </YAxis>\r\n            <Tooltip />\r\n            {/* <Legend verticalAlign=\"top\" height={56} /> */}\r\n            {/* <Legend/> */}\r\n            <Bar dataKey=\"reps\" fill=\"#8884d8\" >\r\n              <LabelList dataKey=\"reps\" position=\"top\" />\r\n            </Bar>\r\n            <Bar dataKey=\"breakDuration\" fill=\"#bfbfbfa1\" >\r\n              <LabelList dataKey=\"breakDurationS\" position=\"inside\" />\r\n            </Bar>\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n      {/* {data.sets.map((set, index) => <SPTiny key={index}>{index + 1}) {set.reps} reps {set.repsNotes && \"(\" + set.repsNotes + \")\"}</SPTiny>)} */}\r\n      <h5>Notes:</h5>\r\n      {data.sets.slice(0).reverse().map((set, index) => <SPTiny key={index}>Set {index + 1}: {set.repsNotes && \"(\" + set.repsNotes + \")\"}</SPTiny>)}\r\n      {/* <SPTiny>TOTAL: {repsSum} reps</SPTiny> */}\r\n      {/* <p>Training duration (in minutes): {timeInMinutes}</p> */}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LastTraining;","import React from 'react';\r\n\r\nconst UsabilityInfo = ({ usability }) => {\r\n  console.log(\"usability UUU: \", usability);\r\n  return (\r\n    // <div style={{backgroundColor:'gray'}}>\r\n    <div>\r\n      <h5>Data Usability</h5>\r\n      <p>Rating: {usability.rating}%</p>\r\n      <p>Days off the schedule: {usability.daysOffSchedule}</p>\r\n      <p>Unfinished Trainings: {usability.unfinishedTrainings}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsabilityInfo;","import React from 'react';\r\nimport LastTraining from './LastTraining';\r\n\r\nimport { BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip, Legend, LabelList, ResponsiveContainer, Label } from 'recharts';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { returnAnyPlanFromPlanID } from '../functions/basics';\r\nimport UsabilityInfo from './UsabilityInfo';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\n\r\n// const xAxisLabelMiro = \"Day of the month (training number)\";\r\n\r\n// const xAxisLabelMiro = () => {\r\n//   return (\r\n//     <text>\r\n//       test x\r\n//     </text>\r\n//   );\r\n// }\r\n\r\n\r\nexport const getSimpleDateIfTrueAlsoTime = (dateReceived, withTime = false, withYear = false,) => {\r\n  var d = new Date(dateReceived);\r\n  var date = d.getDate();\r\n  var month = d.getMonth() + 1; // Since getMonth() returns month from 0-11 not 1-12\r\n  var year = d.getFullYear();\r\n  var dateStr = date + \"/\" + month;\r\n  dateStr += withYear ? (\"/\" + year) : '';\r\n  var dateWithTimeStr = dateStr + '  ' + d.getHours() + ':' + d.getMinutes();\r\n  return withTime ? dateWithTimeStr : dateStr;\r\n}\r\n\r\nconst returnPersonalPlanFromPlanID = (personalPlans, planID) => {\r\n  // console.log(planID, personalPlans);\r\n  return personalPlans.find(plan => plan._id === planID)\r\n}\r\n\r\nconst returnPersonalPlanPositionFrom0FromPlanID = (personalPlans, planID) => {\r\n  // console.log(planID, personalPlans);\r\n  let index;\r\n  personalPlans.find((plan, i) => {\r\n    index = i;\r\n    return plan._id === planID\r\n  });\r\n  console.log(\"index: \", index);\r\n  return index;\r\n}\r\n\r\nconst TrainingsOfLatestPlan = ({\r\n  trainingSHistory,\r\n  currentPlanExecution,\r\n  assessments,\r\n  personalPushupPlans,\r\n  history\r\n}) => {\r\n\r\n  let { publicPlans } = React.useContext(PushUpsContext);\r\n\r\n  //get plan info\r\n  console.log(\"PPP:\"+currentPlanExecution.personal+'.');\r\n  let planInfo = returnAnyPlanFromPlanID(currentPlanExecution.planIDType, currentPlanExecution.personal, personalPushupPlans,publicPlans);\r\n  console.log(\"planInfo: \", planInfo);\r\n\r\n\r\n\r\n  //scroll to the end of the current plan chart, if it exists\r\n  const elementOfCurrentPlanHistory = React.useRef(null);\r\n  React.useEffect(() => {\r\n    if (elementOfCurrentPlanHistory.current) elementOfCurrentPlanHistory.current.scrollLeft += 2000;\r\n  }, [trainingSHistory]);\r\n\r\n  if (trainingSHistory === null) return null;\r\n\r\n\r\n  const getTrainingSDataToChart = (trainings) => {\r\n\r\n    const returnTotalReps = (training) => {\r\n      return training.sets.reduce((acc, set) => acc + set.reps, 0);\r\n    }\r\n    const returnTrainingTimeInMinutes = (training) => { //returns 0 if training has no sets in it\r\n      if (!training.sets || training.sets.length === 0) return 0;\r\n      function differenceInMinutes(dt2, dt1) {\r\n        var diff = (dt2.getTime() - dt1.getTime()) / 1000;\r\n        diff /= 60;\r\n        return Math.abs(Math.round(diff));\r\n      }\r\n      return differenceInMinutes(new Date(training.date), new Date(training.sets[0].date));\r\n    }\r\n\r\n    let dataForChart = [];\r\n    let numberOfTrainings = trainings.length;\r\n\r\n    //for each training...\r\n    for (let i = numberOfTrainings - 1; i >= 0; i--) {\r\n      let training = trainings[i];\r\n      let trainingInfoForChart = {\r\n        date2: getSimpleDateIfTrueAlsoTime(training.date, false),\r\n        date: new Date(training.date).getDate(),\r\n        trainingNumber: (training.trainingNumber ? '(' + training.trainingNumber + ')' : ''),\r\n        trainingName: 'Name?',\r\n        trainingNrAName: 'tr.Nr (Name)?',\r\n        trainingNotes: 'Notes?',\r\n        trainingDurationInMinutes: (returnTrainingTimeInMinutes(training) ? returnTrainingTimeInMinutes(training) + 'm' : ''),\r\n        repsInTotal: returnTotalReps(training) > 0 ? returnTotalReps(training) : null\r\n      };\r\n      dataForChart.push(trainingInfoForChart);\r\n    }\r\n    // console.log(\"dataForChart: \", dataForChart);\r\n    return dataForChart;\r\n\r\n\r\n  }\r\n\r\n  const returnAssessmentInfoFromAssID = (assessments, assID) => {\r\n    let wanted = assessments.find(ass => ass._id === assID);\r\n    return (wanted.reps + ' reps (' + getSimpleDateIfTrueAlsoTime(wanted.date, false, true) + ')');\r\n  }\r\n\r\n  const showAdjustThisPlan = () => {\r\n    const position = returnPersonalPlanPositionFrom0FromPlanID(personalPushupPlans.personal, currentPlanExecution.planIDType);\r\n    const plan = returnPersonalPlanFromPlanID(personalPushupPlans.personal, currentPlanExecution.planIDType);\r\n    history.push({\r\n      pathname: '/pushups/trainingPlans/adjustPersonal',\r\n      state: {\r\n        personalPlanPositionFrom0: position,\r\n        plan\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // console.log(\"trainingSHistory: \", trainingSHistory);\r\n  // console.log(\"currentPlanExecution: \", currentPlanExecution);\r\n  // console.log(\"___x1_\", personalPushupPlans.personal, currentPlanExecution.planIDType);\r\n  // console.log(\"___x2_\",returnPersonalPlanFromPlanID(personalPushupPlans.personal, currentPlanExecution.planIDType));\r\n  // console.log(\"___x3_\", returnPersonalPlanFromPlanID(personalPushupPlans.personal, currentPlanExecution.planIDType));\r\n\r\n\r\n  return (\r\n    <div\r\n      className='historyElementContainer'\r\n      style={{ backgroundColor: 'pink' }}\r\n    >\r\n      <h2>Current Plan History (Execution)</h2>\r\n      <h5>Name: {planInfo.name}</h5>\r\n      <h5>Initial assessment: {returnAssessmentInfoFromAssID(assessments, currentPlanExecution.assessments.initialAssessmentID)}</h5>\r\n      <h5>Trainings history:</h5>\r\n      {trainingSHistory.map((training, index) => <LastTraining key={index} data={training} viewType='currentPlanView' />)}\r\n\r\n\r\n      <div\r\n        style={{ display: 'flex', flexWrap: 'no-wrap', overflowX: 'auto' }}\r\n        ref={elementOfCurrentPlanHistory}\r\n      >\r\n        <ResponsiveContainer height={200} minWidth={trainingSHistory.length * 40} >\r\n          {/* <BarChart width={350} height={350} margin={{ top: 25 }} data={getTrainingDataToChart(data)}> */}\r\n          <BarChart margin={{ top: 25, left: 15, bottom: 35 }} data={getTrainingSDataToChart(trainingSHistory)}>\r\n            {/* <CartesianGrid strokeDasharray=\"3 3\" /> */}\r\n            {/* <XAxis dataKey={`${trainingNumber} (${trainingName})`} /> */}\r\n            <XAxis dataKey=\"date\" >\r\n              <Label value=\"Day of the month (training number)\" position='bottom' />\r\n              {/* <Label content={<xAxisLabelMiro />} position='bottom' /> */}\r\n            </XAxis>\r\n            <YAxis >\r\n              <Label value=\"Reps\" angle={-90} position='insideLeft' />\r\n            </YAxis>\r\n            <Tooltip />\r\n            {/* <Legend verticalAlign=\"top\" height={56} /> */}\r\n            {/* <Legend/> */}\r\n            <Bar dataKey=\"repsInTotal\" fill=\"#8884d8\" >\r\n              <LabelList dataKey=\"repsInTotal\" position=\"top\" />\r\n              {/* <LabelList dataKey=\"trainingNotes\" position=\"center\" /> */}\r\n              <LabelList dataKey=\"trainingNumber\" position=\"insideBottom\" />\r\n              <LabelList dataKey=\"trainingDurationInMinutes\" position=\"center\" />\r\n\r\n              {/* <LabelList dataKey=\"trainingName\" position=\"insideBottomRight\" /> */}\r\n              {/* <LabelList dataKey=\"reps\" position=\"insideTop\" /> */}\r\n            </Bar>\r\n            {/* <Bar dataKey=\"breakDuration\" fill=\"#bfbfbfa1\" >\r\n              <LabelList dataKey=\"breakDurationS\" position=\"inside\" />\r\n            </Bar> */}\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n      {/* <button onClick={showAdjustThisPlan}>View/Adjust plan</button>  */}\r\n      {/* %$£02 */}\r\n      <UsabilityInfo usability={currentPlanExecution.usability} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(TrainingsOfLatestPlan);","import React from 'react';\r\nimport { BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip, Legend, LabelList, ResponsiveContainer, Label, Cell } from 'recharts';\r\nimport { getSimpleDateIfTrueAlsoTime } from './CurrentPlan';\r\nimport { SPTiny } from './LastTraining';\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\nmargin: 0 5px 8px 5px;\r\n`\r\n\r\nconst getAssessmentsDataToChart = (assessments) => { //returns null if no assessments\r\n\r\n  if (assessments === null || assessments === undefined || assessments.length < 1) return null;\r\n\r\n  let dataForChart = [];\r\n  let numberOfAss = assessments.length;\r\n\r\n  //for each training...\r\n  for (let i = numberOfAss - 1; i >= 0; i--) {\r\n    let ass = assessments[i];\r\n    let assInfoForChart = {\r\n      date: {\r\n        dayMonth: getSimpleDateIfTrueAlsoTime(ass.date),\r\n        year: new Date(ass.date).getFullYear() + '',\r\n        full: getSimpleDateIfTrueAlsoTime(ass.date, true, true)\r\n      },\r\n      reps: ass.reps,\r\n      notes: ass.notes\r\n    };\r\n    dataForChart.push(assInfoForChart);\r\n  }\r\n  console.log(\"ASSdataForChart: \", dataForChart);\r\n  return dataForChart;\r\n}\r\n\r\n\r\nconst renderCustomizedLabel = (props) => {\r\n  const {\r\n    x, y, width, height, value,\r\n  } = props;\r\n  const radius = 20;\r\n\r\n  return (\r\n    <g>\r\n      {/* <circle cx={x + width / 2} cy={y - radius} r={radius} fill=\"#1184d8\" /> */}\r\n      {/* <text x={x + width / 2} y={y - radius} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\"> */}\r\n      <text x={x + width / 2} y={160} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\">\r\n        {/* {value.split(' ')[1]} */}\r\n        {value}\r\n      </text>\r\n      {/* <text x={x + width / 2} y={210} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\">\r\n        {value.dayMonth}\r\n      </text> */}\r\n    </g>\r\n  );\r\n};\r\nconst renderCustomizedLabel2 = (props) => {\r\n  const {\r\n    x, y, width, height, value,\r\n  } = props;\r\n  const radius = 20;\r\n\r\n  return (\r\n    <g>\r\n      {/* <circle cx={x + width / 2} cy={y - radius} r={radius} fill=\"#1184d8\" /> */}\r\n      {/* <text x={x + width / 2} y={y - radius} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\"> */}\r\n      <text x={x + width / 2} y={180} fill=\"#000000\" textAnchor=\"middle\" dominantBaseline=\"middle\">\r\n        {/* {value.split(' ')[1]} */}\r\n        {value}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n\r\nconst CustomTooltip = ({ active, payload, label }) => {   //label == \"name\" property!!\r\n  if (active) {\r\n    console.log(\"payload:\", payload);\r\n    return (\r\n      <div style={{ backgroundColor: 'lightGray', padding: '10px', maxWidth: '200px' }}>\r\n        <SPTiny>{payload[0].payload.date.full}</SPTiny>\r\n        <SPTiny>{payload[0].payload.notes} </SPTiny>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nconst AssessmentsHistory = ({ assessments }) => {\r\n //scroll to the end of the current plan chart, if it exists\r\n const elementOfCurrentPlanHistory = React.useRef(null);\r\n React.useEffect(() => {\r\n   if (elementOfCurrentPlanHistory.current) elementOfCurrentPlanHistory.current.scrollLeft += 2000;\r\n }, [assessments]);\r\n\r\n  return (\r\n    <div\r\n      className='historyElementContainer'\r\n      style={{ backgroundColor: 'orange' }}\r\n    >\r\n      <h2>Assessments</h2>\r\n      {(assessments && assessments.length > 0) ?\r\n        <>\r\n          <div\r\n            style={{ display: 'flex', flexWrap: 'no-wrap', overflowX: 'auto' }}\r\n            ref={elementOfCurrentPlanHistory}\r\n          >\r\n            <ResponsiveContainer height={200} minWidth={assessments.length * 40} >\r\n              {/* <BarChart width={350} height={350} margin={{ top: 25 }} data={getTrainingDataToChart(data)}> */}\r\n              <BarChart margin={{ top: 25, left: 15, bottom: 55 }} data={getAssessmentsDataToChart(assessments)}>\r\n                {/* <CartesianGrid strokeDasharray=\"3 3\" /> */}\r\n                {/* <XAxis dataKey=\"date.dayMonth\" > */}\r\n                {/* <XAxis dataKey=\"\" > */}\r\n                {/* <XAxis > */}\r\n                {/* <Label value=\"date\" position='bottom' /> */}\r\n                {/* <LabelList dataKey=\"reps\" position=\"top\" content={renderCustomizedLabel}/> */}\r\n\r\n                {/* </XAxis> */}\r\n                <YAxis >\r\n                  <Label value=\"Reps\" angle={-90} position='insideLeft' />\r\n                </YAxis>\r\n                <Tooltip content={<CustomTooltip />} />\r\n                {/* <Legend verticalAlign=\"top\" height={56} /> */}\r\n                <Bar dataKey=\"reps\" fill=\"#8884d8\" >\r\n                  {/* <LabelList dataKey=\"reps\" position=\"top\" /> */}\r\n                  <LabelList dataKey=\"reps\" position=\"top\" />\r\n                  {/* <LabelList dataKey=\"reps\" position=\"top\" content={renderCustomizedLabel}/> */}\r\n                  {/* <LabelList dataKey=\"date\" position=\"bottom\" content={renderCustomizedLabel} /> */}\r\n                  <LabelList dataKey=\"date.dayMonth\" position=\"bottom\" content={renderCustomizedLabel} />\r\n                  <LabelList dataKey=\"date.year\" position=\"bottom\" content={renderCustomizedLabel2} />\r\n\r\n                  {\r\n                    assessments.map((entry, index) => (\r\n                      <Cell key={index} fill={assessments.length === index + 1 ? \"#ff0000\" : \"#8884d8\"} />\r\n                    ))\r\n                  }\r\n                  {/* <Cell key={index} stroke={assessments.length===index+1 ? \"#ff0000\":\"#000000\"} strokeWidth={assessments.length===index+1 ? 1 : 1} /> */}\r\n\r\n                </Bar>\r\n                {/* <Bar dataKey=\"breakDuration\" fill=\"#bfbfbfa1\" >\r\n              <LabelList dataKey=\"breakDurationS\" position=\"inside\" />\r\n            </Bar> */}\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n          <Accordion className='p-1' style={{ margin: '0px 10px 0px 20px', background: 'transparent' }}>\r\n            {/* <Card style={{background:'transparent', border:'none'}} > */}\r\n            <Card>\r\n              <Accordion.Toggle\r\n                as={Card.Header}\r\n                eventKey=\"1\"\r\n                className=\"p-1 mb-1 bg-none MMpointer  text-center btnOpacity\"\r\n              // style={{background:'white',margin:'0px 60px 0px 60px'}}\r\n              >\r\n                Your Notes 🔽\r\n              </Accordion.Toggle>\r\n              <Accordion.Collapse eventKey=\"1\">\r\n                <SCard style={{ maxHeight: '100vh', overflowY: 'auto', backgroundColor: 'white' }}>\r\n                  {/* <p>(assuming reps needs to be logged, not time)</p> */}\r\n                  {assessments.map((ass, index) => {\r\n                    {/* return (<div key={index} style={{margin:'3px',backgroundColor:'lightGray', marginBottom:'10px'}}> */ }\r\n                    return (<div key={index}>\r\n                      <SPTiny >{getSimpleDateIfTrueAlsoTime(ass.date, true, true)}</SPTiny>\r\n                      <SPTiny style={{ paddingLeft: '10px' }}>{ass.notes && ass.notes}</SPTiny>\r\n                      {ass.notes && <br />}\r\n                    </div>)\r\n                  })}\r\n\r\n                </SCard>\r\n              </Accordion.Collapse>\r\n            </Card>\r\n          </Accordion>\r\n        </ >\r\n        : <p>No assessments done yet</p>}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AssessmentsHistory;","import React from 'react';\r\nimport LastTraining from './history/LastTraining';\r\nimport pushupsContext from './state/PushUpsContextState';\r\nimport CurrentPlan from './history/CurrentPlan';\r\nimport AssessmentsHistory from './history/AssessmentsHistory';\r\n\r\n\r\nconst returnPersonalPlanPointerFromPlanID = (user, planID) => {\r\n  let planLocationPointer = user.pushupPlans.personal.find(plan => plan._id === planID);\r\n  return planLocationPointer;\r\n}\r\n\r\nconst History = () => {\r\n\r\n  let context = React.useContext(pushupsContext);\r\n  React.useEffect(() => {\r\n    //sort refresh-user loading\r\n    // if (!context.user) { return } else setUserLoading(false);\r\n    if (!context.user) return;\r\n\r\n\r\n\r\n  }, [context]);\r\n\r\n  //render this if user doesn't exists\r\n  if (!context.user) { return (<p>login to see your training history</p>) }\r\n\r\n  return ( //all down here user exists - guaranteed\r\n    <div>\r\n      <h1>History of...</h1>\r\n  \r\n{/* last training */}\r\n      {(context.user.pushupPlans.current != null\r\n        && context.user.pushupPlans.current.trainingHistory.length != 0)\r\n        ? <LastTraining data={context.user.pushupPlans.current.trainingHistory[0]} />\r\n\r\n        : context.user.pushupPlans.history\r\n        && context.user.pushupPlans.history.length > 0\r\n        && context.user.pushupPlans.history[0].trainingHistory.length > 0\r\n        && <LastTraining data={context.user.pushupPlans.history[0].trainingHistory[0]} />\r\n      }\r\n\r\n      {/* current plan */}\r\n      {context.user.pushupPlans.current != null && //tested for null\r\n        <CurrentPlan\r\n          trainingSHistory={context.user.pushupPlans.current.trainingHistory.length > 0 ? context.user.pushupPlans.current.trainingHistory : null}\r\n          //assuming personal;not public pushup plan!!\r\n          currentPlanExecution={context.user.pushupPlans.current}\r\n          assessments={context.user.assessments}\r\n        personalPushupPlans={context.user.pushupPlans}\r\n        />\r\n      }\r\n\r\n      {/* assessments */}\r\n      <AssessmentsHistory assessments={context.user.assessments} />\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;","import React from 'react';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\n\r\nimport { urlRoot } from '../../globalState/globalVariables';\r\nimport postJsonData from '../../functions/postJsonData'\r\nimport { withRouter } from 'react-router-dom';\r\n// import handleNewUserSubmit from './functions/handleNewUserSubmit';\r\n\r\n// import styled from 'styled-components'\r\n// const Sdiv = styled.div`\r\n//  background:orange;\r\n//  background:rgba(255, 166, 0, 0.452);\r\n//   padding:5px 10px;\r\n//   border: orange solid 2px;\r\n//  `\r\n\r\nconst SignUp = ({history}) => {\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n\r\n  const handleNewUserSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const userInfoForServer = {\r\n      email: e.target.signUpEmail.value,\r\n      password: e.target.signUpPassword.value,\r\n      name: e.target.signUpUsername.value,\r\n    }\r\n    const apiUrl = `${urlRoot}/user/signup`;\r\n    const serverResponse = await postJsonData(apiUrl, userInfoForServer);\r\n    console.log(\"server returned:\", serverResponse);\r\n    document.querySelector('#signUpResult').innerHTML = \"RESULT: \" + serverResponse.message;\r\n    if (serverResponse.success) {\r\n      pushupContext.updateUser(serverResponse.data.newUser);\r\n\r\n      // console.log(\"RRRRR\", serverResponse.data.newUser);\r\n      history.push('/pushups');\r\n      \r\n      // console.log(\"updated pushup context: \", pushupContext);\r\n      // document.querySelector('#email').value = '';\r\n      // document.querySelector('#password').value = '';\r\n      // window.\r\n    };\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    // <div style={{ border: '2px solid orange' }}>\r\n    <div>\r\n      <h3> Sign up</h3>\r\n      <form onSubmit={handleNewUserSubmit}>\r\n        <p>email:</p>\r\n        <input id='signUpEmail'></input>\r\n        <p>password:</p>\r\n        {/* <input id=\"password\" type='password'></input> */}\r\n        <input id=\"signUpPassword\"></input>\r\n        <p>Username: (public)</p>\r\n        <input id=\"signUpUsername\"></input>\r\n\r\n        \r\n\r\n        <button id=\"submitSignUpForm\" type='submit'>Submit</button>\r\n        <p id='signUpResult'></p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(SignUp);\r\n","import React, {useContext } from 'react';\r\nimport PushUpsContextState from './state/PushUpsContextState'\r\n\r\nimport { urlRoot } from '../../globalState/globalVariables';\r\nimport postJsonData from '../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n// import handleNewUserSubmit from './functions/handleNewUserSubmit';\r\n\r\n\r\nconst LogIn = ({history}) => {\r\n  // const [user, setUser] = useState();\r\n  let userContext = useContext(PushUpsContextState); \r\n\r\n\r\n\r\n  const handleReturnedUserSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // console.log(\"clicked\")\r\n    const userInfoForServer = {\r\n      email: e.target.email2.value,\r\n      password: e.target.password2.value,\r\n\r\n    }\r\n    const apiUrl = `${urlRoot}/user/logInWithEmailAndPassword`;\r\n    const serverResponse = await postJsonData(apiUrl, userInfoForServer);\r\n    // console.log(\"server returned:\", serverResponse);\r\n\r\n    userContext.updateUser(serverResponse);\r\n    \r\n    // userContext.runReRender(1);\r\n\r\n    // userContext.updateUser({});\r\n    // console.log(\"user context updated:\", userContext);\r\n\r\n    //this if condition shouldn't be needed here, during re-render inner htm is not accessible!\r\n    if (document.querySelector('#LogInResult2')) document.querySelector('#LogInResult2').innerHTML = \"RESULT: \" + serverResponse.message;\r\n    \r\n    if (serverResponse.email) {\r\n      document.querySelector('#email2').value = '';\r\n      document.querySelector('#password2').value = '';\r\n      history.push('/pushups');\r\n    };\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h3> Log-in</h3>\r\n      <form onSubmit={handleReturnedUserSubmit}>\r\n        <p>email:</p>\r\n        <input type='email' id='email2' defaultValue='miroslav.makarov@gmail.com'></input>\r\n        <p>password:</p>\r\n        <input id=\"password2\" type='password'></input>\r\n        <button id=\"submitLogInWithEmailForm\" type='submit'>Submit</button>\r\n        <p id='LogInResult2'></p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(LogIn);\r\n","import React from 'react';\r\nimport SignUp from './SignUp'\r\nimport LogIn from './LogIn'\r\n\r\nimport { Accordion, Card } from 'react-bootstrap';\r\n// import Button from 'react-bootstrap/Button';\r\nimport styled from 'styled-components';\r\n// const Sdiv = styled.div`\r\n//  /* background:orange; */\r\n//  background:rgba(255, 166, 0, 0.752);\r\n//   padding:5px 10px;\r\n//   border: orange solid 2px;\r\n//  `\r\n\r\n// const Gap = styled(SignUp)`\r\n// /* background:red; */\r\n// padding:30px !important;\r\n// background-color: red !important;\r\n// `\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\nmargin: 0 5px 8px 5px;\r\n`\r\n\r\nconst SignUpInOut = ({setUser}) => {\r\n  return (\r\n    <div style={{clear:'left'}}>\r\n      {/* <Accordion as={SCAccordion} > */}\r\n      <div style={{textAlign:'center'}}>\r\n        <h5>You will be automatically remembered on this device for automatic log-ins in the future. </h5><br/><h5> If you don't want that, log-out when you finish. </h5>\r\n      </div>\r\n      <Accordion className='p-3'>\r\n        <Card >\r\n          <Accordion.Toggle as={Card.Header} eventKey=\"0\" className=\"p-3 mb-2 bg-info text-white text-center btnOpacity\">\r\n            Sign-up\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"0\">\r\n            <SCard>\r\n              {/* <Sdiv as={SignUp} setUser={setUser}  /> */}\r\n              {/* <SignUp as={Sdiv} setUser={setUser}  /> */}\r\n              <SignUp/>\r\n            </SCard>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n        <Card >\r\n          <Accordion.Toggle as={Card.Header} eventKey=\"1\" className=\"p-3 mb-2 bg-info text-white MMpointer  text-center btnOpacity\">\r\n            Log-in\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"1\">\r\n            <SCard>\r\n              <LogIn/>\r\n            </SCard>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n      </Accordion>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUpInOut;","import React from 'react';\r\n\r\nconst PlanContext = React.createContext({\r\n  plan: null,\r\n  updatePlan(){}\r\n});\r\n\r\nexport default PlanContext;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport imgMinus from '../img/minus.png';\r\nimport imgPlus from '../img/plus.png';\r\nimport imgMinusLight from '../img/minusLight.png';\r\nimport imgPlusLight from '../img/plusLight.png';\r\n\r\nconst SWrapper = styled.div`\r\np,span,input,textarea{\r\n  font-size:1.3rem;\r\n}\r\ninput,span,textarea{\r\n  /* background-color:green; */\r\n  background:none;\r\n  /* background:linear-gradient(transparent 60%,red 100%); */\r\n  border:none;\r\n  /* border-bottom: 3px solid red; */\r\n  padding:5px;\r\n  /* width:auto; */\r\n  width:60px;\r\n    -webkit-box-shadow: none;\r\n    -moz-box-shadow: none;\r\n    box-shadow: none;\r\n}\r\nspan{\r\n  font-weight:bold;\r\n}\r\ninput{\r\n    color:black;\r\n    font-size:1.8rem;\r\n    color:white;\r\n    font-weight:bold;\r\n    text-align: center;\r\n    outline:none;\r\n    \r\n  }\r\n/* hide native htmml counting arrows */\r\n/* Chrome, Safari, Edge, Opera */\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n/* Firefox */\r\ninput[type=number] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\n`\r\n\r\nconst SCounter = styled.div`\r\n/* background-color:blue; */\r\n/* background-image: url(${imgMinus}) no-repeat center center/cover; */\r\n/* background: url(\"https://robohash.org/1\") no-repeat center center/cover; */\r\n/* background: url(\"https://robohash.org/1\") no-repeat center center/cover; */\r\n\r\ndisplay:inline-box;\r\nwidth:50px;\r\nheight:50px;\r\npadding:0 3px;\r\nposition: relative;\r\n\r\ntouch-action: manipulation;\r\n\r\n:hover{\r\n    cursor:pointer;\r\n  /* background: radial-gradient(circle, rgba(255,100,0,1) 34%, rgba(42,8,8,0) 70%); */\r\n\r\n  }\r\n  :active{\r\n    img{background: radial-gradient(circle, rgb(215, 255, 0) 34%, rgba(42,8,8,0) 70%);}\r\n\r\n  }\r\nimg{\r\n  \r\n  width:100%; \r\n  /* width:110px;  */\r\n  /* height: 110px; */\r\n  /* height: 100%; */\r\n  height: auto;\r\n  /* background:radial-gradient(red); */\r\n  background: radial-gradient(circle, rgba(255,0,0,1) 34%, rgba(242,8,8,0) 70%);\r\n  /* background:url(${imgPlus}); */\r\n  /* background:url(imgPlus); */\r\n \r\n}\r\n#counterNumber{\r\n}\r\ndiv{\r\n  margin: auto;\r\n  position: absolute;\r\n   top: 43%; \r\n   /* top: ${() => '44%'};  */\r\nright: 50%; \r\n/* width:10px;height:10px; */\r\ntransform: translate(50%, -50%);\r\n  z-index:10;\r\n  /* content:  ${props => props.howMuch};  */\r\n  content:  ${() => '7'}; \r\n  content:'6';\r\n\r\n  font-size:0.8rem;\r\n  font-weight:800;\r\n  line-height:1rem;\r\n  color: white; \r\n\r\n  -webkit-touch-callout: none; /* iOS Safari */\r\n    -webkit-user-select: none; /* Safari */\r\n     -khtml-user-select: none; /* Konqueror HTML */\r\n       -moz-user-select: none; /* Old versions of Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n            user-select: none; /* Non-prefixed version, currently\r\n                                  supported by Chrome, Edge, Opera and Firefox */\r\n}\r\n\r\n`;\r\nexport const SCounterSmall = styled(SCounter)`\r\nwidth:30px;\r\nheight:30px;\r\ndiv { \r\n  top:46%;\r\n  font-size:0.5rem;\r\n}\r\n`;\r\n\r\n\r\n// Restricts input field to a number only.\r\nfunction setInputFilter(textbox, inputFilter) {\r\n  // [\"input\", \"keydown\", \"keyup\", \"mousedown\", \"mouseup\", \"select\", \"contextmenu\", \"drop\"].forEach(function (event) {\r\n  [\"input\"].forEach(function (event) {\r\n    textbox.addEventListener(event, function () {\r\n      if (inputFilter(this.value)) {\r\n        this.oldValue = this.value;\r\n        this.oldSelectionStart = this.selectionStart;\r\n        this.oldSelectionEnd = this.selectionEnd;\r\n      } else if (this.hasOwnProperty(\"oldValue\")) {\r\n        this.value = this.oldValue;\r\n        this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);\r\n      } else {\r\n        this.value = \"\";\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nlet returnValueInMinMaxRange = (newValue, min, max) => {\r\n  if (newValue < min) return min;\r\n  if (newValue > max) return max;\r\n  // console.log(\"valu in boudary: \", newValue);\r\n  return newValue;\r\n}\r\n\r\n\r\nconst CounterAllIn = ({ settings }) => {\r\n  const [p1counterSmall, p1counterBig, onChangeFunctionReceivingNewValueAsParameter, initialValue, sideText, smallTextUnderTheNumber, minValue, MaxValue] = settings;\r\n\r\n  //set initial value, also when initial value is changed\r\n  const [localValue, setLocalValue] = React.useState(initialValue);\r\n  const [initialValueWasSetUp, setInitialValueWasSetUp] = React.useState(true);\r\n  React.useEffect(() => {\r\n    setInitialValueWasSetUp(true);\r\n    setLocalValue(initialValue);\r\n    // console.log(\"INITIAL value\"+initialValue+\" updated\");\r\n  }, [initialValue]);\r\n\r\n\r\n  // Restricts input field to a number only\r\n  const htmlInputEl = React.useRef(null);\r\n  React.useEffect(() => {\r\n    // let xx = [];\r\n    // for (let i = 0; i <= 13; i++) {\r\n    //   setInputFilter(document.getElementById(`idScheduleInput${i}`), function (value) {\r\n    //     return /^\\d*$/.test(value);\r\n    //   });\r\n    // }\r\n\r\n    setInputFilter(htmlInputEl.current, function (value) {\r\n      // let testedValue = /^\\d*$/.test(value);\r\n      // console.log(\"testedValue outcome: \", testedValue);\r\n      return /^\\d*$/.test(value);\r\n    });\r\n  }, [])\r\n\r\n  const updateLocalValueFromButton = (howMuch) => {\r\n    setInitialValueWasSetUp(false);\r\n    setLocalValue(returnValueInMinMaxRange(localValue + howMuch, minValue, MaxValue));\r\n    // console.log(\"NOT INITIAL value updated-button\");\r\n  }\r\n  const updateLocalValueFromTyping = ({ target: { value } }) => {\r\n    setInitialValueWasSetUp(false);\r\n    // console.log(\"VALUE NOW:\", value, value.length, value[0]); \r\n    // console.log(\"VALUE NOW:\", value, value.length,value[0]); \r\n    while (value.length > 1 && value[0] == 0) value = value.substring(1);\r\n    // value = value*1;\r\n    // console.log(\"VALUE NOW:\", value, value.length, value[0]); \r\n    setLocalValue(returnValueInMinMaxRange(value, minValue, MaxValue));\r\n    // console.log(\"NOT INITIAL value updated-typing\");\r\n  }\r\n\r\n  React.useEffect(() => { if (!initialValueWasSetUp) onChangeFunctionReceivingNewValueAsParameter(localValue) }, [localValue])\r\n\r\n  return (\r\n    // <div style={{ textAlign: 'center', backgroundColor: 'orange' }}>\r\n    <SWrapper style={{\r\n      textAlign: 'center',\r\n\r\n      display: 'inline-flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center'\r\n\r\n    }}>\r\n      {p1counterSmall !== 0 &&\r\n        <SCounterSmall\r\n          onClick={() => updateLocalValueFromButton(-p1counterSmall)}\r\n        // style={{visibility: localValue-p1counterSmall<0? 'hidden':'visible'}}\r\n        >\r\n          <img src={imgMinus} alt=\"\"></img>\r\n          <div >{-p1counterSmall}</div>\r\n        </SCounterSmall>}\r\n      <SCounter\r\n        onClick={() => updateLocalValueFromButton(-p1counterBig)}\r\n        style={{ visibility: p1counterBig === 0 ? 'hidden' : 'visible' }}\r\n      >\r\n        <img src={imgMinus} alt=\"\"></img>\r\n        <div >{-p1counterBig}</div>\r\n      </SCounter>\r\n      {/* <input onChange={updateLocalValueFromTyping} type='number' value={localValue} style={{padding:`${smallTextUnderTheNumber ? 0:5}px 1px 2px 3px`,margin:`${smallTextUnderTheNumber ? 0:5}px 1px 2px 3px`}}></input> */}\r\n      <div>\r\n        <input\r\n          onChange={updateLocalValueFromTyping}\r\n          type='number'\r\n          value={localValue}\r\n          style={{ color: 'black' }}\r\n          ref={htmlInputEl}\r\n        />\r\n        {/* <span style={{marginLeft:'0px',paddingLeft:'-20px'}}>%</span> */}\r\n        {sideText && <span style={{ marginLeft: '-13px' }}>{sideText}</span>}\r\n        {smallTextUnderTheNumber && <p style={{ marginTop: '-15px', fontSize: '0.85rem' }}>{smallTextUnderTheNumber}</p>}\r\n\r\n      </div>\r\n      {/* {p1counterBig != 0 && */}\r\n      <SCounter\r\n        onClick={() => updateLocalValueFromButton(p1counterBig)}\r\n        style={{ visibility: p1counterBig === 0 ? 'hidden' : 'visible' }}\r\n      >\r\n        <img src={imgPlus} alt=\"\"></img>\r\n        <div >{p1counterBig}</div>\r\n      </SCounter>\r\n      {/* } */}\r\n      {p1counterSmall !== 0 &&\r\n        <SCounterSmall onClick={() => updateLocalValueFromButton(p1counterSmall)}>\r\n          <img src={imgPlus} alt=\"\"></img>\r\n          <div >{p1counterSmall}</div>\r\n        </SCounterSmall>}\r\n    </SWrapper>\r\n  );\r\n};\r\n\r\nexport default CounterAllIn;","import React from 'react';\r\nimport PlanContext from './ContextDefaults';\r\n\r\nimport imgMinus from '../img/minus.png';\r\nimport imgPlus from '../img/plus.png';\r\nimport imgMinusLight from '../img/minusLight.png';\r\nimport imgPlusLight from '../img/plusLight.png';\r\n\r\nimport styled from 'styled-components';\r\nimport CounterAllIn from '../basicComponents/CounterAllIn';\r\n\r\nexport const SSet = styled.div`\r\n/* background-color: rgb(233, 225, 225); */\r\nbackground-color: rgb(151, 151, 152);\r\n\r\np,span,input,textarea{\r\n  font-size:1.3rem;\r\n}\r\ninput,span,textarea{\r\n  /* background-color:green; */\r\n  background:none;\r\n  /* background:linear-gradient(transparent 60%,red 100%); */\r\n  border:none;\r\n  /* border-bottom: 3px solid red; */\r\n  padding:5px;\r\n  /* width:auto; */\r\n  width:60px;\r\n    -webkit-box-shadow: none;\r\n    -moz-box-shadow: none;\r\n    box-shadow: none;\r\n}\r\nspan{\r\n  font-weight:bold;\r\n}\r\ninput{\r\n    color:black;\r\n    font-size:1.8rem;\r\n    color:white;\r\n    font-weight:bold;\r\n    text-align: center;\r\n    outline:none;\r\n    \r\n  }\r\n/* hide native htmml counting arrows */\r\n/* Chrome, Safari, Edge, Opera */\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n/* Firefox */\r\ninput[type=number] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\n\r\n/* textarea{\r\n  background-color:green;\r\n} */\r\n\r\npadding:3%;\r\nmargin-bottom: 10px;\r\n`;\r\n\r\nconst SSection = styled.div`\r\n/* background-color: yellow; */\r\nborder: 5px solid black;\r\npadding:10px;\r\n/* padding:3%; */\r\np{margin:0;}\r\nmargin-bottom:5px;\r\nbutton{\r\n  text-align: center;\r\n  display: block;\r\n  margin:5px auto -7px auto !important;\r\n  /* margin: auto !important; */\r\n  background-color:#ddd1d1;\r\n  outline:none;\r\n  /* border:none; */\r\n  &:hover{\r\n    background-color:red ;\r\n  /* opacity:1; */\r\n  }\r\n}\r\n`;\r\n\r\nconst SNote = styled.div`\r\n/* height:80px; */\r\n/* border: dotted black 1px; */\r\nbackground-color:lightgray;\r\np{\r\n    border-bottom:dotted 1px white;\r\n    padding-left:5px;\r\n}\r\ntextarea{\r\n  width:100%;\r\n  height:100%;\r\n  outline:none;\r\n}\r\np, textarea{font-size:0.8rem;}\r\n`;\r\n\r\n\r\n\r\n\r\nexport const SCounter = styled.div`\r\n/* background-color:blue; */\r\n/* background-image: url(${imgMinus}) no-repeat center center/cover; */\r\n/* background: url(\"https://robohash.org/1\") no-repeat center center/cover; */\r\n/* background: url(\"https://robohash.org/1\") no-repeat center center/cover; */\r\n\r\ndisplay:inline-box;\r\nwidth:50px;\r\nheight:50px;\r\npadding:0 3px;\r\nposition: relative;\r\n\r\ntouch-action: manipulation;\r\n\r\n:hover{\r\n    cursor:pointer;\r\n  /* background: radial-gradient(circle, rgba(255,100,0,1) 34%, rgba(42,8,8,0) 70%); */\r\n\r\n  }\r\n  :active{\r\n    img{background: radial-gradient(circle, rgb(215, 255, 0) 34%, rgba(42,8,8,0) 70%);}\r\n\r\n  }\r\nimg{\r\n  \r\n  width:100%; \r\n  /* width:110px;  */\r\n  /* height: 110px; */\r\n  /* height: 100%; */\r\n  height: auto;\r\n  /* background:radial-gradient(red); */\r\n  background: radial-gradient(circle, rgba(255,0,0,1) 34%, rgba(242,8,8,0) 70%);\r\n  /* background:url(${imgPlus}); */\r\n  /* background:url(imgPlus); */\r\n \r\n}\r\n#counterNumber{\r\n}\r\ndiv{\r\n  margin: auto;\r\n  position: absolute;\r\n   top: 43%; \r\n   /* top: ${() => '44%'};  */\r\nright: 50%; \r\n/* width:10px;height:10px; */\r\ntransform: translate(50%, -50%);\r\n  z-index:10;\r\n  /* content:  ${props => props.howMuch};  */\r\n  content:  ${() => '7'}; \r\n  content:'6';\r\n\r\n  font-size:0.8rem;\r\n  font-weight:800;\r\n  line-height:1rem;\r\n  color: white; \r\n\r\n  -webkit-touch-callout: none; /* iOS Safari */\r\n    -webkit-user-select: none; /* Safari */\r\n     -khtml-user-select: none; /* Konqueror HTML */\r\n       -moz-user-select: none; /* Old versions of Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n            user-select: none; /* Non-prefixed version, currently\r\n                                  supported by Chrome, Edge, Opera and Firefox */\r\n}\r\n\r\n`;\r\nexport const SCounterSmall = styled(SCounter)`\r\nwidth:30px;\r\nheight:30px;\r\ndiv { \r\n  top:46%;\r\n  font-size:0.5rem;\r\n}\r\n`;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Set = ({ set, position, trainingPosition }) => {\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n  let { reps, repsAsPercentage, duration, repsNotes, breakAfterInSeconds, breakNotes, } = set;\r\n  let repsCalculatedFromMaxAndPercentage;\r\n  if (plan.repsAsPercentages && plan.maxRepsNeeded) {\r\n    repsCalculatedFromMaxAndPercentage = Math.round(repsAsPercentage/100* plan.maxRepsNeeded.reps); \r\n  }\r\n\r\n  let repsOrDuration = (reps !== undefined) ? ['reps', 'duration'] : ['duration', 'reps'];\r\n  position++; //so that set start with 1\r\n\r\n  const updateRepsOrDuration = ({ target: { value } }) => {\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]] = value;\r\n    // plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[1]] = undefined;\r\n    // console.log(\"this is got value,other undefined:\", [repsOrDuration[0]], plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]]);\r\n\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const updateRepOrDurationNotes = ({ target: { value } }) => {\r\n    let note = value;\r\n    if (note && note.length > 0) { note = note.charAt(0).toUpperCase() + note.slice(1); }\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].repsNotes = note;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const toggleRepsDuration = () => {\r\n    repsOrDuration = [repsOrDuration[1], repsOrDuration[0]];\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]] = plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[1]];\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[1]] = undefined;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const adjustBreakTime = ({ target: { value } }) => {\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].breakAfterInSeconds = value;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const adjustBreakNotes = ({ target: { value } }) => {\r\n    let note = value;\r\n    if (note && note.length > 0) { note = note.charAt(0).toUpperCase() + note.slice(1); }\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].breakNotes = note;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const duplicateSet = () => {\r\n    let currentSet = plan.trainings[trainingPosition - 1].sets[position - 1];\r\n    const newSet = { ...currentSet }; //can be done ad set doesn't objects or arrays\r\n    plan.trainings[trainingPosition - 1].sets.push(newSet);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const deleteSet = () => {\r\n    plan.trainings[trainingPosition - 1].sets.splice(position - 1, 1);\r\n\r\n    const oldSets = plan.trainings[trainingPosition - 1].sets;\r\n    const newSets = [...oldSets];\r\n    plan.trainings[trainingPosition - 1].sets = newSets;\r\n\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const adjust = (howMuch, what) => {\r\n\r\n    plan.trainings[trainingPosition - 1].sets[position - 1][what] += howMuch;\r\n    if (plan.trainings[trainingPosition - 1].sets[position - 1][what] <= 0) plan.trainings[trainingPosition - 1].sets[position - 1][what] = 0;\r\n    // console.log(\"this is got value,other undefined:\", [repsOrDuration[0]], plan.trainings[trainingPosition - 1].sets[position - 1][repsOrDuration[0]]);\r\n    console.log(...plan.trainings[trainingPosition - 1].sets);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  ////interlink reps and %\r\n  let updatePercentagesValue = (newValue) => {\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].repsAsPercentage = newValue;\r\n    // plan.trainings[trainingPosition - 1].sets[position - 1].reps = Math.round(newValue / 100 * plan.maxRepsNeeded.reps);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  let updateRepsAsPartOfPercentagesValue = (newValue) => {\r\n    // plan.trainings[trainingPosition - 1].sets[position - 1].reps = newValue;\r\n    plan.trainings[trainingPosition - 1].sets[position - 1].repsAsPercentage = Math.round(newValue / plan.maxRepsNeeded.reps * 100);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <SSet>\r\n      <div >\r\n        <h5 style={{ display: 'inline' }}> Set {position}</h5>\r\n        {/* <div style={{ display: 'inline-flex',width:'50%', justifyContent: 'flex-end', opacity: '0.6' }}> */}\r\n\r\n      </div>\r\n      <SSection>\r\n        <div>\r\n          {!plan.repsAsPercentages &&\r\n            <div>\r\n              <p style={{ textAlign: 'center' }}>{reps !== undefined ? 'Reps' : 'Duration'}</p>\r\n              <div style={{ textAlign: 'center' }}>\r\n                <SCounterSmall onClick={() => adjust(-1, repsOrDuration[0])}>\r\n                  <img src={imgMinus} alt=\"\"></img>\r\n                  <div >1</div>\r\n                </SCounterSmall>\r\n                <SCounter onClick={() => adjust(-5, repsOrDuration[0])}><img src={imgMinus} alt=\"\"></img> <div >5</div></SCounter>\r\n                <input onChange={updateRepsOrDuration} type='number' value={reps !== undefined ? reps : duration}></input>\r\n                <SCounter onClick={() => adjust(5, repsOrDuration[0])}><img src={imgPlus} alt=\"\"></img> <div >5</div></SCounter>\r\n                <SCounterSmall onClick={() => adjust(1, repsOrDuration[0])}><img src={imgPlus} alt=\"\"></img> <div >1</div></SCounterSmall>\r\n                {reps == undefined && <p style={{ marginTop: '-20px', fontSize: '0.85rem' }}>seconds</p>}\r\n              </div>\r\n            </div>}\r\n\r\n\r\n\r\n          {plan.repsAsPercentages &&\r\n            <div style={{textAlign:'center'}}>\r\n              <CounterAllIn settings={[1, 5, updatePercentagesValue, repsAsPercentage, '%', 'of Max Reps']} />\r\n              {/* <p style={{ textAlign: 'center' }}>makes... </p> */}\r\n              <p style={{ textAlign: 'center' }}>= </p>\r\n              <CounterAllIn settings={[1, 5, updateRepsAsPartOfPercentagesValue, repsCalculatedFromMaxAndPercentage, 'reps']} />\r\n            </div>}\r\n\r\n        </div>\r\n        <SNote>\r\n          <p>Notes (Specify type of pushups, etc):</p>\r\n          <textarea onChange={updateRepOrDurationNotes} value={repsNotes} />\r\n        </SNote>\r\n        <button style={{ display: 'none' }} onClick={toggleRepsDuration}>\r\n          {reps !== undefined ? 'Replace \"Reps\" with \"Duration\"' : 'Replace \"Duration\" with \"Reps\"'}\r\n        </button>\r\n\r\n\r\n      </SSection>\r\n\r\n\r\n      <SSection>\r\n        <div>\r\n          <p style={{ textAlign: 'center' }}>Break</p>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <SCounterSmall howMuch='-1' onClick={() => adjust(-5, 'breakAfterInSeconds')}><img src={imgMinus} alt=\"\"></img><div >5</div></SCounterSmall>\r\n            <SCounter onClick={() => adjust(-30, 'breakAfterInSeconds')}><img src={imgMinus} alt=\"\"></img><div >30</div></SCounter>\r\n            <input onChange={adjustBreakTime} type='number' value={breakAfterInSeconds}></input>\r\n            <SCounter onClick={() => adjust(30, 'breakAfterInSeconds')}><img src={imgPlus} alt=\"\"></img><div >30</div></SCounter>\r\n            <SCounterSmall onClick={() => adjust(5, 'breakAfterInSeconds')}><img src={imgPlus} alt=\"\"></img><div >5</div></SCounterSmall>\r\n            <p style={{ marginTop: '-20px', fontSize: '0.85rem' }}>seconds</p>\r\n          </div>\r\n        </div>\r\n\r\n        <SNote>\r\n          <p>Notes (What to do during break?):</p>\r\n          <textarea onChange={adjustBreakNotes} value={breakNotes}></textarea>\r\n        </SNote>\r\n      </SSection>\r\n      {/* <div style={{ float: 'right', opacity: '0.6', marginTop: '-10px' }}> */}\r\n      <div className='adjustPlanDuplicateDeleteSetOrTrainingButtonsWrapper'>\r\n        <button className='adjustPlanDuplicateDeleteSetOrTrainingButton' onClick={duplicateSet}>Duplicate <br /> this set</button>\r\n        <button className='adjustPlanDuplicateDeleteSetOrTrainingButton' onClick={deleteSet}>Delete <br /> this set</button>\r\n      </div>\r\n\r\n\r\n    </SSet>\r\n  );\r\n};\r\n\r\nexport default Set;","const createPersonalSETStarter = (reps,repsAsPercentage, breakAfterInSeconds) => {\r\n  let set = {\r\n    reps,\r\n    repsAsPercentage,\r\n    duration:undefined,\r\n    repsNotes: undefined,\r\n    breakAfterInSeconds,\r\n    breakNotes: undefined\r\n  }\r\n  return set;\r\n}\r\nconst createPersonalTRAININGStarter = (name, repsAsPercentage = false, currentMax) => {\r\n  let training;\r\n  if (repsAsPercentage) {\r\n    training = {\r\n      name,\r\n      sets: [createPersonalSETStarter(Math.round(75/100 * currentMax),75 ,60,)]\r\n    };\r\n  }\r\n  else {\r\n    training = {\r\n      name,\r\n      sets: [createPersonalSETStarter(20, undefined,60)]\r\n    };\r\n  }\r\n  return training;\r\n}\r\n\r\nconst createPersonalPLANStarter = (name) => { //just to make mongoose id\r\n  let schedule =[];\r\n  for (let i = 0; i < 14; i++) schedule.push({trainingNumber: i<11 ? 1:0})\r\n  let plan = {  //DUPLICATE CODE IN MONGOOSE SCHEMA!!!!!\r\n    name,\r\n    trainings: [createPersonalTRAININGStarter()],\r\n    schedule,\r\n    //not implemented yet:\r\n    // description: undefined,\r\n    descriptionRich: undefined,\r\n    summary: undefined,\r\n    personal: 'yes-only',\r\n    // planType: - will be assigned only to specific plans with date to this object's ID\r\n  }\r\n  return plan;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport {  createPersonalPLANStarter, createPersonalTRAININGStarter, createPersonalSETStarter};","import React from 'react';\r\nimport Set, { SSet } from './Set.js';\r\nimport { createPersonalSETStarter } from './cratingObjectsfunctions';\r\nimport PlanContext from './ContextDefaults';\r\n\r\n\r\nimport styled from 'styled-components';\r\nexport const STraining = styled.div`\r\nbackground-color: rgb(231, 204, 204);\r\n/* background-color: red; */\r\npadding:3%;\r\nmargin-bottom: 10px;\r\ninput{padding-left:5px;margin-left:5px;}\r\n\r\n`;\r\n\r\n\r\nconst Training = ({ training, position }) => {\r\n\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n  // console.log(plan.trainings);\r\n\r\n\r\n  let { name, sets } = training;\r\n  position++;//so first is 1\r\n\r\n  // const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  const duplicateTraining = () => {\r\n    let currentTraining = plan.trainings[position - 1];\r\n    // const newTraining = { ...currentTraining }; //can be done ad set doesn't objects or arrays\r\n    const newTraining = JSON.parse(JSON.stringify(currentTraining))\r\n    plan.trainings.push(newTraining);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const deleteTraining = () => {\r\n    plan.trainings.splice(position - 1, 1);\r\n\r\n    //replace deleted trainings from the schedule\r\n    for (let i = 0; i < plan.schedule.length; i++){\r\n      if (plan.schedule[i].trainingNumber > plan.trainings.length) plan.schedule[i].trainingNumber = plan.trainings.length;\r\n    }\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const createNewSet = () => {\r\n    let newSet;\r\n    if (plan.repsAsPercentages) { newSet = createPersonalSETStarter(Math.round(75 / 100 * plan.maxRepsNeeded.reps), 75, 60); }\r\n    else { newSet = createPersonalSETStarter(20, undefined, 60); }\r\n    plan.trainings[position - 1].sets.push(newSet);\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  const updateTrainingName = (e) => {\r\n    console.log(e.target.value);\r\n    plan.trainings[position - 1].name = e.target.value;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n  return (\r\n    <STraining>\r\n      <h3 style={{ textAlign: 'center' }}>Training {position}</h3>\r\n      <h5 >Name:\r\n        <input onChange={updateTrainingName} type='text' placeholder='optional field' value={name}></input>\r\n      </h5>\r\n\r\n      {sets.map((set, index) => <Set key={index} position={index} set={set} trainingPosition={position} />)}\r\n      <SSet>\r\n        <button onClick={createNewSet}>Create new Set</button>\r\n      </SSet>\r\n      {/* <div style={{ display: 'flex', justifyContent: 'flex-end', opacity: '0.6' }}> */}\r\n      <div className='adjustPlanDuplicateDeleteSetOrTrainingButtonsWrapper'>\r\n        <button className='adjustPlanDuplicateDeleteSetOrTrainingButton' onClick={duplicateTraining}>Duplicate <br /> this training</button>\r\n        <button className='adjustPlanDuplicateDeleteSetOrTrainingButton' onClick={deleteTraining}>Delete <br /> this training</button>\r\n      </div>\r\n    </STraining>\r\n  );\r\n};\r\n\r\nexport default Training;","import React from 'react';\r\nimport Training, { STraining } from './Training';\r\nimport styled from 'styled-components';\r\nimport PlanContext from './ContextDefaults';\r\n\r\nconst STrainings = styled.div`\r\nbackground-color: rgb(222, 122, 122);\r\npadding:10px 3%;\r\n`;\r\n\r\nconst Trainings = ({ trainings }) => {\r\n  // console.log(\"trainings?:\", trainings);\r\n\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  const createNewTraining = () => {\r\n    console.log(\"create training clicked\");\r\n    // console.log(plan);\r\n    plan.newTraining(plan.repsAsPercentages,plan.repsAsPercentages? plan.maxRepsNeeded.reps :undefined);\r\n    // updatePlan(plan);\r\n    updatePlan({ ...plan });\r\n    // updatePlan({});\r\n\r\n\r\n    // console.log(planContext);\r\n    // planContext.updatePlan({ahoj:'aa'});\r\n  }\r\n\r\n  return (\r\n    <STrainings>\r\n      <h5>Trainings:</h5>\r\n      {trainings.map((tr, index) => (<Training training={tr} key={index} position={index} />))}\r\n      {/* {trainings.map(tr => { return <p>training</p> })} */}\r\n      <STraining>\r\n        <button onClick={createNewTraining}>Create new Training</button>\r\n      </STraining>\r\n    </STrainings>\r\n\r\n  );\r\n};\r\n\r\nexport default Trainings;","import React from 'react';\r\n// import { TestContext } from '../ShowPersonalPlanToUserToAdjust'\r\nimport PlanContext from '../ContextDefaults';\r\n\r\nimport styled from 'styled-components';\r\nimport CounterAllIn from '../../basicComponents/CounterAllIn';\r\nexport const SSchedule = styled.div`\r\nbackground-color: lightgreen;\r\npadding:3%;\r\nmargin-top:35px;\r\n`\r\n\r\n\r\nconst Schedule = ({ children }) => {\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  ///////update schedule if needed (if old version without objects or if not 14 days)\r\n  if (plan) {\r\n    // console.log(\"plan.schedule before update:\", plan.schedule, plan.schedule.length);\r\n\r\n    //if schedule is not in object type, update that\r\n    if (plan.schedule.length > 0 && typeof plan.schedule[0] != 'object') {\r\n      for (let i = 0; i < plan.schedule.length; i++) {\r\n        plan.schedule[i] = { trainingNumber: plan.schedule[i] };\r\n      }\r\n    }\r\n\r\n    //if plan is shorter fill it\r\n    if (plan.schedule.length < 14) {\r\n      let extra = 14 - plan.schedule.length;\r\n      let posFromSchedule = 0;\r\n      for (let i = 1; i <= extra; i++) {\r\n        plan.schedule.push(plan.schedule.length > 10 ? { trainingNumber: 0 } : { trainingNumber: plan.schedule[posFromSchedule].trainingNumber });\r\n        posFromSchedule++;\r\n      }\r\n      console.log(\"plan.schedule after update:\", plan.schedule, plan.schedule.length);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const runSubmit = async (e, indexFrom0) => {\r\n    console.log(e.target.value);\r\n    plan.schedule[indexFrom0].trainingNumber = Number(e.target.value);\r\n    updatePlan({ ...plan });\r\n    console.log(plan);\r\n  }\r\n\r\n\r\n  return (\r\n    <SSchedule>\r\n      <h1>Trainings SCHEDULE</h1>\r\n      {/* OLD STYLE SCHEDULE: */}\r\n      {/* <div>\r\n        <h5>How many days will be one Cycle?:</h5>\r\n        <input onChange={getNumberOfDays} id='numberOfDays' type='number'></input>\r\n      </div>\r\n      <br></br>\r\n      {plan.schedule &&\r\n        <div>\r\n          <h5>Add trainings into the schedule (0 is default):</h5>\r\n          {plan.schedule.map((day, index) => {\r\n            return (\r\n              <div key={index}>\r\n                <span>Day {index + 1}:</span>\r\n                <input onChange={(e) => runSubmit(e, index)} value={plan.schedule[index]}></input>\r\n              </div>)\r\n          })}\r\n        </div>} */}\r\n\r\n      <div>\r\n        {/* <h3>Whole cycle view:</h3> */}\r\n        {/* {daysOfSchedule.map((day, index) => */}\r\n        <h5>Add trainings into the schedule (1 represents 'training 1', 2 'training 2',... 0 represents day off.)</h5>\r\n        {plan.schedule.map((scheduleDay, index) =>\r\n          <div key={index}\r\n            style={{\r\n              backgroundColor: `${index > 10 ? (index === 13 ? 'red' : (index === 12 ? 'orange' : 'yellow')) : (scheduleDay.trainingNumber === 0 ? 'gray' : 'green')}`,\r\n              margin: '3px', padding: '3px',\r\n\r\n            }}>\r\n\r\n            {index > 10 && <p style={{ textAlign: 'center', margin: '0', padding: '0', fontSize: '10px' }}>{index === 13 ? \"Day of final assessment. Don't train before the assessment!!!\" : 'Recovery day recommended.'}</p>}\r\n            <div style={{ display: 'flex', justifyContent: 'space-around', alignItems: 'center' }}>\r\n              {/* <span>Day {index<9 ? ('0'+(index+1)) : index+1}:</span> */}\r\n              {/* <div style={{display:'flex',flexFlow:'column'}}> */}\r\n              <span>Day {index < 9 && <span style={{ color: '#ffffff00' }}>0</span>}{index + 1}:</span>\r\n              {/* </div> */}\r\n              {/* <input\r\n              key={index}\r\n              id={'idScheduleInput' + index}\r\n              value={day}\r\n              onChange={({ target: { value } }) => { plan.schedule[index] = Number(value); updatePlan({ ...plan }) }}\r\n              >\r\n              </input> */}\r\n              <CounterAllIn settings={[\r\n                0,\r\n                index===13 ? 0:1,\r\n                (value) => { plan.schedule[index].trainingNumber = Number(value); updatePlan({ ...plan }) },\r\n                scheduleDay.trainingNumber,\r\n                '',\r\n                '',\r\n                0,\r\n                index===13 ? 0:undefined,\r\n                plan.trainings.length\r\n              ]} />\r\n            </div>\r\n\r\n\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* <input onChange={({ target: { value } }) => { daysOfSchedule[index] = value; setDaysOfSchedule(daysOfSchedule) }}>hi</input> */}\r\n\r\n    </SSchedule>\r\n  );\r\n};\r\n\r\n\r\nexport default Schedule;","import React from 'react';\r\nimport PlanContext from '../ContextDefaults';\r\n\r\nimport { getSimpleDateIfTrueAlsoTime } from '../../functions/basics';\r\n\r\nimport CounterAllIn from '../../basicComponents/CounterAllIn';\r\n\r\nconst MaxRepsUsedForRepsPercentages = () => {\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  // const [currentValueOfMaxReps, setCurrentValueOfMaxReps] = React.useState(plan.maxRepsNeeded.reps);\r\n\r\n  const fReceivingUpdatedMaxReps = (updatedMaxValue) => {\r\n    // setCurrentValueOfMaxReps(updatedMaxValue);\r\n    if (plan.maxRepsNeeded.type !== 'userGenerated') {\r\n      plan.maxRepsNeeded.reps2 = plan.maxRepsNeeded.reps;\r\n      plan.maxRepsNeeded.type2 = plan.maxRepsNeeded.type;\r\n    }\r\n    plan.maxRepsNeeded.reps = updatedMaxValue;\r\n    plan.maxRepsNeeded.type = 'userGenerated';\r\n\r\n    //////reps are now calculated dynamically from % and max. any time % or max reps or specific reps are updated , rep are recalculated from current reps%\r\n    // plan.trainings.forEach(training => {\r\n    //   let sets = training.sets;\r\n    //   sets.forEach(set => {\r\n    //     if (set.reps) {\r\n    //       set.reps = Math.round(set.repsAsPercentage / 100 * plan.maxRepsNeeded.reps);\r\n    //     }\r\n    //   })\r\n    // })\r\n    // console.log(\"plan before update:\", plan);\r\n\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h3>Max reps used to calculate %:</h3>\r\n      {/* <h3 style={{display:'inline',backgroundColor:'lightGray'}}>{plan.maxRepsNeeded.reps}</h3> */}\r\n      {/* <h3 style={{ width: '70px', textAlign: 'center', margin: 'auto', backgroundColor: 'lightGray' }}>{plan.maxRepsNeeded.reps}</h3> */}\r\n      {/* <CounterAllIn settings={[1, 5, fReceivingUpdatedMaxReps, currentValueOfMaxReps]} /> */}\r\n      <CounterAllIn settings={[1, 5, fReceivingUpdatedMaxReps, plan.maxRepsNeeded.reps]} />\r\n      <div style={{ textAlign: 'center' }}>\r\n        <span>(</span>\r\n        {plan.maxRepsNeeded.type === 'userGenerated' ? <span>This is number generated by you.\r\n            {plan.maxRepsNeeded.type2 === 'initialAssessment' ? <span>)<br /> (In your initial assessment from {getSimpleDateIfTrueAlsoTime(plan.maxRepsNeeded.date, false, true)} you did {plan.maxRepsNeeded.reps2} reps.</span>\r\n            : plan.maxRepsNeeded.type2 === 'latestMaxReps' ? <span>)<br /> (Your most current Max Reps from {getSimpleDateIfTrueAlsoTime(plan.maxRepsNeeded.date, false, true)} is {plan.maxRepsNeeded.reps2} reps.</span> : null\r\n          }</span>\r\n          : plan.maxRepsNeeded.type === 'initialAssessment' ? <span>This is your initial assessment data of your current Plan - from {getSimpleDateIfTrueAlsoTime(plan.maxRepsNeeded.date, false, true)}.</span>\r\n            : plan.maxRepsNeeded.type === 'latestMaxReps' ? <span>This is your most current Max Reps data - from {getSimpleDateIfTrueAlsoTime(plan.maxRepsNeeded.date, false, true)}</span>\r\n              : plan.maxRepsNeeded.type === 'default' ? <span>This is just a random number as you didn't do any assessment yet.</span>\r\n                : null}\r\n        <span>)</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaxRepsUsedForRepsPercentages;","import React from 'react';\r\nimport PlanContext from './ContextDefaults';\r\nimport MaxRepsUsedForRepsPercentages from './repsAsPercentages/MaxRepsUsedForRepsPercentages';\r\n\r\n//get current max\r\nconst getCurrentMaxReps = (user) => { //.reps; .type: 'initialAssessment'; 'latestMaxReps'; 'default'\r\n  let maxRepsNeeded = {};\r\n  let initAssRepsId = user.pushupPlans.current ? user.pushupPlans.current.assessments.initialAssessmentID : undefined;\r\n  if (initAssRepsId !== undefined && initAssRepsId !== null) {\r\n    maxRepsNeeded = user.assessments.find(ass => ass._id === initAssRepsId);\r\n    maxRepsNeeded.type = 'initialAssessment';\r\n    // console.log(\"initAssReps: \", maxRepsNeeded);\r\n  } else {\r\n    //init ass doesn't exist, get latest max reps\r\n    if (user.assessments && user.assessments.length > 0) {\r\n      maxRepsNeeded = user.assessments[0];\r\n      maxRepsNeeded.type = 'latestMaxReps';\r\n      // console.log(\"MaxReps found: \", maxRepsNeeded);\r\n    } else {\r\n      maxRepsNeeded.reps = 20;\r\n      maxRepsNeeded.type = 'default';\r\n    }\r\n  }\r\n  // console.log(\"maxRepsNeeded:\", maxRepsNeeded);\r\n  return maxRepsNeeded;\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst PercentagesRegimeActivator = ({ user }) => {\r\n  const { plan, updatePlan } = React.useContext(PlanContext);\r\n\r\n  //onClick function...\r\n  const activateDeactivatePercentageRegime = (autoActivated = false) => {\r\n    // console.log(\"XX\", autoActivated);\r\n    if (!plan.repsAsPercentages) {\r\n      // console.log(\"plan:\", plan);\r\n      plan.repsAsPercentages = true;\r\n      plan.maxRepsNeeded = getCurrentMaxReps(user);//.reps; .type: 'initialAssessment'; 'latestMaxReps'; 'default'\r\n      // console.log(\"maxRepsNeeded:\", plan.maxRepsNeeded.reps, plan.maxRepsNeeded.type);\r\n      //create all the values on the plan \r\n      plan.trainings.forEach(training => {\r\n        let sets = training.sets;\r\n        sets.forEach(set => {\r\n          if (set.reps) { //some sets may use duration\r\n            let repsAsPercentage = Math.round(set.reps / plan.maxRepsNeeded.reps * 100);\r\n            set.repsAsPercentage = repsAsPercentage;\r\n            set.reps = null;\r\n            // set.reps = 0;\r\n            // set.reps =Math.round(repsAsPercentage/100 * maxRepsNeeded.reps); //causes warning as type number is changed to 'undefined', but tha shall be ok as i will change it back later\r\n            //don't delete .reps yet\r\n          }\r\n        })\r\n      })\r\n      // console.log(\"plan before update:\", plan);\r\n      updatePlan({ ...plan });\r\n    } else if (autoActivated !== true) {\r\n      // console.log(\"REQUEST TO DEACTIVATE %%%%%%%%%%%%%%%%%%...\");\r\n      //deactivate %...\r\n\r\n      //create all the values on the plan \r\n      plan.trainings.forEach(training => {\r\n        let sets = training.sets;\r\n        sets.forEach(set => {\r\n          set.reps = Math.round(set.repsAsPercentage / 100 * plan.maxRepsNeeded.reps); //causes warning as type number is changed to 'undefined', but tha shall be ok as i will change it back later\r\n          set.repsAsPercentage = undefined;\r\n        })\r\n      })\r\n      plan.repsAsPercentages = undefined;\r\n      plan.maxRepsNeeded = undefined;\r\n      // console.log(\"plan before update:\", plan);\r\n      updatePlan({ ...plan });\r\n    }\r\n\r\n    //upon duplicating/deleting/creating new set,training - it needs to do that to the set also\r\n\r\n    // make sure that will update the UI so that the UI also refreshes(but not DB as user didn't save changes.)\r\n    //create logic to display all the % values if those exists\r\n    // then display current max reps and all the values\r\n  }\r\n\r\n  //to simulate button click\r\n  // React.useEffect(() => { if (user) activateDeactivatePercentageRegime(true); }, [user])\r\n\r\n  //set current max reps if plan is set to % regime\r\n  React.useEffect(() => {\r\n    console.log(\"MAX REPS SHALL BE PART OF PLAN NOW\");\r\n    if (user && plan.repsAsPercentages && !plan.maxRepsNeeded) {\r\n      plan.maxRepsNeeded = getCurrentMaxReps(user);\r\n      updatePlan({ ...plan });\r\n    }\r\n  }, [user, plan])\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={activateDeactivatePercentageRegime} style={{ display: 'block', margin: '15px 10%', padding: '15px', width: '80%' }}><h5>{plan.repsAsPercentages && 'DE-'}Activate % regime</h5></button>\r\n      {/* <button>What is % regime? -></button> */}\r\n      <p style={{ textAlign: 'center' }}>If % regime is activated, reps are calculated dynamically from user's initial assessment data (or current max, if initial assessment currently doesn't exist.)</p>\r\n      { (plan.repsAsPercentages && plan.maxRepsNeeded) ? <MaxRepsUsedForRepsPercentages /> : null }\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default PercentagesRegimeActivator;","import React from 'react';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nconst QuillReactEditor = ({ initialValue, onChange, onSubmit, submitButtonText, placeholder, hideToolbar }) => {\r\n  console.log(\"hideToolbar: \", hideToolbar);\r\n  const [value, setValue] = React.useState(initialValue ? initialValue : null);//placeholder will be useed instead\r\n  // const [bigObject, setBigObject] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    // if (!onChange && !onSubmit) document.querySelector('.ql-toolbar').style.display = 'none';\r\n  }, []);\r\n\r\n  // const modules = {\r\n  //   toolbar: [\r\n  //     [{ 'header': [1, 2, false] }],\r\n  //     ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n  //     [{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'indent': '-1' }, { 'indent': '+1' }],\r\n  //     // ['link', 'image'],\r\n  //     ['link'],\r\n  //     ['clean']\r\n  //   ],\r\n  // };\r\n\r\n  const modules = {\r\n    toolbar: hideToolbar ? false\r\n      : [\r\n        [{ 'header': [1, 2, false] }],\r\n        ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n        [{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'indent': '-1' }, { 'indent': '+1' }],\r\n        // ['link', 'image'],\r\n        ['link'],\r\n        ['clean']\r\n      ],\r\n  };\r\n\r\n  const formats = [\r\n    'header',\r\n    'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n    'list', 'bullet', 'indent',\r\n    'link',\r\n    // 'image'\r\n  ];\r\n\r\n  const handleChange = (a, b, c, d) => {\r\n    // console.log(\"ABCD: \\n\", a + '\\n' + b + '\\n' + c + '\\n' + d);\r\n    // console.log(d.getContents());\r\n    setValue(a);\r\n    // setBigObject(d.getContents()); //doesn't load the values in properly in adjust plan - spae and bunch of other stuff doesn't work\r\n    // setBigObject(a);\r\n    if (onChange) onChange(a);\r\n  }\r\n\r\n  const submitChanges = () => {\r\n    // let dataToSave = JSON.stringify(bigObject);\r\n    // localStorage.setItem('bigObject', dataToSave);\r\n    // console.log(\"submitted\", );\r\n    // if (functionUsingSubmittedValue) functionUsingSubmittedValue(bigObject);\r\n    // onSubmit(bigObject);\r\n    if (onSubmit) onSubmit(value);\r\n    // console.log(functionUsingSubmittedValue);\r\n  }\r\n\r\n  // const getData = async () => {\r\n  //   let dataFromStorage = localStorage.getItem('bigObject');\r\n  //   let data = JSON.parse(localStorage.getItem('bigObject'));\r\n  //   console.log(dataFromStorage);\r\n  //   console.log(data);\r\n  //   setValue(data);\r\n  // }\r\n\r\n  return (\r\n    <div>\r\n      <ReactQuill\r\n        value={value}\r\n        onChange={handleChange}\r\n        readOnly={(onChange || onSubmit) ? false : true}\r\n        theme=\"snow\"\r\n        // theme=\"bubble\"\r\n        modules={modules}\r\n        placeholder={placeholder ? placeholder : 'write here...'}\r\n        formats={formats}//all enabled by default\r\n        //style=\r\n        toolbar={false}\r\n      />\r\n      {onSubmit &&\r\n        <button\r\n          className='ql-MiroSubmitButton'\r\n          style={{ textAlign: 'center', margin: 'auto', display: 'block' }}\r\n          onClick={submitChanges}>\r\n          {submitButtonText ? submitButtonText : 'submit'}\r\n        </button>}\r\n    </div>\r\n  );\r\n}\r\nexport default QuillReactEditor;","import React from 'react';\r\nimport Trainings from './Trainings';\r\nimport styled from 'styled-components';\r\nimport { createPersonalTRAININGStarter } from './cratingObjectsfunctions';\r\nimport PlanContext from './ContextDefaults';\r\nimport Schedule from './schedule/Schedule';\r\nimport { SLink } from '../Home';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData'\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport PercentagesRegimeActivator from './PercentagesRegimeActivator';\r\n// import TextEditorReactQuill from './richTextEditing/TextEditorReactQuill';\r\nimport TextEditorReactQuill from '../basicComponents/richTextEditing/TextEditorReactQuill';\r\n\r\nconst SPlan = styled.div`\r\nbackground-color: brown;\r\npadding:3%;\r\n`;\r\n\r\n// const ShowPersonalPlanToUserToAdjust = ({ planToAdjust, plantToAdjust:{name, trainings} }) => {\r\nconst ShowPersonalPlanToUserToAdjust = ({ planToAdjust, history, adjustingNotCreating }) => {\r\n  // console.log(\"adjustingNotCreating: \", adjustingNotCreating);\r\n  // let { name, trainings, schedule } = planToAdjust;\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n\r\n  const planWMethods = {\r\n    ...planToAdjust,\r\n    newTraining(repsAsPercentages, maxReps) {\r\n      this.trainings.push(createPersonalTRAININGStarter(undefined, repsAsPercentages, maxReps));\r\n      return this;\r\n    }\r\n  }\r\n  const [plan, updatePlan] = React.useState(planWMethods);\r\n  const [thisNameExistsAlready, setThisNameExistsAlready] = React.useState(false);\r\n  const planPackage = { plan, updatePlan };\r\n\r\n\r\n  //tools to deal with checking for unique name\r\n  const [name, setName] = React.useState(plan.name);\r\n  const [richDescription, setRichDescription] = React.useState(plan.descriptionRich? plan.descriptionRich:plan.description);\r\n  const [summary, setSummary] = React.useState(plan.summary? plan.summary:null);\r\n  // const [richDescription, setRichDescription] = React.useState(plan.descriptionRich);\r\n  const [publicPlansNames, setPublicPlansNames] = React.useState(null);\r\n  let publicPlans = pushupContext.publicPlans;\r\n  // console.log(\"publicPlans: \", publicPlans);\r\n  // console.log(\"pushupContext: \", pushupContext);\r\n\r\n  React.useEffect(() => {\r\n    if (publicPlans) {\r\n      let publicPlansNamesSupportVar = publicPlans.map(publicPlan => publicPlan.name);\r\n      setPublicPlansNames(publicPlansNamesSupportVar);\r\n      // console.log(\"publicPlansNames: \", publicPlansNames);\r\n    }\r\n  }, [publicPlans]);\r\n\r\n\r\n  const [submitted, setSubmitted] = React.useState(false);\r\n  React.useEffect(() => {\r\n    if (adjustingNotCreating === undefined) { //undefined==plan is created, doesn't have position\r\n      document.querySelector('#planNameInputHere').focus();\r\n    }\r\n  }, []);\r\n\r\n\r\n  // console.log(\"PLAN to update:\", plan);\r\n\r\n  React.useEffect(() => {\r\n    //search through all public names. if this one exists within\r\n    if (publicPlansNames) {//=once names were loaded from context...\r\n      let thisNameExistsAlreadySupportVar = publicPlansNames.find(nameInDb => name === nameInDb);\r\n      setThisNameExistsAlready(thisNameExistsAlreadySupportVar);\r\n    }\r\n  }, [name, publicPlansNames]);\r\n\r\n  const updatePlanName = ({ target: { value } }) => {\r\n    // to deal with names in DB\r\n    setName(value);\r\n\r\n    plan.name = value;\r\n    updatePlan({ ...plan });\r\n    // pushupContext.user.p\r\n    // pushupContext.updateUser(pushupContext.user);\r\n  }\r\n  \r\n  \r\n  const updateSummaryValue = (updatedSummary) => {\r\n    // console.log(\"updating plan\")\r\n    plan.summary = updatedSummary;\r\n    updatePlan({ ...plan });\r\n  }\r\n   \r\n  // const updatePlanDescription = ({ target: { value } }) => {\r\n  //   // console.log(value);\r\n  //   plan.description = value;\r\n  //   updatePlan({ ...plan });\r\n  // }\r\n  const saveRichDescriptionToDB = async (updatedDescription) => {\r\n    if (adjustingNotCreating) {\r\n      //assuming this is adjustable personal plan on db side...\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updatePlanDescriptionRich', { positionFrom0: adjustingNotCreating, updatedDescription });\r\n      pushupContext.updateUser({ ...updatedUser });\r\n    } else {\r\n      plan.descriptionRich = updatedDescription;\r\n      updatePlan({ ...plan });\r\n    }\r\n  }\r\n  const updateRichDescriptionValue = (updatedDescription) => {\r\n    console.log(\"updating plan\")\r\n    plan.descriptionRich = updatedDescription;\r\n    updatePlan({ ...plan });\r\n  }\r\n\r\n\r\n\r\n  const handleFormSubmit = async () => {\r\n    try {\r\n      // plan.s chedule = plan.s chedule.map(day => day > 0 ? day : 0);\r\n      // console.log(\"plan with cleaned schedule\", plan);\r\n\r\n      //change notes  first letters to upper cases:\r\n\r\n\r\n      let updatedUser;\r\n      if (adjustingNotCreating >= 0) {\r\n        updatedUser = await postJsonDataUrlAfterAPIpushups('/saveChangesInPersonalPlanContent', { plan, positionFrom0: adjustingNotCreating });\r\n        // console.log(\"updated planXX:\", updatedUser);\r\n\r\n      } else {\r\n        updatedUser = await postJsonDataUrlAfterAPIpushups('/addPersonalPlan', {newPlan:plan});\r\n      }\r\n\r\n      pushupContext.updateUser(updatedUser);\r\n      setSubmitted(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      history.push('/pushups/trainingPlans');\r\n      setSubmitted(false);\r\n\r\n\r\n    } catch (err) { console.log(err) }\r\n  }\r\n\r\n  const [state1, setState1] = React.useState({ b: 'default useContext', counter: 0 })\r\n  // console.log(\"state1=context now:\", state1);\r\n\r\n  React.useEffect(() => {\r\n    console.log(\"^plan updated to: \", plan);\r\n    // console.log(\"^set-data now: \",plan.trainings[0].sets[0].reps,plan.trainings[0].sets[0].repsAsPercentage+'%', plan.trainings[0].sets)\r\n  }, [plan])\r\n\r\n\r\n  return (\r\n    <SPlan>\r\n      <PlanContext.Provider value={planPackage}>\r\n        {submitted ? <h1 style={{ backgroundColor: 'green', textAlign: 'center', color: 'white', padding: '20px' }}>Submitted. Great Work!</h1>\r\n          : <SLink\r\n            as='button'\r\n            style={{ display: 'block', width: '100%', margin: '10px auto', textAlign: 'center' }}\r\n            type=\"submit\"\r\n            onClick={handleFormSubmit}>\r\n            Save {adjustingNotCreating >= 0 ? 'Changes' : 'Plan'}\r\n          </SLink>}\r\n        {/* <form id='personalPlanForm'> */}\r\n        <h3>Plan name: <input id='planNameInputHere' type='text' onChange={updatePlanName} placeholder='mandatory field' value={plan.name} style={{ backgroundColor: `${thisNameExistsAlready ? \"red\" : \"white\"}` }}></input></h3>\r\n        <p style={{ fontSize: `${thisNameExistsAlready ? \"1.3rem\" : \"1rem\"}` }}>This name CAN{thisNameExistsAlready && \"'T\"} be used for public plan{thisNameExistsAlready && \", as other public plan has this name already\"}.</p>\r\n        <h4 style={{display:'inline'}}>Summary:</h4>\r\n        <span>(max 150 characters)   </span>\r\n        <TextEditorReactQuill placeholder={\"Write here... (Plan without summary can't be published.)\"} initialValue={summary} onChange={updateSummaryValue} />\r\n        <h4>Detailed Description: </h4>\r\n        {/* <textarea style={{ width: '100%', height: '100px' }} type='text' onChange={updatePlanDescription} value={plan.description} placeholder='Mandatory field for public plans. (Write description if you intent to make this plan public.)'></textarea> */}\r\n        {adjustingNotCreating ?<TextEditorReactQuill placeholder={\"Write here... (Plan without description can't be published.)\"} initialValue={richDescription} onChange={updateRichDescriptionValue} onSubmit={saveRichDescriptionToDB} submitButtonText='Save description'/>\r\n        :<TextEditorReactQuill placeholder={\"Write here... (Plan without description can't be published.)\"} initialValue={richDescription} onChange={updateRichDescriptionValue} />}\r\n        \r\n        {/* <Trainings trainings={trainings} /> */}\r\n        <PercentagesRegimeActivator user={pushupContext.user} />\r\n\r\n        <Trainings trainings={plan.trainings} />\r\n        <Schedule />\r\n        {/* <button type=\"submit\" onClick={handleFormSubmit}>Save Plan</button> */}\r\n        {}\r\n\r\n        {submitted ? <h1 style={{ backgroundColor: 'green', textAlign: 'center', color: 'white', padding: '20px' }}>Submitted. Great Work!</h1>\r\n          : <SLink\r\n            as='button'\r\n            style={{ display: 'block', width: '100%', margin: '10px auto', textAlign: 'center' }}\r\n            type=\"submit\"\r\n            onClick={handleFormSubmit}>\r\n            Save {adjustingNotCreating >= 0 ? 'Changes' : 'Plan'}\r\n          </SLink>}\r\n        {/* <button onClick={handleTest}>Plan test</button> */}\r\n        {/* </form> */}\r\n      </PlanContext.Provider>\r\n    </SPlan>\r\n  );\r\n};\r\n\r\nexport default withRouter(ShowPersonalPlanToUserToAdjust);","import React from 'react';\r\nimport { SLink } from '../../../App';\r\nimport ShowPersonalPlanToUserToAdjust from './ShowPersonalPlanToUserToAdjust';\r\n\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\n\r\n\r\n////delete\r\n// import PushUpsContext from '../state/PushUpsContextState';\r\n////up to here\r\n\r\n\r\nconst AdjustPersonalPushupPlan = (props) => {\r\n  //newest\r\n  let { user, updateUser } = React.useContext(PushUpsContext);\r\n  let positionFrom0 = props.match.params.positionFrom0;\r\n  let id = props.match.params.id;\r\n  console.log(\"XXXX \", props.match.params);\r\n  // let plan=user.pushupPlans.personal[positionFrom0];\r\n  let plan;\r\n  if (user) {\r\n\r\n    if (positionFrom0 === 'N') {\r\n      plan = user.pushupPlans.personal.find(plan => plan._id === id)\r\n    }\r\n    else { plan = user.pushupPlans.personal[positionFrom0] }\r\n\r\n  }\r\n  console.log(\"PLAN \", plan);\r\n\r\n  //old -  to renew\r\n  // const [plan, setPlan] = React.useState(null);\r\n\r\n  //renew following line\r\n  let stateP = props.location.state;\r\n\r\n  ////////////delete from here\r\n  // const [stateP, setStateP] = React.useState(props.location.state);\r\n  // let { user, updateUser } = React.useContext(PushUpsContext);\r\n  // React.useEffect(() => {\r\n  //   if (!user) return;\r\n  //   setStateP({\r\n  //     personalPlanPositionFrom0: 1,\r\n  //     plan: user.pushupPlans.personal[1]\r\n  //   })\r\n  // }, [user])\r\n  ////////////delete up to here\r\n\r\n\r\n  console.log(\"props location state: \", stateP);\r\n  // console.log(\"props location state: \",props.location.state);\r\n\r\n  // React.useEffect(() => {\r\n  //   if (props.location.state) {\r\n  //     setPlan(props.location.state);\r\n  //     console.log(\"adjust if true\");\r\n  //     console.log(\"plan: \", plan);\r\n  //   }\r\n  //  }, []);\r\n  console.log(\"plan in state (in adjust): \", plan);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Adjust plan</h1>\r\n      {/* <p>position: {stateP.personalPlanPositionFrom0}</p> */}\r\n      {/* {stateP != undefined ? <ShowPersonalPlanToUserToAdjust planToAdjust={stateP.plan} adjustingNotCreating={stateP.personalPlanPositionFrom0} /> */}\r\n      {plan != undefined ? <ShowPersonalPlanToUserToAdjust planToAdjust={plan} adjustingNotCreating={positionFrom0} />\r\n        : <p>loading (or error if it takes too long :-).</p>}\r\n      {/*  <p>State undefined. No plan selected now. Go back and select plan to adjust.</p>} */}\r\n\r\n      {/* {(typeof plan == \"object\") ? <div>{JSON.stringify(plan)}</div> : <p> {plan} </p>} */}\r\n      {/* {plan!=null ?? <ShowPersonalPlanToUserToAdjust planToAdjust={plan} />} */}\r\n      {/* {plan ?? <p>xxdddd</p>} */}\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdjustPersonalPushupPlan;","import React from 'react';\r\nimport { SLink } from '../../../App';\r\n// import styled from 'styled-components';\r\nimport { createPersonalPLANStarter } from './cratingObjectsfunctions'\r\nimport ShowPersonalPlanToUserToAdjust from './ShowPersonalPlanToUserToAdjust';\r\n\r\n\r\nconst CreatingPersonalPushupPlan = () => {\r\n  const [planX, setPlanX] = React.useState(null);\r\n\r\n  const createPersonalPushupPlan = () => {\r\n    let newPlan = createPersonalPLANStarter(\"My 1\");\r\n    setPlanX(newPlan);\r\n    console.log(\"new plan template created:\", newPlan);\r\n  }\r\n\r\n  // createPersonalPushupPlan();\r\n  React.useEffect(() => {\r\n    createPersonalPushupPlan();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {planX ? <ShowPersonalPlanToUserToAdjust planToAdjust={planX} /> : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreatingPersonalPushupPlan;","import React from 'react';\r\nimport { TrainingContext, skipThisDay } from './RunTraining';\r\n\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\n\r\n\r\n\r\nconst CurrentTrainingInfo = ({history}) => {\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n  let pushupContext = React.useContext(pushupsContext);\r\n\r\n\r\n  const skipThisDay = async () => {\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/setTheNextTraining', {});\r\n    history.push('/pushups');\r\n    pushupContext.updateUser({ ...updatedUser });\r\n    await new Promise(resolve => setTimeout(resolve, 250));\r\n    history.push('/pushups/startMyTraining');\r\n  }\r\n\r\n  // console.log(\"CURRNET TRAINING INFO running\")\r\n  return (\r\n    <div>\r\n      <h1>Current training info:</h1>\r\n      \r\n      <h4>\r\n        Training Number: {trainingState.main.trainingNumber}\r\n        <p>Training Name: {trainingState.main.training.name ? ('\"' + trainingState.main.training.name + '\"') : '(no name)'}</p>\r\n        \r\n      </h4>\r\n      <p>Part of plan: {trainingState.main.plan.name}</p>\r\n\r\n      {/* trainingState.main.setNumberFrom1 */}\r\n      <ul>{trainingState.main.training.sets.map((set, index) =>\r\n        <li key={index} style={{backgroundColor:index<trainingState.main.setNumberFrom1-1 ? 'gray':(index===trainingState.main.setNumberFrom1-1 ? 'yellow':'lightGray')}}>\r\n          Set {index + 1}: {set.reps ? `${set.reps} reps` : `${set.duration} seconds`}\r\n          <br/>\r\n          Exercise Notes: {set.repsNotes}\r\n          <br/>\r\n          Break after: {set.breakAfterInSeconds}s.\r\n          <br/>\r\n          Break Notes: {set.breakNotes}\r\n\r\n        </li>)}\r\n      </ul>\r\n      \r\n      <button style={{fontSize:'3rem', margin:'1rem'}} onClick={() => { setTrainingState({ ...trainingState, stage: (trainingState.stage + 1) }) }}>{trainingState.main.continueStartedTraining===true? 'Continue':'Start'}</button>\r\n      <br/><br/>\r\n     {pushupContext.user.pushupPlans.current.personal==='yes-only' && <button onClick={skipThisDay} style={{fontSize:'1rem', margin:'1rem'}}>Skip this training.</button>}\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(CurrentTrainingInfo);","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { TrainingContext } from './RunTraining';\r\n\r\nconst SScreen = styled.div`\r\nbackground-color: yellow;\r\n`\r\nconst SButton = styled.button`\r\nwidth:30%;\r\npadding:3%;\r\nmargin:2%;\r\n\r\nheight:100px;\r\nfont-size:2rem;\r\n/* border-radius: 20px 10px 20px 0; */\r\nborder-radius: 10px;\r\n/* border-bottom-right-radius: 20px; */\r\n`\r\nconst SButton2 = styled(SButton)`\r\nwidth:60%;\r\n`\r\n\r\n\r\nconst ShowSetToDo = () => {\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n  let isLastSet = trainingState.main.setNumberFrom1 >= trainingState.main.training.sets.length ? true : false;\r\n\r\n  let set = trainingState.main.set;\r\n  console.log(\"trainingState SET\", trainingState);\r\n  // console.log(\"CURRNET SET running\")\r\n  // console.log(\"set info\", set)\r\n\r\n  // const startBreakLogData = () => {\r\n  //   setTrainingState({ red: !trainingState.red });\r\n  //   setTrainingState({ stage: 2 });\r\n  // }\r\n  return (\r\n    <SScreen>\r\n      <h1>SET To Do</h1>\r\n      {isLastSet && <h2>This is your last set.</h2>}\r\n      <p style={{fontSize:'4rem', textAlign:'center', marginBottom:'-2rem', fontWeight:'bold'}}>{set.reps ? set.reps : set.duration}</p>\r\n      <p style={{fontSize:'2rem', textAlign:'center',marginTop:'0'}}>{set.reps ? 'reps' : 'seconds'}</p>\r\n      {set.repsNotes &&\r\n        <p> Exercise Notes: {set.repsNotes}</p>}\r\n      {/* <button onClick={startBreakLogData}>Start Break (+ Log data)</button> */}\r\n\r\n      {!isLastSet && <h3 style={{ textAlign: 'center' }}>Start break and...</h3>}\r\n      <SButton onClick={() => { setTrainingState({ ...trainingState, stage: 2 }) }}>\r\n        Adjust\r\n      </SButton>\r\n      <SButton2 onClick={() => { setTrainingState({ ...trainingState, stage: 2.5 }) }}>\r\n        Save\r\n      </SButton2>\r\n      <h3 style={{textAlign:'center'}}>...data</h3>\r\n\r\n    </SScreen>\r\n  );\r\n};\r\n\r\nexport default ShowSetToDo;","import React from 'react';\r\n\r\nimport { SCounter, SCounterSmall } from '../personalPushupPlans/Set';\r\nimport imgMinus from '../img/minus.png';\r\nimport imgPlus from '../img/plus.png';\r\n\r\nconst CounterTool = ({ small, big, value, setValue }) => {\r\n\r\n  const updateByClickedValue = (howMuch) => {\r\n    setValue(value + howMuch > 0 ? value + howMuch : 0);\r\n  }\r\n\r\n  const updateByTypedValue = ({ target: { value } }) => {\r\n    setValue((value * 1)>0 ? value*1 : undefined );\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <SCounterSmall onClick={() => updateByClickedValue(-small)}> <img src={imgMinus} alt=\"\"></img> <div >{small}</div>          </SCounterSmall>\r\n      <SCounter onClick={() => updateByClickedValue(-big)}><img src={imgMinus} alt=\"\"></img> <div >{big}</div></SCounter>\r\n      {/* <input type='number' onChange={updateByTypedValue} value={value * 1}></input> */}\r\n      <input type='number' onChange={updateByTypedValue} value={value}></input>\r\n      <SCounter onClick={() => updateByClickedValue(big)}><img src={imgPlus} alt=\"\"></img> <div >{big}</div></SCounter>\r\n      <SCounterSmall onClick={() => updateByClickedValue(small)}><img src={imgPlus} alt=\"\"></img> <div >{small}</div></SCounterSmall>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CounterTool;","import React from 'react';\r\nimport { TrainingContext } from './RunTraining';\r\n\r\nconst BreakTimer = ({ external, duration }) => {\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n\r\n  const [remindingBreakTime, setRemindingBreakTime] = React.useState(trainingState.main.set.breakAfterInSeconds);\r\n\r\n\r\n  React.useEffect(\r\n    () => {\r\n      duration.setBreakDuration(duration.breakDuration + 1);\r\n      if (remindingBreakTime < 1) {\r\n        // console.log(\"time is UP!\");\r\n        if (!external.breakTimerFinished) {\r\n          console.log(\"firing timer FINISHEd\");\r\n          external.setBreakTimerFinished(true);\r\n        };\r\n      };\r\n      const id = setInterval(() => setRemindingBreakTime(remindingBreakTime - 1), 1000);\r\n      return () => {\r\n        clearInterval(id);\r\n      };\r\n    },\r\n    [remindingBreakTime]\r\n  );\r\n\r\n\r\n  return (\r\n    <span style={{fontSize:'4rem'}}>{remindingBreakTime}</span>\r\n  );\r\n};\r\n\r\nexport default BreakTimer;","import React from 'react';\r\n\r\nimport useSound from 'use-sound';\r\nimport soundGetReady from '../../sounds/files/getReady/taffFemale.mp3';\r\nimport soundBeep from '../../sounds/files/facebook/Complete and Success/Complete 2.m4a';\r\nimport soundStart from '../../sounds/files/startBlow/airHorn.mp3';\r\n\r\nconst BreakSounds = ({\r\n  breakLength,\r\n  breakDuration,\r\n  soundsOn\r\n}) => {\r\n  const [soundBeepPlay] = useSound(soundBeep);\r\n  const [soundGetReadyPlay] = useSound(soundGetReady);\r\n  const [soundStartPlay] = useSound(soundStart);\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (!soundsOn) return;//don't play sounds if that is the user's setting\r\n    let remindingBreakTime = breakLength - breakDuration;\r\n    if (remindingBreakTime === 10) soundGetReadyPlay();\r\n    if (remindingBreakTime < 4 && remindingBreakTime > 0) soundBeepPlay();\r\n    if (remindingBreakTime === 0) soundStartPlay();\r\n  }, [breakDuration])\r\n\r\n  return (\r\n    <></>\r\n  );\r\n};\r\n\r\nexport default BreakSounds;","import React from 'react';\r\n\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport { TrainingContext } from './RunTraining';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData'\r\n\r\nimport { SCounter, SCounterSmall } from '../personalPushupPlans/Set';\r\nimport imgMinus from '../img/minus.png';\r\nimport imgPlus from '../img/plus.png';\r\nimport CounterTool from '../basicComponents/CounterToolOld';\r\nimport BreakTimer from './BreakTimer';\r\nimport BreakSounds from './BreakSounds';\r\nimport CounterAllIn from '../basicComponents/CounterAllIn';\r\nimport { returnAssessmentFromAssID } from '../functions/basics';\r\n\r\n\r\nimport useSound from 'use-sound';\r\nimport soundBreakBackground from '../../sounds/files/breakMusic/Derek_Clegg_-_09_-_Youre_The_Dummy.mp3';\r\n\r\nimport { Accordion, Card } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\nconst SCard = styled(Card.Body)`\r\n/* background:red; */\r\n/* padding:30px !important; */\r\nbackground-color: rgba(233, 154, 7, 0.62);\r\nmargin: 0 5px 8px 5px;\r\n`\r\nlet stopMusic = false;\r\n\r\nconst StartBreakLogData = ({ saveDefaultData }) => {\r\n\r\n\r\n  const [breakTimerFinished, setBreakTimerFinished] = React.useState(false);\r\n  let pushupContext = React.useContext(PushUpsContext);\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n  let set = trainingState.main.set;\r\n\r\n\r\n  const [breakDuration, setBreakDuration] = React.useState(-1); //if 0, numbers don't add up elsewhere. don't change!\r\n\r\n  const [setWasSavedToHistory, setSetSavedToHistory] = React.useState(trainingState.main.set.reps ? false : true);\r\n  const [updatedReps, setUpdatedReps] = React.useState(set.reps);\r\n  const [updatedRepsForChangesInPlan, setUpdatedRepsForChangesInPlan] = React.useState(set.reps);\r\n  const [updatedRepsAsPercentageForChangesInPlan, setUpdatedRepsAsPercentageForChangesInPlan] = React.useState(set.repsAsPercentage ? set.repsAsPercentage : undefined);\r\n  let isLastSet = trainingState.main.setNumberFrom1 >= trainingState.main.training.sets.length ? true : false;\r\n\r\n  const [notes, setNotes] = React.useState(trainingState.main.set.repsNotes);\r\n  const [notesForChangesInPlan, setNotesForChangesInPlan] = React.useState(trainingState.main.set.repsNotes);\r\n  const [changePlan, setChangePlan] = React.useState(false);\r\n\r\n\r\n  // const updateNotes = async () => {\r\n  //   await ;\r\n  // }\r\n\r\n  const registerPlanChanges = (number) => {\r\n    setUpdatedRepsForChangesInPlan(number);\r\n    setChangePlan(true);\r\n  }\r\n  //save data\r\n  const saveRepsToHistory = async () => { //onClick function\r\n    console.log(\"SAVING HISTORY STARTING\");\r\n    setSetSavedToHistory(true); //here!?!?\r\n\r\n    let setToSave = {\r\n      reps: updatedReps,\r\n      executedRepsAsPercentageOfInitialAssessment: updatedReps/trainingState.main.initialAssessmentRepsNumber*100, //%$£101\r\n      repsNotes: notes,\r\n      date: new Date()\r\n    }\r\n    // console.log(\"setToSave: \", setToSave);\r\n\r\n    const add1ToSetsDone = () => {\r\n      trainingState.main.setsDone = trainingState.main.setsDone + 1;\r\n      setTrainingState({ ...trainingState });\r\n    }\r\n\r\n    //IF saving FIRST SET\r\n    if (trainingState.main.setsDone === 0 && trainingState.main.continueStartedTraining === false) {\r\n      //create training in user's history\r\n      console.log(\"Saving first set. create training in user's history...\")\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/startNewTraining',\r\n        {\r\n          trainingNumber1IsFirst: trainingState.main.trainingNumber,\r\n          trainingName: trainingState.main.training.name,\r\n          trainingStartedAt: trainingState.main.trainingStartedAt,\r\n          set: setToSave\r\n        });\r\n      pushupContext.updateUser({ ...updatedUser });\r\n      console.log(\"NEW TRAINING IN HISTORY (with 1 set) was CREATED, sets done updated. (Both user and training context should be refreshed.)\");\r\n    } else {\r\n      let thisTrHistory = pushupContext.user.pushupPlans.current.trainingHistory[0];\r\n      thisTrHistory.sets.unshift(setToSave);\r\n      // trainingState.main.trExecution.sets.unshift(setToSave);\r\n      // let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateTrainingExecution', trainingState.main.trExecution);\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateTrainingExecution', thisTrHistory);\r\n    }\r\n    add1ToSetsDone();\r\n\r\n    //update changes in the plan?\r\n    console.log(\"change plan data: \", changePlan, updatedRepsForChangesInPlan, notesForChangesInPlan);\r\n    // console.log(\"sets done: \", trainingState.main.setsDone);\r\n    if (changePlan) {\r\n\r\n      let planDataToUpdate = { reps: updatedRepsForChangesInPlan, repsNotes: notesForChangesInPlan, repsAsPercentage: updatedRepsAsPercentageForChangesInPlan };\r\n      console.log(\"plan shall be updated\", planDataToUpdate);\r\n      const updatedUserX = await postJsonDataUrlAfterAPIpushups('/saveChangesInPersonalPlanContentUsingPlanID', { planDataToUpdate });\r\n      // console.log(\"dataFromBackend: \", updatedUserX);\r\n\r\n      pushupContext.updateUser({ ...updatedUserX });\r\n      // pushupContext.updateUser(updatedUserX);\r\n      // for (let i = 1; i < 100; i++) {\r\n\r\n      //         await new Promise(resolve => setTimeout(resolve, 100));\r\n      //         console.log(\"S0 current training info set1: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[0]);\r\n      //         console.log(\"S0 current training info set2: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[1]);\r\n      //       }\r\n\r\n      // console.log(\"S1 current training info set1: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[0]);\r\n      // console.log(\"S1 current training info set2: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[1]);\r\n      // console.log(\"UUUUUU Set In Plan shall be updated.\")\r\n      setChangePlan(false);\r\n    }\r\n\r\n\r\n    // set the next training\r\n    if (isLastSet) {\r\n      console.log(\"XXXXXX this was L A S T set: \", isLastSet);\r\n      //mark this training as completed\r\n\r\n      let updatedUser2 = await postJsonDataUrlAfterAPIpushups('/setTheNextTraining', { markLastTrainingAsSuccessfullyCompleted: true });\r\n      pushupContext.updateUser({ ...updatedUser2 });\r\n    }\r\n    console.log(\"SAVING HISTORY FINISHING\");\r\n    // console.log(\"Scurrent training info set1: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[0]);\r\n    // console.log(\"Scurrent training info set2: \", pushupContext.user.pushupPlans.personal[2].trainings[0].sets[1]);\r\n  }\r\n\r\n  //if user selected to SAVE Predefined Reps (or duration-in the future)\r\n  let hideRepsToSave = false;\r\n  if (saveDefaultData && !setWasSavedToHistory) {\r\n    hideRepsToSave = true;\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (saveDefaultData) {\r\n      saveRepsToHistory();\r\n    }\r\n  }, []);\r\n\r\n\r\n  ///MUSIC\r\n  const [soundBreakBackgroundPlay, BackgroundMusicSettings] = useSound(soundBreakBackground);\r\n  const [backgroundMusicFaded, setBackgroundMusicFaded] = React.useState(false);\r\n  const [backgroundMusicFaded2, setBackgroundMusicFaded2] = React.useState(false);\r\n  const [backgroundMusicStarted, setBackgroundMusicStarted] = React.useState(false);\r\n  const [backgroundMusicPlaying, setBackgroundMusicPlaying] = React.useState(false);\r\n\r\n  let remindingBreakTime = set.breakAfterInSeconds - breakDuration;\r\n  React.useEffect(() => {\r\n    // console.log(\"musicOn? \", pushupContext.user.settings.training.music);\r\n    // console.log(\"backgroundMusicPlaying\", backgroundMusicPlaying);\r\n    // console.log(\"backgroundMusicFaded\", backgroundMusicFaded);\r\n    if (!pushupContext.user.settings.training.music) {  //don't play music if that is user's setting\r\n      if (backgroundMusicStarted && backgroundMusicPlaying && !backgroundMusicFaded && BackgroundMusicSettings.sound) {// stop music in case it was playing\r\n        // console.log(\"userFade\");\r\n        BackgroundMusicSettings.sound.fade(1, 0, 1000);\r\n        // setBackgroundMusicFaded(true);\r\n        setBackgroundMusicPlaying(false);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // console.log(\"breakDuration: \", breakDuration);\r\n    // console.log(BackgroundMusicSettings.sound)\r\n\r\n    if (breakDuration >= 2 && BackgroundMusicSettings.sound && !backgroundMusicPlaying && !backgroundMusicFaded) { //smaller number could cause error as music may not be ready\r\n      // console.log(\"playing-volume up\")\r\n      BackgroundMusicSettings.sound.fade(0, 1, 4000);\r\n      setBackgroundMusicPlaying(true);\r\n      if (!backgroundMusicStarted) { soundBreakBackgroundPlay(); console.log(\"play-Start\") }\r\n      setBackgroundMusicStarted(true);\r\n    }\r\n    if (remindingBreakTime <= 13 && backgroundMusicPlaying && !backgroundMusicFaded2 && BackgroundMusicSettings.sound) {\r\n      // console.log(\"fading prep\");\r\n\r\n      BackgroundMusicSettings.sound.fade(1, 0.3, 1000);\r\n      setBackgroundMusicFaded2(true);\r\n    }\r\n    if (remindingBreakTime <= 10 && backgroundMusicPlaying && !backgroundMusicFaded && BackgroundMusicSettings.sound) {\r\n      // console.log(\"fading main\");\r\n      BackgroundMusicSettings.sound.fade(0.3, 0, 5000);\r\n      setBackgroundMusicFaded(true);\r\n      setBackgroundMusicPlaying(false);\r\n      // console.log(\"FADE set to TRUE!!\")\r\n    }\r\n  }, [breakDuration, pushupContext])\r\n\r\n\r\n\r\n\r\n  const moveToTheNextStage = async () => {\r\n    // console.log(\"MOVE TO THE NEXT STAGE f.\");\r\n\r\n    //save currently finished break duration (and notes)...\r\n    if (!isLastSet) {\r\n      let thisTrHistory = pushupContext.user.pushupPlans.current.trainingHistory[0];\r\n      thisTrHistory.sets[0].breakDuration = breakDuration;\r\n      thisTrHistory.sets[0].breakNotes = trainingState.main.set.breakNotes;\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateTrainingExecution', thisTrHistory);\r\n      pushupContext.updateUser({ ...updatedUser });\r\n\r\n      trainingState.main.setNumberFrom1 = thisTrHistory.sets.length + 1;\r\n      trainingState.main.set = trainingState.main.training.sets[trainingState.main.setNumberFrom1 - 1];\r\n      trainingState.stage = 1;\r\n    } else {\r\n      //move to the next stage...\r\n      trainingState.stage = 10; //on the end by adding 1 to stage it will finish\r\n    }\r\n    console.log(\"trainingStateXX\", trainingState);\r\n    setTrainingState({ ...trainingState });\r\n\r\n    //fade music\r\n    console.log(\"FADE???\", backgroundMusicFaded)\r\n    if (backgroundMusicPlaying && backgroundMusicFaded == false && BackgroundMusicSettings.sound) {\r\n      console.log(\"FADE-YES\");\r\n      BackgroundMusicSettings.sound.fade(1, 0, 1000);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if ((breakTimerFinished || isLastSet) && setWasSavedToHistory) {\r\n      // console.log(\"set saved and break finished -> time to update page\")\r\n      moveToTheNextStage();\r\n    }\r\n  }, [breakTimerFinished, setWasSavedToHistory]);\r\n\r\n\r\n\r\n  //plan with %\r\n  const returnsUpdatedPercentagesValue = (newPercentageValue) => {\r\n    setUpdatedRepsAsPercentageForChangesInPlan(newPercentageValue);\r\n    let initialAssesmentReps = returnAssessmentFromAssID(pushupContext.user, pushupContext.user.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n    // console.log(\"initialAssesmentReps:\", initialAssesmentReps);\r\n    // setUpdatedRepsForChangesInPlan;\r\n    let calculatedReps = Math.round(newPercentageValue / 100 * initialAssesmentReps);\r\n    setUpdatedRepsForChangesInPlan(calculatedReps);\r\n    setChangePlan(true);\r\n  }\r\n\r\n  const returnupdatedRepsAsPartOfPercentagesValue = (newRepValue) => {\r\n    setUpdatedRepsForChangesInPlan(newRepValue);\r\n    let initialAssesmentReps = returnAssessmentFromAssID(pushupContext.user, pushupContext.user.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n    // console.log(\"initialAssesmentReps:\", initialAssesmentReps);\r\n    // setUpdatedRepsForChangesInPlan;\r\n    let calculatedPercentages = Math.round(newRepValue / initialAssesmentReps * 100);\r\n    setUpdatedRepsAsPercentageForChangesInPlan(calculatedPercentages);\r\n    setChangePlan(true);\r\n  }\r\n\r\n  if (pushupContext.user) console.log(\"set.repsAsPercentage: \", set.repsAsPercentage);\r\n\r\n  return (\r\n    <div>\r\n      {!isLastSet && <BreakSounds soundsOn={pushupContext.user.settings.training.sound} breakDuration={breakDuration} breakLength={set.breakAfterInSeconds} />}\r\n      {!isLastSet ? <span>Break: <BreakTimer external={{ breakTimerFinished, setBreakTimerFinished }} duration={{ breakDuration, setBreakDuration }} /> </span> : <span>This is the last set.</span>}\r\n\r\n      {/* Skip break btn. */}  {setWasSavedToHistory && <button onClick={moveToTheNextStage}>Skip break</button>}\r\n\r\n      {/* LOGGING DATA */}\r\n      {set.reps && !setWasSavedToHistory && hideRepsToSave == false &&\r\n        <div>\r\n          {/* reps history */}\r\n          <div style={{ backgroundColor: 'brown', padding: '5px', margin: '5px' }}>\r\n            <h1>Save to training history...</h1>\r\n            <p>(assuming reps needs to be logged, not time)</p>\r\n            <p>Reps done: </p>\r\n\r\n            {/* <CounterTool small={1} big={5} value={updatedReps} setValue={setUpdatedReps} /> */}\r\n            <CounterTool small={1} big={5} value={updatedReps} setValue={setUpdatedReps} />\r\n\r\n            {/* notes */}\r\n\r\n            <p>{notes ? 'Adjust' : 'Add'} note:</p>\r\n            <textarea value={notes} onChange={(e) => setNotes(e.target.value)} style={{ height: '100px', width: '100%' }} ></textarea>\r\n            <br />\r\n            {/* <button style={{ margin: '10px' }} onClick={saveRepsToHistory}>{isLastSet ? 'Save set and finish training' : 'Save set'}</button> */}\r\n          </div>\r\n\r\n          {/* Adjust this set in the plan (in user's personal plan!!) */}\r\n          <Accordion className='p-3' style={{ backgroundColor: 'orange' }}>\r\n            <Card >\r\n              <Accordion.Toggle as={Card.Header} eventKey=\"1\" className=\"p-3 mb-2 bg-info text-white MMpointer  text-center btnOpacity\">\r\n                Adjust this set also in my pushup plan\r\n              </Accordion.Toggle>\r\n              <Accordion.Collapse eventKey=\"1\">\r\n                <SCard>\r\n                  <p>(assuming reps needs to be logged, not time)</p>\r\n\r\n                  {!set.repsAsPercentage && <div>\r\n                    <p>Reps to do: </p>\r\n                    <CounterTool small={1} big={5} value={updatedRepsForChangesInPlan} setValue={registerPlanChanges} />\r\n\r\n                  </div>}\r\n\r\n                  {set.repsAsPercentage &&\r\n                    <div>\r\n                      <CounterAllIn settings={[1, 5, returnsUpdatedPercentagesValue, updatedRepsAsPercentageForChangesInPlan, '%', 'of Max Reps']} />\r\n                      {/* <p style={{ textAlign: 'center' }}>makes... </p> */}\r\n                      <p style={{ textAlign: 'center' }}>= </p>\r\n                      <CounterAllIn settings={[1, 5, returnupdatedRepsAsPartOfPercentagesValue, updatedRepsForChangesInPlan, 'reps']} />\r\n                    </div>}\r\n\r\n                  <p>{notes ? 'Adjust' : 'Add'} note:</p>\r\n                  <textarea value={notesForChangesInPlan} onChange={(e) => { setNotesForChangesInPlan(e.target.value); setChangePlan(true) }} style={{ height: '100px', width: '100%' }} ></textarea>\r\n                  <br />\r\n                </SCard>\r\n              </Accordion.Collapse>\r\n            </Card>\r\n          </Accordion>\r\n\r\n\r\n          <button style={{ margin: '10px' }} onClick={saveRepsToHistory}>{isLastSet ? 'Save and finish training' : 'Save'}</button>\r\n        </div>}\r\n\r\n      {/* show BREAK info if it exists: */}\r\n      {\r\n        !isLastSet && setWasSavedToHistory && trainingState.main.set.breakNotes &&\r\n        <div>\r\n          <h2>Break info:</h2>\r\n          <p>{trainingState.main.set.breakNotes}</p>\r\n        </div>\r\n      }\r\n\r\n      {/* show next set info if it exists: */}\r\n      {\r\n        !isLastSet && setWasSavedToHistory &&\r\n        <div>\r\n          <h2>Next set:</h2>\r\n          <p>{trainingState.main.training.sets[trainingState.main.setNumberFrom1].reps ?\r\n            trainingState.main.training.sets[trainingState.main.setNumberFrom1].reps + ' reps'\r\n            : trainingState.main.training.sets[trainingState.main.setNumberFrom1].duration + ' seconds'}\r\n          </p>\r\n          <p>{trainingState.main.training.sets[trainingState.main.setNumberFrom1].repsNotes && trainingState.main.training.sets[trainingState.main.setNumberFrom1].repsNotes}</p>\r\n        </div>\r\n      }\r\n\r\n\r\n\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default StartBreakLogData;","import React from 'react';\r\n\r\nimport useSound from 'use-sound';\r\nimport soundTrainingFinished from '../../sounds/files/trainingFinishedCelebration/Trumpets8s.mp3';\r\n\r\n\r\nconst TrainingFinished = ({ soundOn }) => {\r\n  const [soundTrainingFinishedPlay] = useSound(soundTrainingFinished);\r\n\r\n  React.useEffect(() => {\r\n    if (!soundOn) return; //don't play sound if that is user's setting\r\n    soundTrainingFinishedPlay();\r\n  }, [soundTrainingFinishedPlay]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Training finished. Well done!</h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrainingFinished;","import React from 'react';\r\nimport { TrainingContext } from './RunTraining';\r\nimport CurrentTrainingInfo from './CurrentTrainingInfo';\r\nimport ShowSetToDo from './ShowSetToDo';\r\nimport StartBreakLogData from './StartBreakLogData';\r\nimport BreakContinued from './BreakContinued';\r\nimport TrainingFinished from './TrainingFinished';\r\n\r\nimport pushupsContext from '../state/PushUpsContextState';\r\n\r\n\r\nconst TrainingSwitcher = () => {\r\n  let pushupContext = React.useContext(pushupsContext);\r\n\r\n  let trainingContext = React.useContext(TrainingContext);\r\n  // console.log(\"TC: \", trainingContext);\r\n  let [trainingState, setTrainingState] = trainingContext;\r\n  // console.log(\"trainingState main: \", trainingState.main);\r\n  // console.log(\"stage: \", trainingState.stage);\r\n  \r\n\r\n  switch (trainingState.stage) {\r\n    case 0: {return <CurrentTrainingInfo/>; break;}\r\n    case 1: {return <ShowSetToDo/>; break;}\r\n    case 2: { return <StartBreakLogData />; break;}\r\n    case 2.5: { return <StartBreakLogData saveDefaultData/>; break;}\r\n    // case 3: { return <BreakContinued/>; break;}\r\n    case 10: { return <TrainingFinished soundOn={pushupContext.user.settings.training.sound}/>; break;}\r\n      default: return <p>TrainingSwitcher - Training stage not found.</p>\r\n  }\r\n};\r\n\r\nexport default TrainingSwitcher;","import React from 'react';\r\n\r\nconst TrainingStopWatch = () => {\r\n  const [trainingTime, setTrainingTime] = React.useState({seconds:0,minutes:0});\r\n  React.useEffect(\r\n    () => {\r\n      let id;\r\n      if (trainingTime.seconds === 59) {\r\n        id = setInterval(() => setTrainingTime({ seconds:0, minutes:trainingTime.minutes+1 }), 1000);\r\n      } else {\r\n        id = setInterval(() => setTrainingTime({ ...trainingTime, seconds: (trainingTime.seconds + 1)}), 1000);\r\n      }\r\n      return () => clearInterval(id);\r\n    },\r\n    [trainingTime]\r\n  );\r\n\r\n\r\n  return (\r\n    <span style={{ marginRight: '15px', padding: '7px', backgroundColor: 'lightBlue' }}>{trainingTime.minutes}m {trainingTime.seconds}s</span>\r\n\r\n  );\r\n};\r\n\r\nexport default TrainingStopWatch;","import React from 'react';\r\n\r\nconst SetsToDoAllIn = ({ trainingState: { stage, main: { training, setNumberFrom1 } } }) => {\r\n  // console.log(\"SETS TO DO: \", setNumberFrom1, training.sets.length);\r\n\r\n\r\n\r\n  return (\r\n    <div style={{ display: 'inline', overflow: 'scroll' }}>\r\n      <span>Sets:</span>\r\n      {training.sets.map((set, index) =>\r\n        <span\r\n          style={{\r\n            backgroundColor:\r\n              `${\r\n              // stage === 0 ? 'lightgrey' :\r\n                index + 1 < setNumberFrom1 ?\r\n                  'grey'\r\n                  : index + 1 === setNumberFrom1 ?\r\n                    ((stage === 1 ||stage===0) ? 'yellow' : 'gray')\r\n                    : 'lightgrey'\r\n              }`,\r\n            padding: '3px',\r\n            margin: '3px'\r\n          }}\r\n          key={index}\r\n        >\r\n          {set.reps ? (set.reps + '') : (set.duration + 's')}\r\n        </span>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SetsToDoAllIn;","import React from 'react';\r\nimport \"react-toggle/style.css\";\r\nimport Toggle from 'react-toggle';\r\n\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData'\r\n\r\nconst SoundAndMusicControls = () => {\r\n  let context = React.useContext(pushupsContext);\r\n\r\n  const updateUserTrainingSettings = async (what, how) => {\r\n    try {\r\n      let updatedUser = await postJsonDataUrlAfterAPIpushups('/updateTrainingSettings', { what, how });\r\n      // context.user.settings.training[what] = how;\r\n      // console.log(\"user's training music/sound settings updated.\");\r\n      // console.log(\"user with new training set-up: ,\", updatedUser);\r\n      // console.log(\"date now:\", new Date());\r\n      // console.log(\"user with new training set-up: ,\", updatedUser.pushupPlans.current.trainingHistory[0]);\r\n      context.updateUser(updatedUser);\r\n    } catch (err) { console.log(\"e1\", err) }\r\n    // context.updateUser({ ...updatedUser });\r\n  }\r\n\r\n\r\n  let handleTrainingSoundsToggle = ({ target: { checked } }) => {\r\n    // console.log(\"toggle :\", checked);\r\n    updateUserTrainingSettings('sound', checked);\r\n  }\r\n  let handleTrainingMusicToggle = ({ target: { checked } }) => {\r\n    // console.log(\"toggle :\", checked);\r\n    updateUserTrainingSettings('music', checked);\r\n  }\r\n  // console.log(\"CONTEXT MUSIC ISSUE\", context);\r\n  console.log(\"MUSIC context user \", context);\r\n  return (\r\n    <div style={{backgroundColor:'orange', padding:'5px'}}>\r\n      <p style={{textAlign:'center'}}>Training Audio:</p>\r\n      <div style={{ display: 'flex', justifyContent: 'space-evenly' }}>\r\n        {/* <div> */}\r\n        <div style={{padding:'5px', display:'flex',flexFlow:'column'}}>\r\n          <Toggle\r\n            id='trainingSoundsToggle'\r\n            defaultChecked={context.user ? context.user.settings.training.sound : true}\r\n            // defaultChecked={context.user ? false : true}\r\n            onChange={handleTrainingSoundsToggle}\r\n          />\r\n          <label htmlFor='trainingSoundsToggle'>Sounds</label>\r\n        </div>\r\n        <div style={{ padding: '5px', display:'flex',flexFlow:'column' }}>\r\n          <Toggle\r\n            id='trainingMusicToggle'\r\n            // defaultChecked={this.state.cheeseIsReady}\r\n            // defaultChecked={true}\r\n            defaultChecked={context.user ? context.user.settings.training.music : true}\r\n            // defaultChecked={context.user ? false : true}\r\n     \r\n     \r\n            onChange={handleTrainingMusicToggle}\r\n          />\r\n          <label htmlFor='trainingMusicToggle'>Music</label>\r\n        </div>\r\n      </div>\r\n   </div>\r\n  );\r\n};\r\n\r\nexport default SoundAndMusicControls;","import React from 'react';\r\nimport TrainingStopWatch from './TrainingStopWatch';\r\nimport SetsToDoAllIn from './SetsToDoAllIn';\r\nimport SoundAndMusicControls from './SoundAndMusicControls';\r\n\r\nconst TrainingHeaders = ({ trainingState }) => {\r\n  // console.log(\"HHH HH H H H :\", trainingState);\r\n  return (\r\n   <div>\r\n      <div\r\n        style={{\r\n          backgroundColor: 'lightgreen',\r\n          padding: '10px',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          \r\n        }}>\r\n        {/* <h2>Training Headers</h2> */}\r\n        {/* <SetsStillToDo trainingState={trainingState} /> */}\r\n        <SetsToDoAllIn trainingState={trainingState} />\r\n     \r\n        {/* <TotalTrainingTime /> */}\r\n        {/* <TrainingStopWatch /> */}\r\n        <TrainingStopWatch />\r\n        {/* last row: */}\r\n      </div>\r\n      {/* <SoundAndMusicControls/> */}\r\n\r\n   </div>\r\n  );\r\n};\r\n\r\nexport default TrainingHeaders;","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { returnTrueIfDatesHaveTheSameDay } from '../functions/basics';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\n\r\nconst DayOfFinalAssessment = ({history}) => {\r\n  let { user, updateUser } = React.useContext(pushupsContext);\r\n  let initAss = user.assessments.find(ass => ass._id === user.pushupPlans.current.assessments.initialAssessmentID);\r\n\r\n  let isDayOfLastAssessmentToday = () => {\r\n    let assDate = user.assessments[0].date;\r\n    let today = new Date();\r\n    return returnTrueIfDatesHaveTheSameDay(assDate, today);\r\n  }\r\n\r\n  const buttonClickedUseLastAssessmentAsFinal = async () => {\r\n    //%$£03\r\n    console.log(\"click\");\r\n    const updatedUser = await postJsonDataUrlAfterAPIpushups('/setCoreAssessment', { type: 'final'}); //and final as other option\r\n    //redirect to main menu, + alert user\r\n    history.push('/pushups');\r\n    alert('Congrats. You finished 14-days cycle. Now, take coupe of days break or pick a new (or the same) plan to follow.');\r\n    updateUser({ ...updatedUser }); \r\n\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>Today is Day of Final assessment</h1>\r\n      <p>On the end of each Plan, we need to assess, what is your current max.</p>\r\n      <p>\r\n        In your initial assessment you managed to do\r\n        <span style={{ fontSize: '2rem' }}>{initAss.reps}</span>\r\n         reps.\r\n         {initAss.notes && <span>with following notes: \"{initAss.notes}\".</span>}\r\n      </p>\r\n\r\n\r\n      {/* user.pushupPlans.current.assessments */}\r\n\r\n      <div style={{ backgroundColor: 'red' }}>\r\n        {!user.pushupPlans.current.assessments.finalAssessment ?\r\n          (!isDayOfLastAssessmentToday() ? //marked NOT done\r\n            <p>It is time to test your new max reps. Do that (in main menu select \"Test your max reps\") and then come back here.  </p> //reps test not done yet\r\n            : <>\r\n              {/* //reps test done, but not marked as final assessment */}\r\n              {/* <p>You did {user.assessments[0].reps} reps in today's assessment.</p> */}\r\n              <p>You did <span style={{ fontSize: '3rem' }}>{user.assessments[0].reps}</span> reps in today's assessment.</p>\r\n              \r\n              <p>\r\n                To use/log this data as your final assessment, click\r\n            <button onClick={buttonClickedUseLastAssessmentAsFinal}>Mark this data as my Final Assessment</button>\r\n            . (You can allways test your current \"max\" again - In main menu select \"Test your max reps\".)\r\n            </p>\r\n            </>)\r\n          : null //final ass marked done\r\n        }\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(DayOfFinalAssessment);","import React from 'react';\r\nimport pushupsContext from '../state/PushUpsContextState';\r\nimport { withRouter } from 'react-router-dom';\r\n// import CurrentTrainingInfo from './CurrentTrainingInfo';\r\n// import ShowSetToDo from './ShowSetToDo';\r\nimport TrainingSwitcher from './TrainingSwitcher';\r\n// import TrainingStopWatch from './TrainingStopWatch';\r\nimport TrainingHeaders from './TrainingHeaders';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate } from '../functions/basics';\r\nimport DayOfFinalAssessment from './DayOfFinalAssessment';\r\n\r\n\r\n//Training context\r\nexport const TrainingContext = React.createContext({});\r\n\r\nconst setupTrainingContext = (userHere, publicPlanIfNeeded) => {\r\n\r\n  //PLAN\r\n  let plan = {}; //template\r\n  //get plan template from id\r\n  if (userHere.pushupPlans.current.personal.includes('yes-only')) {//=personal from current user\r\n    // console.log(\"PERSONAL\");\r\n    plan = userHere.pushupPlans.personal.find(plan => plan._id === userHere.pushupPlans.current.planIDType);\r\n    // console.log(\"CURRENT PLAN TEMPLATE:\", plan);\r\n  } else if (userHere.pushupPlans.current.personal.includes('yes-finished')) {\r\n    //get finished personal training plan \r\n    plan = userHere.pushupPlans.personalFinished.find(plan => plan._id === userHere.pushupPlans.current.planIDType);\r\n  } else {\r\n    //get public plan\r\n    // plan = userHere.pushupPlans.current; //this should be enough as this contains all the info needed for training, no need to search for plan itself in public plans\r\n    plan = publicPlanIfNeeded;\r\n  }\r\n\r\n  //TRAINING\r\n  // const trainingNumberPosition0IsFirstNumber = userHere.pushupPlans.current.trainingToDoNextNumberPositionInSchedulleArrayFrom0;\r\n  const trainingNumberPosition0IsFirstNumber = userHere.pushupPlans.current.scheduleDayToDoFrom0;\r\n\r\n  //final ass.dealings\r\n  let finalAssessment = false;\r\n  if (trainingNumberPosition0IsFirstNumber === 13) return { finalAssessment: true };\r\n\r\n  // console.log(\"TR ISUUE: \", plan, trainingNumberPosition0IsFirstNumber);\r\n  let numberOfThisTrainingTemplate = plan.schedule[trainingNumberPosition0IsFirstNumber].trainingNumber;\r\n  if (numberOfThisTrainingTemplate === 0) return 'dayOff';\r\n\r\n  let training = plan.trainings[numberOfThisTrainingTemplate - 1]  //template from plan; training 1 is here on position 0.\r\n  // let trExecution;  // trExecution = context.user.pushupPlans.current.trainingHistory[0];\r\n\r\n  //SET(s)\r\n  let set = training.sets[0]; //set instructions (not execution)\r\n  let setNumberFrom1 = 1;\r\n  let setsDone = 0;\r\n  // let totalSets = training.sets.length; //total number of sets (to do and done - all together)\r\n\r\n ///// if plan is as % of initial assessment, recalculate % to reps\r\n  let initialAssessmentRepsNumber;\r\n  if (plan.repsAsPercentages) {\r\n    console.log(\"Plan is in form of reps as PERCENTAGES - reps will be calculated.\")\r\n    //get init.ass\r\n    initialAssessmentRepsNumber = userHere.assessments.find(ass => ass._id == userHere.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n    // console.log(\"initialAssessmentRepsNumber: \", initialAssessmentRepsNumber);\r\n    //calc reps for each set in This training.\r\n    training.sets.forEach(set => set.reps = Math.round(set.repsAsPercentage / 100 * initialAssessmentRepsNumber));\r\n  }\r\n  // %$£100 in future for faster load calculate specific reps upon committing to the plan which is Finished or Public, and save these calculations on user's current execution plan. Then when training starts just use those fixed numbers\r\n\r\n\r\n\r\n\r\n  /////\"continue training\" set up (if it exists)\r\n  //if last training execution was today and is unfinished, add this to the package as startedTrainingExecution; else as undefined\r\n  let continueStartedTraining = false;\r\n  let lastTrainingMatch = return0IfLastTrainingDoesntExist1IfDateAsToday2IfDifferentDate(userHere);\r\n  if (lastTrainingMatch === 1\r\n    && userHere.pushupPlans.current.trainingHistory[0].completed != true) {\r\n\r\n    continueStartedTraining = true;\r\n    let startedTraining = userHere.pushupPlans.current.trainingHistory[0];\r\n    let numberOfSetsAlreadyDone = userHere.pushupPlans.current.trainingHistory[0].sets.length;\r\n    set = training.sets[numberOfSetsAlreadyDone];\r\n    setNumberFrom1 = numberOfSetsAlreadyDone + 1;\r\n    setsDone = numberOfSetsAlreadyDone;\r\n    // console.log(\"setting up CONTINUED training: \",userHere, startedTraining, set,'\\n', setNumberFrom1,  numberOfSetsAlreadyDone, setsDone);\r\n    //adjust set info\r\n  }\r\n\r\n\r\n\r\n\r\n  ////PACKAGE\r\n  let trainingPackage = {\r\n    plan,\r\n    training,\r\n    trainingNumber: numberOfThisTrainingTemplate, //0=day off\r\n    trainingStartedAt: new Date(),\r\n    // trExecution,\r\n    setNumberFrom1,\r\n    set,\r\n    setsDone,\r\n    continueStartedTraining, //true / false\r\n    initialAssessmentRepsNumber // only for saving reps as % to user's execution history\r\n  };\r\n\r\n  return { stage: 0, main: trainingPackage };\r\n}\r\n\r\n\r\n\r\n\r\nconst RunTraining = ({ history }) => {\r\n  let context = React.useContext(pushupsContext);\r\n  const [trainingContextVariable, setTrainingContextVariable] = React.useState(undefined);\r\n  console.log(\"training CONTEXT: \", trainingContextVariable);\r\n  const [todayIsDayOff, setTodayIsDayOff] = React.useState(false);\r\n  const [userLoading, setUserLoading] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n    //sort refresh-user loading\r\n    if (!context.user) { return } else setUserLoading(false);\r\n\r\n    //set training context\r\n    if (trainingContextVariable === undefined) {\r\n      let publicPlanIfNeeded;\r\n      if (context.user.pushupPlans.current.personal === 'public') publicPlanIfNeeded = context.publicPlans.find(plan => plan._id === context.user.pushupPlans.current.planIDType);\r\n      let trainingContextToUse = setupTrainingContext(context.user, publicPlanIfNeeded);\r\n      if (trainingContextToUse === 'dayOff') setTodayIsDayOff(true);\r\n      setTrainingContextVariable(trainingContextToUse);\r\n\r\n    }\r\n\r\n\r\n  }, [context]);\r\n\r\n  // React.useEffect(() => {\r\n  //   // console.log(\"TCV (trainingContextVariable) updated. Current: \", trainingContextVariable);\r\n\r\n  //   //  // update training context based on the user context...\r\n  //   // if (context.user && trainingContextVariable.main.setsDone > 0) {\r\n  //   // trainingContextVariable.main.trExecution = context.user.pushupPlans.current.trainingHistory[0];\r\n  //   // }\r\n  // }, [trainingContextVariable]);\r\n\r\n  //skipping trainings for plans in development\r\n  const skipThisDay = async () => {\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/setTheNextTraining', {});\r\n    history.push('/pushups');\r\n    context.updateUser({ ...updatedUser });\r\n    await new Promise(resolve => setTimeout(resolve, 250));\r\n    history.push('/pushups/startMyTraining');\r\n  }\r\n\r\n  if (userLoading) return <p>loading user...</p>\r\n  if (trainingContextVariable.finalAssessment === true) return <DayOfFinalAssessment />\r\n\r\n  if (todayIsDayOff) return (\r\n    <div>\r\n      <h3>Today is your day off.</h3>\r\n      <button onClick={skipThisDay}>Skip this day.</button>\r\n    </div>)\r\n  if (trainingContextVariable) return (\r\n    <div>\r\n      <TrainingContext.Provider value={[trainingContextVariable, setTrainingContextVariable]}>\r\n        <TrainingHeaders trainingState={trainingContextVariable} />\r\n        <TrainingSwitcher />\r\n      </TrainingContext.Provider>\r\n    </div>);\r\n\r\n  return <h1>Training - Training context is most probably currently undefined; this html shouldn't really appear at all.</h1>\r\n};\r\n\r\nexport default withRouter(RunTraining);","import React from 'react';\r\nimport { SLink } from '../../../App';\r\n\r\nimport useSound from 'use-sound';\r\nimport soundBeep from '../../sounds/files/facebook/Complete and Success/Complete 2.m4a';\r\nimport soundStart from '../../sounds/files/startBlow/airHorn.mp3';\r\n\r\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\n// import ChangingProgressProvider from './pacemaker/ChangingProgressProvider';\r\n// import { Link } from 'react-router-dom';\r\n\r\nconst setMyDots = (setDots, howMany) => {\r\n  let dots = '';\r\n  console.log(\"howMany \", howMany);\r\n  for (let i = 1; i <= howMany; i++) {\r\n    dots += '.';\r\n  }\r\n  // console.log(dots);\r\n  setDots(dots);\r\n}\r\n\r\nconst PaceMaker = () => {\r\n  const [counter, setCounter] = React.useState(-5);\r\n  const [dots, setDots] = React.useState('...'); //doesn't matter how many is here\r\n\r\n  const [cycleMs, setCycleMS] = React.useState(0);\r\n  const [numberOfReps, setNumberOfReps] = React.useState(0);\r\n  const [showResult, setShowResult] = React.useState(false);\r\n  const [soundBeepPlay] = useSound(soundBeep);\r\n  const [soundStartPlay] = useSound(soundStart);\r\n\r\n\r\n  const [paceMakerStarted, setPaceMakerStarted] = React.useState(false);\r\n\r\n  //setDefaultDots\r\n  React.useEffect(() => {\r\n    setMyDots(setDots, counter * -1);\r\n  }, []);\r\n\r\n  // // use milliseconds\r\n  React.useEffect(() => {\r\n    let intervalMs;\r\n    if (cycleMs === 0) intervalMs = setInterval(() => setCycleMS(100), 20);\r\n    return () => {\r\n      clearInterval(intervalMs);\r\n    };\r\n  }, [cycleMs]);\r\n\r\n  //use 1s timer\r\n  // console.log(\"pacemaker refreshed, cycleMs: \", cycleMs);\r\n  React.useEffect(() => {\r\n    let interval;\r\n    if (paceMakerStarted) {\r\n      // duration.setBreakDuration(duration.breakDuration + 1);\r\n      if (counter < 0) soundBeepPlay()\r\n      else if (counter === 0) soundStartPlay()\r\n      else if (counter > 0) { }\r\n      interval = setInterval(() => { setCounter(counter + 1) }, 1000);\r\n      //countReps\r\n      if (counter>=0 && counter % 2 === 0) {\r\n        setNumberOfReps(counter / 2 + 1);\r\n        // console.log(numberOfReps);\r\n        // soundBeepPlay();\r\n        setCycleMS(0);\r\n        // console.log(\"RESET MS\");\r\n        counter >= 0 && speechSynthesis.speak(new SpeechSynthesisUtterance(numberOfReps + 1));\r\n      }\r\n    }\r\n    //set dots\r\n    setMyDots(setDots, counter * -1);\r\n\r\n\r\n    //clear up function\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  },\r\n    [counter, paceMakerStarted]\r\n  );\r\n\r\n\r\n  const stopAndLogReps = () => {\r\n    setPaceMakerStarted(false);\r\n    setNumberOfReps(numberOfReps - 1);\r\n    setShowResult(true);\r\n    setCycleMS(0);\r\n    setCounter(1000);\r\n    // console.log(\"number of reps:\", numberOfReps);\r\n    //beep each second (read number)\r\n  }\r\n\r\n  const resetPaceMaker = () => {\r\n    setPaceMakerStarted(false);\r\n    setNumberOfReps(0);\r\n    setShowResult(false);\r\n    setCounter(-5);\r\n    // console.log(\"number of reps:\", numberOfReps);\r\n    //beep each second (read number)\r\n  }\r\n\r\n  const circleTapped = () => {\r\n    console.log(\"tap\");\r\n    if (!paceMakerStarted && !showResult) {//start\r\n      setPaceMakerStarted(true)\r\n    }\r\n    if (paceMakerStarted) { //stop\r\n      stopAndLogReps();\r\n    }\r\n    if (!paceMakerStarted && showResult) { //reset\r\n      resetPaceMaker();\r\n    }\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      <h1>Pace Tracker</h1>\r\n      <p>(2 seconds per rep.)</p>\r\n      {/* <h3>{counter < 0 ? counter * -1 : 'Go!'}</h3> */}\r\n      {/* {counter < 0 ? <h1 style={{fontSize:'200px', lineHeight:'100px'}}>{dots}</h1> : <h3>Go!</h3>} */}\r\n      {counter < 0 ? <h1 style={{fontSize:'200px',lineHeight:'0px', display:'inline', marginBottom:'20px'}}>{dots}</h1> : <h3>Go!</h3>}\r\n      {/* {counter >= 0 && */}\r\n      <div\r\n        onClick={circleTapped}\r\n        style={{ width: '80%', margin: 'auto' }}\r\n      >\r\n        <CircularProgressbarWithChildren\r\n          value={cycleMs}\r\n          // text={counter==0 ? 'Go!': `${numberOfReps}`}\r\n          // text={counter<0 ? `${counter}`: counter==0 ? 'Go!': `${numberOfReps}`}\r\n          text={`${numberOfReps}`} //to show 0 too\r\n          background='true'\r\n          styles={buildStyles({\r\n            pathTransition: cycleMs === 0 ? \"none\" : \"stroke-dashoffset 2s linear 0s\",\r\n            // textSize: '50px',\r\n            // paddingTop: '2rem',\r\n            // dominantBaseline: 'top'\r\n            // pathColor: `hsl(${numberOfReps * 3}, 100%, 50%)`,\r\n            pathColor: `${(counter < 0 ||counter>=1000) ? 'gray' : 'green'}`,\r\n            textColor: '#f88',\r\n            // trailColor: '#d6d6d6',\r\n            trailColor: `${(counter < 0 ||counter>=1000) ? 'gray' : 'none'}`,\r\n\r\n            backgroundColor: `${counter < -1  ? 'red' : counter === -1 ? 'yellow' : paceMakerStarted ? 'lightgreen' : showResult ? 'lightblue' : 'red' }`,\r\n            // Whether to use rounded or flat corners on the ends - can use 'butt' or 'round'\r\n            // strokeLinecap: 'butt',\r\n          })}\r\n        >\r\n          <p style={{ marginTop: 200, fontSize: '2rem' }}>\r\n            {/* Tap to */}\r\n            {!paceMakerStarted && !showResult && <span> Start</span>}\r\n            {paceMakerStarted && <span> Stop</span>}\r\n            {!paceMakerStarted && showResult && <span> Reset</span>}\r\n            {/* . */}\r\n          </p>\r\n        </CircularProgressbarWithChildren>\r\n      </div>\r\n      {/* } */}\r\n\r\n      {/* \r\n      {!paceMakerStarted && !showResult && <button onClick={() => setPaceMakerStarted(true)}>Start</button>}\r\n      {paceMakerStarted && <button onClick={stopAndLogReps}>Stop</button>}\r\n      {!paceMakerStarted && showResult && <button onClick={resetPaceMaker}>Reset</button>}\r\n       */}\r\n\r\n      {showResult &&\r\n        <div>\r\n          <p>You did {numberOfReps} reps.</p>\r\n          <p>Save it as current Max<SLink to='/pushups/maxRepsTest'>Here</SLink></p>\r\n\r\n        </div>}\r\n      {/* <button onClick={() => setPaceMakerStarted(!paceMakerStarted)}>{paceMakerStarted ? 'Stop' : 'Start'}</button> */}\r\n      {/* {paceMakerStarted && <button onClick={startPaceMaker}>Stop</button>} */}\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaceMaker;","import React from 'react';\r\n\r\n// import SoundAndMusicControls from './SoundAndMusicControls';\r\nimport SoundAndMusicControls from './Training/SoundAndMusicControls';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\n// import { SLink } from '../../App';\r\nconst SLink2 = styled(Link)`\r\ndisplay:block;\r\nmargin:10px;\r\nbackground-color:orange;\r\npadding: 3px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n}\r\ntransition-duration: 0.25s;\r\n`\r\nconst SLink3 = styled.div`\r\nmargin:10px;\r\nbackground-color: gray;\r\ncolor: white;\r\npadding: 3px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n}\r\ntransition-duration: 0.25s;\r\n`\r\n\r\n\r\nconst SideBarContent = ({ pathname, setSideBarOpen }) => {\r\n  return (\r\n    <div>\r\n      {/*navigations */}\r\n      {/* <div style={{ backgroundColor: 'yellow', padding: '5px' }}>\r\n        <h3 style={{ textAlign: 'center' }}>Navigation</h3>\r\n        {pathname === '/pushups' ? null\r\n          : <SLink2\r\n            onClick={() => setSideBarOpen(false)}\r\n            // style={{ float: 'left' }}\r\n            style={{ display: 'block', margin: '1rem' }}\r\n            to='/pushups'>Main Menu</SLink2>}\r\n        {pathname == '/pushups/maxRepsTest' ? <SLink3>Test Your Max Reps</SLink3> : <SLink2 onClick={() => setSideBarOpen(false)} to='/pushups/maxRepsTest'>Test Your Max Reps</SLink2>}\r\n        {pathname == '/pushups/trainingPlans' ? <SLink3>Training Plans</SLink3> : <SLink2 onClick={() => setSideBarOpen(false)} to='/pushups/trainingPlans'>Training Plans</SLink2>}\r\n        {pathname == '/pushups/runMyTraining' ? <SLink3>Start Training</SLink3> : <SLink2 onClick={() => setSideBarOpen(false)} to='/pushups/startMyTraining'>Start Training</SLink2>}\r\n        {pathname == '/pushups/userProfile' ? <SLink3>My profile(history)</SLink3> : <SLink2 onClick={() => setSideBarOpen(false)} to='/pushups/userProfile'>My profile(history)</SLink2>}\r\n      </div> */}\r\n\r\n      {/* local controls */}\r\n      {pathname === '/pushups/runMyTraining' && <div style={{ backgroundColor: 'lightBlue', padding: '5px' }}>\r\n        <h3 style={{ textAlign: 'center' }}>Local controls</h3>\r\n        {/* training context     */}\r\n        {pathname === '/pushups/runMyTraining' && <SoundAndMusicControls />}\r\n      </div>}\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SideBarContent;","import React from 'react';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nconst FinishPersonalPushupPlan = (props) => {\r\n  const { history } = props;\r\n  let { user, updateUser } = React.useContext(PushUpsContext);\r\n  let positionFrom0 = props.match.params.positionFrom0;\r\n  let plan = user ? user.pushupPlans.personal[positionFrom0] : undefined;\r\n\r\n  const markPlanAsFinished = async () => {\r\n    let updatedUser = await postJsonDataUrlAfterAPIpushups('/finishPersonalPlan', {positionFrom0});\r\n    updateUser({ ...updatedUser });\r\n    history.push('/pushups/trainingPlans');\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Finishing Personal Pushup Plan</h1>\r\n      <p>%?: {plan && `${plan.repsAsPercentages}`}</p>\r\n      <p>(If you are currently \"commited\" to this plan, this will commitment be ended (plan execution will be archived).(Start new commitment using this finished plan.))</p>\r\n\r\n      {plan && plan.repsAsPercentages === undefined ? <p>you better change plan to % plan.</p> : <p>All looks good. Remember plan can't be changed/adjusted after this.(But can be duplicated).</p>}\r\n\r\n      <button onClick={markPlanAsFinished}>Submit as finished</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(FinishPersonalPushupPlan);","import React from 'react';\r\nimport { planViewContext } from '../ViewPushupPlan'\r\n\r\n// const ViewSet = ({ set, number, percentages, lastSetNumberFrom1, showNotes }) => {\r\nconst ViewSet = ({ set, number, lastSetNumberFrom1 }) => {\r\n  const planViewContextData = React.useContext(planViewContext);\r\n  // console.log(\"planViewContextData: \", planViewContextData);\r\n  const { percentages, showNotes }=planViewContextData;\r\n  \r\n  let setText;\r\n  if (percentages) {\r\n    // console.log(\"% in SET:\", percentages);\r\n    // console.log(\"set.repsAsPercentage: \", set.repsAsPercentage);\r\n    const { reps: maxReps, source } = percentages.maxReps;\r\n    const repsAsNumber = Math.round(set.repsAsPercentage / 100 * maxReps);\r\n    // const maxInfo = (source==='none') ? null : ((source==='initial') ? `(${repsAsNumber} reps using your initial assessment(${maxReps}) as 100%)`:``)\r\n    const maxInfo = (source === 'none') ? null : `(${repsAsNumber} reps)`;\r\n\r\n    // setText = `${set.repsAsPercentage}% of your max. ${maxInfo}`;\r\n    setText = `${set.repsAsPercentage}% ${maxInfo}`;\r\n  } else {\r\n    setText = `${set.reps} reps`;\r\n  }\r\n\r\n  // console.log(\"setText: \", setText);\r\n  return (\r\n    <div>\r\n      <span>set {number}: </span>\r\n      <span>{setText}</span>\r\n      {lastSetNumberFrom1 != number && <span style={{ color: 'gray', paddingLeft: '20px' }}>{set.breakAfterInSeconds}s. break</span>}\r\n      {(showNotes\r\n        //&& (set.repsNotes || set.breakNotes)\r\n      ) &&\r\n        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr' }}>\r\n          <div style={{ backgroundColor: 'lightGreen' }}>{set.repsNotes ? set.repsNotes : <span style={{color:'gray'}}>No notes</span>} </div>\r\n          <div style={{ backgroundColor: 'green' }}>{set.breakNotes ? set.breakNotes : <span style={{color:'gray'}}>No notes</span>}</div>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewSet;","import React from 'react';\r\nimport ViewSet from './ViewSet';\r\n\r\nconst ViewTraining = ({training:{name, sets}, number,percentages,showNotes }) => {\r\n  return (\r\n    <div style={{backgroundColor:'lightGray'}}>\r\n      <h4>Training {number} {name && `(${name})`}</h4>\r\n      <h5>Sets:</h5>\r\n      {sets.map((set, i) => <ViewSet set={set} number={i + 1} key={i} percentages={percentages} lastSetNumberFrom1={sets.length} showNotes={showNotes}/>)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewTraining;","import React from 'react';\r\n\r\nconst ViewSchedule = ({ schedule }) => {\r\n  console.log(schedule);\r\n  return (\r\n    <div>\r\n      <h2>Schedule</h2>\r\n    <div className='viewScheduleGrid'></div>\r\n      <div style={{ display: 'inline' }}>Day</div>\r\n      <div style={{ display: 'inline' }}> Training number</div>\r\n      {schedule.map((day, i) =>\r\n        <div key={i}>\r\n          <div style={{ display: 'inline' }}>{i + 1})</div>\r\n          <div style={{ display: 'inline' }}> {i===0? `Initial assessment ${day.trainingNumber > 0 && `and training ${day.trainingNumber}`}`: i === 13 ? 'Final assessment day' : (day.trainingNumber === 0 ? 'Rest day' : `${day.trainingNumber}`)}</div>\r\n        </div>\r\n      )}\r\n    </div>)\r\n}\r\n\r\nexport default ViewSchedule;","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport ViewTraining from './view/ViewTraining';\r\nimport ViewSchedule from './view/ViewSchedule';\r\n// import QuillReactTextEditor from './richTextEditing/QuillReactEditor';\r\nimport TextEditorReactQuill from '../basicComponents/richTextEditing/TextEditorReactQuill';\r\n\r\n\r\n// export let planViewDefaultContext = {};\r\n// export const planViewContext = React.createContext(planViewDefaultContext);\r\nexport const planViewContext = React.createContext();\r\n\r\n\r\nconst ViewPushupPlan = ({ match: { params }, location: { state }, history }) => {\r\n  console.log(\"------view pushup plan------\");\r\n  const [showNotes, setShowNotes] = React.useState(false);\r\n  let planLinks = { type: params.type, id: params.ID };\r\n  const { user, publicPlans } = React.useContext(PushUpsContext);\r\n  let personalPlans = user ? user.pushupPlans : null;\r\n\r\n  // console.log(\"params: \", params);\r\n  // console.log(\"state: \", state);\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 1\");\r\n  let plan;\r\n  let repsAsPercentages;\r\n  let maxReps = { reps: 0, source: 'none' };\r\n  let percentages;\r\n  if (state) { plan = state.plan } //=plan from url\r\n  else if (user) { //get plan from user:\r\n    if (planLinks.type === 'finished') {\r\n      plan = personalPlans.personalFinished.find(plan => plan._id === planLinks.id);\r\n    } else if (planLinks.type === 'public' && publicPlans) {\r\n      plan = publicPlans.find(plan => plan._id === planLinks.id);\r\n    } else if (planLinks.type === 'inDevelopment') {\r\n      plan = personalPlans.personal.find(plan => plan._id === planLinks.id);\r\n    }\r\n  }\r\n\r\n  //sort max reps if plan as %\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 2\");\r\n\r\n  // console.log(\"plan just before %: \", plan);\r\n\r\n  if (plan && plan.repsAsPercentages) {\r\n    console.log(\"PLAN AS %\");\r\n    repsAsPercentages = true;\r\n    if (user.pushupPlans.current && user.pushupPlans.current.assessments.initialAssessmentID) {\r\n      maxReps.reps = user.assessments.find(ass => ass._id === user.pushupPlans.current.assessments.initialAssessmentID).reps;\r\n      maxReps.source = 'initial';\r\n      // console.log(\"MAX REPS from INIT ASS\",maxReps);\r\n    } else if (user.assessments && user.assessments.length > 0) {\r\n      maxReps.reps = user.assessments[0].reps;\r\n      maxReps.source = 'latest';\r\n    }\r\n    percentages = { repsAsPercentages, maxReps }\r\n  }\r\n\r\n\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 3\");\r\n\r\n  if (!plan) return (<p>loading data...</p>);\r\n  const { name, trainings, schedule } = plan;\r\n\r\n  // \r\n  const adjustPlan = () => {\r\n    console.log(\"adjust\");\r\n    history.push({\r\n      pathname: `/pushups/trainingPlans/adjustPersonal/N/${plan._id}`,\r\n      state: {\r\n        plan //i am not going to use right now\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  // console.log(\"percentages: \", percentages);\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 4\");\r\n\r\n  return (\r\n    <div>\r\n      <planViewContext.Provider value={{ percentages, showNotes }}>\r\n        {plan.personal === 'yes-only' && <button style={{ display: 'block', width: '80%', margin: '10px auto' }} onClick={adjustPlan}>Adjust plan</button>}\r\n        <h1>{name}</h1>\r\n\r\n        {/* {plan.description && */}\r\n        {/* <div>        {plan.description}      </div>} */}\r\n        <h5>Summary</h5>\r\n        {(plan.summary) && <TextEditorReactQuill initialValue={plan.summary} hideToolbar />}\r\n        <h5>Description</h5>\r\n        {(plan.description || plan.descriptionRich) && <TextEditorReactQuill initialValue={plan.descriptionRich ? plan.descriptionRich : plan.description} hideToolbar />}\r\n        {percentages && <div>\r\n          <h3>% usage</h3>\r\n          <p> - how % are used ... explain here, example here; what is used as 100 also here - exandable button?</p>\r\n        </div>}\r\n\r\n        <div style={{ padding: '10px' }}>\r\n          <h3>Trainings</h3>\r\n          <button onClick={() => setShowNotes((showNotes) => !showNotes)}>Show/Hide Notes</button>\r\n          {trainings.map((training, i) => <ViewTraining training={training} number={i + 1} key={i} percentages={percentages} showNotes={showNotes} />)}\r\n        </div>\r\n\r\n        <ViewSchedule schedule={schedule} />\r\n\r\n      </planViewContext.Provider>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(ViewPushupPlan);","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PushUpsContext from '../state/PushUpsContextState';\r\nimport { postJsonDataUrlAfterAPIpushups } from '../../../functions/postJsonData';\r\nimport CounterAllIn from '../basicComponents/CounterAllIn';\r\nimport { SLink } from '../../../App';\r\n\r\n\r\n\r\n\r\nconst PublishPushupPlan = ({ history, match }) => {\r\n  let { user, updateUser, publicPlans, updatePublicPlans } = React.useContext(PushUpsContext);\r\n  const [publicPlansNames, setPublicPlansNames] = React.useState(null);\r\n\r\n  //setting up recommended initial reps locally\r\n  const [initialMaxReps, setInitialMaxReps] = React.useState({ reps: 20, rangeAsPercentage: 20, rangeAsReps: [18, 22] });\r\n  React.useEffect(() => {\r\n    let rangeAsReps = [0, 0];\r\n    let max = initialMaxReps.reps;\r\n    let range = initialMaxReps.rangeAsPercentage;\r\n    rangeAsReps[0] = Math.round(max - max * range / 100);\r\n    rangeAsReps[1] = Math.round(max + max * range / 100);\r\n    setInitialMaxReps((v) => ({ ...v, rangeAsReps }));\r\n  }, [initialMaxReps.reps, initialMaxReps.rangeAsPercentage]);\r\n  console.log(initialMaxReps);\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (publicPlans) {\r\n      let publicPlansNamesSupportVar = publicPlans.map(publicPlan => publicPlan.name);\r\n      setPublicPlansNames(publicPlansNamesSupportVar);\r\n      // console.log(\"publicPlansNames: \", publicPlansNames);\r\n    }\r\n  }, [publicPlans]);\r\n\r\n  React.useEffect(() => {\r\n    // let plan = user ? user.pushupPlans.personalFinished[positionFrom0] : undefined;\r\n    let userReps = (user && user.assessments && user.assessments.length > 0) ? user.assessments[0].reps : undefined;\r\n    if (userReps) setInitialMaxReps(v => ({ ...v, reps: userReps }));\r\n  }, [user]);\r\n\r\n\r\n  let positionFrom0 = match.params.positionFrom0;\r\n  console.log(\"PublishPushupPlan element loaded \", publicPlans);\r\n  const buttonActionPublishPlan = async () => {\r\n\r\n    if (user) {\r\n      let planSummary = user.pushupPlans.personalFinished[positionFrom0].summary;\r\n      let planDescription = user.pushupPlans.personalFinished[positionFrom0].description;\r\n      let planDescriptionRich = user.pushupPlans.personalFinished[positionFrom0].descriptionRich;\r\n      // console.log(\"plan.description: \", plan.description);\r\n      if (((planDescription === undefined || planDescription === null || planDescription === '')\r\n        && (planDescriptionRich === undefined || planDescriptionRich === null || planDescriptionRich === ''))\r\n        || (planSummary === undefined || planSummary === null || planSummary === '')) {\r\n        // history.push('/pushups/trainingPlans');\r\n        alert('Plan has to have \"Summary\" and \"Description\" to be publishable. (Duplicate this plan, add summary/description to it and publish that duplicate.');\r\n        history.push('/pushups/trainingPlans');\r\n        return;\r\n      }\r\n    }\r\n\r\n    //check if name is unique -search through all public names. if this one exists within\r\n    if (publicPlansNames) {//=once names were loaded from context...\r\n      let thisPlanName = user.pushupPlans.personalFinished[positionFrom0].name;\r\n      console.log(\"thisPlanNameS: \", publicPlansNames);\r\n      console.log(\"thisPlanName: \", thisPlanName);\r\n      let thisNameExistsAlreadySupportVar = publicPlansNames.find(nameInDb => thisPlanName === nameInDb);\r\n      console.log(\"thisNameExistsAlreadySupportVar: \", thisNameExistsAlreadySupportVar);\r\n      if (thisNameExistsAlreadySupportVar) {\r\n        console.log(\"love\");\r\n        // history.push('/pushups/trainingPlans');\r\n        alert('this name exists already. Duplicate this plan and change the name.');\r\n        history.push('/pushups/trainingPlans');\r\n        return;\r\n      }\r\n    }\r\n    console.log(\"PUBLISHING PLAN!!\");\r\n    let data = await postJsonDataUrlAfterAPIpushups('/publishPlan', { positionFrom0, initialMaxReps });\r\n    updateUser({ ...data.user });\r\n    updatePublicPlans([...data.plans]);\r\n    history.push('/pushups/trainingPlans');\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      {/* <SLink to='/pushups/trainingPlans'>Plans</SLink>  link to go back to the plans */}\r\n      <h1>Publish pushup plan...</h1>\r\n      <div>\r\n        <h3>Specify target group:</h3>\r\n        <div>How many reps should be able to do typical user of your plan? \r\n        <br />\r\n        {/* Initial max reps (average): */}\r\n        <CounterAllIn settings={[1, 5, (newValue) => setInitialMaxReps((r) => ({ ...r, reps: newValue })), initialMaxReps.reps, undefined, undefined, 1, 1000]} />\r\n          {/* <br /> */}\r\n        {/* (Using your current max as default value.) */}\r\n        </div>\r\n        <div>\r\n          Set some reps range:<br/>\r\n          <CounterAllIn settings={[1, 5, (newValue) => setInitialMaxReps((r) => ({ ...r, rangeAsPercentage: newValue })), initialMaxReps.rangeAsPercentage, '%', '', 0, 1000]} />\r\n        {/* (Recommended about 20%) */}\r\n        </div>\r\n        {/* <div>Initial max reps range: <CounterAllIn settings={[0, 0,(newValue)=> setInitialMaxReps((r)=>({...r,reps:newValue})), initialMaxReps.reps, undefined, undefined, 1, 1000]} /></div> */}\r\n        {/* <h4>Initial max reps range: from </h4> */}\r\n        <h4>This plan will be recommended to users who can do between {initialMaxReps.rangeAsReps[0]} and {initialMaxReps.rangeAsReps[1]} reps.</h4>\r\n      </div>\r\n      <p>Finished Plan in Array position (from0): {positionFrom0}.</p>\r\n      <button onClick={buttonActionPublishPlan}>Publish</button>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(PublishPushupPlan);","import React from 'react';\r\n\r\nconst Intro = () => {\r\n  return (\r\n    <div>\r\n      <h1>Intro</h1>\r\n      <h3>What</h3>\r\n      <p>This app is designed to help you improve your Pushups REPS (by using tested prep plans)</p>\r\n      <h3>Why</h3>\r\n      <h3>How</h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Intro;","import React from 'react';\r\n// import PushUpsContext from '../../state/PushUpsContextState';\r\nimport PushUpsContext from './state/PushUpsContextState';\r\n\r\n\r\nconst Community = () => {\r\n  let { user, updateUser, publicPlans, allUsers } = React.useContext(PushUpsContext);\r\n  return (\r\n    <div>\r\n      <h1>Community</h1>\r\n      <p>Hopefully, once...</p>\r\n      <h3>Existing users:</h3>\r\n      {allUsers ? allUsers.names.map((user,i) => <p key={i}>{user.name}</p>):<p>loading...</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Community;","import React, { Component } from 'react';\r\nimport UserStatus from './UserStatus';\r\nimport PushUpPlans from './PushUpPlans';\r\nimport globalStyles from './styles/globalStyles2.scss'\r\nimport { Route, Switch, withRouter, Link } from 'react-router-dom';\r\nimport PrepareTraining from './Training/PrepareTraining';\r\nimport PushupsHome from './Home';\r\nimport PushUpsContext  // , { pushUpsState }\r\n  from './state/PushUpsContextState';\r\nimport MaxRepsTest from './assessment/MaxRepsTest';\r\n// import { SLink } from '../../App'\r\nimport History from './History'\r\nimport SignUpInOut from './SignUpInOut';\r\nimport AdjustPersonalPushupPlan from './personalPushupPlans/AdjustPersonalPushupPlan';\r\nimport CreatingPersonalPushupPlan from './personalPushupPlans/CreatingPersonalPushupPlan';\r\nimport RunTraining from './Training/RunTraining';\r\nimport ShowSetToDo from './Training/ShowSetToDo';\r\nimport PaceMaker from './assessment/PaceMaker';\r\nimport PrepareTraining2 from './Training/PrepareTraining';\r\n\r\nimport Sidebar from \"react-sidebar\";\r\nimport SideBarContent from './SideBarContent';\r\nimport FinishPersonalPushupPlan from './personalPushupPlans/FinishPersonalPushupPlan';\r\nimport ViewPushupPlan from './pushupPlans/ViewPushupPlan';\r\nimport PublishPushupPlan from './personalPushupPlans/PublishPushupPlan';\r\nimport { postJsonDataUrlAfterAPIgeneralPushups } from '../../functions/postJsonData';\r\nimport styled from 'styled-components';\r\nimport Intro from './Intro';\r\nimport Community from './Community';\r\n\r\nexport const SLink = styled(Link)`\r\nmargin:auto 5px;\r\nbackground-color:orange;\r\npadding: 10px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n  /* font-size:20px; */\r\n}\r\n/* transition: background-color, color; */\r\ntransition-duration: 0.25s;\r\n`\r\n\r\n\r\n//stitch:\r\n// import { StitchAuthProvider, useStitchAuth } from \"./stitch/ReactStitchAuth\";\r\n\r\nconst PushupsMain = ({ location: { pathname } }) => {\r\n  //React Context\r\n  // let context2 = useContext(PushUpsContext);\r\n  // console.log(\"XXXXXXXXXXXXXXXXXXXXXX\");\r\n\r\n  ///get public plans\r\n  // const [publicPlans, setPublicPlans] = React.useState(null);\r\n  let { publicPlans, updatePublicPlans } = React.useContext(PushUpsContext);\r\n  let { allUsers, updateAllUsers } = React.useContext(PushUpsContext);\r\n  const pwaLaunchedInInfo = React.useRef(null);\r\n  const pwaBeforeInstallFired = React.useRef(null);\r\n  const pwaInstalled = React.useRef(null);\r\n  const [pwaReadyToInstall, setPwaReadyToInstall] = React.useState(null);\r\n  const [pwaDisplayMode, setPwaDisplayMode] = React.useState('?view?')\r\n  const [htmlInfo, setHtmlInfo] = React.useState(`${(\"serviceWorker\" in navigator && \"PushManager\" in window) ? 'N.supported' : 'N.NOT supported'}` + ` ${'N.:' + Notification.permission}`);\r\n\r\n  // const [pwaReadyToInstallTest, setPwaReadyToInstallTest] = React.useState('a');\r\n\r\n\r\n  //////PWA \"save app\" handling-----------------------PWA START\r\n  //install PWA prompt/event\r\n  let deferredPrompt;\r\n  const dealWithPWAPrompt = (e) => {\r\n    // Prevent the mini-infobar from appearing on mobile\r\n    e.preventDefault();\r\n    deferredPrompt = e;\r\n    setPwaReadyToInstall(e);\r\n    // setPwaReadyToInstallTest('b');\r\n    // alert(\"beforeinstallprompt event fired, e(vent) shall be saved\");\r\n    // pwaBeforeInstallFired.current.innerHTML = `i.e.Fired`;\r\n    console.log(\"PWA PWA PWA PWA PWA beforeinstallprompt event fired, e(vent) shall be saved\");\r\n    // Stash the event so it can be triggered later.\r\n\r\n    // Update UI notify the user they can install the PWA\r\n    // showInstallPromotion();\r\n  }\r\n  window.addEventListener('beforeinstallprompt', dealWithPWAPrompt);\r\n  // app installed event\r\n  const dealWithAppWasInstalledEvent = e => {\r\n    // alert('PWA was installed! well done 👍 :-).');\r\n    pwaInstalled.current.innerHTML = `installed`;\r\n    console.log('PWA was installed! well done 👍 :-).');\r\n  }\r\n  window.addEventListener('appinstalled', dealWithAppWasInstalledEvent);\r\n  //app (PWA) launched from tab vs standalone event\r\n  const registerHowAppWasLaunched = (e) => {\r\n    // console.log(\"---------------------registerHowAppWasLaunched\");\r\n    let displayMode = 'tab';\r\n    if (navigator.standalone) {\r\n      displayMode = 'app-ios';\r\n    }\r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      displayMode = 'app';\r\n    }\r\n    // Log launch display mode to analytics\r\n    // alert(`DISPLAY_MODE_LAUNCH: ${displayMode}`);\r\n    // pwaLaunchedInInfo.current.innerHTML = `${displayMode}`;\r\n    // pwaLaunchedInInfo.current.innerHTML = `xx`;\r\n    setPwaDisplayMode(displayMode);\r\n    // console.log('DISPLAY_MODE_LAUNCH:', displayMode);\r\n\r\n    //Track when the display mode changes\r\n    // window.matchMedia('(display-mode: standalone)').addListener((evt) => {\r\n    //   let displayMode = 'browser tab';\r\n    //   if (evt.matches) {\r\n    //     displayMode = 'standalone';\r\n    //   }\r\n    //   // Log display mode change to analytics\r\n    //   alert(`DISPLAY_MODE_CHANGED: ${displayMode}`);\r\n    //   console.log(`DISPLAY_MODE_CHANGED: ${displayMode}`);\r\n    // });\r\n\r\n  }\r\n  window.addEventListener('DOMContentLoaded', registerHowAppWasLaunched);\r\n  //button to install PWA app\r\n  // buttonInstall.addEventListener('click', (e) => {\r\n  const installPwaButtonClicked = () => {\r\n    // Hide the app provided install promotion\r\n    // hideMyInstallPromotion();\r\n    // Show the install prompt\r\n    if (pwaReadyToInstall === null) {\r\n      alert('Event not available anymore');\r\n      return;\r\n    }\r\n    pwaReadyToInstall.prompt();\r\n    // Wait for the user to respond to the prompt\r\n    pwaReadyToInstall.userChoice.then((choiceResult) => {\r\n      if (choiceResult.outcome === 'accepted') {\r\n        console.log('User accepted the install prompt');\r\n      } else {\r\n        console.log('User dismissed the install prompt');\r\n      }\r\n      setPwaReadyToInstall(null);\r\n    });\r\n  };\r\n  //-----------------------------------------------------PWA END\r\n\r\n  //.............................PWA push notifications START\r\n  // setHtmlInfo(Notification.permission);\r\n  const checkPWAWebPushNotifications = async () => {\r\n    console.log(\"click\");\r\n    // alert(`${\"serviceWorker\" in navigator && \"PushManager\" in window}`);\r\n    // alert(\"serviceWorker\" in navigator && \"PushManager\" in window);\r\n    // let xx = await Notification.requestPermission();\r\n    Notification.requestPermission()\r\n      .then(xx => {\r\n        console.log(xx);\r\n        setHtmlInfo(xx);\r\n        // alert(xx);  \r\n      })\r\n\r\n  }\r\n\r\n  function sendNotification(title = \"New Product Available\", text = \"Take a look at this brand new t-shirt!\") {\r\n    // const img = \"/PushupMediumSquare192.png\";\r\n    const img = \"PushupMediumSquare192.png\";\r\n\r\n    // const text = \"Take a look at this brand new t-shirt!\";\r\n    // const title = \"New Product Available\";\r\n    const options = {\r\n      body: text,\r\n      // icon: \"/images/jason-leung-HM6TMmevbZQ-unsplash.jpg\",\r\n      icon: \"PushupMediumSquare192.png\", //otherwise bell icon i guess\r\n      vibrate: [200, 100, 200],\r\n      tag: \"new-product\",\r\n      image: img,\r\n      badge: \"https://spyna.it/icons/android-icon-192x192.png\",\r\n      actions: [{ action: \"Detail\", title: \"View\", icon: \"https://via.placeholder.com/128/ff0000\" }]\r\n    };\r\n    navigator.serviceWorker.ready.then(function (serviceWorker) {\r\n      serviceWorker.showNotification(title, options);\r\n    });\r\n  }\r\n\r\n  const showPWAWebPushNotification = () => {\r\n    // console.log(\"MMA0: \", navigator);\r\n    console.log(\"MMA: \", navigator.serviceWorker);\r\n    // console.log(\"MMA2: \", 'serviceWorker' in navigator);\r\n\r\n    //following 2 lines bring sme positive result but .ready will never stop waiting, while .getRegistration can return undefined after short while\r\n    navigator.serviceWorker.ready.then(sw => {\r\n      console.log(\"MMB1\", sw);\r\n      sw.showNotification('Hi2.1');\r\n    });\r\n    // navigator.serviceWorker.getRegistration()\r\n    //   .then(sw => {\r\n    //     console.log(\"MMB2\", sw);\r\n    //     if (sw) sw.showNotification('Hi');\r\n    //   })\r\n    sendNotification();\r\n  }\r\n  //.............................PWA push notifications END\r\n\r\n\r\n  // console.log(\"PUBLIC LANS: \", publicPlans);\r\n  React.useEffect(() => {\r\n    const doAsAsync = async () => {\r\n      // console.log(\"P app STARTED\");\r\n      try {\r\n        // console.log(\"REQUESTING ALL -PLANS- FROM SERVER\");\r\n        // let publicPlans = await postJsonDataUrlAfterAPIgeneralPushups('/getPublicPlan_s', {});\r\n        let publicPlansHereLocally = postJsonDataUrlAfterAPIgeneralPushups('/getPublicPlan_s', {});\r\n        // let publicPlans;\r\n        // console.log(\"POST - publicPlans received from Server: \", publicPlans);\r\n\r\n\r\n        // console.log(\"REQUESTING (All) -USERS- FROM SERVER\");\r\n        let allUsersHereLocally = postJsonDataUrlAfterAPIgeneralPushups('/getAllUsers', {});\r\n        // let publicPlans;\r\n        // console.log(\"POST - publicPlans received from Server: \", publicPlans);\r\n        // updatePublicPlans([...publicPlans]);\r\n\r\n\r\n        publicPlansHereLocally = await publicPlansHereLocally;\r\n        updatePublicPlans([...publicPlansHereLocally]);\r\n        allUsersHereLocally = await allUsersHereLocally;\r\n        updateAllUsers({ ...allUsersHereLocally });\r\n\r\n        // updateUser({ ...updatedUser });\r\n      } catch (err) { console.log(err); };\r\n    }\r\n    doAsAsync();\r\n\r\n\r\n\r\n\r\n    return () => {\r\n      // window.removeEventListener('beforeinstallprompt', dealWithPWAPrompt);\r\n      // window.removeEventListener('appinstalled', dealWithAppWasInstalledEvent);\r\n      // window.removeEventListener('DOMContentLoaded', registerHowAppWasLaunched); //one more event listener is inside if this f.\r\n\r\n    }\r\n  }, []);\r\n\r\n\r\n\r\n  ///Stitch\r\n  // const { isLoggedIn, actions } = useStitchAuth();\r\n  // const stitchAuth = useStitchAuth();\r\n  // console.log(\"STITCH: is logged in:\", isLoggedIn);\r\n  // console.log(\"useStitchAuth Response: \", stitchAuth);\r\n\r\n  const [sideBarOpen, setSideBarOpen] = React.useState(false);\r\n  return (\r\n    <>\r\n      {/* menu-header */}\r\n      <div style={{ backgroundColor: 'black', paddingBottom: '2px', display: 'flex', justifyContent: 'space-between', position: 'sticky', top: '0', zIndex: '1000' }}>\r\n        {/* {pathname === '/pushups' ? null : <SLink style={{ float: 'left' }} to='/pushups'>Main Menu</SLink>} */}\r\n\r\n        {/* Sidebar */}\r\n        {pathname === '/pushups' ? null\r\n          : <Sidebar\r\n            sidebar={<b>\r\n              <SideBarContent pathname={pathname} setSideBarOpen={setSideBarOpen} />\r\n            </b>}\r\n            open={sideBarOpen}\r\n            onSetOpen={setSideBarOpen}\r\n            styles={{\r\n              // display:\"inline\",\r\n              sidebar: {\r\n                position: \"fixed\",\r\n                background: \"yellow\",\r\n                maxWidth: \"80vw\",\r\n                transition: \"transform .1s ease-out\",\r\n                WebkitTransition: \"-webkit-transform .1s ease-out\",\r\n                background: \"lightGray\",\r\n              },\r\n              root: {\r\n                position: \"undefined\",\r\n                // background: \"pink\",\r\n                display: \"inline\",\r\n                float: 'left'\r\n              },\r\n              content: {\r\n                position: \"undefined\",\r\n                top: \"undefined\",\r\n                left: \"undefined\",\r\n                right: \"undefined\",\r\n                bottom: \"undefined\",\r\n                transition: \"left .1s ease-out, right .1s ease-out\",\r\n                display: \"inline\",\r\n                float: 'left'\r\n              },\r\n              overlay: {\r\n                transition: \"opacity .1s ease-out, visibility .1s ease-out\",\r\n                // display: \"inline !important\",\r\n              }\r\n            }}\r\n          >\r\n            {pathname === '/pushups/runMyTraining' &&\r\n              <button\r\n                onClick={() => setSideBarOpen(true)}\r\n                style={{ padding: '1rem', backgroundColor: \"purple\" }}\r\n              >Options\r\n              </button>}\r\n          </Sidebar>\r\n        }\r\n\r\n        {/* navigation buttons wrapper */}\r\n        <div style={{ display: 'flex', justifyContent: 'space-around' }}>\r\n          {/* <Route path='/pushups/trainingPlans/' render={() => <SLink to='/pushups/trainingPlans'>Plans</SLink>} /> */}\r\n          {/* <Route path='/pushups/trainingPlans/publish' render={() => <SLink to='/pushups/trainingPlans'>Plans</SLink>} /> */}\r\n          {/* <Route path='/pushups/trainingPlans/view' render={() => <SLink to='/pushups/trainingPlans'>Plans</SLink>} /> */}\r\n\r\n          {/* PWA */}\r\n          {/* <p style={{ color: 'yellow' }}>{pwaReadyToInstallTest}</p> */}\r\n          <p ref={pwaBeforeInstallFired} style={{ color: `${pwaReadyToInstall === null ? 'red' : 'lightGreen'}`, paddingRight: '3px' }}>e</p>\r\n          {pwaReadyToInstall != null && <button style={{ backgroundColor: 'purple' }} onClick={installPwaButtonClicked}>Install</button>}\r\n          <p ref={pwaInstalled} style={{ color: 'orange', paddingRight: '3px' }}></p>{/* //we don't know if app was installed(?)*/}\r\n          {/* <p ref={pwaLaunchedInInfo} style={{ color: 'white' }}>?view?</p> */}\r\n          <p ref={pwaLaunchedInInfo} style={{ color: 'white' }}>{pwaDisplayMode}</p>\r\n\r\n          {/* PWA Push Notifications */}\r\n          {Notification.permission === 'default' &&\r\n            <button onClick={checkPWAWebPushNotifications} style={{ backgroundColor: 'yellow' }}>Notifications</button>}\r\n          {Notification.permission === 'granted' &&\r\n            <button onClick={showPWAWebPushNotification} style={{ backgroundColor: 'yellow' }}>Show N.</button>}\r\n          <p style={{ color: 'white', paddingLeft: '4px' }}>{htmlInfo}</p>\r\n\r\n          {pathname.includes('/pushups/trainingPlans/') ? <SLink to='/pushups/trainingPlans'>Plans</SLink> : null}\r\n\r\n          {pathname === '/pushups' ? null : <SLink to='/pushups'>Main Menu</SLink>}\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n\r\n      <Route exact path='/' component={UserStatus} />\r\n      {/* <Route exact path='/pushups' component={UserStatus} /> */}\r\n      <Route path='/pushups' component={UserStatus} />\r\n\r\n\r\n      {/* <UserStatus /> */}\r\n      {/* <button onClick={actions.handleLogout}>Stitch anonym. logout</button>\r\n      <button onClick={() => actions.handleLogin(\"anonymous\")}>Stitch anonym. login</button>\r\n      <button provider=\"google\" onClick={() => actions.handleLogin(\"google\")}>         Log In with Google      </button> */}\r\n\r\n      <Switch>\r\n\r\n        <Route exact path='/' component={PushupsHome} />\r\n        <Route exact path='/pushups' component={PushupsHome} />\r\n        <Route exact path='/pushups/Sign-upLog-in' component={SignUpInOut} />\r\n\r\n        <Route exact path='/pushups/intro' component={Intro} />\r\n        <Route exact path='/pushups/trainingPlans' component={PushUpPlans} />\r\n        <Route path='/pushups/trainingPlans/createPersonal' component={CreatingPersonalPushupPlan} />\r\n        {/* <Route path='/pushups/trainingPlans/adjustPersonal' component={AdjustPersonalPushupPlan} /> */}\r\n        {/* following 2 can't be swapped as it would not work as each is using different url params */}\r\n        <Route path='/pushups/trainingPlans/adjustPersonal/:positionFrom0/:id' component={AdjustPersonalPushupPlan} />\r\n        <Route path='/pushups/trainingPlans/adjustPersonal/:positionFrom0' component={AdjustPersonalPushupPlan} />\r\n\r\n        <Route path='/pushups/trainingPlans/finishPersonal/:positionFrom0' component={FinishPersonalPushupPlan} />\r\n        <Route path='/pushups/trainingPlans/publish/:positionFrom0' component={PublishPushupPlan} />\r\n        <Route path='/pushups/trainingPlans/view/:type/:ID' component={ViewPushupPlan} />\r\n\r\n        <Route exact path='/pushups/maxRepsTest' component={MaxRepsTest} />\r\n        <Route exact path='/pushups/paceMaker' component={PaceMaker} />\r\n\r\n        <Route exact path='/pushups/startMyTraining' component={PrepareTraining2} />\r\n        <Route exact path='/pushups/runMyTraining' component={RunTraining} />\r\n        <Route exact path='/pushups/showSetToDo' component={ShowSetToDo} />\r\n\r\n        <Route exact path='/pushups/userProfile' component={History} />\r\n        <Route exact path='/pushups/history' component={History} />\r\n        <Route exact path='/pushups/community' component={Community} />\r\n\r\n        {/* <Route path='/pushups/trainingPlans/viewAdjustPersonal' component={ViewAdjustPersonalPushupPlan} /> */}\r\n\r\n        {/* <Route component={FirstPage} /> catch all other routes */}\r\n      </Switch>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nconst PushupsMainWithRouter = withRouter(PushupsMain);\r\n\r\nclass PushupsContextsComponent extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      user: null,\r\n      info: 'Pushups context',\r\n      // reRender: 0,\r\n      updateUser: (newUser) => {\r\n        this.setState({ ...this.state, user: newUser }, async () => {\r\n          console.log(\"'Pushup context' - USER - updated to \", this.state.user);\r\n          console.log(\"whole 'Pushup context' now: \", this.state);\r\n        });\r\n      },\r\n      publicPlans: null,\r\n      updatePublicPlans: (updatedPlans) => {\r\n        this.setState({ ...this.state, publicPlans: updatedPlans }, async () => {\r\n          console.log(\"'Pushup context' - PUBLIC PLANS - updated to \", this.state.publicPlans);\r\n          console.log(\"whole 'Pushup context' now: \", this.state);\r\n\r\n        });\r\n      },\r\n      allUsers: null,\r\n      updateAllUsers: (updatedUsers) => {\r\n        this.setState({ ...this.state, allUsers: updatedUsers }, async () => {\r\n          console.log(\"'Pushup context' - ALL USERS - updated to \", this.state.allUsers);\r\n          console.log(\"whole 'Pushup context' now: \", this.state);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      // <PushUpsContext.Provider value={pushUpsState}>\r\n      <PushUpsContext.Provider value={this.state}>\r\n        <PushupsMainWithRouter />\r\n      </PushUpsContext.Provider>\r\n    )\r\n  }\r\n}\r\n\r\n// export default withRouter(PushupsContexts);\r\nexport default PushupsContextsComponent;\r\n\r\n\r\n\r\n\r\n\r\n// export default Pushups;","import React, { useState } from 'react';\r\n\r\nconst CwUseState = () => {\r\n  const [stateH, setStateH] = useState({ counter: 0 })\r\n  const add1 = () => {\r\n    setStateH({ counter: stateH.counter + 1 });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h3>UseState component:</h3>\r\n      <button onClick={add1}> Add 1 </button>\r\n      <p>counter: <span>{stateH.counter}</span></p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CwUseState;","import React from 'react';\r\nimport CwUseState from './CwUseState';\r\n\r\nconst States = () => {\r\n  return (\r\n    <div>\r\n       <h1>Components with states</h1>\r\n        <CwUseState></CwUseState>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default States;\r\n","// creates CSS classes serverState which changes backgrounds, available everywhere\r\nimport React from 'react';\r\n\r\nlet nameOfServerStateCssClass = 'serverState';\r\n\r\nclass WakeUpserverState extends React.Component {\r\n  // constructor(props) {\r\n  //   super(props);\r\n  // }\r\n\r\n  changeServerStateSubClassTo = (subClassName) => {\r\n    // console.log(\"subclass: \", subClassName, `${nameOfServerStateCssClass}${subClassName}`);\r\n    document.querySelectorAll(`.${nameOfServerStateCssClass}`).forEach(El => El.setAttribute('class', `${nameOfServerStateCssClass} ${nameOfServerStateCssClass}${subClassName}`));\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.changeServerStateSubClassTo('Activating');\r\n    // if (document.querySelector(`.${nameOfServerStateCssClass}On`)) return;\r\n    fetch(this.props.url)\r\n      .then(res => {\r\n        return res.json()\r\n      })\r\n      .then(\r\n        (result) => {\r\n          this.changeServerStateSubClassTo('On');\r\n        },\r\n        (error) => {\r\n          console.log(\"Error in fetch:\", error);\r\n          this.changeServerStateSubClassTo('Err');\r\n        }\r\n      )\r\n  }\r\n\r\n  render(props) {\r\n    let cssContent = `\r\n      .serverState{font-weight:bold;}\r\n      .serverStateOn{color:green;}\r\n      .serverStateActivating{color:yellow;}\r\n      .serverStateOff{color:grey;}\r\n      .serverStateErr{color:red;}\r\n    `;\r\n    return (\r\n      <style>{cssContent}</style >\r\n    );\r\n  }\r\n}\r\n\r\nexport default WakeUpserverState;","import React from 'react';\r\n// import { Howl, Howler } from 'howler';\r\n\r\nconst Sounds = () => {\r\n  const context = new window.AudioContext();\r\n\r\n  function playFile(filepath) {\r\n    // see https://jakearchibald.com/2016/sounds-fun/\r\n    // Fetch the file\r\n    fetch(filepath)\r\n      // Read it into memory as an arrayBuffer\r\n      .then(response => response.arrayBuffer())\r\n      // Turn it from mp3/aac/whatever into raw audio data\r\n      .catch(err => console.log(\"Miro-error: \", err))\r\n\r\n      .then(arrayBuffer => context.decodeAudioData(arrayBuffer))\r\n      .catch(err => console.log(\"Miro-error: \", err))\r\n\r\n      .then(audioBuffer => {\r\n        // Now we're ready to play!\r\n        const soundSource = context.createBufferSource();\r\n        soundSource.buffer = audioBuffer;\r\n        soundSource.connect(context.destination);\r\n        soundSource.start();\r\n      })\r\n      .catch(err => console.log(\"Miro-error: \", err));\r\n  }\r\n\r\n\r\n\r\n  const successClick = () => {\r\n    /////CSS tricks\r\n    // playFile('https://s3-us-west-2.amazonaws.com/s.cdpn.io/3/success.mp3');\r\n    playFile('Button1.m4a');\r\n\r\n    ////stack overflow\r\n    // var audio = new Audio('C:\\Users\\Miros\\Documents\\GitHub\\MERN\\reactAndExpressForHeroku\\client-react-project\\src\\Components\\sounds\\files\\facebook\\Button1.m4a');\r\n    // audio.play();\r\n\r\n    ///////HOWEL library\r\n    // var sound = new Howl({\r\n    //   src: ['./files/facebook/Button1.m4a']\r\n    // });\r\n    // sound.play();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Sounds</h1>\r\n      <button onClick={successClick} >Play Success Sound</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sounds;","import React from 'react';\r\n// import { Howl, Howler } from 'howler';\r\nimport useSound from 'use-sound';\r\n// import soundX from './files/facebook/Complete and Success/Complete 1.m4a'\r\nimport soundX from './files/facebook/Complete and Success/Complete 2.m4a'\r\n\r\nconst SoundsReact = () => {\r\n\r\n  const [playSound] = useSound(soundX);\r\n  const test = () => {\r\n    \r\n    console.log(\"hi\");\r\n    playSound();\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h1>Sounds</h1>\r\n      {/* <button onClick={playSound} >Play Sound</button> */}\r\n      <button onClick={test} >Play Sound</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SoundsReact;","//rsc  -> f.c.\r\nimport React from 'react';\r\nimport { Link, Route, Switch, HashRouter, withRouter,Redirect } from 'react-router-dom';\r\nimport './App.css';\r\n// import FirstPage from './Components/FirstPage'\r\nimport Playground from './Components/playground/Playground'\r\nimport APIPage from './Components/APIPage'\r\n// import Test from './Components/Test'\r\nimport styled from 'styled-components'\r\nimport TRpage from './Components/translate/TRpage'\r\n// import MongoDB from './Components/mongoDB/MongoDB'\r\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css'\r\nimport Pushups from './Components/pushups/Pushups'\r\nimport States from './Components/states/States'\r\n\r\n// import SignUp from './Components/mongoDB/components/SignUp'\r\n\r\n///stitch provider\r\n// import { StitchAuthProvider } from \"./Components/pushups/stitch/ReactStitchAuth\";\r\n\r\n\r\nimport WakeUpserverState from './Components/APIs/WakeUpServerCleaned';\r\nimport { urlRoot } from './globalState/globalVariables';\r\nimport Sounds from './Components/sounds/Sounds';\r\nimport SoundsReact from './Components/sounds/SoundsReact';\r\n\r\nconst SMenu = styled.div`\r\ndisplay: flex;\r\nflex-wrap:wrap;\r\njustify-content: center;\r\n\r\nalign-items: center;\r\nbackground-color: yellow;\r\n/* overflow:auto; */\r\n`\r\nexport const SLink = styled(Link)`\r\nmargin:10px;\r\nbackground-color:orange;\r\npadding: 3px;\r\nborder-radius:3px;\r\ntext-decoration:none;\r\ntext-align: center;\r\n&:hover{ \r\n  background-color:#996b15;\r\n  color:white;\r\n  text-decoration:none;\r\n  /* font-size:20px; */\r\n}\r\n/* transition: background-color, color; */\r\ntransition-duration: 0.25s;\r\n`\r\nfunction App({location:{hash}}) {\r\n  // console.log(\"history: \", hash.includes('#/'));\r\n  // console.log(\"history: \", (hash=='#/'));\r\n  return (\r\n    // div replaced to HAshRouter\r\n    <HashRouter basename='/' className=\"App\">\r\n\r\n      {/* <header className=\"App-header\">\r\n      </header> */}\r\n      {/* <Switch> */}\r\n      \r\n      \r\n      {/* <Route exact path='/pushups' component={Pushups} /> */}\r\n\r\n      {!hash.includes(\"#/\") && // to hide menu\r\n        <SMenu>\r\n          {/* <SLink to='/MERN-ReactForExpress/'>Home</SLink> */}\r\n          <SLink to='/'>Home</SLink>\r\n          <SLink to='/pageAPI'>Public API</SLink>\r\n          <SLink to='/pageTr'>Translate API</SLink>\r\n          <SLink to='/playground'>Playground</SLink>\r\n          {/* <SLink to='/mongoDB'>Mongo DB</SLink> */}\r\n          <SLink to='/states'>states-useless</SLink>\r\n          <SLink to='/pushups'>Pushups</SLink>\r\n          {/* <SLink to='/sounds'>Sounds</SLink> */}\r\n          <SLink to='/sounds/React'>Sounds in React</SLink>\r\n\r\n          <WakeUpserverState url={urlRoot + '/start'} />\r\n          <span style={{ textAlign: 'center', fontSize: '11px', border: '3px dotted gray' }}>\r\n            <div className='serverState'> Server-State</div>\r\n            <span>Environment:</span> <span style={{ color: 'red' }}> {process.env.NODE_ENV}</span>\r\n          </span>\r\n        </SMenu>}\r\n      {/* </Switch> */}\r\n      <Switch>\r\n        {/* <Route exact path='/' component={FirstPage} /> */}\r\n        <Route exact path='/'><Redirect to='/pushups'/></Route>\r\n        <Route exact path='/playground' component={Playground} />\r\n        <Route exact path='/pageAPI' component={APIPage} />\r\n        <Route exact path='/pageTr' component={TRpage} />\r\n        {/* <Route exact path='/mongoDB' component={MongoDB} /> */}\r\n        <Route exact path='/states' component={States} />\r\n        <Route exact path='/sounds' component={Sounds} />\r\n        <Route exact path='/sounds/React' component={SoundsReact} />\r\n        <Route path='/pushups' component={Pushups} />\r\n        {/* <Route component={FirstPage} /> catch all other routes */}\r\n      </Switch>\r\n      {/* <SignUp/> */}\r\n\r\n\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.0/8 are considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport function register(config) {\r\n  //MM added\r\n  if (!('serviceWorker' in navigator)) { console.log(\"MM: Service worker not supported on this browser/device.\"); }\r\n  //MM added end.\r\n\r\n  //MM001 change\r\n  // if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n  if ('serviceWorker' in navigator) { //MM to make it run in localhost too (just intuitive experiment)\r\n\r\n\r\n\r\n    console.log(\"SERVICE WORKER register setup running\");\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      console.log(\"SERVICE WORKER  won't work as PUBLIC_URL is on a different origin from what our page is served on.see https://github.com/facebook/create-react-app/issues/2374\");\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      // const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n      // MM001b\r\n\r\n      //frm https://medium.com/@seladir/how-to-implement-web-push-notifications-in-your-node-react-app-9bed79b53f34\r\n      const swFileName = process.env.NODE_ENV === 'production'\r\n        ? 'service-worker.js'\r\n        : 'custom-sw.js';\r\n      const swUrl = `${process.env.PUBLIC_URL}/${swFileName}`;\r\n\r\n      // let swUrl;\r\n      // if (process.env.NODE_ENV === 'production') {\r\n      //   swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n      // } else {\r\n      //   // swUrl = `${__dirname}/serviceWorker.js`;   //NONE working:-(\r\n      //   // swUrl = './serviceWorker.js';\r\n      //   // swUrl = '/serviceWorker.js';\r\n      //   swUrl = '/service-worker.js';\r\n      // }\r\n\r\n\r\n         if (isLocalhost) {\r\n        console.log(\"MM SW on LOCALHOST - check\");\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n\r\n\r\n\r\n\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  console.log(\"MM Valid sw found. registering it... (navigator:)\",  navigator)\r\n  navigator.serviceWorker\r\n    .register(swUrl)  //MM here sw is being registered\r\n    .then(registration => {\r\n      console.log(\"MM. sw was registered: \", registration);\r\n      // console.log(\"MM. navigatior now: \", navigator);\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  console.log(\"MM checking if sw is valid\");\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n\r\n      // console.log(\"MM we got some response\", response.status === 404,contentType != null);\r\n      console.log(\"MM sw is valid:\", !(response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)));\r\n\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { urlRoot } from './globalState/globalVariables';\r\nimport { postJsonDataUrlAfterAPIpushups, postJsonDataUrlAfterAPI } from './functions/postJsonData';\r\n\r\n\r\nconst myPublicValidKey = 'BByn6l9bvGGsFgaL8FPe_SDZfnI45uNbpipyPf0DT4RlmYMkEiImM2e3DBdxMVLHdT6q9o5EcWx6ykld7tR6CgA';\r\nconst convertedVapidKey = urlBase64ToUint8Array(myPublicValidKey);\r\n\r\nfunction urlBase64ToUint8Array(base64String) {\r\n  const padding = \"=\".repeat((4 - base64String.length % 4) % 4)\r\n  // eslint-disable-next-line\r\n  const base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\")\r\n\r\n  const rawData = window.atob(base64)\r\n  const outputArray = new Uint8Array(rawData.length)\r\n\r\n  for (let i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i)\r\n  }\r\n  return outputArray\r\n}\r\n\r\nasync function sendSubscription(subscription) {\r\n  //Miro section start\r\n  console.log(\"FETCH SUBSCRIPTION is about to start................................\");\r\n  // let ansFromServer1 = await postJsonDataUrlAfterAPIpushups('/testCORS', {});\r\n  // console.log(\"FETCH SUBSCRIPTION miro test f1. returned:\", ansFromServer1);\r\n\r\n  // let ansFromServer2 = await postJsonDataUrlAfterAPIpushups('/testCORS2', {});\r\n  // console.log(\"FETCH SUBSCRIPTION miro test f2. returned:\", ansFromServer2);\r\n\r\n  // let ansFromServer3 = await postJsonDataUrlAfterAPI('/testCORS3', {});\r\n  // console.log(\"FETCH SUBSCRIPTION miro test f3. returned:\", ansFromServer3);\r\n\r\n  // let ansFromServer4 = await postJsonDataUrlAfterAPI('/testCORS4', {});\r\n  // console.log(\"FETCH SUBSCRIPTION miro test f4. returned:\", ansFromServer4);\r\n\r\n\r\n  let ansFromServerS = await postJsonDataUrlAfterAPI('/notifications/subscribe', subscription);\r\n  console.log(\"FETCH SUBSCRIPTION miro test S. returned:\", ansFromServerS);\r\n  //Miro section end\r\n\r\n\r\n  // return fetch(`${urlRoot}/notifications/subscribe`, {\r\n  //   method: 'POST',\r\n  //   // body: { subscription: JSON.stringify(subscription) },\r\n  //   body: JSON.stringify(subscription),\r\n  //   headers: {\r\n  //     'Content-Type': 'application/json'\r\n  //   },\r\n  //   credentials: 'include'\r\n  // })\r\n}\r\n\r\nexport function subscribeUser() {\r\n  console.log(\"MMSS007 'subscribeUser' runnning\");\r\n  if ('serviceWorker' in navigator) {\r\n    console.log(\"MMSS007 'serviceWorker ready ? ? ?\");\r\n    navigator.serviceWorker.ready.then(function (registration) {\r\n      console.log(\"MMSS007 'serviceWorker ready\");\r\n\r\n      if (!registration.pushManager) {\r\n        console.log('MMSS007 Push manager unavailable.')\r\n        return\r\n      }\r\n\r\n      registration.pushManager.getSubscription().then(function (existedSubscription) {\r\n        if (existedSubscription === null) {\r\n          console.log('MMSS007 No subscription detected, make a request.')\r\n          registration.pushManager.subscribe({\r\n            applicationServerKey: convertedVapidKey,\r\n            userVisibleOnly: true,\r\n          }).then(function (newSubscription) {\r\n            console.log('MMSS007 New subscription added.')\r\n            sendSubscription(newSubscription)\r\n          }).catch(function (e) {\r\n            if (Notification.permission !== 'granted') {\r\n              console.log('MMSS007 Permission was not granted.')\r\n            } else {\r\n              console.error('MMSS007 An error ocurred during the subscription process.', e)\r\n            }\r\n          })\r\n        } else {\r\n          console.log('MMSS007 Existed subscription detected.')\r\n          sendSubscription(existedSubscription)\r\n        }\r\n      })\r\n    })\r\n      .catch(function (e) {\r\n        console.error('An error ocurred during Service Worker registration.', e)\r\n      })\r\n  }\r\n}","import React from 'react';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { subscribeUser } from '../src/subscription';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\nsubscribeUser();\r\n","module.exports = __webpack_public_path__ + \"static/media/Complete 2.2655ec0c.m4a\";","module.exports = __webpack_public_path__ + \"static/media/airHorn.95897491.mp3\";"],"sourceRoot":""}